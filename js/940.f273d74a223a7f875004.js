"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[940],{68940:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(4942),l=n(15861),i=n(87757),r=n.n(i),o=n(93264),c=n.n(o),d=n(68774),u=n(68340),s=n(69957),p=n(45697),v=n.n(p),m=n(66702),f=n(82041),b=n(83215),g=n(60722),h=n(96354),O=n(60485),w=n(78140),D=n(25834),j=function(e){var t=e.reviewObject;return c().createElement(d.D,null,c().createElement(O.D,{headingLevel:"h3"},c().createElement(u.x,{component:"b"},t.title)),c().createElement(D.G,{component:D.F.dl},t.rows.map((function(e){return c().createElement(c().Fragment,null,c().createElement(w.T,{component:w.v.dt},e.title),c().createElement(w.T,{component:w.v.dd},e.value))}))))};j.propTypes={reviewObject:v().object};const E=j;var y=n(62410),P=n(68920);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n,a,i,o,p,v,O,w=e.updateModal,D=e.setUpdateModal,j=e.refreshTable,T=(0,f.useDispatch)(),k=null==w?void 0:w.imageData,U=null==w||null===(t=w.deviceData)||void 0===t?void 0:t.id,_=null==w||null===(n=w.deviceData)||void 0===n?void 0:n.display_name,N=function(){var e=(0,l.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.g5)({DeviceUUID:U,CommitId:null==k||null===(t=k.Image)||void 0===t?void 0:t.CommitID});case 3:T(I({},(0,b.wN)({variant:"info",title:"Updating device",description:" ".concat(_," was added to the queue.")}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),T(I({},(0,b.wN)({variant:"danger",title:"Updating a device was unsuccessful",description:"Response: ".concat(e.t0.statusText)})));case 9:Z(),j&&j();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){D((function(e){return I(I({},e),{},{isOpen:!1})}))},A={title:"Update to",rows:[{title:"Image Name",value:null==k?void 0:k.Image.Name},{title:"Version",value:null==k?void 0:k.Image.Version},{title:"Created",value:c().createElement(y.Z,{date:null==k?void 0:k.Image.CreatedAt})},{title:"Release",value:P.aN[null==k?void 0:k.Image.Distribution]}]},R={title:"Package Details",rows:[{title:"Added",value:(null==k||null===(a=k.PackageDiff)||void 0===a||null===(i=a.Added)||void 0===i?void 0:i.length)||0},{title:"Removed",value:(null==k||null===(o=k.PackageDiff)||void 0===o||null===(p=o.Removed)||void 0===p?void 0:p.length)||0},{title:"Updated",value:(null==k||null===(v=k.PackageDiff)||void 0===v||null===(O=v.Updated)||void 0===O?void 0:O.length)||0}]},x={fields:[{component:h.Z.PLAIN_TEXT,name:"description",label:"Update this device to use the latest version of the image linked to it."},{component:h.Z.PLAIN_TEXT,name:"update-details",label:E({reviewObject:A})},{component:h.Z.PLAIN_TEXT,name:"update-details",label:E({reviewObject:R})},{component:h.Z.PLAIN_TEXT,name:"warning-text",label:c().createElement(d.D,{className:"pf-u-pt-md"},c().createElement(u.x,{style:{color:"var(--pf-global--palette--gold-500)"},component:"small"},c().createElement(s.ZP,null)," After the update is installed, the device will apply the changes."))}]};return c().createElement(g.Z,{size:"medium",title:"Update ".concat(_," to latest image"),isOpen:w.isOpen,openModal:function(){return D((function(e){return I(I({},e),{},{isOpen:!1})}))},submitLabel:"Update Device",schema:x,onSubmit:N,reloadData:j})};k.propTypes={refreshTable:v().func,updateModal:v().shape({isOpen:v().bool.isRequired,deviceData:v().object.isRequired,imageData:v().object}).isRequired,setUpdateModal:v().func.isRequired};const U=k}}]);
//# sourceMappingURL=../sourcemaps/940.c91db520d32f158757f0fbf15b586044.js.map