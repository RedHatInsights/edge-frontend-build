(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[46],{53010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(59713),a=n.n(r),i=n(87757),o=n.n(i),u=n(48926),c=n.n(u),s=n(63038),l=n.n(s),p=n(1427),d=n.n(p),f=n(10728),m=n(96354),v=n(31197),g=n(2372),b=n(45697),h=n.n(b),O=n(20873),w=n(94778),y=n(59086),D=n(80962),j=n(59245),k=n(55128),P=n(66702);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t,n=e.navigateBack,r=e.updateImageID,a=(0,p.useState)(),i=l()(a,2),u=i[0],s=i[1],b=(0,D.useDispatch)(),h=(0,p.useState)(""),x=l()(h,2),E=x[0],_=x[1],I=function(){n(),b({type:y.G})},S=(0,p.useContext)(j.g).getRegistry,N=(0,D.useSelector)((function(e){var t=e.imageDetailReducer;return{data:(null==t?void 0:t.data)||null}}),D.shallowEqual).data;return(0,p.useEffect)((function(){var e=S().register({imageDetailReducer:k.imageDetailReducer});return(0,w.loadImageDetail)(b,r),function(){return e()}}),[b]),(0,p.useEffect)((function(){c()(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(r=n.auth)||void 0===r?void 0:r.getUser();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,s((function(){return a}));case 7:case"end":return e.stop()}}),e)})))(),c()(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.Gc)(r);case 2:t=e.sent,_(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),u?d().createElement(f.Z,{onClose:I,customComponentMapper:{review:O.Z},onSubmit:function(e){var t=C(C({},e),{},{name:null==N?void 0:N.Name,version:(null==N?void 0:N.Version)+1,architecture:"x86_64",OSTreeParentCommit:E});(0,w.Es)(b,t,(function(e){I(),b((0,w.Fj)({name:e.value.Name,id:e.value.ID}))}))},defaultArch:"x86_64",initialValues:{name:null==N?void 0:N.Name,isUpdate:!0,description:null==N?void 0:N.Description,version:null==N?void 0:N.Version,"selected-packages":null==N||null===(t=N.Commit)||void 0===t?void 0:t.Packages.map((function(e){return C(C({},e),{},{name:e.Name})}))},schema:{fields:[{component:m.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Create update"},showTitles:!0,title:"Update image: ".concat(null==N?void 0:N.Name),crossroads:["target-environment","release"],fields:[v.bR,v.Ud,v.B9,v.j7]}]}}):d().createElement(g.$,null)};E.propTypes={navigateBack:h().func,updateImageID:h().number},E.defaultProps={navigateBack:function(){}};const _=E}}]);
//# sourceMappingURL=../sourcemaps/UpdateImageWizard.2883755fadf9db9da3a1.js.map