"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[344],{79358:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var a=n(87757),r=n.n(a),i=n(59713),o=n.n(i),c=n(48926),l=n.n(c),s=n(1427),d=n.n(s),u=n(87502),p=n(47173),m=n(68340),v=n(68774),f=n(78140),g=n(25834),b=n(69957),h=n(62410),E=n(68920),y=n(45697),O=n.n(y),D=n(66702),w=n(80962),T=n(83215);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t,n,a,i,o,c,s,y,O,j,I,P,U,_,C,x=e.updateModal,N=e.setUpdateModal,R=e.refreshTable,A=(0,w.useDispatch)(),S=null===(t=x.deviceData)||void 0===t||null===(n=t.system_profile)||void 0===n||null===(a=n.image_data)||void 0===a||null===(i=a.ImageInfo)||void 0===i?void 0:i.UpdatesAvailable[(null===(o=x.deviceData)||void 0===o||null===(c=o.system_profile)||void 0===c||null===(s=c.image_data)||void 0===s||null===(y=s.ImageInfo)||void 0===y?void 0:y.UpdatesAvailable.length)-1],q=function(){var e=l()(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,D.g5)({DeviceUUID:null===(t=x.deviceData)||void 0===t?void 0:t.id,CommitId:null==S?void 0:S.Image.CommitID});case 3:A(k({},(0,T.wN)({variant:"info",title:"Updating device",description:" ".concat(x.deviceData.display_name," was added to the queue.")}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),A(k({},(0,T.wN)({variant:"danger",title:"Updating a device was unsuccessful",description:"Response: ".concat(e.t0.statusText)})));case 9:Z(),R();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){N((function(e){return k(k({},e),{},{isOpen:!1})}))};return d().createElement(u.u,{variant:"medium",title:"Update ".concat(null===(O=x.deviceData)||void 0===O?void 0:O.display_name," to latest image"),description:"Update this device to use the latest version of the image linked to it.",isOpen:x.isOpen,onClose:Z,actions:[d().createElement(p.zx,{key:"confirm",variant:"primary",onClick:q},"Update Device"),d().createElement(p.zx,{key:"cancel",variant:"link",onClick:Z},"Cancel")]},d().createElement(v.D,null,d().createElement(f.T,{component:m.q.h3},d().createElement(m.x,{component:"b"},"Update to")),d().createElement(g.G,{component:g.F.dl},d().createElement(f.T,{component:f.v.dt},"Image Name"),d().createElement(f.T,{component:f.v.dd},null==S?void 0:S.Image.Name),d().createElement(f.T,{component:f.v.dt},"Version"),d().createElement(f.T,{component:f.v.dd},null==S?void 0:S.Image.Version),d().createElement(f.T,{component:f.v.dt},"Created"),d().createElement(f.T,{component:f.v.dd},d().createElement(h.Z,{date:null==S?void 0:S.Image.CreatedAt})),d().createElement(f.T,{component:f.v.dt},"Release"),d().createElement(f.T,{component:f.v.dd},E.aN[null==S?void 0:S.Image.Distribution])),d().createElement(f.T,{component:m.q.h3},d().createElement(m.x,{component:"b"},"Package Details")),d().createElement(g.G,{component:g.F.dl},d().createElement(f.T,{component:f.v.dt},"Added"),d().createElement(f.T,{component:f.v.dd},(null==S||null===(j=S.PackageDiff)||void 0===j||null===(I=j.Added)||void 0===I?void 0:I.length)||0),d().createElement(f.T,{component:f.v.dt},"Removed"),d().createElement(f.T,{component:f.v.dd},(null==S||null===(P=S.PackageDiff)||void 0===P||null===(U=P.Removed)||void 0===U?void 0:U.length)||0),d().createElement(f.T,{component:f.v.dt},"Updated"),d().createElement(f.T,{component:f.v.dd},(null==S||null===(_=S.PackageDiff)||void 0===_||null===(C=_.Updated)||void 0===C?void 0:C.length)||0))),d().createElement(v.D,{className:"pf-u-pt-md"},d().createElement(m.x,{style:{color:"var(--pf-global--palette--gold-500)"},component:"small"},d().createElement(b.ZP,null)," After the update is installed, the device will apply the changes.")))};I.propTypes={refreshTable:O().func,updateModal:O().shape({isOpen:O().bool.isRequired,deviceData:O().object.isRequired}).isRequired,setUpdateModal:O().func.isRequired};const P=I},49477:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var a=n(59713),r=n.n(a),i=n(87757),o=n.n(i),c=n(48926),l=n.n(c),s=n(63038),d=n.n(s),u=n(1427),p=n.n(u),m=n(67098),v=n(96354),f=n(1005),g=n(2372),b=n(45697),h=n.n(b),E=n(20873),y=n(94778),O=n(59086),D=n(80962),w=n(83215),T=n(66702);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.navigateBack,n=(0,u.useState)(),a=d()(n,2),r=a[0],i=a[1],c=(0,D.useDispatch)(),s=function(){t(),c({type:O.G})};return(0,u.useEffect)((function(){l()(o().mark((function e(){var t,n,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a?void 0:a.getUser();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,i((function(){return r}));case 7:case"end":return e.stop()}}),e)})))()}),[]),r?p().createElement(m.Z,{onClose:s,customComponentMapper:{review:E.Z},onSubmit:function(e){var t=e.values;(0,e.setIsSaving)((function(){return!0}));var n=k(k({},t),{},{architecture:"x86_64"});(0,y.Es)(c,n,(function(e){c(k(k({},(0,w.wN)({variant:"info",title:"Created image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,T.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,w.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,w.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))},function(e){return(0,y.Z5)(e)}]}}}})),s(),(0,y.Z5)(c)}))},defaultArch:"x86_64",initialValues:{version:0},schema:{fields:[{component:v.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Create image"},showTitles:!0,title:"Create image",crossroads:["target-environment","release","imageType"],fields:[f.oG,f.Ud,f.l9,f.B9,f.j7]}]}}):p().createElement(g.$,null)};I.propTypes={navigateBack:h().func},I.defaultProps={navigateBack:function(){}};const P=I}}]);
//# sourceMappingURL=../sourcemaps/CreateImageWizard.56c2857ff2bc3e25e39d.js.map