(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[734],{85659:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>he});var l=n(87757),r=n.n(l),a=n(48926),o=n.n(a),u=n(59713),c=n.n(u),i=n(63038),s=n.n(i),m=n(1427),d=n.n(m),p=n(69859),v=n(83958),f=n(4250),E=n(67336),g=n(96416),h=n(8969),b=n(48716),y=n(39173),O=n(86350),S=n(75959),k=n(57277),D=n(32875),T=n(49739),w=n(83826),C=n(71813),P=n(15209),R=n(47173),Z=n(50693),x=n(16475),L=n(32203),j=n(62394),I=n(70401),N=n(52643),A=n(2372),_=n(60485),z=n(68774),F=n(25834),G=n(45454),q=n(68340),H=n(48140),J=n(86050),W=n(49734),K=n(79851),V=n(34512),B=n(45697),M=n.n(B),U=n(62410),X=n(55399),$=n(76464),Q=n(5029),Y=n(17908),ee=n(11306),te=function(e){var t=e.numberOfSystems,n=(0,p.useDispatch)(),l=(0,p.useSelector)((function(e){var t=e.thresholdReducer;return(null==t?void 0:t.threshold)||{}})),r=(0,p.useSelector)((function(e){var t=e.thresholdReducer;return null==t?void 0:t.isLoading})),a=(0,p.useSelector)((function(e){var t=e.devicesInfoReducer;return null==t?void 0:t.isLoading})),o=(0,p.useSelector)((function(e){var t=e.devicesInfoReducer;return(null==t?void 0:t.devicesInfo)||{}})),u=(0,p.useSelector)((function(e){var t=e.canariesInfoReducer;return((null==t?void 0:t.canariesInfo)||[]).slice(0,4)})),c=(0,p.useSelector)((function(e){var t=e.canariesInfoReducer;return null==t?void 0:t.isLoading}));return(0,m.useEffect)((function(){n((0,f.QK)()),n((0,f.PE)())}),[]),(0,m.useEffect)((function(){n((0,f._n)(t))}),[t]),d().createElement(Z.r,{hasGutter:!0},d().createElement(x.P,{span:3},d().createElement(L.Z,null,d().createElement(I.O,null,d().createElement(_.D,{headingLevel:"h3"},"Health threshold")),d().createElement(j.e,null,!1===r?d().createElement(Q.Td,{ariaDesc:"Health threshold",ariaTitle:"Health threshold",constrainToVisibleArea:!0,legendOrientation:"vertical",legendPosition:"right",height:230,width:450,data:l.map((function(e){var t,n;return{x:null===(t=Object.keys(e))||void 0===t?void 0:t[0],y:null===(n=Object.values(e))||void 0===n?void 0:n[0]}})),legendData:l.map((function(e){var t,n;return{name:"".concat(null===(t=Object.keys(e))||void 0===t?void 0:t[0],": ").concat(null===(n=Object.values(e))||void 0===n?void 0:n[0])}})),padding:{bottom:20,left:20,right:140,top:20},labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},themeColor:Y.nz.multiOrdered}):d().createElement(N.b,null,d().createElement(A.$,null))))),d().createElement(x.P,{span:3},d().createElement(L.Z,null,d().createElement(I.O,null,d().createElement(_.D,{headingLevel:"h3"},"Devices info")),d().createElement(j.e,null,d().createElement(z.D,null,d().createElement(F.G,{component:F.F.dl},d().createElement(G.T,{component:G.v.dt},!1===a?d().createElement(q.x,{component:q.q.h1},d().createElement(X.Link,{to:"/groups"},null==o?void 0:o.requiredApproval)):d().createElement(P.O,null)),d().createElement(G.T,{component:G.v.dd},"Required approvals"),d().createElement(G.T,{component:G.v.dt},!1===a?d().createElement(q.x,{component:q.q.h1},d().createElement(X.Link,{to:"/groups"},null==o?void 0:o.orphaned)):d().createElement(P.O,null)),d().createElement(G.T,{component:G.v.dd},"Orphaned devices"),d().createElement(G.T,{component:G.v.dt},!1===a?d().createElement(q.x,{component:q.q.h1},d().createElement(X.Link,{to:"/groups"},null==o?void 0:o.delivering)):d().createElement(P.O,null)),d().createElement(G.T,{component:G.v.dd},"Devices on the way")))))),d().createElement(x.P,{span:3},d().createElement(L.Z,null,d().createElement(I.O,null,d().createElement(_.D,{headingLevel:"h3"},"Last Canaries")),d().createElement(j.e,null,d().createElement(z.D,null,d().createElement(F.G,{component:F.F.dl},!0===c?d().createElement(A.$,null):u.map((function(e,t){var n=e.group,l=e.date,r=e.status;return d().createElement(m.Fragment,{key:(null==n?void 0:n.uuid)||t},d().createElement(G.T,{component:G.v.dt},d().createElement(X.Link,{to:"/groups/".concat(null==n?void 0:n.uuid)},null==n?void 0:n.name)),d().createElement(G.T,{component:G.v.dd},d().createElement(H.a,null,d().createElement(J.Z,null,d().createElement(U.Z,{date:l})),d().createElement(J.Z,null,d().createElement($.J,{status:r})))))}))))),d().createElement(W.e,null,d().createElement(K.P,null,d().createElement(V.J,{isFilled:!0}),d().createElement(V.J,null,d().createElement(X.Link,{to:"/canaries"},"See canaries ",d().createElement(ee.ZP,null))))))))};te.propTypes={numberOfSystems:M().number},te.defaultProps={numberOfSystems:0};const ne=te;var le=n(67154),re=n.n(le),ae=n(9947),oe=n(75106),ue=n(33237),ce=[{title:"Name of group",transforms:[ue.sortable,(0,ue.cellWidth)("max")]},{title:"Number of devices",transforms:[ue.sortable]},{title:"Secure",transforms:[ue.sortable,(0,ue.cellWidth)(10)]},{title:"Last seen",transforms:[ue.sortable,(0,ue.cellWidth)(15)]},{title:"Status",transforms:[ue.sortable,(0,ue.cellWidth)(10)]}],ie=function(e){var t=e.onAddNewGroup,n=(0,m.useState)({}),l=s()(n,2),r=l[0],a=l[1],o=(0,p.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.groups}));return d().createElement(ue.Table,re()({"aria-label":"Groups table"},o.length>0&&{actions:[{title:"Adopt",onClick:console.log},{title:"Reject",onClick:console.log}]},{cells:ce,sortBy:r,onSort:function(e,t,n){return a((function(){return{index:t,direction:n}}))},rows:o.length>0?o.map((function(e){var t;return{cells:[{title:d().createElement(X.Link,{to:"/groups/".concat(null==e?void 0:e.uuid)},null==e?void 0:e.name)},null==e||null===(t=e.sensors)||void 0===t?void 0:t.length,{title:d().createElement($.U,{isSecure:null==e?void 0:e.is_secure})},{title:d().createElement(U.Z,{date:null==e?void 0:e.last_seen})},{title:d().createElement($.J,{status:null==e?void 0:e.status})}]}})):[{cells:[{title:d().createElement(N.b,null,d().createElement(ae.u,{variant:ae.I.full},d().createElement(_.D,{headingLevel:"h5",size:"lg"},"No matching groups found"),d().createElement(oe.B,null,"This filter criteria matches no groups. ",d().createElement("br",null)," Try changing your filter settings. Or adding new group."),d().createElement(R.zx,{variant:"primary",onClick:t},"Add group"))),props:{colSpan:ce.length+1}}]}]}),d().createElement(ue.TableHeader,null),d().createElement(ue.TableBody,null))};ie.propTypes={onAddNewGroup:M().func};const se=ie;var me=n(87242),de=n(86163);const pe={fields:[{component:me.Z.WIZARD,name:"wizzard",inModal:!0,title:"Create new group",fields:[{title:"General information",name:"step-1",nextStep:"choos-systems",fields:[{component:me.Z.TEXT_FIELD,name:"group-name",type:"text",label:"Group name",isRequired:!0,validate:[{type:"required"}]},{component:me.Z.SWITCH,name:"is-secure",label:"Is secure"}]},{title:"Choose systems",name:"choos-systems",fields:[{component:de.k,name:"select-system"}]}]}]};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=(0,m.lazy)((function(){return Promise.all([n.e(410),n.e(0),n.e(459)]).then(n.bind(n,75459))})),ge={name:{label:"Name",value:""},security:{label:"Security",value:[]},status:{label:"Status",value:[]}};const he=function(){var e,t,n,l=(0,m.useState)(ge),a=s()(l,2),u=a[0],c=a[1],i=(0,m.useState)(!1),Z=s()(i,2),x=Z[0],L=Z[1],j=(0,p.useDispatch)(),I=(0,p.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.isLoading})),N=(0,p.useSelector)((function(e){var t,n=e.groupsReducer;return null==n||null===(t=n.groups)||void 0===t?void 0:t.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sensors;return e+((null==n?void 0:n.length)||0)}),0)})),A=(0,p.useSelector)((function(e){var t=e.groupsReducer;return(null==t?void 0:t.meta)||{page:1}}));return(0,m.useEffect)((function(){(0,E.JH)().register({groupsReducer:g.zX,thresholdReducer:g.KT,devicesInfoReducer:g.bh,canariesInfoReducer:g.KY}),j((0,f.tb)())}),[]),d().createElement(m.Fragment,null,d().createElement(b.Z,{className:"pf-m-light"},d().createElement(y.Z,{title:"Available groups"})),d().createElement(O.Z,{className:"edge-groups"},d().createElement(T.K,{hasGutter:!0},d().createElement(w.v,{className:"edge-groups__info"},d().createElement(ne,{numberOfSystems:N})),d().createElement(w.v,{isFilled:!0},d().createElement(k.Z,!1===I?{pagination:{itemCount:null==A?void 0:A.count,page:(null==A?void 0:A.offset)/(null==A?void 0:A.limit)+1,perPage:Number(null==A?void 0:A.limit),isCompact:!0},dedicatedAction:d().createElement(R.zx,{onClick:function(){return L(!0)},isDisabled:!1!==I},"Add group"),filterConfig:{items:[{label:ge.name.label,type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return c((function(){return fe(fe({},u),{},{name:fe(fe({},(null==u?void 0:u.name)||{}),{},{value:t})})}))},value:(null==u||null===(e=u.name)||void 0===e?void 0:e.value)||"",placeholder:"Filter by name"}},{label:ge.security.label,type:"checkbox",filterValues:{key:"security-filter",onChange:function(e,t){return c(fe(fe({},u||{}),{},{security:fe(fe({},(null==u?void 0:u.security)||{}),{},{value:t})}))},items:[{value:"isSecure",label:"Secure"},{value:"nonSecure",label:"Not secure"}],value:(null==u||null===(t=u.security)||void 0===t?void 0:t.value)||[]}},{label:ge.status.label,type:"checkbox",filterValues:{key:"status-filter",onChange:function(e,t){return c(fe(fe({},u||{}),{},{status:fe(fe({},(null==u?void 0:u.status)||{}),{},{value:t})}))},items:h.Op.map((function(e){return{value:e,label:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}})),value:(null==u||null===(n=u.status)||void 0===n?void 0:n.value)||[]}}]},activeFiltersConfig:{filters:(0,h.pM)(u)?(0,h.I)(u):[],onDelete:function(e,t,n){c(n?ge:function(){return(0,h.Jr)(u,t)})}}}:{pagination:d().createElement(P.O,null)}),!1===I?d().createElement(se,{onAddNewGroup:function(){return L(!0)}}):d().createElement(S.Z,{colSize:5,rowSize:15}),d().createElement(D.Z,{isFooter:!0},!1===I&&d().createElement(C.t,{itemCount:null==A?void 0:A.count,page:(null==A?void 0:A.offset)/(null==A?void 0:A.limit)+1,perPage:Number(null==A?void 0:A.limit),dropDirection:"up"}))))),x&&d().createElement(m.Suspense,{fallback:""},d().createElement(Ee,{schema:pe,isOpened:x,onAction:function(e,t){e&&o()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.d_)({groupName:t["group-name"],isSecure:t["is-secure"],systemIDs:t.selected});case 2:j((0,f.tb)());case 3:case"end":return e.stop()}}),e)})))(),L(!1)}})))}}}]);
//# sourceMappingURL=GroupsPage.455ea3f76b4f6b335528.js.map