{"version":3,"sources":["webpack://insights-frontend-starter-app/./src/Routes/GroupsDetail/GroupsDetailInfo.js","webpack://insights-frontend-starter-app/./src/Routes/GroupsDetail/addDeviceSchema.js","webpack://insights-frontend-starter-app/./src/Routes/GroupsDetail/GroupsDetail.js"],"names":["GroupsInfo","uuid","dispatch","useDispatch","isDevicesInfoLoading","useSelector","groupDevicesInfoReducer","isLoading","devicesInfo","useEffect","loadGroupDevicesInfo","Grid","hasGutter","GridItem","span","Card","CardHeader","Title","headingLevel","CardBody","TextContent","TextList","component","TextListVariants","TextListItem","T","TextListItemVariants","Text","TextVariants","total","Skeleton","Link","to","newDevices","offlineDevices","deliveringDevices","className","Bullseye","propTypes","PropTypes","fields","INVENTORY_TABLE","name","InventoryForm","lazy","useState","isAddDeviceOpen","setIsAddDeviceOpen","inventory","useRef","useParams","groupName","groupsDetailReducer","items","devices","map","id","shallowEqual","getRegistry","register","loadGroupsDetail","Fragment","PageHeader","Breadcrumb","BreadcrumbItem","routes","isActive","Main","Stack","StackItem","GroupsDetailInfo","isFilled","Inventory","ref","length","page","tableProps","canSelectAll","isLoaded","onRefresh","options","callback","current","onRefreshData","onLoad","mergeWithEntities","INVENTORY_ACTION_TYPES","systemsList","Button","onClick","Suspense","fallback","selectedSystems","schema","isOpened","title","onAction","isSubmit","values","updateGroup","systemIDs","selected"],"mappings":"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","file":"js/GroupsDetailPage.35ac931449ac2b561136.js","sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  Grid,\n  GridItem,\n  Card,\n  CardBody,\n  CardHeader,\n  Title,\n  Bullseye,\n  TextContent,\n  Text,\n  TextVariants,\n  TextListItem,\n  Skeleton,\n  TextListItemVariants,\n  TextList,\n  TextListVariants,\n} from '@patternfly/react-core';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { loadGroupDevicesInfo } from '../../store/actions';\n\nconst GroupsInfo = ({ uuid }) => {\n  const dispatch = useDispatch();\n  const isDevicesInfoLoading = useSelector(\n    ({ groupDevicesInfoReducer }) => groupDevicesInfoReducer?.isLoading\n  );\n  const devicesInfo = useSelector(\n    ({ groupDevicesInfoReducer }) => groupDevicesInfoReducer?.devicesInfo\n  );\n  useEffect(() => {\n    dispatch(loadGroupDevicesInfo());\n  }, []);\n  return (\n    <Grid hasGutter>\n      <GridItem span={3}>\n        <Card>\n          <CardHeader>\n            <Title headingLevel=\"h3\">Health threshold</Title>\n          </CardHeader>\n          <CardBody></CardBody>\n        </Card>\n      </GridItem>\n      <GridItem span={3}>\n        <Card>\n          <CardHeader>\n            <Title headingLevel=\"h3\">Devices info</Title>\n          </CardHeader>\n          <CardBody>\n            <TextContent>\n              <TextList component={TextListVariants.dl}>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      {devicesInfo?.total}\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  <Text component={TextVariants.h3}>Total devices</Text>\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      <Link to={`/groups/${uuid}`}>\n                        {devicesInfo?.newDevices}\n                      </Link>\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  New devices added\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      <Link to={`/groups/${uuid}`}>\n                        {devicesInfo?.offlineDevices}\n                      </Link>\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  Devices offline\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      <Link to={`/groups/${uuid}`}>\n                        {devicesInfo?.deliveringDevices}\n                      </Link>\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  Devices on the way\n                </TextListItem>\n              </TextList>\n            </TextContent>\n          </CardBody>\n        </Card>\n      </GridItem>\n      <GridItem span={6}>\n        <Card className=\"edge-groups--detail__complex\">\n          <CardHeader>\n            <Grid>\n              <GridItem span={6}>\n                <Title headingLevel=\"h3\">Canary parameters</Title>\n              </GridItem>\n              <GridItem span={6}>\n                <Title headingLevel=\"h3\">Last Canaries</Title>\n              </GridItem>\n            </Grid>\n          </CardHeader>\n          <CardBody>\n            <Grid hasGutter>\n              <GridItem span={6}>\n                <Title headingLevel=\"h3\">\n                  <Bullseye>\n                    <TextContent>\n                      <Text component={TextVariants.h1}>\n                        <Bullseye>10% (89)</Bullseye>\n                      </Text>\n                      <Text component={TextVariants.h4}>\n                        <Bullseye>Of systems tested</Bullseye>\n                      </Text>\n                    </TextContent>\n                  </Bullseye>\n                </Title>\n              </GridItem>\n              <GridItem span={6}></GridItem>\n            </Grid>\n          </CardBody>\n        </Card>\n      </GridItem>\n    </Grid>\n  );\n};\n\nGroupsInfo.propTypes = {\n  uuid: PropTypes.string,\n};\n\nexport default GroupsInfo;\n","import { INVENTORY_TABLE } from '../../components/form';\n\nexport default {\n  fields: [\n    {\n      component: INVENTORY_TABLE,\n      name: 'select-system',\n    },\n  ],\n};\n","import React, {\n  Fragment,\n  useEffect,\n  useRef,\n  Suspense,\n  lazy,\n  useState,\n} from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { PageHeader, Main } from '@redhat-cloud-services/frontend-components';\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  Skeleton,\n  Stack,\n  StackItem,\n  Button,\n} from '@patternfly/react-core';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/esm/Registry';\nimport { routes } from '../../../package.json';\nimport { loadGroupsDetail } from '../../store/actions';\nimport {\n  groupsDetailReducer,\n  groupDevicesInfoReducer,\n} from '../../store/reducers';\nimport GroupsDetailInfo from './GroupsDetailInfo';\n\nimport { InventoryTable } from '@redhat-cloud-services/frontend-components/components/esm/Inventory';\nimport { systemsList } from '../../store/groupsDetail';\nconst InventoryForm = lazy(() => import('../../components/InventoryForm'));\nimport schema from './addDeviceSchema';\nimport { updateGroup } from '../../api';\n\nconst GroupsDetail = () => {\n  const [isAddDeviceOpen, setIsAddDeviceOpen] = useState(false);\n  const inventory = useRef(null);\n  const { uuid } = useParams();\n  const dispatch = useDispatch();\n  const groupName = useSelector(\n    ({ groupsDetailReducer }) => groupsDetailReducer?.name || ''\n  );\n  const isLoading = useSelector(\n    ({ groupsDetailReducer }) => groupsDetailReducer?.isLoading\n  );\n\n  const items = useSelector(\n    ({ groupsDetailReducer }) =>\n      groupsDetailReducer?.devices?.map(({ uuid, ...rest }) => ({\n        id: uuid,\n        ...rest,\n      })),\n    shallowEqual\n  );\n  useEffect(() => {\n    const registered = getRegistry().register({\n      groupsDetailReducer,\n      groupDevicesInfoReducer,\n    });\n    dispatch(loadGroupsDetail(uuid));\n    () => registered();\n  }, []);\n\n  const onRefresh = (options, callback) => {\n    if (!callback && inventory && inventory.current) {\n      inventory.current.onRefreshData(options);\n    } else if (callback) {\n      callback(options);\n    }\n  };\n  return (\n    <Fragment>\n      <PageHeader>\n        <Breadcrumb>\n          <BreadcrumbItem>\n            <Link to={routes.groups}>Groups</Link>\n          </BreadcrumbItem>\n          <BreadcrumbItem isActive>\n            {isLoading === false ? groupName : <Skeleton />}\n          </BreadcrumbItem>\n        </Breadcrumb>\n      </PageHeader>\n      <Main className=\"edge-groups--detail\">\n        <Stack hasGutter>\n          <StackItem className=\"edge-groups--detail__info\">\n            <GroupsDetailInfo uuid={uuid} />\n          </StackItem>\n          <StackItem isFilled>\n            <InventoryTable\n              ref={inventory}\n              items={items || []}\n              total={items?.length || 0}\n              page={1}\n              tableProps={{\n                canSelectAll: false,\n              }}\n              isLoaded={!isLoading}\n              onRefresh={onRefresh}\n              onLoad={({ mergeWithEntities, INVENTORY_ACTION_TYPES }) => {\n                getRegistry().register({\n                  ...mergeWithEntities(systemsList(INVENTORY_ACTION_TYPES)),\n                });\n              }}\n            >\n              <Button onClick={() => setIsAddDeviceOpen(true)}>\n                Add device\n              </Button>\n            </InventoryTable>\n          </StackItem>\n        </Stack>\n      </Main>\n      {isAddDeviceOpen && (\n        <Suspense fallback=\"\">\n          <InventoryForm\n            selectedSystems={items}\n            schema={schema}\n            isOpened={isAddDeviceOpen}\n            title=\"Add new device\"\n            onAction={(isSubmit, values) => {\n              if (isSubmit) {\n                (async () => {\n                  await updateGroup({\n                    uuid,\n                    systemIDs: values.selected,\n                  });\n                  dispatch(loadGroupsDetail(uuid));\n                })();\n              }\n              setIsAddDeviceOpen(false);\n            }}\n          />\n        </Suspense>\n      )}\n    </Fragment>\n  );\n};\n\nexport default GroupsDetail;\n"],"sourceRoot":""}