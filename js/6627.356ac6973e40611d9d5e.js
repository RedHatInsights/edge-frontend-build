(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[6627],{69790:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(92950),a=n.n(r),o=n(45697),c=n.n(o),i=n(64124),s=n(96354),u=n(60722),l=n(87462),p=n(29439),d=n(23279),f=n.n(d),m=n(36621),v=n(65673),g=n(54680),b=n(92694),y=n(41693),h=n(48880),O=n(96094),S=n(87029);const E=function(e){(0,y.Z)(e);var t=(0,h.default)().change,n=(0,r.useState)(!1),o=(0,p.Z)(n,2),c=o[0],i=o[1],s=(0,r.useState)(null),u=(0,p.Z)(s,2),d=u[0],E=u[1],D=(0,O.Z)({api:S.jA}),I=(0,p.Z)(D,2),Z=I[0],w=Z.data,M=Z.isLoading,j=I[1],P=(0,r.useState)(""),T=(0,p.Z)(P,2),k=T[0],x=T[1],N=function(e){E(e),i(!1),t("group",e)},A=(null==w?void 0:w.data)||[],L=(null==w?void 0:w.count)||0;return a().createElement(a().Fragment,null,a().createElement(m.p,null,!M&&!d&&c&&L>A.length?a().createElement(v.u,{variant:"warning",className:"pf-u-font-weight-bold"},"Over ",A.length," results found. Refine your search."):a().createElement(v.u,{className:"pf-u-font-weight-bold"},"Select a group")),a().createElement(g.P,{variant:"typeahead",typeAheadAriaLabel:"Select a group",onToggle:function(e){i(e)},onSelect:function(e,t){e&&N(t)},onClear:function(){x(""),j(),N(null)},selections:d||k,isOpen:c,onFilter:f()((function(e,t){e&&t!=k&&(x(t),j({name:encodeURIComponent(t)}))}),300),"aria-labelledby":"typeahead-select-id-1",placeholderText:"Type or click to select a group",noResultsFoundText:M?"Loading...":"No results found",isInputValuePersisted:!0,maxHeight:"180px"},M?[]:null==A?void 0:A.map((function(e){var t=e.DeviceGroup;return a().createElement(b.$,(0,l.Z)({key:t.ID,value:{toString:function(){return t.Name},groupId:t.ID}},t.description&&{description:t.description}))}))))};var D=n(32349),I=n(22058),Z=n(47173),w=n(68340),M=function(e){var t=e.closeModal;return a().createElement(a().Fragment,null,a().createElement(w.x,null,"Or"),a().createElement(Z.zx,{variant:"secondary",className:"pf-u-w-50",onClick:t},"Create Group"))};M.propTypes={closeModal:c().func};var j=function(e){var t=e.length>1?"".concat(e.length," systems"):e[0].name;return a().createElement(w.x,null,"Select a group to add ",a().createElement("strong",null,t," ")," or create a new one.")},P=function(e){return{fields:[{component:s.Z.PLAIN_TEXT,name:"description",label:j(e)},{component:"search-input",name:"group",label:"Select a group",isRequired:!0,validate:[{type:i.Z.REQUIRED}]},{component:"create-group-btn",name:"create-group-btn"}]}},T=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,r=e.setIsCreateGroupModalOpen,o=e.reloadData,c=e.deviceIds,i=(0,I.I0)();return a().createElement(u.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Add to group",submitLabel:"Add",additionalMappers:{"search-input":{component:E},"create-group-btn":{component:M,closeModal:function(){r(!0),n(!1)}}},schema:P(c),onSubmit:function(e){var t=e.group,n={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(t.toString()," successfully")},onError:{title:"Error",description:"Failed to add system to group"}};(0,D.Z)(i,(function(){return(0,S.e3)(parseInt(t.groupId),c)}),n)},reloadData:o})};const k=T;T.propTypes={isModalOpen:c().bool,setIsModalOpen:c().func,setIsCreateGroupModalOpen:c().func,reloadData:c().func,deviceIds:c().array}},83446:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var r=n(15861),a=n(4942),o=n(29439),c=n(64687),i=n.n(c),s=n(92950),u=n.n(s),l=n(89376),p=n(39173),d=n(15656),f=n(69790),m=n(45697),v=n.n(m),g=n(64124),b=n(96354),y=n(60722),h=n(87462),O=n(54680),S=n(92694),E=n(41693),D=n(48880),I=function(e){(0,E.Z)(e);var t=(0,D.default)().change,n=(0,s.useState)(!1),r=(0,o.Z)(n,2),a=r[0],c=r[1],i=(0,s.useState)(null),l=(0,o.Z)(i,2),p=l[0],d=l[1],f=function(){d(null),t("group",null),c(!1)};return u().createElement(u().Fragment,null,u().createElement(O.P,{variant:"typeahead",typeAheadAriaLabel:"Select a state",onToggle:function(e){return c(e)},onSelect:function(e,n,r){r?f():(d(n),c(!1)),t("group",n)},onClear:f,selections:p,isOpen:a,"aria-labelledby":"typeahead-select-id-1",placeholderText:"Type or click select group"},e.defaultOptions.map((function(e,t){var n=e.DeviceGroup;return u().createElement(S.$,(0,h.Z)({key:t,value:{toString:function(){return n.Name},groupId:n.ID}},n.description&&{description:n.description}))}))))};I.propTypes={defaultOptions:v().array};const Z=I;var w=n(32349),M=n(87029),j=n(22058),P=n(68340),T=n(69957),k=n(37655),x=function(e){var t=e[0].deviceGroups,n=e.length>1?"".concat(e.length," systems"):e[0].name,r=1===t.length?t[0].Name:"".concat(t.length," groups");return t.length>1?u().createElement(P.x,null,"Select the group you want to remove ",u().createElement("strong",null,n)," from."):u().createElement(P.x,null,"Do you want to remove ",u().createElement("strong",null,n," ")," from"," ",u().createElement("strong",null,r),"?")},N=function(){return u().createElement(T.ZP,{color:k.Z.value})},A=function(e){var t={fields:[{component:b.Z.PLAIN_TEXT,name:"description",label:x(e)}]};return e[0].deviceGroups.length>1&&t.fields.push({component:"search-input",name:"group",label:"Select a group",isRequired:!0,validate:[{type:g.Z.REQUIRED}]}),t},L=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,r=e.reloadData,a=e.deviceInfo,o=(0,j.I0)(),c=a[0].deviceGroups;return u().createElement(y.Z,{isOpen:t,variant:"danger",closeModal:function(){return n(!1)},title:"Remove from group",submitLabel:"Remove",titleIconVariant:N,additionalMappers:{"search-input":{component:Z,defaultOptions:c.map((function(e){return{DeviceGroup:e}}))||[]}},schema:A(a),onSubmit:function(e){var t=c.length>1,n=t?e.group.toString():c[0].Name,r=t?e.group.groupId:c[0].ID,i={onSuccess:{title:"Success",description:"".concat(a[0].name," has been removed from ").concat(n," successfully")},onError:{title:"Error",description:"Failed to remove system from group"}};(0,w.Z)(o,(function(){return(0,M._j)(r,a[0].ID)}),i)},reloadData:r})};const C=L;L.propTypes={isModalOpen:v().bool,setIsModalOpen:v().func,reloadData:v().func,deviceInfo:v().array};var R=n(41825),_=n(96094),G=n(8027),F=n(96620),V=n(52643),q=n(37619);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=u().lazy((function(){return Promise.all([n.e(6954),n.e(8615),n.e(4390),n.e(3006),n.e(6681)]).then(n.bind(n,68940))}));const X=function(){var e,t=(0,F.useHistory)(),n=(0,F.useLocation)().pathname,a=(0,_.Z)({api:G.$v,tableReload:!0}),c=(0,o.Z)(a,2),m=c[0],v=c[1],g=m.data,b=m.isLoading,y=m.hasError,h=(0,s.useState)(!1),O=(0,o.Z)(h,2),S=O[0],E=O[1],D=(0,s.useState)(!1),I=(0,o.Z)(D,2),Z=I[0],w=I[1],M=(0,s.useState)([]),j=(0,o.Z)(M,2),P=j[0],T=j[1],k=(0,s.useState)([]),x=(0,o.Z)(k,2),N=x[0],A=x[1],L=(0,s.useState)(!1),U=(0,o.Z)(L,2),X=U[0],Q=U[1],B=(0,s.useState)(!1),W=(0,o.Z)(B,2),J=W[0],K=W[1],Y=(0,s.useState)(!1),ee=(0,o.Z)(Y,2),te=ee[0],ne=ee[1],re=(0,s.useState)({isOpen:!1,deviceData:null,imageData:null}),ae=(0,o.Z)(re,2),oe=ae[0],ce=ae[1],ie=function(e,t){E(!0),t?T(e):A(e),Q(t)},se=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:K(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u().createElement(u().Fragment,null,u().createElement(l.Z,{className:"pf-m-light"},u().createElement(p.Z,{title:"Systems"})),u().createElement("section",{className:"edge-devices pf-l-page__main-section pf-c-page__main-section"},u().createElement(d.default,{isSystemsView:!0,data:null==g||null===(e=g.data)||void 0===e?void 0:e.devices,count:null==g?void 0:g.count,isLoading:b,hasError:y,setUpdateModal:ce,updateModal:oe,handleAddDevicesToGroup:ie,handleRemoveDevicesFromGroup:function(e,t){w(!0),t?T(e):A(e),Q(t)},handleUpdateSelected:function(){ce((function(e){return $($({},e),{},{deviceData:N.map((function(e){return{id:e.id,display_name:e.display_name,deviceStatus:e.deviceStatus}})),imageData:{imageName:N[0].imageName},imageSetId:N[0].imageSetId,isOpen:!0})}))},hasCheckbox:!0,selectedItems:A,selectedItemsUpdateable:function(){var e=!1;if(N.length>0){var t,n=N[0].imageSetId,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(N);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.imageSetId!==n){e=!1;break}(!e&&a.updateImageData&&"updateAvailable"===a.deviceStatus||"unresponsive"===a.deviceStatus||"error"===a.deviceStatus)&&(e=!0)}}catch(e){r.e(e)}finally{r.f()}}return e}(),kebabItems:[{isDisabled:!(N.length>0),title:"Add to group",onClick:function(){return ie(N.map((function(e){return{ID:e.deviceID,name:e.display_name}})),!1)}}],hasModalSubmitted:J,setHasModalSubmitted:K,fetchDevices:v})),oe.isOpen&&u().createElement(s.Suspense,{fallback:u().createElement(V.b,null,u().createElement(q.$,null))},u().createElement(H,{navigateBack:function(){t.push({pathname:n}),ce((function(e){return $($({},e),{},{isOpen:!1})}))},setUpdateModal:ce,updateModal:oe,refreshTable:se})),S&&u().createElement(f.default,{isModalOpen:S,setIsModalOpen:E,setIsCreateGroupModalOpen:ne,reloadData:se,deviceIds:X?P:N}),te&&u().createElement(R.default,{isModalOpen:te,setIsModalOpen:ne,reloadData:se,deviceIds:X?P:N}),Z&&u().createElement(C,{isModalOpen:Z,setIsModalOpen:w,reloadData:se,deviceInfo:X?P:N}))}},41825:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var r=n(15861),a=n(64687),o=n.n(a),c=n(92950),i=n.n(c),s=n(45697),u=n.n(s),l=n(64124),p=n(96354),d=n(60722),f=n(87029),m=n(48903),v=n(32349),g=n(22058),b=function(){var e=(0,r.Z)(o().mark((function e(){var t,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=n.length>0&&void 0!==n[0]?n[0]:"").length){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,(0,f.Tb)(t);case 5:if(!e.sent.data.isValid){e.next=8;break}throw"Group name already exists";case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y={groupName:function(){return b}},h={fields:[{component:p.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,autoFocus:!0,validate:[{type:"groupName"},{type:l.Z.REQUIRED},{type:l.Z.MAX_LENGTH,threshold:50},m.qg]}]},O=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.deviceIds,c=e.reloadData,s=(0,g.I0)(),u=function(e){var t={onSuccess:{title:"Success",description:"".concat(e.name," has been created successfully")},onError:{title:"Error",description:"Failed to create group"}};return(0,v.Z)(s,(function(){return(0,f.sS)(e)}),t)},l=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:n=e.sent,r=n.ID,c={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(t.name," successfully")},onError:{title:"Error",description:"Failed to add system to group"}},(0,v.Z)(s,(function(){return(0,f.e3)(parseInt(r),a)}),c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i().createElement(d.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Create group",submitLabel:"Create",schema:h,onSubmit:a?l:u,reloadData:c,validatorMapper:y})};const S=O;O.propTypes={isModalOpen:u().bool,setIsModalOpen:u().func,reloadData:u().func,deviceIds:u().array}},87029:(e,t,n)=>{"use strict";n.d(t,{OS:()=>s,Tb:()=>f,VL:()=>i,_j:()=>d,e3:()=>l,jA:()=>c,sS:()=>o,tW:()=>p,yq:()=>u});var r=n(66702),a=n(93454),o=function(e){return a.instance.post("".concat(r.Ds,"/device-groups/"),{Name:e.name,Type:"static"})},c=function(e){var t=e.query,n=(0,r.Vs)(t);return a.instance.get("".concat(r.Ds,"/device-groups?").concat(n))},i=function(e){var t=e.id,n=e.query,o=(0,r.Vs)(n);return a.instance.get("".concat(r.Ds,"/device-groups/").concat(t,"/view?").concat(o))},s=function(e,t){return a.instance.put("".concat(r.Ds,"/device-groups/").concat(e),{Name:t.name,Type:"static"})},u=function(e){return a.instance.delete("".concat(r.Ds,"/device-groups/").concat(e))},l=function(e,t){return a.instance.post("".concat(r.Ds,"/device-groups/").concat(e,"/devices"),{ID:e,Devices:t})},p=function(e,t){return a.instance.delete("".concat(r.Ds,"/device-groups/").concat(e,"/devices"),{data:{ID:e,Devices:t}})},d=function(e,t){return a.instance.delete("".concat(r.Ds,"/device-groups/").concat(e,"/devices/").concat(t))},f=function(e){return a.instance.get("".concat(r.Ds,"/device-groups/checkName/").concat(e))}},60722:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(15861),a=n(4942),o=n(87462),c=n(64687),i=n.n(c),s=n(92950),u=n.n(s),l=n(80236),p=n(79442),d=n(67850),f=n(41387),m=n(45697),v=n.n(m);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.isOpen,n=e.title,a=e.titleIconVariant,c=e.closeModal,s=e.submitLabel,m=e.schema,v=e.initialValues,g=e.variant,y=e.reloadData,h=e.size,O=e.onSubmit,S=e.additionalMappers,E=e.validatorMapper;return u().createElement(l.u,{variant:null!=h?h:"small",title:n,titleIconVariant:null!=a?a:null,isOpen:t,onClose:c},u().createElement(p.Z,{schema:m,validatorMapper:E,FormTemplate:function(e){return u().createElement(d.ZP,(0,o.Z)({},e,{submitLabel:s,disableSubmit:["invalid"],buttonsProps:{submit:{variant:g}}}))},initialValues:v,componentMapper:S?b(b({},S),f.ZP):f.ZP,onSubmit:function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:setTimeout((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),500),c();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onCancel:function(){return c()}}))};y.propTypes={isOpen:v().bool,title:v().string,closeModal:v().func,reloadData:v().func,submitLabel:v().string,schema:v().object,initialValues:v().object,variant:v().string,onSubmit:v().func,size:v().string,additionalMappers:v().object,titleIconVariant:v().any,validatorMapper:v().object};const h=y},96094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(4942),a=n(15861),o=n(29439),c=n(64687),i=n.n(c),s=n(83215),u=n(92950),l=n(22058);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f=function(e){var t,n=e.api,r=e.id,c=void 0===r?null:r,p=e.statusMessages,f=e.tableReload,m=void 0!==f&&f,v=(0,l.I0)(),g=(0,u.useState)([]),b=(0,o.Z)(g,2),y=b[0],h=b[1],O=(0,u.useState)(!0),S=(0,o.Z)(O,2),E=S[0],D=S[1],I=(0,u.useState)(!1),Z=(0,o.Z)(I,2),w=Z[0],M=Z[1],j=null===(t=p)||void 0===t?void 0:t.onSuccess;p||(p={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var P=function(){var e=(0,a.Z)(i().mark((function e(){var t,r,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",D(!0),e.prev=2,e.next=5,n({id:c,query:t});case 5:r=e.sent,h(r),j&&v(d({},(0,s.wN)(d({variant:"success"},p.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),M(!0),v(d({},(0,s.wN)(d({variant:"danger"},p.onError))));case 14:return e.prev=14,D(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){m||P()}),[]),[{data:y,isLoading:E,hasError:w},P]}},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},81754:()=>{},10497:()=>{},10108:()=>{},54476:()=>{},80897:()=>{},40837:()=>{},71338:()=>{},98379:()=>{},99624:()=>{},27479:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},40209:()=>{},38299:()=>{},72816:()=>{}}]);
//# sourceMappingURL=../sourcemaps/6627.7992420ebfb9f11372faea48bfbdb312.js.map