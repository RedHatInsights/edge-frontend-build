"use strict";(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[1157],{82978:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var r=n(15861),a=n(4942),c=n(29439),i=n(64687),o=n.n(i),s=n(92950),u=n.n(s),p=n(37619),l=n(52643),f=n(89376),d=n(39173),m=n(55140),g=n(68519),v=n(5513),h=n(17386),b=n(48903),y=n(93597),P=n(96094),O=n(45697),k=n.n(O);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=u().lazy((function(){return Promise.all([n.e(3920),n.e(4390),n.e(3631),n.e(236),n.e(6244),n.e(8797),n.e(1842),n.e(5344)]).then(n.bind(n,49477))})),D=u().lazy((function(){return Promise.all([n.e(3920),n.e(4390),n.e(3631),n.e(236),n.e(6244),n.e(8797),n.e(1842),n.e(46)]).then(n.bind(n,53010))})),S=function(e){var t=e.pathPrefix,n=e.urlName,a=e.historyProp,i=e.locationProp,O=e.navigateProp,k=e.docLinkProp,w=e.notificationProp,S=e.showHeaderProp,Z=(0,m.Z)(),_=a?a():g.k6?(0,g.k6)():null,I=O?O():v.useNavigate?(0,v.useNavigate)():null,N=i?i():(0,g.TH)(),L=N.pathname,x=N.search,z=void 0===S||S,T=(0,P.Z)({api:y.$c,tableReload:!0}),q=(0,c.Z)(T,2),R=q[0],H=q[1],V=R.data,$=R.isLoading,C=R.hasError,M=(0,s.useState)(!1),U=(0,c.Z)(M,2),B=U[0],W=U[1],A=(0,s.useState)({isOpen:!1,imageId:null}),F=(0,c.Z)(A,2),J=F[0],K=F[1],Q=(0,s.useState)(!1),Y=(0,c.Z)(Q,2),G=Y[0],X=Y[1],ee={pathname:L,search:(0,b.fz)("create_image=true",!0,x)},te={pathname:L,search:(0,b.fz)("update_image=true",!0,x)},ne=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:X(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e;null==Z||null===(e=Z.updateDocumentTitle)||void 0===e||e.call(Z,"Images - Manage Images | Edge management")}),[Z]),u().createElement(s.Fragment,null,z&&u().createElement(f.Z,{className:"pf-m-light"},u().createElement(d.Z,{title:"Images"})),u().createElement("section",{className:"edge-images pf-l-page__main-section pf-c-page__main-section"},u().createElement(h.default,{pathPrefix:t,urlName:n,historyProp:a,locationProp:i,navigateProp:O,data:(null==V?void 0:V.data)||[],count:null==V?void 0:V.count,isLoading:$,hasError:C,fetchImageSets:H,docLinkProp:k,openCreateWizard:function(){O?I(E(E({},ee),{},{replace:!0})):_.push(E({},ee)),W(!0)},openUpdateWizard:function(e){O?I(E(E({},te),{},{replace:!0})):_.push(E({},te)),K({isOpen:!0,imageId:e})},hasModalSubmitted:G,setHasModalSubmitted:X})),B&&u().createElement(s.Suspense,{fallback:u().createElement(l.b,null,u().createElement(p.$,null))},u().createElement(j,{navigateBack:function(){O?I(E(E({},ee),{},{replace:!0})):_.push({pathname:L,search:(0,b.fz)("create_image=true",!1,x)}),W(!1)},reload:ne,notificationProp:w,locationProp:i})),J.isOpen&&u().createElement(s.Suspense,{fallback:u().createElement(l.b,null,u().createElement(p.$,null))},u().createElement(D,{navigateBack:function(){O?I(E(E({},te),{},{replace:!0})):_.push({pathname:L,search:(0,b.fz)("update_image=true",!1,x)}),K((function(e){return E(E({},e),{},{isOpen:!1})}))},reload:ne,updateImageID:J.imageId,notificationProp:w,locationProp:i})))};S.propTypes={pathPrefix:k().string,urlName:k().string,historyProp:k().func,locationProp:k().func,navigateProp:k().func,notificationProp:k().object,showHeaderProp:k().bool,docLinkProp:k().string};const Z=S},93597:(e,t,n)=>{n.d(t,{$c:()=>y,Bi:()=>p,Dk:()=>v,EC:()=>g,EV:()=>h,H1:()=>u,Kz:()=>b,L0:()=>d,QY:()=>m,Sj:()=>P,dj:()=>f,dt:()=>l});var r=n(15861),a=n(29439),c=n(64687),i=n.n(c),o=n(66702),s=n(93454),u=function(e){var t={name:e};return s.instance.post("".concat(o.Ds,"/images/checkImageName"),t)},p=function(e){var t=e.Id,n=e.name,r=e.version,c=e.description,i=e.release,u=e.architecture,p=e.username,l=e.credentials,f=e.imageType,d=e["selected-packages"],m=e["third-party-repositories"],g=e["custom-packages"],v=f||[],h=(0,a.Z)(v,1)[0];f.length>1&&(h="rhel-edge-installer");var b={name:n,version:r,description:c,distribution:i,imageType:h,packages:null==d?void 0:d.map((function(e){return{name:e.name}})),outputTypes:f,commit:{arch:u},installer:{username:p,sshkey:l},thirdPartyRepositories:null==m?void 0:m.map((function(e){return{ID:e.id,Name:e.name,URL:e.URL,uuid:e.uuid}})),customPackages:null==g?void 0:g.map((function(e){return{Name:e.name}}))},y="".concat(o.Ds,"/images");return r>1&&(y+="/".concat(t,"/update")),s.instance.post(y,b)},l=function(e){var t=e.id,n=e.q,r=void 0===n?{limit:10,offset:0,sort_by:"-created_at"}:n,a=(0,o.Vs)(r);return s.instance.get("".concat(o.Ds,"/image-sets/").concat(t,"?").concat(a))},f=function(e){var t=e.imageSetID,n=e.query,r=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,a=(0,o.Vs)(r);return s.instance.get("".concat(o.Ds,"/image-sets/view/").concat(t,"/versions?").concat(a))},d=function(e){var t=e.id;return s.instance.get("".concat(o.Ds,"/image-sets/view/").concat(t))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0,sort_by:"-created_at"},t=(0,o.Vs)(e);return s.instance.get("".concat(o.Ds,"/image-sets?").concat(t))},g=function(e){return s.instance.get("".concat(o.Ds,"/images/").concat(e,"/status"))},v=function(e){return s.instance.get("".concat(o.Ds,"/updates/device/").concat(e,"/image"))},h=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams({distribution:t,architecture:n,search:r}),e.abrupt("return",(0,s.instance)("".concat(o.DO,"/packages?").concat(a.toString())));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(e){var t=e.id;return s.instance.get("".concat(o.Ds,"/images/").concat(t,"/details"))},y=function(e){var t=e.query;""===t&&(t={limit:20,offset:0,sort_by:"-updated_at"});var n=(0,o.Vs)(t);return s.instance.get("".concat(o.Ds,"/image-sets/view?").concat(n))},P=function(e,t){return s.instance.post("".concat(o.$J,"/rpms/names"),{urls:e,search:t})}},96094:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(4942),a=n(15861),c=n(29439),i=n(64687),o=n.n(i),s=n(83215),u=n(92950),p=n(77760);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=function(e){var t,n=e.api,r=e.id,i=void 0===r?null:r,l=e.statusMessages,d=e.tableReload,m=void 0!==d&&d,g=(0,p.useDispatch)(),v=(0,u.useState)([]),h=(0,c.Z)(v,2),b=h[0],y=h[1],P=(0,u.useState)(!0),O=(0,c.Z)(P,2),k=O[0],w=O[1],E=(0,u.useState)(!1),j=(0,c.Z)(E,2),D=j[0],S=j[1],Z=null===(t=l)||void 0===t?void 0:t.onSuccess;l||(l={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var _=function(){var e=(0,a.Z)(o().mark((function e(){var t,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",w(!0),e.prev=2,e.next=5,n({id:i,query:t});case 5:r=e.sent,y(r),Z&&g(f({},(0,s.wN)(f({variant:"success"},l.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),S(!0),g(f({},(0,s.wN)(f({variant:"danger"},l.onError))));case 14:return e.prev=14,w(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){m||_()}),[]),[{data:b,isLoading:k,hasError:D},_]}}}]);