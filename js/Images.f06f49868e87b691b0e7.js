(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[1157],{69174:(e,t,n)=>{"use strict";n.d(t,{_:()=>m});var r=n(70655),a=n(92950),o=n(83063),i=n(72002),l=n(47173),c=n(75824),s=n(38296),u=n(24307),d=n(6551);const p={blue:o.Z.modifiers.blue,cyan:o.Z.modifiers.cyan,green:o.Z.modifiers.green,orange:o.Z.modifiers.orange,purple:o.Z.modifiers.purple,red:o.Z.modifiers.red,gold:o.Z.modifiers.gold,grey:""},m=e=>{var{children:t,className:n="",color:m="grey",variant:f="filled",isCompact:g=!1,isEditable:b=!1,editableProps:v,isTruncated:h=!1,tooltipPosition:E,icon:y,onClose:I,onEditCancel:C,onEditComplete:w,closeBtn:O,closeBtnAriaLabel:S,closeBtnProps:x,href:_,isOverflowLabel:D,render:Z}=e,N=(0,r.__rest)(e,["children","className","color","variant","isCompact","isEditable","editableProps","isTruncated","tooltipPosition","icon","onClose","onEditCancel","onEditComplete","closeBtn","closeBtnAriaLabel","closeBtnProps","href","isOverflowLabel","render"]);const[k,P]=(0,a.useState)(!1),[L,T]=(0,a.useState)(t),R=a.useRef(),j=a.useRef();a.useEffect((()=>(document.addEventListener("mousedown",U),document.addEventListener("keydown",B),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("keydown",B)})));const U=e=>{k&&j&&j.current&&!j.current.contains(e.target)&&(j.current.value&&w&&w(j.current.value),P(!1))},B=e=>{var n,r;const a=e.key;if((k||R&&R.current&&R.current.contains(e.target))&&(!k||j&&j.current&&j.current.contains(e.target))&&(!k||"Enter"!==a&&"Tab"!==a||(e.preventDefault(),e.stopImmediatePropagation(),j.current.value&&w&&w(j.current.value),P(!1),null===(n=null==R?void 0:R.current)||void 0===n||n.focus()),k&&"Escape"===a&&(e.preventDefault(),e.stopImmediatePropagation(),j.current.value&&(j.current.value=t,C&&C(t)),P(!1),null===(r=null==R?void 0:R.current)||void 0===r||r.focus()),!k&&"Enter"===a)){e.preventDefault(),e.stopImmediatePropagation(),P(!0);const t=e.target,n=document.createRange(),r=window.getSelection();n.selectNodeContents(t),n.collapse(!1),r.removeAllRanges(),r.addRange(n)}},z=D?"button":"span",A=O||a.createElement(l.zx,Object.assign({type:"button",variant:"plain",onClick:I,"aria-label":S||`Close ${t}`},x),a.createElement(u.ZP,null)),M=a.createRef(),W=a.useRef(),[G,Q]=a.useState(!1);(0,d.L)((()=>{const e=b?R:M;k||Q(e.current&&e.current.offsetWidth<e.current.scrollWidth)}),[k]);const F=a.createElement(a.Fragment,null,y&&a.createElement("span",{className:(0,s.i)(o.Z.labelIcon)},y),h&&a.createElement("span",{ref:M,className:(0,s.i)(o.Z.labelText)},t),!h&&t);a.useEffect((()=>{k&&j&&j.current&&j.current.focus()}),[j,k]);let H=a.createElement("span",{className:(0,s.i)(o.Z.labelContent)},F);return _?H=a.createElement("a",{className:(0,s.i)(o.Z.labelContent),href:_},F):b&&(H=a.createElement("button",Object.assign({ref:R,className:(0,s.i)(o.Z.labelContent),onClick:e=>{P(!0),e.stopPropagation()}},v),F)),Z?H=a.createElement(a.Fragment,null,G&&a.createElement(c.u,{reference:W,content:t,position:E}),Z({className:o.Z.labelContent,content:F,componentRef:W})):G&&(H=a.createElement(c.u,{content:t,position:E},H)),a.createElement(z,Object.assign({},N,{className:(0,s.i)(o.Z.label,p[m],"outline"===f&&o.Z.modifiers.outline,D&&o.Z.modifiers.overflow,g&&o.Z.modifiers.compact,b&&i.Z.modifiers.editable,k&&o.Z.modifiers.editableActive,n)}),!k&&H,!k&&I&&A,k&&a.createElement("input",Object.assign({className:(0,s.i)(o.Z.labelContent),type:"text",id:"editable-input",ref:j,value:L,onChange:()=>{T(j.current.value)}},v)))};m.displayName="Label"},79851:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var r=n(70655),a=n(92950),o=n(89059),i=n(38296);const l=e=>{var{hasGutter:t=!1,isWrappable:n=!1,className:l="",children:c=null,component:s="div"}=e,u=(0,r.__rest)(e,["hasGutter","isWrappable","className","children","component"]);const d=s;return a.createElement(d,Object.assign({},u,{className:(0,i.i)(o.Z.split,t&&o.Z.modifiers.gutter,n&&o.Z.modifiers.wrap,l)}),c)};l.displayName="Split"},34512:(e,t,n)=>{"use strict";n.d(t,{J:()=>l});var r=n(70655),a=n(92950),o=n(89059),i=n(38296);const l=e=>{var{isFilled:t=!1,className:n="",children:l=null}=e,c=(0,r.__rest)(e,["isFilled","className","children"]);return a.createElement("div",Object.assign({},c,{className:(0,i.i)(o.Z.splitItem,t&&o.Z.modifiers.fill,n)}),l)};l.displayName="SplitItem"},83063:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(82014);const r={button:"pf-c-button",label:"pf-c-label",labelContent:"pf-c-label__content",labelIcon:"pf-c-label__icon",labelText:"pf-c-label__text",modifiers:{compact:"pf-m-compact",blue:"pf-m-blue",green:"pf-m-green",orange:"pf-m-orange",red:"pf-m-red",purple:"pf-m-purple",cyan:"pf-m-cyan",gold:"pf-m-gold",outline:"pf-m-outline",overflow:"pf-m-overflow",add:"pf-m-add",editable:"pf-m-editable",editableActive:"pf-m-editable-active"},themeDark:"pf-theme-dark"}},72002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(21064);const r={button:"pf-c-button",labelGroup:"pf-c-label-group",labelGroupClose:"pf-c-label-group__close",labelGroupLabel:"pf-c-label-group__label",labelGroupList:"pf-c-label-group__list",labelGroupListItem:"pf-c-label-group__list-item",labelGroupMain:"pf-c-label-group__main",labelGroupTextarea:"pf-c-label-group__textarea",modifiers:{category:"pf-m-category",vertical:"pf-m-vertical",editable:"pf-m-editable",textarea:"pf-m-textarea"}}},89059:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(16166);const r={modifiers:{wrap:"pf-m-wrap",fill:"pf-m-fill",gutter:"pf-m-gutter"},split:"pf-l-split",splitItem:"pf-l-split__item"}},62410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(85893),a=n(92950),o=n.n(a),i=n(48335),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},c=36e5,s=24*c,u=30*s,d=365*s,p=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},m=[{rightBound:1/0,description:function(e){return p(Math.round(e/d),"year")}},{rightBound:d,description:function(e){return p(Math.round(e/u),"month")}},{rightBound:u,description:function(e){return p(Math.round(e/s),"day")}},{rightBound:s,description:function(e){return p(Math.round(e/c),"hour")}},{rightBound:c,description:function(e){return p(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},g=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return m.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},b=function(e,t,n){return{exact:function(t){return g(e)(t)},onlyDate:function(t){return g(e)(t)},relative:function(a){return function(e,t,n,a){return void 0===a&&(a=""),(0,r.jsx)(i.Tooltip,l({},n,{content:(0,r.jsxs)("div",{children:[a,e]})},{children:t}))}(g("exact")(a),(0,r.jsx)("span",{children:g(e)(a)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const v=function(e){var t=e.date,n=e.type,a=void 0===n?"relative":n,i=e.extraTitle,l=e.tooltipProps,c=t instanceof Date?t:new Date(t),s=null==t||"Invalid Date"===c.toString()?"invalid":a;return(0,r.jsx)(o().Fragment,{children:b(s,l,i)(c)})}},39173:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(85893),a=n(94184),o=n.n(a),i=n(48335),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)};const c=function(e){var t=e.className,n=e.title,a=o()(t);return(0,r.jsx)(i.Title,l({headingLevel:"h1",size:"2xl",className:a,"widget-type":"InsightsPageHeaderTitle"},{children:n}))}},14511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>U});var r=n(4942),a=n(15861),o=n(29439),i=n(64687),l=n.n(i),c=n(92950),s=n.n(c),u=n(89376),d=n(39173),p=n(37619),m=n(52643),f=n(96620),g=n(73448),b=n(45697),v=n.n(b),h=n(9192),E=n(75824),y=n(62410),I=n(34766),C=n(3035),w=n(48903),O=n(35681),S=function(e){var t=e.index;return s().createElement("div",null,s().createElement(E.u,{content:s().createElement("div",null,"More options"),reference:function(){return document.getElementById("pf-dropdown-toggle-id-".concat(t))}}))};S.propTypes={index:v().number};var x=[{label:"Name",type:"text"},{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],_=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,I.cellWidth)(35)]},{title:"Current version",type:"version",sort:!1,columnTransforms:[(0,I.cellWidth)(15)]},{title:"Last updated",type:"updated_at",sort:!0,columnTransforms:[(0,I.cellWidth)(25)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,I.cellWidth)(30)]}],D=function(e){return e.map((function(e,t){return{rowInfo:{id:null==e?void 0:e.ID,imageStatus:null==e?void 0:e.Status,isoURL:(null==e?void 0:e.ImageBuildIsoURL)||null,latestImageID:null==e?void 0:e.ImageID},cells:[{title:s().createElement(f.Link,{to:"".concat(h._.manageImages,"/").concat(null==e?void 0:e.ID)},null==e?void 0:e.Name)},null==e?void 0:e.Version,{title:null!=e&&e.UpdatedAt?s().createElement(y.Z,{date:null==e?void 0:e.UpdatedAt}):"Unknown"},{title:s().createElement(s().Fragment,null,s().createElement(S,{index:t}),s().createElement(O.Z,{type:null==e?void 0:e.Status.toLowerCase()}))}]}}))},Z=function(e){var t=e.data,n=e.count,r=e.isLoading,a=e.hasError,o=e.fetchImageSets,i=e.openCreateWizard,l=e.openUpdateWizard,c=e.hasModalSubmitted,u=e.setHasModalSubmitted,d=(0,f.useLocation)().search;return s().createElement(s().Fragment,null,(0,w.G0)(r,n,d)?s().createElement(C.Z,{"data-testid":"general-table-empty-state-no-data",icon:"plus",title:"No images found",body:"",primaryAction:{click:i,text:"Create new image"},secondaryActions:[]}):s().createElement(g.Z,{apiFilterSort:!0,isUseApi:!0,filters:x,loadTableData:o,tableData:{count:n,data:t,isLoading:r,hasError:a},columnNames:_,rows:t?D(t):[],actionResolver:function(e){var t,n,r,a,o,i=[];return null!==(t=e.rowInfo)&&void 0!==t&&t.isoURL&&i.push({title:"Download",onClick:function(e,t,n){var r;window.open(null===(r=n.rowInfo)||void 0===r?void 0:r.isoURL)}}),"SUCCESS"!==(null===(n=e.rowInfo)||void 0===n?void 0:n.imageStatus)&&"ERROR"!==(null===(r=e.rowInfo)||void 0===r?void 0:r.imageStatus)||i.push({title:"Update Image",onClick:function(e,t,n){var r;l(null===(r=n.rowInfo)||void 0===r?void 0:r.latestImageID)}}),"BUILDING"===(null===(a=e.rowInfo)||void 0===a?void 0:a.imageStatus)&&null!==(o=e.rowInfo)&&void 0!==o&&o.id&&i.push({title:""}),i},areActionsDisabled:function(e){var t;return"BUILDING"===(null===(t=e.rowInfo)||void 0===t?void 0:t.imageStatus)},defaultSort:{index:2,direction:"desc"},toolbarButtons:[{title:"Create new image",click:function(){return i()}}],hasModalSubmitted:c,setHasModalSubmitted:u}))};Z.propTypes={data:v().array,count:v().number,isLoading:v().bool,hasError:v().bool,fetchImageSets:v().func,clearFilters:v().func,openCreateWizard:v().func,openUpdateWizard:v().func,filters:v().array,pagination:v().shape({page:v().number,perPage:v().number}),hasModalSubmitted:v().bool,setHasModalSubmitted:v().func};const N=Z;var k=n(93597),P=n(96094);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=s().lazy((function(){return Promise.all([n.e(4390),n.e(3920),n.e(3006),n.e(9681),n.e(4675),n.e(8250),n.e(5344)]).then(n.bind(n,49477))})),j=s().lazy((function(){return Promise.all([n.e(4390),n.e(3920),n.e(3006),n.e(9681),n.e(4675),n.e(8250),n.e(46)]).then(n.bind(n,53010))}));const U=function(){var e=(0,f.useHistory)(),t=(0,f.useLocation)(),n=t.pathname,r=t.search,i=(0,P.Z)({api:k.$c,tableReload:!0}),g=(0,o.Z)(i,2),b=g[0],v=g[1],h=b.data,E=b.isLoading,y=b.hasError,I=(0,c.useState)(!1),C=(0,o.Z)(I,2),O=C[0],S=C[1],x=(0,c.useState)({isOpen:!1,imageId:null}),_=(0,o.Z)(x,2),D=_[0],Z=_[1],L=(0,c.useState)(!1),U=(0,o.Z)(L,2),B=U[0],z=U[1],A=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:z(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s().createElement(c.Fragment,null,s().createElement(u.Z,{className:"pf-m-light"},s().createElement(d.Z,{title:"Images"})),s().createElement("section",{className:"edge-images pf-l-page__main-section pf-c-page__main-section"},s().createElement(N,{data:(null==h?void 0:h.data)||[],count:null==h?void 0:h.count,isLoading:E,hasError:y,fetchImageSets:v,openCreateWizard:function(){e.push({pathname:n,search:(0,w.fz)("create_image=true",!0,r)}),S(!0)},openUpdateWizard:function(t){e.push({pathname:n,search:(0,w.fz)("update_image=true",!0,r)}),Z({isOpen:!0,imageId:t})},hasModalSubmitted:B,setHasModalSubmitted:z})),O&&s().createElement(c.Suspense,{fallback:s().createElement(m.b,null,s().createElement(p.$,null))},s().createElement(R,{navigateBack:function(){e.push({pathname:n,search:(0,w.fz)("create_image=true",!1,r)}),S(!1)},reload:A})),D.isOpen&&s().createElement(c.Suspense,{fallback:s().createElement(m.b,null,s().createElement(p.$,null))},s().createElement(j,{navigateBack:function(){e.push({pathname:n,search:(0,w.fz)("update_image=true",!1,r)}),Z((function(e){return T(T({},e),{},{isOpen:!1})}))},reload:A,updateImageID:D.imageId})))}},93597:(e,t,n)=>{"use strict";n.d(t,{$c:()=>E,Bi:()=>u,Dk:()=>b,EC:()=>g,EV:()=>v,H1:()=>s,Kz:()=>h,L0:()=>m,QY:()=>f,Sj:()=>y,dj:()=>p,dt:()=>d});var r=n(15861),a=n(29439),o=n(64687),i=n.n(o),l=n(66702),c=n(93454),s=function(e){var t={name:e};return c.instance.post("".concat(l.Ds,"/images/checkImageName"),t)},u=function(e){var t=e.Id,n=e.name,r=e.version,o=e.description,i=e.release,s=e.architecture,u=e.username,d=e.credentials,p=e.imageType,m=e["selected-packages"],f=e["third-party-repositories"],g=e["custom-packages"],b=p||[],v=(0,a.Z)(b,1)[0];p.length>1&&(v="rhel-edge-installer");var h={name:n,version:r,description:o,distribution:i,imageType:v,packages:null==m?void 0:m.map((function(e){return{name:e.name}})),outputTypes:p,commit:{arch:s},installer:{username:u,sshkey:d},thirdPartyRepositories:null==f?void 0:f.map((function(e){return{ID:e.id,Name:e.name,URL:e.URL,uuid:e.uuid}})),customPackages:null==g?void 0:g.map((function(e){return{Name:e.name}}))},E="".concat(l.Ds,"/images");return r>1&&(E+="/".concat(t,"/update")),c.instance.post(E,h)},d=function(e){var t=e.id,n=e.q,r=void 0===n?{limit:10,offset:0,sort_by:"-created_at"}:n,a=(0,l.Vs)(r);return c.instance.get("".concat(l.Ds,"/image-sets/").concat(t,"?").concat(a))},p=function(e){var t=e.imageSetID,n=e.query,r=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,a=(0,l.Vs)(r);return c.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t,"/versions?").concat(a))},m=function(e){var t=e.id;return c.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0,sort_by:"-created_at"},t=(0,l.Vs)(e);return c.instance.get("".concat(l.Ds,"/image-sets?").concat(t))},g=function(e){return c.instance.get("".concat(l.Ds,"/images/").concat(e,"/status"))},b=function(e){return c.instance.get("".concat(l.Ds,"/updates/device/").concat(e,"/image"))},v=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams({distribution:t,architecture:n,search:r}),e.abrupt("return",(0,c.instance)("".concat(l.DO,"/packages?").concat(a.toString())));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(e){var t=e.id;return c.instance.get("".concat(l.Ds,"/images/").concat(t,"/details"))},E=function(e){var t=e.query;""===t&&(t={limit:20,offset:0,sort_by:"-updated_at"});var n=(0,l.Vs)(t);return c.instance.get("".concat(l.Ds,"/image-sets/view?").concat(n))},y=function(e,t){return c.instance.post("".concat(l.$J,"/rpms/names"),{urls:e,search:t})}},35681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,u:()=>m});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),l=n(69174),c=n(75824),s=n(79851),u=n(34512),d=n(98309),p={booting:{text:"Booting",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},building:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},created:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},upToDate:{text:"Up to date",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},success:{text:"Ready",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},passed:{text:"Passed",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},updateAvailable:{text:"Update available",Icon:d.iQ.exclamationTriangle,color:d.OE.yellow,labelColor:"orange"},updating:{text:"Updating",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},error:{text:"Error",Icon:d.iQ.timesCircle,color:d.OE.red,labelColor:"red"},default:{text:"Unknown",Icon:d.iQ.unknown},interrupted:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},unresponsive:{text:"Unresponsive",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"},errorWithExclamationCircle:{text:"Error",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"}},m=function(e,t,n){return"ERROR"===n?"error":"UNRESPONSIVE"===n?"unresponsive":"UPDATING"===e?"updating":t?"updateAvailable":"upToDate"},f=function(e){var t=e.id,n=e.type,r=e.isLabel,o=void 0!==r&&r,i=e.toolTipContent,d=void 0===i?"":i,m=e.className,f=void 0===m?"":m,g=e.isLink,b=Object.prototype.hasOwnProperty.call(p,n)?p[n]:p.default,v=b.text,h=b.Icon,E=b.color,y=b.labelColor;return a().createElement(a().Fragment,null,o?a().createElement(l._,{id:t,color:y,icon:a().createElement(h,null),className:f},v):a().createElement(s.P,{id:t,style:{color:E},className:f},a().createElement(u.J,{className:"pf-u-mr-sm"},d?a().createElement(c.u,{content:"blargh"},a().createElement(h,null)):a().createElement(h,null)),a().createElement(u.J,null,a().createElement("p",{style:g?{textDecoration:" grey dotted underline",cursor:"pointer"}:{}},v))))};const g=f;f.propTypes={id:i().string,type:i().string,isLabel:i().bool,toolTipContent:i().string,className:i().string,isLink:i().bool},f.defaultProps={id:"status"}},21064:()=>{},82014:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Images.3db161525849f6f22212527ecc1ba0c0.js.map