/*! For license information please see 9519.0a802eb15f2d430b6273.js.LICENSE.txt */
(self.webpackChunkedge=self.webpackChunkedge||[]).push([[9519],{63767:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var a=n(74848),r=n(93345),i=n.n(r),o=n(59304),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)},c=36e5,s=24*c,u=30*s,d=365*s,p=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},m=[{rightBound:1/0,description:function(e){return p(Math.round(e/d),"year")}},{rightBound:d,description:function(e){return p(Math.round(e/u),"month")}},{rightBound:u,description:function(e){return p(Math.round(e/s),"day")}},{rightBound:s,description:function(e){return p(Math.round(e/c),"hour")}},{rightBound:c,description:function(e){return p(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},g=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return m.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},h=function(e,t,n){return{exact:function(t){return g(e)(t)},onlyDate:function(t){return g(e)(t)},relative:function(r){return function(e,t,n,r){return void 0===r&&(r=""),(0,a.jsx)(o.Tooltip,l({},n,{content:(0,a.jsxs)("div",{children:[r,e]}),children:t}))}(g("exact")(r),(0,a.jsx)("span",{children:g(e)(r)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const y=function(e){var t=e.date,n=e.type,r=void 0===n?"relative":n,o=e.extraTitle,l=e.tooltipProps,c=t instanceof Date?t:new Date(t),s=null==t||"Invalid Date"===c.toString()?"invalid":r;return(0,a.jsx)(i().Fragment,{children:h(s,l,o)(c)})}},16594:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(74848),r=n(46942),i=n.n(r),o=n(93345);const l=n.n(o)().createContext("light");var c=n(69),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};const u=function(e){var t=e.className,n=e.children,r=e.ouiaId,o=e.ouiaSafe,u=void 0===o||o,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["className","children","ouiaId","ouiaSafe"]),p=i()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),m="RHI/Header",f=(0,c.useOUIAId)(m,r,u);return(0,a.jsx)(l.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var o=i()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,a.jsx)("section",s({"data-ouia-component-type":m,"data-ouia-component-id":f,"data-ouia-safe":u},d,{className:"".concat(p," ").concat(o),"widget-type":"InsightsPageHeader",children:n}))}})}},16401:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(74848),r=n(46942),i=n.n(r),o=n(63068),l=n(69),c=n(86228),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};const u=function(e){var t=e.className,n=e.title,r=e.actionsContent,u=e.ouiaId,d=e.ouiaSafe,p=void 0===d||d,m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),f=i()(t),g="RHI/Header",h=(0,l.useOUIAId)(g,u,p);return(0,a.jsxs)(c.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,a.jsx)(c.FlexItem,{className:"pf-v5-u-flex-grow-1",children:(0,a.jsx)(o.Title,s({headingLevel:"h1",size:"2xl",className:f,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":g,"data-ouia-component-id":h,"data-ouia-safe":p},m,{children:n}))}),r?(0,a.jsx)(c.FlexItem,{children:r}):null]})}},99519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>J});var a=n(93345),r=n.n(a),i=n(50861),o=n(5556),l=n.n(o),c=n(96937),s=n(90555),u=n(25499),d=n(10183),p=n(76285),m=n(46537),f=n(55729),g=n(76459),h=n(60732),y=n(88993),v=n(36870),E=n(19357),b=n(63767),I=n(16594),x=n(16401),P=n(78259),S=n(36271),T=n(15402),w=n(76792),D=n(75078),j=n(97192),k=n(39711),O=n(61574),A=n(71519),C=n(55270),B=n(55833);const N=[{label:"Version",type:"text"},{label:"Release",type:"text"},{label:"Additional packages",type:"text"},{label:"All packages",type:"text"},{label:"Systems running",type:"text"},{label:"Created",type:"text"}],U=[{title:"Version",cellTransforms:[((e="simple-node")=>(t,{rowIndex:n}={})=>{const r="object"==typeof t?t.title:t;return{component:"th",children:a.createElement("div",{id:`${e}${n}`},r)}})("selectable-radio")]},{title:"Release"},{title:"Additional packages"},{title:"All packages"},{title:"Systems running"},{title:"Created"}],L=({image:e})=>{const t=[{version:e.cells[0],release:e.cells[1],additionalPackages:e.cells[2],allPackages:e.cells[3],systemsRunning:e.cells[4],created:e.cells[5]}],n="Version",a="Release",i="Additional packages",o="All packages",l="Systems running",c="Created";return r().createElement(r().Fragment,null,r().createElement(f.TextContent,null,r().createElement(g.Title,{headingLevel:"h2"},r().createElement(f.Text,null,"Current version"))),r().createElement(S.X,{"aria-label":"Current version table",variant:"compact",borders:!1},r().createElement(T.d,null,r().createElement(w.Tr,{style:{borderBottomStyle:"hidden"}},r().createElement(D.Th,{style:{width:"3%"}}),r().createElement(D.Th,null,n),r().createElement(D.Th,null,a),r().createElement(D.Th,null,i),r().createElement(D.Th,null,o),r().createElement(D.Th,null,l),r().createElement(D.Th,null,c))),r().createElement(j.N,null,t.map(((e,t)=>r().createElement(w.Tr,{key:t},r().createElement(k.Td,null),r().createElement(k.Td,{dataLabel:n},e.version),r().createElement(k.Td,{dataLabel:a},e.release),r().createElement(k.Td,{dataLabel:i},e.additionalPackages),r().createElement(k.Td,{dataLabel:o},e.allPackages),r().createElement(k.Td,{dataLabel:l},e.systemsRunning),r().createElement(k.Td,{dataLabel:c},e.created)))))))};L.propTypes={image:l().object};const $=({data:e,fetchDevices:t,isLoading:n,hasError:o,historyProp:l,navigateProp:c,locationProp:m,currentId:I,notificationProp:x})=>{const P=e?.Device,[S,T]=(0,a.useState)(null),[w,D]=(0,a.useState)(null),[j,k]=(0,a.useState)(!1),B=(0,v.wA)(),$=l?l():O.W6?(0,O.W6)():null,M=c?c():A.useNavigate?(0,A.useNavigate)():null,{pathname:J,search:R}=m?m():(0,O.zy)(),F=()=>{let e=E.J.inventory;const t=(0,O.B6)(J,{path:E.J.inventoryDetailUpdate,exact:!0,strict:!1}),n=(0,O.B6)(J,{path:E.J.insightsInventoryDetailUpdate,exact:!0,strict:!1}),a=(0,O.B6)(`/inventory/${I}`,{path:E.J.inventoryDetail,exact:!0,strict:!1});if(J===t?.url&&(e=R.includes("from_details=true")?a.url:E.J.inventory),J===n?.url&&(e=R.includes("from_details=true")?`/insights${a.url}`:E.J.insightsInventory),J===E.J.fleetManagementSystemDetailUpdate&&(e=R.includes("from_details=true")?E.J.fleetManagementSystemDetail:E.J.fleetManagementDetail),void 0!==c)M({pathname:e});else{const t=e.split("/").length,n=J.split("/").slice(0,t).join("/");$.push({pathname:n})}},_=e=>{const t=e?.Version,n=y.WT[e?.Distribution],a=e?.Packages?.length||0,i=e?.TotalPackages,o=e?.SystemsRunning,l=r().createElement("span",null,r().createElement(b.A,{type:"relative",date:e?.CreatedAt})),c=e?.CommitID,s=P?.UUID,u=P?.DeviceName;return{cells:[t,n,a,i,o,l],commitID:c,deviceUUID:s,deviceName:u,selected:S===t}},W=_(e?.ImageInfo?.Image),z=e?.ImageInfo?.UpdatesAvailable?.map((e=>_(e?.Image)));return r().createElement(p.Page,null,r().createElement(p.PageSection,{isWidthLimited:!0},r().createElement(u.Card,null,r().createElement(u.CardBody,null,r().createElement(L,{image:W}),r().createElement(f.TextContent,null,r().createElement(g.Title,{headingLevel:"h2"},r().createElement(f.Text,{className:"pf-u-mt-md"},"Select version to update to"))),r().createElement(r().Fragment,null,r().createElement(i.A,{historyProp:l,navigateProp:c,locationProp:m,className:"pf-u-mt-sm",apiFilterSort:!0,isUseApi:!0,loadTableData:t,filters:N,tableData:{count:e?.ImageInfo?.Count,isLoading:n,hasError:o},columnNames:U,rows:z,defaultSort:{index:0,direction:"desc"},hasRadio:e?.ImageInfo?.Count>0,setRadioSelection:e=>{T(e.cells[0]),D(e)},isFooterFixed:!0}),r().createElement("div",{style:{background:"white",left:"200px",position:"fixed",height:"90px",width:"100%",bottom:"0px",paddingLeft:"80px",paddingBottom:"0px"}},r().createElement(d.Divider,{style:{paddingBottom:"25px",width:"100%",paddingLeft:0}}),r().createElement(s.Button,{style:{left:"60px"},key:"confirm",variant:"primary",isDisabled:!S||j,onClick:()=>(async()=>{k(!0);const e={onInfo:{title:"Updating system",description:` ${w.deviceName} was added to the queue.`},onError:{title:"Error",description:"Failed to update the selected system(s)"}};await(0,C.A)(B,(()=>(0,h.Pn)({CommitID:w.commitID,DevicesUUID:[w.deviceUUID]})),e,x),F(),k(!1)})()},"Update system"),r().createElement(s.Button,{style:{left:"70px"},key:"cancel",variant:"link",onClick:F},"Cancel")))))))};$.propTypes={data:l().oneOfType([l().object,l().array]),historyProp:l().func,navigateProp:l().func,locationProp:l().func,routeMatchProp:l().func,fetchDevices:l().func,isLoading:l().bool,hasError:l().bool,currentId:l().string,notificationProp:l().object};const M=({inventoryId:e,historyProp:t,navigateProp:n,locationProp:a,routeMatchProp:i,paramsProp:o,notificationProp:l})=>{const s=t?t():O.W6?(0,O.W6)():null,{deviceId:u,groupId:d}=o?o():O.g?(0,O.g)():null,p=e||u,g=window.location.pathname.indexOf("edge")>0?"edge":E.J.inventory,[{data:y,isLoading:v,hasError:b},S]=(0,P.A)({api:h.XH,id:p,tableReload:!0}),T=y?.Device,w=d?T?.DevicesGroups?.find((e=>e.ID.toString()===d))?.Name:null;return r().createElement(r().Fragment,null,r().createElement(I.A,{className:"pf-m-light"},w?r().createElement(c.Breadcrumb,{ouiaId:"groups-list"},r().createElement(c.BreadcrumbItem,null,(0,B.d)({pathname:E.J.fleetManagement,linkText:"Groups",history:s})),r().createElement(c.BreadcrumbItem,null,(0,B.d)({pathname:`${E.J.fleetManagement}/${d}`,linkText:w||r().createElement(m.Skeleton,{width:"100px"}),history:s})),r().createElement(c.BreadcrumbItem,null,(0,B.d)({pathname:`${E.J.fleetManagement}/${d}/systems/${p}/`,linkText:T?.DeviceName,history:s})),r().createElement(c.BreadcrumbItem,null,"Update")):r().createElement(c.Breadcrumb,{ouiaId:"systems-list"},r().createElement(c.BreadcrumbItem,null,(0,B.d)({pathname:"edge"===g?`${g}/inventory`:`insights${g}/manage-edge-inventory`,linkText:"Systems",history:s})),r().createElement(c.BreadcrumbItem,null,(0,B.d)({pathname:"edge"===g?`${g}/inventory/${p}/`:`insights${g}/${p}`,linkText:T?.DeviceName||r().createElement(m.Skeleton,{width:"100px"}),history:s})),r().createElement(c.BreadcrumbItem,null,"Update")),r().createElement(x.A,{title:"Update"}),r().createElement(f.TextContent,{className:"pf-u-mt-md"},T?.DeviceName?r().createElement(f.Text,null,"Update ",r().createElement("strong",null,T?.DeviceName)," to a newer version of ",r().createElement("strong",null,y?.ImageInfo?.Image?.Name)," by selecting a new version from the table below."):r().createElement(m.Skeleton,{width:"100px"}))),r().createElement("section",{className:"edge-devices pf-l-page__main-section pf-c-page__main-section"},r().createElement($,{data:y,currentId:p,fetchDevices:S,isLoading:v,hasError:b,navigateProp:n,histor:!0,yProp:t,locationProp:a,routeMatchProp:i,notificationProp:l})))};M.propTypes={historyProp:l().func,navigateProp:l().func,locationProp:l().func,routeMatchProp:l().func,paramsProp:l().func,inventoryId:l().string,notificationProp:l().object};const J=M},78259:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(11830),r=n(93345),i=n(36870);const o=({api:e,id:t=null,statusMessages:n,tableReload:o=!1})=>{const l=(0,i.wA)(),[c,s]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)((()=>e)),h=n?.onSuccess;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});const y=async(e="")=>{d(!0);try{const r=await f({id:t,query:e});s(r),h&&l({...(0,a.z8)({variant:"success",...n.onSuccess})})}catch(e){m(!0),l({...(0,a.z8)({variant:"danger",...n.onError})})}finally{d(!1)}};return(0,r.useEffect)((()=>{o||y()}),[]),[{data:c,isLoading:u,hasError:p},y,f,g]}},55270:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(11830);const r=(e,t,n,r)=>{const i=n?.onSuccess,o=n?.onInfo,l=n?.onWarning;return n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}}),(async()=>{try{const c=await t();return o&&(r?r.hasInfo(n.onInfo):e({...(0,a.z8)({variant:"info",...n.onInfo})})),i&&(r?r.hasSuccess(n.onSuccess):e({...(0,a.z8)({variant:"success",...n.onSuccess})})),l&&(r?r.hasWarning(n.onWarning):e({...(0,a.z8)({variant:"warning",...n.onWarning})})),c}catch(t){return r?r.err(n.onError,t):e({...(0,a.z8)({variant:"danger",...n.onError,description:t?.Title?`${n.onError.description}: ${t.Title}`:n.onError.description})}),t}})()}},46942:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}}]);