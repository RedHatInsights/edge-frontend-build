(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[734],{85659:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>he});var l=n(87757),r=n.n(l),a=n(48926),o=n.n(a),u=n(59713),c=n.n(u),i=n(63038),s=n.n(i),m=n(1427),d=n.n(m),p=n(69859),v=n(83958),f=n(4250),E=n(96416),g=n(8969),h=n(48716),b=n(39173),y=n(86350),O=n(75959),S=n(57277),k=n(32875),D=n(49739),T=n(83826),C=n(71813),w=n(15209),P=n(47173),R=n(50693),x=n(16475),Z=n(32203),L=n(62394),j=n(70401),I=n(52643),N=n(2372),A=n(60485),_=n(68774),z=n(25834),F=n(45454),G=n(68340),q=n(48140),W=n(86050),H=n(49734),J=n(79851),K=n(34512),V=n(45697),B=n.n(V),M=n(62410),U=n(55399),X=n(76464),$=n(5029),Q=n(17908),Y=n(11306),ee=function(e){var t=e.numberOfSystems,n=(0,p.useDispatch)(),l=(0,p.useSelector)((function(e){var t=e.thresholdReducer;return(null==t?void 0:t.threshold)||{}})),r=(0,p.useSelector)((function(e){var t=e.thresholdReducer;return null==t?void 0:t.isLoading})),a=(0,p.useSelector)((function(e){var t=e.devicesInfoReducer;return null==t?void 0:t.isLoading})),o=(0,p.useSelector)((function(e){var t=e.devicesInfoReducer;return(null==t?void 0:t.devicesInfo)||{}})),u=(0,p.useSelector)((function(e){var t=e.canariesInfoReducer;return((null==t?void 0:t.canariesInfo)||[]).slice(0,4)})),c=(0,p.useSelector)((function(e){var t=e.canariesInfoReducer;return null==t?void 0:t.isLoading}));return(0,m.useEffect)((function(){n((0,f.QK)()),n((0,f.PE)())}),[]),(0,m.useEffect)((function(){n((0,f._n)(t))}),[t]),d().createElement(R.r,{hasGutter:!0},d().createElement(x.P,{span:3},d().createElement(Z.Z,null,d().createElement(j.O,null,d().createElement(A.D,{headingLevel:"h3"},"Health threshold")),d().createElement(L.e,null,!1===r?d().createElement($.Td,{ariaDesc:"Health threshold",ariaTitle:"Health threshold",constrainToVisibleArea:!0,legendOrientation:"vertical",legendPosition:"right",height:230,width:450,data:l.map((function(e){var t,n;return{x:null===(t=Object.keys(e))||void 0===t?void 0:t[0],y:null===(n=Object.values(e))||void 0===n?void 0:n[0]}})),legendData:l.map((function(e){var t,n;return{name:"".concat(null===(t=Object.keys(e))||void 0===t?void 0:t[0],": ").concat(null===(n=Object.values(e))||void 0===n?void 0:n[0])}})),padding:{bottom:20,left:20,right:140,top:20},labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},themeColor:Q.nz.multiOrdered}):d().createElement(I.b,null,d().createElement(N.$,null))))),d().createElement(x.P,{span:3},d().createElement(Z.Z,null,d().createElement(j.O,null,d().createElement(A.D,{headingLevel:"h3"},"Devices info")),d().createElement(L.e,null,d().createElement(_.D,null,d().createElement(z.G,{component:z.F.dl},d().createElement(F.T,{component:F.v.dt},!1===a?d().createElement(G.x,{component:G.q.h1},d().createElement(U.Link,{to:"/groups"},null==o?void 0:o.requiredApproval)):d().createElement(w.O,null)),d().createElement(F.T,{component:F.v.dd},"Required approvals"),d().createElement(F.T,{component:F.v.dt},!1===a?d().createElement(G.x,{component:G.q.h1},d().createElement(U.Link,{to:"/groups"},null==o?void 0:o.orphaned)):d().createElement(w.O,null)),d().createElement(F.T,{component:F.v.dd},"Orphaned devices"),d().createElement(F.T,{component:F.v.dt},!1===a?d().createElement(G.x,{component:G.q.h1},d().createElement(U.Link,{to:"/groups"},null==o?void 0:o.delivering)):d().createElement(w.O,null)),d().createElement(F.T,{component:F.v.dd},"Devices on the way")))))),d().createElement(x.P,{span:3},d().createElement(Z.Z,null,d().createElement(j.O,null,d().createElement(A.D,{headingLevel:"h3"},"Last Canaries")),d().createElement(L.e,null,d().createElement(_.D,null,d().createElement(z.G,{component:z.F.dl},!0===c?d().createElement(N.$,null):u.map((function(e,t){var n=e.group,l=e.date,r=e.status;return d().createElement(m.Fragment,{key:(null==n?void 0:n.uuid)||t},d().createElement(F.T,{component:F.v.dt},d().createElement(U.Link,{to:"/groups/".concat(null==n?void 0:n.uuid)},null==n?void 0:n.name)),d().createElement(F.T,{component:F.v.dd},d().createElement(q.a,null,d().createElement(W.Z,null,d().createElement(M.Z,{date:l})),d().createElement(W.Z,null,d().createElement(X.J,{status:r})))))}))))),d().createElement(H.e,null,d().createElement(J.P,null,d().createElement(K.J,{isFilled:!0}),d().createElement(K.J,null,d().createElement(U.Link,{to:"/canaries"},"See canaries ",d().createElement(Y.ZP,null))))))))};ee.propTypes={numberOfSystems:B().number},ee.defaultProps={numberOfSystems:0};const te=ee;var ne=n(67154),le=n.n(ne),re=n(9947),ae=n(75106),oe=n(33237),ue=[{title:"Name of group",transforms:[oe.sortable,(0,oe.cellWidth)("max")]},{title:"Number of devices",transforms:[oe.sortable]},{title:"Secure",transforms:[oe.sortable,(0,oe.cellWidth)(10)]},{title:"Last seen",transforms:[oe.sortable,(0,oe.cellWidth)(15)]},{title:"Status",transforms:[oe.sortable,(0,oe.cellWidth)(10)]}],ce=function(e){var t=e.onAddNewGroup,n=(0,m.useState)({}),l=s()(n,2),r=l[0],a=l[1],o=(0,p.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.groups}));return d().createElement(oe.Table,le()({"aria-label":"Groups table"},o.length>0&&{actions:[{title:"Adopt",onClick:console.log},{title:"Reject",onClick:console.log}]},{cells:ue,sortBy:r,onSort:function(e,t,n){return a((function(){return{index:t,direction:n}}))},rows:o.length>0?o.map((function(e){var t;return{cells:[{title:d().createElement(U.Link,{to:"/groups/".concat(null==e?void 0:e.uuid)},null==e?void 0:e.name)},null==e||null===(t=e.sensors)||void 0===t?void 0:t.length,{title:d().createElement(X.U,{isSecure:null==e?void 0:e.is_secure})},{title:d().createElement(M.Z,{date:null==e?void 0:e.last_seen})},{title:d().createElement(X.J,{status:null==e?void 0:e.status})}]}})):[{cells:[{title:d().createElement(I.b,null,d().createElement(re.u,{variant:re.I.full},d().createElement(A.D,{headingLevel:"h5",size:"lg"},"No matching groups found"),d().createElement(ae.B,null,"This filter criteria matches no groups. ",d().createElement("br",null)," Try changing your filter settings. Or adding new group."),d().createElement(P.zx,{variant:"primary",onClick:t},"Add group"))),props:{colSpan:ue.length+1}}]}]}),d().createElement(oe.TableHeader,null),d().createElement(oe.TableBody,null))};ce.propTypes={onAddNewGroup:B().func};const ie=ce;var se=n(87242),me=n(86163);const de={fields:[{component:se.Z.WIZARD,name:"wizzard",inModal:!0,title:"Create new group",fields:[{title:"General information",name:"step-1",nextStep:"choos-systems",fields:[{component:se.Z.TEXT_FIELD,name:"group-name",type:"text",label:"Group name",isRequired:!0,validate:[{type:"required"}]},{component:se.Z.SWITCH,name:"is-secure",label:"Is secure"}]},{title:"Choose systems",name:"choos-systems",fields:[{component:me.k,name:"select-system"}]}]}]};var pe=n(55206);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=(0,m.lazy)((function(){return Promise.all([n.e(410),n.e(0),n.e(459)]).then(n.bind(n,75459))})),ge={name:{label:"Name",value:""},security:{label:"Security",value:[]},status:{label:"Status",value:[]}};const he=function(){var e,t,n,l=(0,m.useContext)(pe.g).getRegistry,a=(0,m.useState)(ge),u=s()(a,2),c=u[0],i=u[1],R=(0,m.useState)(!1),x=s()(R,2),Z=x[0],L=x[1],j=(0,p.useDispatch)(),I=(0,p.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.isLoading})),N=(0,p.useSelector)((function(e){var t,n=e.groupsReducer;return null==n||null===(t=n.groups)||void 0===t?void 0:t.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sensors;return e+((null==n?void 0:n.length)||0)}),0)})),A=(0,p.useSelector)((function(e){var t=e.groupsReducer;return(null==t?void 0:t.meta)||{page:1}}));return(0,m.useEffect)((function(){l().register({groupsReducer:E.zX,thresholdReducer:E.KT,devicesInfoReducer:E.bh,canariesInfoReducer:E.KY}),j((0,f.tb)())}),[]),d().createElement(m.Fragment,null,d().createElement(h.Z,{className:"pf-m-light"},d().createElement(b.Z,{title:"Available groups"})),d().createElement(y.Z,{className:"edge-groups"},d().createElement(D.K,{hasGutter:!0},d().createElement(T.v,{className:"edge-groups__info"},d().createElement(te,{numberOfSystems:N})),d().createElement(T.v,{isFilled:!0},d().createElement(S.Z,!1===I?{pagination:{itemCount:null==A?void 0:A.count,page:(null==A?void 0:A.offset)/(null==A?void 0:A.limit)+1,perPage:Number(null==A?void 0:A.limit),isCompact:!0},dedicatedAction:d().createElement(P.zx,{onClick:function(){return L(!0)},isDisabled:!1!==I},"Add group"),filterConfig:{items:[{label:ge.name.label,type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return i((function(){return fe(fe({},c),{},{name:fe(fe({},(null==c?void 0:c.name)||{}),{},{value:t})})}))},value:(null==c||null===(e=c.name)||void 0===e?void 0:e.value)||"",placeholder:"Filter by name"}},{label:ge.security.label,type:"checkbox",filterValues:{key:"security-filter",onChange:function(e,t){return i(fe(fe({},c||{}),{},{security:fe(fe({},(null==c?void 0:c.security)||{}),{},{value:t})}))},items:[{value:"isSecure",label:"Secure"},{value:"nonSecure",label:"Not secure"}],value:(null==c||null===(t=c.security)||void 0===t?void 0:t.value)||[]}},{label:ge.status.label,type:"checkbox",filterValues:{key:"status-filter",onChange:function(e,t){return i(fe(fe({},c||{}),{},{status:fe(fe({},(null==c?void 0:c.status)||{}),{},{value:t})}))},items:g.Op.map((function(e){return{value:e,label:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}})),value:(null==c||null===(n=c.status)||void 0===n?void 0:n.value)||[]}}]},activeFiltersConfig:{filters:(0,g.pM)(c)?(0,g.I)(c):[],onDelete:function(e,t,n){i(n?ge:function(){return(0,g.Jr)(c,t)})}}}:{pagination:d().createElement(w.O,null)}),!1===I?d().createElement(ie,{onAddNewGroup:function(){return L(!0)}}):d().createElement(O.Z,{colSize:5,rowSize:15}),d().createElement(k.Z,{isFooter:!0},!1===I&&d().createElement(C.t,{itemCount:null==A?void 0:A.count,page:(null==A?void 0:A.offset)/(null==A?void 0:A.limit)+1,perPage:Number(null==A?void 0:A.limit),dropDirection:"up"}))))),Z&&d().createElement(m.Suspense,{fallback:""},d().createElement(Ee,{schema:de,isOpened:Z,onAction:function(e,t){e&&o()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.d_)({groupName:t["group-name"],isSecure:t["is-secure"],systemIDs:t.selected});case 2:j((0,f.tb)());case 3:case"end":return e.stop()}}),e)})))(),L(!1)}})))}}}]);
//# sourceMappingURL=GroupsPage.55ec876ad0d344a05420.js.map