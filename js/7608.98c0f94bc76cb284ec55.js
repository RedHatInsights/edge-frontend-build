"use strict";(self.webpackChunkedge=self.webpackChunkedge||[]).push([[7608],{37608:(e,t,i)=>{i.r(t),i.d(t,{TimePicker:()=>y});var s=i(8674),n=i(93345),o=i(33774),r=i(98727),a=i(88144),l=i(47931),c=i(17694),d=i(74225),p=i(94494),m=i(75797),u=i(52073),h=i(35253),g=i(53642),f=i(23285),v=i(52860);const T=" AM",x=" PM",$=(e,t,i,s,n)=>{const o=new Date(e);if(!isNaN(o.getDate())&&(e instanceof Date||e.includes("T"))){const e=s?`${o.getHours()>12?o.getHours()-12:o.getHours()}`:`${o.getHours()}`.padStart(2,"0"),t=`${o.getMinutes()}`.padStart(2,"0"),r=n?`${o.getSeconds()}`.padStart(2,"0"):"",a=r?`${i}${r}`:"";let l="";return s&&o.getHours()>11?l=x:s&&(l=T),`${e}${i}${t}${a}${l}`}if("string"==typeof e&&""!==(e=e.trim())&&S(e,t,i,s)){const[,o,r,a,l=""]=t.exec(e),c=n?`${i}${null!=a?a:"00"}`:"";let d="";if(s){const e=l.toUpperCase();d=e===T.toUpperCase().trim()?T:e===x.toUpperCase().trim()||(new Date).getHours()>11?x:T}return`${o}${i}${r}${c}${d}`}return e.toString()},S=(e,t,i,s)=>{const n=new Date(e);if(!isNaN(n.getDate())&&e.includes("T"))return!0;const o=parseInt(e.split(i)[0]),r=o>=(s?1:0)&&o<=(s?12:23);return""===e||t.test(e)&&r},I=(e,t)=>{const i=e.match(t);return i&&i.length?/pm/i.test(i[4])?12===parseInt(i[1])?parseInt(i[1]):parseInt(i[1])+12:/am/i.test(i[4])&&12===parseInt(i[1])?0:parseInt(i[1]):null},R=(e,t)=>{const i=e.match(t);return i&&i.length?parseInt(i[2]):null},C=(e,t)=>{var i;const s=null===(i=e.match(t))||void 0===i?void 0:i[3];return s?parseInt(s):null},E=(e,t,i,s,n)=>{if(""===i.trim())return!0;const o=O(e,s,n),r=O(i,s,n),a=O(t,s,n);return o<=r&&r<=a},O=(e,t,i)=>{const s=new RegExp(`^\\s*(\\d\\d?)${t}([0-5]\\d)${t}?([0-5]\\d)?\\s*([AaPp][Mm])?\\s*$`).exec(e);if(!s||!s.length)return;let n=s[1].padStart(2,"0");const o=s[2];let r=s[3]?`${t}${s[3]}`:"";!r&&i&&(r=`${t}00`);const a=s[4]||"";return"PM"===a.toUpperCase()&&"12"!==n?n=`${parseInt(n)+12}`:"AM"===a.toUpperCase()&&"12"===n&&(n="00"),`${n}${t}${o}${r}`};var k=i(59257),M=i(9937);const b=(0,i(68419).w)({name:"OutlinedClockIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z",yOffset:0,xOffset:0}),D="--pf-v5-c-date-picker__input--c-form-control--Width";class y extends n.Component{constructor(e){super(e),this.baseComponentRef=n.createRef(),this.toggleRef=n.createRef(),this.inputRef=n.createRef(),this.menuRef=n.createRef(),this.onDocClick=e=>{var t,i,s,n;const o=null===(i=null===(t=this.toggleRef)||void 0===t?void 0:t.current)||void 0===i?void 0:i.contains(e.target),r=null===(n=null===(s=this.menuRef)||void 0===s?void 0:s.current)||void 0===n?void 0:n.contains(e.target);!this.state.isTimeOptionsOpen||o||r||this.onToggle(!1)},this.handleGlobalKeys=e=>{var t,i,s,n;const{isTimeOptionsOpen:o,focusedIndex:r,scrollIndex:a}=this.state;(null===(i=null===(t=this.inputRef)||void 0===t?void 0:t.current)||void 0===i?void 0:i.contains(e.target))?o||e.key===v.RU.Tab||e.key===v.RU.Escape?o&&(e.key===v.RU.Escape||e.key===v.RU.Tab?this.onToggle(!1):e.key===v.RU.Enter?null!==r?(this.focusSelection(r),e.stopPropagation()):this.onToggle(!1):e.key!==v.RU.ArrowDown&&e.key!==v.RU.ArrowUp||(this.focusSelection(a),this.updateFocusedIndex(0),e.preventDefault())):this.onToggle(!0):(null===(n=null===(s=this.menuRef)||void 0===s?void 0:s.current)||void 0===n?void 0:n.contains(e.target))&&(e.key===v.RU.ArrowDown?(this.updateFocusedIndex(1),e.preventDefault()):e.key===v.RU.ArrowUp?(this.updateFocusedIndex(-1),e.preventDefault()):e.key!==v.RU.Escape&&e.key!==v.RU.Tab||(this.inputRef.current.focus(),this.onToggle(!1)))},this.updateFocusedIndex=e=>{this.setState((t=>{const i=this.getOptions().length-1;let s=null!==t.focusedIndex?t.focusedIndex+e:t.scrollIndex+e;return s<0?s=i:s>i&&(s=0),this.scrollToIndex(s),{focusedIndex:s}}))},this.getIndexToScroll=e=>"inline"===this.props.menuAppendTo?e>0?e-1:0:e,this.scrollToIndex=e=>{this.getOptions()[e].closest(`.${a.A.menuContent}`).scrollTop=this.getOptions()[this.getIndexToScroll(e)].offsetTop},this.focusSelection=e=>{var t;const i=-1!==e?e:0;(null===(t=this.menuRef)||void 0===t?void 0:t.current)&&this.getOptions()[i].querySelector(`.${a.A.menuItem}`).focus()},this.scrollToSelection=e=>{const{delimiter:t,is24Hour:i}=this.props;let s=e.split(this.props.delimiter),n=null;if(s.length<2?s=(e=`${e}${t}00`).split(t):s.length>2&&(s=(e=$(e,this.state.timeRegex,t,!i,!1)).split(t)),!i&&s.length>1&&s[1].length<2){const i=0===s[1].length?"00":s[1]+"0";e=`${s[0]}${t}${i}${(new Date).getHours()>11?x:T}`}else!i&&s.length>1&&2===s[1].length&&!e.toUpperCase().includes(T.toUpperCase().trim())&&!e.toUpperCase().includes(x.toUpperCase().trim())&&(e=`${e}${(new Date).getHours()>11?x:T}`);let o=this.getOptions().findIndex((t=>t.textContent===e));if(-1!==o)this.scrollToIndex(o),n=o;else if(2===s.length){let n="";i||(s[1].toUpperCase().includes("P")?n=x:s[1].toUpperCase().includes("A")&&(n=T)),e=`${s[0]}${t}00${n}`,o=this.getOptions().findIndex((t=>t.textContent===e)),-1!==o&&this.scrollToIndex(o)}this.setState({focusedIndex:n,scrollIndex:o})},this.getRegExp=(e=!0)=>{const{is24Hour:t,delimiter:i}=this.props;let s=`\\s*(\\d\\d?)${i}([0-5]\\d)`;return e&&(s+=`${i}?([0-5]\\d)?`),new RegExp(`^${s}${t?"":"\\s*([AaPp][Mm])?"}\\s*$`)},this.getOptions=()=>{var e;return(null===(e=this.menuRef)||void 0===e?void 0:e.current)?Array.from(this.menuRef.current.querySelectorAll(`.${a.A.menuListItem}`)):[]},this.isValidFormat=e=>{if(this.props.validateTime)return this.props.validateTime(e);const{delimiter:t,is24Hour:i,includeSeconds:s}=this.props;return S(e,this.getRegExp(s),t,!i)},this.isValidTime=e=>{const{delimiter:t,includeSeconds:i}=this.props,{minTimeState:s,maxTimeState:n}=this.state;return E(s,n,e,t,i)},this.isValid=e=>this.isValidFormat(e)&&this.isValidTime(e),this.onToggle=e=>{this.setState((t=>{const{timeRegex:i,isInvalid:s,timeState:n}=t,{delimiter:o,is24Hour:r,includeSeconds:a,onChange:l}=this.props,c=$(n,i,o,!r,a);return l&&!e&&c!==n&&l(null,c,I(c,i),R(c,i),C(c,i),this.isValid(c)),{isTimeOptionsOpen:e,timeState:c,isInvalid:e?s:!this.isValid(c)}})),this.props.setIsOpen(e),e||this.inputRef.current.focus()},this.onSelect=e=>{const{timeRegex:t,timeState:i}=this.state,{delimiter:s,is24Hour:n,includeSeconds:o,setIsOpen:r}=this.props,a=$(e.target.textContent,t,s,!n,o);a!==i&&this.onInputChange(e,a),this.inputRef.current.focus(),this.setState({isTimeOptionsOpen:!1,isInvalid:!1}),r(!1)},this.onInputClick=e=>{this.state.isTimeOptionsOpen||this.onToggle(!0),e.stopPropagation()},this.onInputChange=(e,t)=>{const{onChange:i}=this.props,{timeRegex:s}=this.state;i&&i(e,t,I(t,s),R(t,s),C(t,s),this.isValid(t)),this.scrollToSelection(t),this.setState({timeState:t})};const{is24Hour:t,delimiter:i,time:s,includeSeconds:o,isOpen:r}=this.props;let{minTime:l,maxTime:c}=this.props;if(""===l){const e=o?`${i}00`:"";l=t?`00${i}00${e}`:`12${i}00${e} AM`}if(""===c){const e=o?`${i}59`:"";c=t?`23${i}59${e}`:`11${i}59${e} PM`}const d=this.getRegExp();this.state={isInvalid:!1,isTimeOptionsOpen:r,timeState:$(s,d,i,!t,o),focusedIndex:null,scrollIndex:0,timeRegex:d,minTimeState:$(l,d,i,!t,o),maxTimeState:$(c,d,i,!t,o)}}componentDidMount(){document.addEventListener("mousedown",this.onDocClick),document.addEventListener("touchstart",this.onDocClick),document.addEventListener("keydown",this.handleGlobalKeys),this.setState({isInvalid:!this.isValid(this.state.timeState)})}componentWillUnmount(){document.removeEventListener("mousedown",this.onDocClick),document.removeEventListener("touchstart",this.onDocClick),document.removeEventListener("keydown",this.handleGlobalKeys)}componentDidUpdate(e,t){const{timeState:i,isTimeOptionsOpen:s,isInvalid:n,timeRegex:o}=this.state,{time:r,is24Hour:a,delimiter:l,includeSeconds:c,isOpen:d,minTime:p,maxTime:m}=this.props;if(e.isOpen!==d&&this.onToggle(d),s&&!t.isTimeOptionsOpen&&i&&!n&&this.scrollToSelection(i),l!==e.delimiter&&this.setState({timeRegex:this.getRegExp()}),""!==r&&r!==e.time){const e=$(r,o,l,!a,c);this.setState({timeState:e,isInvalid:!this.isValid(e)})}""!==p&&p!==e.minTime&&this.setState({minTimeState:$(p,o,l,!a,c)}),""!==m&&m!==e.maxTime&&this.setState({maxTimeState:$(m,o,l,!a,c)})}render(){const e=this.props,{"aria-label":t,isDisabled:i,className:a,placeholder:v,id:$,menuAppendTo:S,is24Hour:I,invalidFormatErrorMessage:R,invalidMinMaxErrorMessage:C,stepMinutes:O,width:y,delimiter:w,inputProps:U,onChange:A,setIsOpen:H,isOpen:P,time:V,validateTime:N,minTime:F,maxTime:L,includeSeconds:z,zIndex:_}=e,j=(0,s.__rest)(e,["aria-label","isDisabled","className","placeholder","id","menuAppendTo","is24Hour","invalidFormatErrorMessage","invalidMinMaxErrorMessage","stepMinutes","width","delimiter","inputProps","onChange","setIsOpen","isOpen","time","validateTime","minTime","maxTime","includeSeconds","zIndex"]),{timeState:G,isTimeOptionsOpen:K,isInvalid:W,minTimeState:q,maxTimeState:B}=this.state,J={[D]:y},Q=((e,t,i,s,n,o)=>{const r=[],a=new Date((new Date).setHours(0,0,0,0)),l=a.getDay();for(;a.getDay()===l;){let l=a.getHours(),c=T;t&&(0===l?l=12:l>=12&&(c=x),l>12&&(l%=12)),l=t?l.toString():l.toString().padStart(2,"0");const d=`${l}${i}${a.getMinutes().toString().padStart(2,"0")}${t?c:""}`;E(s,n,d,i,o)&&r.push(d),a.setMinutes(a.getMinutes()+e)}return r})(O,!I,w,q,B,z),X=this.isValidFormat(G),Y=$||(0,l.LP)("time-picker"),Z=()=>this.baseComponentRef&&this.baseComponentRef.current?this.baseComponentRef.current.parentElement:null,ee=n.createElement(d.W,{ref:this.menuRef,isScrollable:!0},n.createElement(p.r,{maxMenuHeight:"200px"},n.createElement(m.c,{"aria-label":t},Q.map(((e,t)=>n.createElement(u.D,{onClick:this.onSelect,key:e,id:`${Y}-option-${t}`},e)))))),te=n.createElement(f.ks,Object.assign({"aria-haspopup":"menu",id:`${Y}-input`,"aria-label":t,validated:W?"error":"default",placeholder:v,value:G||"",type:"text",customIcon:n.createElement(b,null),onClick:this.onInputClick,onChange:this.onInputChange,autoComplete:"off",isDisabled:i,isExpanded:K,ref:this.inputRef},U));let ie;switch(S){case"inline":ie=()=>this.toggleRef.current;break;case"parent":ie=Z;break;default:ie=S}return n.createElement("div",{ref:this.baseComponentRef,className:(0,o.A)(r.A.datePicker,a)},n.createElement("div",Object.assign({className:(0,o.A)(r.A.datePickerInput),style:J},j),n.createElement(h.M,null,n.createElement(g.b,null,n.createElement("div",{id:Y},n.createElement("div",{ref:this.toggleRef,style:{paddingLeft:"0"}},n.createElement(c.N,{appendTo:ie,trigger:te,triggerRef:this.toggleRef,popper:ee,popperRef:this.menuRef,isVisible:K,zIndex:_}))))),W&&n.createElement("div",{className:(0,o.A)(r.A.datePickerHelperText)},n.createElement(k.E,null,n.createElement(M.j,{variant:"error"},X?C:R)))))}}y.displayName="TimePicker",y.defaultProps={className:"",isDisabled:!1,time:"",is24Hour:!1,invalidFormatErrorMessage:"Invalid time format",invalidMinMaxErrorMessage:"Invalid time entered",placeholder:"hh:mm",delimiter:":","aria-label":"Time picker",width:"150px",menuAppendTo:"inline",stepMinutes:30,inputProps:{},minTime:"",maxTime:"",isOpen:!1,setIsOpen:()=>{},zIndex:9999}}}]);