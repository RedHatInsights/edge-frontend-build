"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[344],{79358:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var a=n(59713),r=n.n(a),c=n(1427),o=n.n(c),i=n(87502),l=n(47173),s=n(68340),d=n(68774),u=n(78140),m=n(25834),p=n(69957),f=n(62410),v=n(68920),g=n(45697),b=n.n(g),E=n(66702);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t,n,a,r,c,g,b=e.updateModal,h=e.setUpdateModal,y=b.deviceData.system_profile.image_data[b.deviceData.system_profile.image_data.length-1],D=function(){h((function(e){return O(O({},e),{},{isOpen:!1})}))};return o().createElement(i.u,{variant:"medium",title:"Update ".concat(b.deviceData.display_name," to latest image"),description:"Update this device to use the latest version of the image linked to it.",isOpen:b.isOpen,onClose:D,actions:[o().createElement(l.zx,{key:"confirm",variant:"primary",onClick:function(){(0,E.g5)({DeviceUUID:b.deviceData.id,CommitId:y.Image.CommitID}),D()}},"Update Device"),o().createElement(l.zx,{key:"cancel",variant:"link",onClick:D},"Cancel")]},o().createElement(d.D,null,o().createElement(u.T,{component:s.q.h3},o().createElement(s.x,{component:"b"},"Update to")),o().createElement(m.G,{component:m.F.dl},o().createElement(u.T,{component:u.v.dt},"Image Name"),o().createElement(u.T,{component:u.v.dd},y.Image.Name),o().createElement(u.T,{component:u.v.dt},"Version"),o().createElement(u.T,{component:u.v.dd},y.Image.Version),o().createElement(u.T,{component:u.v.dt},"Created"),o().createElement(u.T,{component:u.v.dd},o().createElement(f.Z,{date:y.Image.CreatedAt})),o().createElement(u.T,{component:u.v.dt},"Release"),o().createElement(u.T,{component:u.v.dd},v.aN[y.Image.Distribution])),o().createElement(u.T,{component:s.q.h3},o().createElement(s.x,{component:"b"},"Package Details")),o().createElement(m.G,{component:m.F.dl},o().createElement(u.T,{component:u.v.dt},"Added"),o().createElement(u.T,{component:u.v.dd},(null===(t=y.PackageDiff)||void 0===t||null===(n=t.Added)||void 0===n?void 0:n.length)||0),o().createElement(u.T,{component:u.v.dt},"Removed"),o().createElement(u.T,{component:u.v.dd},(null===(a=y.PackageDiff)||void 0===a||null===(r=a.Removed)||void 0===r?void 0:r.length)||0),o().createElement(u.T,{component:u.v.dt},"Updated"),o().createElement(u.T,{component:u.v.dd},(null===(c=y.PackageDiff)||void 0===c||null===(g=c.Updated)||void 0===g?void 0:g.length)||0))),o().createElement(d.D,{className:"pf-u-pt-md"},o().createElement(s.x,{style:{color:"var(--pf-global--palette--gold-500)"},component:"small"},o().createElement(p.ZP,null)," After the update is installed, the device will apply the changes.")))};y.propTypes={updateModal:b().shape({isOpen:b().bool.isRequired,deviceData:b().object.isRequired}).isRequired,setUpdateModal:b().func.isRequired};const D=y},49477:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(59713),r=n.n(a),c=n(87757),o=n.n(c),i=n(48926),l=n.n(i),s=n(63038),d=n.n(s),u=n(1427),m=n.n(u),p=n(67098),f=n(96354),v=n(1005),g=n(2372),b=n(45697),E=n.n(b),h=n(20873),O=n(94778),y=n(59086),D=n(80962),w=n(83215),j=n(66702);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t=e.navigateBack,n=(0,u.useState)(),a=d()(n,2),r=a[0],c=a[1],i=(0,D.useDispatch)(),s=function(){t(),i({type:y.G})};return(0,u.useEffect)((function(){l()(o().mark((function e(){var t,n,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a?void 0:a.getUser();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:r=e.t0,c((function(){return r}));case 7:case"end":return e.stop()}}),e)})))()}),[]),r?m().createElement(p.Z,{onClose:s,customComponentMapper:{review:h.Z},onSubmit:function(e){var t=e.values;(0,e.setIsSaving)((function(){return!0}));var n=P(P({},t),{},{architecture:"x86_64"});(0,O.Es)(i,n,(function(e){i(P(P({},(0,w.wN)({variant:"info",title:"Created image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,j.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,w.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,w.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))},function(e){return(0,O.Z5)(e)}]}}}})),s(),(0,O.Z5)(i)}))},defaultArch:"x86_64",initialValues:{version:0},schema:{fields:[{component:f.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Create image"},showTitles:!0,title:"Create image",crossroads:["target-environment","release","imageType"],fields:[v.oG,v.Ud,v.l9,v.B9,v.j7]}]}}):m().createElement(g.$,null)};k.propTypes={navigateBack:E().func},k.defaultProps={navigateBack:function(){}};const I=k}}]);
//# sourceMappingURL=../sourcemaps/CreateImageWizard.07f9fe6f68369173e44f.js.map