"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[344],{49477:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(4942),a=n(15861),i=n(29439),c=n(87757),s=n.n(c),u=n(93264),o=n.n(u),l=n(66496),f=n(96354),p=n(76362),d=n(2372),m=n(45697),v=n.n(m),g=n(20873),b=n(94778),h=n(59086),w=n(82041),y=n(83215),O=n(66702);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){var t=e.navigateBack,n=(0,u.useState)(),r=(0,i.Z)(n,2),c=r[0],m=r[1],v=(0,w.useDispatch)(),j=function(){t(),v({type:h.G})};return(0,u.useEffect)((function(){(0,a.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(r=n.auth)||void 0===r||r.getUser().then((function(e){return m(null!=e?e:{})}));case 1:case"end":return e.stop()}}),e)})))()}),[]),c?o().createElement(l.Z,{onClose:j,customComponentMapper:{review:g.Z},onSubmit:function(e){var t=e.values;(0,e.setIsSaving)((function(){return!0}));var n=_(_({},t),{},{architecture:"x86_64"});(0,b.Es)(v,n,(function(e){v(_(_({},(0,y.wN)({variant:"info",title:"Created image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,O.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,y.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,y.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))},function(e){return(0,b.n9)(e)}]}}}})),(0,b.n9)(v),j()}))},defaultArch:"x86_64",initialValues:{version:0},schema:{fields:[{component:f.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Create image"},showTitles:!0,title:"Create image",crossroads:["target-environment","release","imageType","third-party-repositories"],fields:[p.oG,p.Ud,p.l9,p.jS,p.B9,p.j7,p.Sp]}]}}):o().createElement(d.$,null)};D.propTypes={navigateBack:v().func},D.defaultProps={navigateBack:function(){}};const E=D}}]);
//# sourceMappingURL=../sourcemaps/CreateImageWizard.afad89baa7784247d77dddc006e18b09.js.map