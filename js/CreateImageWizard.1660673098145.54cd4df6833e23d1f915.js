"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[5344,8940],{36621:(e,t,n)=>{n.d(t,{p:()=>l});var a=n(21988),r=n(93264),i=n(49945),c=n(38296);const l=e=>{var{children:t,className:n,component:l="div"}=e,s=(0,a._T)(e,["children","className","component"]);const o=l;return r.createElement(o,Object.assign({className:(0,c.i)(i.Z.helperText,n)},s),t)};l.displayName="HelperText"},65673:(e,t,n)=>{n.d(t,{u:()=>d});var a=n(21988),r=n(93264),i=n(49945),c=n(38296),l=n(80965),s=n(69957),o=n(68778),u=n(43047);const m={default:"",indeterminate:i.Z.modifiers.indeterminate,warning:i.Z.modifiers.warning,success:i.Z.modifiers.success,error:i.Z.modifiers.error},d=e=>{var{children:t,className:n,component:d="div",variant:p="default",icon:f,isDynamic:v=!1,hasIcon:g=v}=e,h=(0,a._T)(e,["children","className","component","variant","icon","isDynamic","hasIcon"]);const b=d;return r.createElement(b,Object.assign({className:(0,c.i)(i.Z.helperTextItem,m[p],v&&i.Z.modifiers.dynamic,n)},h),f&&r.createElement("span",{className:(0,c.i)(i.Z.helperTextItemIcon),"aria-hidden":!0},f),g&&!f&&r.createElement("span",{className:(0,c.i)(i.Z.helperTextItemIcon),"aria-hidden":!0},("default"===p||"indeterminate"===p)&&r.createElement(l.ZP,null),"warning"===p&&r.createElement(s.ZP,null),"success"===p&&r.createElement(o.ZP,null),"error"===p&&r.createElement(u.ZP,null)),r.createElement("span",{className:(0,c.i)(i.Z.helperTextItemText)},t))};d.displayName="HelperTextItem"},49739:(e,t,n)=>{n.d(t,{K:()=>l});var a=n(21988),r=n(93264),i=n(73976),c=n(38296);const l=e=>{var{hasGutter:t=!1,className:n="",children:l=null,component:s="div"}=e,o=(0,a._T)(e,["hasGutter","className","children","component"]);const u=s;return r.createElement(u,Object.assign({},o,{className:(0,c.i)(i.Z.stack,t&&i.Z.modifiers.gutter,n)}),l)};l.displayName="Stack"},83826:(e,t,n)=>{n.d(t,{v:()=>l});var a=n(21988),r=n(93264),i=n(73976),c=n(38296);const l=e=>{var{isFilled:t=!1,className:n="",children:l=null}=e,s=(0,a._T)(e,["isFilled","className","children"]);return r.createElement("div",Object.assign({},s,{className:(0,c.i)(i.Z.stackItem,t&&i.Z.modifiers.fill,n)}),l)};l.displayName="StackItem"},80965:(e,t,n)=>{n.d(t,{jm:()=>r,V_:()=>i,ZP:()=>c});var a=n(40400);const r={name:"MinusIcon",height:512,width:448,svgPath:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",yOffset:0,xOffset:0},i=(0,a.IU)(r),c=i},49945:(e,t,n)=>{n.d(t,{Z:()=>a}),n.e(1338).then(n.t.bind(n,71338,23));const a={helperText:"pf-c-helper-text",helperTextItem:"pf-c-helper-text__item",helperTextItemIcon:"pf-c-helper-text__item-icon",helperTextItemText:"pf-c-helper-text__item-text",modifiers:{indeterminate:"pf-m-indeterminate",warning:"pf-m-warning",success:"pf-m-success",error:"pf-m-error",dynamic:"pf-m-dynamic"},themeDark:"pf-theme-dark"}},73976:(e,t,n)=>{n.d(t,{Z:()=>a}),n.e(3519).then(n.t.bind(n,53519,23));const a={modifiers:{fill:"pf-m-fill",gutter:"pf-m-gutter"},stack:"pf-l-stack",stackItem:"pf-l-stack__item"}},68940:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(4942),r=n(15861),i=n(29439),c=n(87757),l=n.n(c),s=n(93264),o=n.n(s),u=n(68774),m=n(68340),d=n(52643),p=n(29390),f=n(37619),v=n(69957),g=n(45697),h=n.n(g),b=n(93597),y=n(8027),O=n(28216),E=n(83215),w=n(60722),I=n(96354),N=n(38779),T=n(78140),Z=n(25834),_=function(e){var t=e.reviewObject,n=e.key;return o().createElement(u.D,null,o().createElement(N.D,{headingLevel:"h3"},o().createElement(m.x,{component:"b"},t.title)),o().createElement(Z.G,{component:Z.F.dl},t.rows.map((function(e){return o().createElement(s.Fragment,{key:e.title+n},o().createElement(T.T,{component:T.v.dt},e.title),o().createElement(T.T,{component:T.v.dd},e.value))}))))};_.propTypes={reviewObject:h().object,key:h().string};const D=_;var j=n(62410),x=n(98309);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t,n=e.updateModal,a=e.setUpdateModal,c=e.refreshTable,g=(0,s.useState)(null),h=(0,i.Z)(g,2),N=h[0],T=h[1],Z=(0,O.I0)(),_=n.deviceData.length>1,k=n.deviceData.map((function(e){return e.id})),S=_?n.deviceData.map((function(e){return e.display_name})):null==n||null===(t=n.deviceData[0])||void 0===t?void 0:t.display_name;(0,s.useEffect)((function(){var e;null!=n&&n.imageSetId?(0,b.dt)({id:n.imageSetId,q:{limit:1,sort_by:"-created_at",status:"SUCCESS"}}).then((function(e){return T(e.Data.images[0])})):(e=n.imageId,(0,b.Kz)({id:e}).then((function(e){var t;return(0,b.dt)({id:null==e||null===(t=e.image)||void 0===t?void 0:t.ImageSetID,q:{limit:1,sort_by:"-created_at"}})}))).then((function(e){return T(e.Data.images[0])}))}),[]);var U=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,y.g5)({DevicesUUID:k});case 3:Z(P({},(0,E.wN)({variant:"info",title:"Updating device",description:_?" ".concat(S.length," systems were added to the queue."):" ".concat(S," was added to the queue.")}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Z(P({},(0,E.wN)({variant:"danger",title:"Updating a device was unsuccessful",description:"Response: ".concat(e.t0.statusText)})));case 9:C(),c&&c();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),C=function(){a((function(e){return P(P({},e),{},{isOpen:!1})}))},R={title:"Update to version ".concat(null==N?void 0:N.image.Version),rows:[{title:"Image Name",value:null==N?void 0:N.image.Name},{title:"Version",value:null==N?void 0:N.image.Version},{title:"Created",value:o().createElement(j.Z,{date:null==N?void 0:N.image.CreatedAt})},{title:"Release",value:x.aN[null==N?void 0:N.image.Distribution]}]},A={title:"Changes from version ".concat((null==N?void 0:N.image.Version)-1),rows:[{title:"Added",value:(null==N?void 0:N.update_added)||0},{title:"Removed",value:(null==N?void 0:N.update_removed)||0},{title:"Updated",value:(null==N?void 0:N.update_updated)||0}]},M={fields:[{component:I.Z.PLAIN_TEXT,name:"description",label:o().createElement(u.D,null,o().createElement(m.x,null,"Update"," ",o().createElement("span",{className:"pf-u-font-weight-bold pf-u-font-size-md"},_?"".concat(S.length," systems"):S)," ","to latest version of the image linked to it."))},{component:I.Z.PLAIN_TEXT,name:"update-details",label:D({reviewObject:R,key:"update-details"})},{component:I.Z.PLAIN_TEXT,name:"package-details",label:D({reviewObject:A,key:"package-details"})},{component:I.Z.PLAIN_TEXT,name:"warning-text",label:o().createElement(u.D,{className:"pf-u-pt-md"},o().createElement(m.x,{style:{color:"var(--pf-global--palette--gold-500)"},component:"small"},o().createElement(v.ZP,null)," After the update is installed, the device will apply the changes."))}]};return o().createElement(o().Fragment,null,N?o().createElement(w.Z,{size:"medium",title:"Update system".concat(_?"s":""," to latest image version"),isOpen:n.isOpen,openModal:function(){return a((function(e){return P(P({},e),{},{isOpen:!1})}))},submitLabel:"Update Device",schema:M,onSubmit:U,reloadData:c}):o().createElement(p.Y,null,o().createElement(d.b,null,o().createElement(f.$,{isSVG:!0,diameter:"100px"}))))};S.propTypes={refreshTable:h().func,updateModal:h().shape({isOpen:h().bool.isRequired,deviceData:h().array.isRequired,imageData:h().object,imageId:h().number,imageSetId:h().number}).isRequired,setUpdateModal:h().func.isRequired};const U=S},49477:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(4942),r=n(15861),i=n(29439),c=n(87757),l=n.n(c),s=n(93264),o=n.n(s),u=n(69185),m=n(96354),d=n(52251),p=n(37619),f=n(45697),v=n.n(f),g=n(20873),h=n(94778),b=n(28216),y=n(83215),O=n(93597),E=n(48903),w=n(98309);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.navigateBack,n=e.reload,a=(0,s.useState)(),c=(0,i.Z)(a,2),f=c[0],v=c[1],I=(0,b.I0)(),T=(0,E.gV)("fleet-management.custom-repos"),Z=(0,E.gV)("fleet-management.temporary-releases"),_=function(){t(),n&&n()};return(0,s.useEffect)((function(){(0,r.Z)(l().mark((function e(){var t,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a||a.getUser().then((function(e){return v(null!=e?e:{})}));case 1:case"end":return e.stop()}}),e)})))()}),[]),f?o().createElement(u.Z,{onClose:_,customComponentMapper:{review:g.Z},onSubmit:function(e){var t=e.values;(0,e.setIsSaving)((function(){return!0}));var n=N(N({},t),{},{architecture:"x86_64"});(0,h.Es)(I,n,(function(e){I(N(N({},(0,y.wN)({variant:"info",title:"Created image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,O.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,y.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,y.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))}]}}}})),_()}))},defaultArch:"x86_64",initialValues:{version:0,release:Z?w.ml:w.az,includesCustomRepos:T},schema:{fields:[{component:m.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Create image"},showTitles:!0,title:"Create image",crossroads:["target-environment","release","imageType","third-party-repositories","imageOutput","imageSetDetails","includesCustomRepos"],fields:[d.oG,d.Ud,d.l9,d.jS,d.B9,d.j7,d.Sp]}]}}):o().createElement(p.$,null)};T.propTypes={navigateBack:v().func,reload:v().func},T.defaultProps={navigateBack:function(){}};const Z=T}}]);
//# sourceMappingURL=../sourcemaps/CreateImageWizard.d84d829744ec0dd5ef0a5d8478835e4f.js.map