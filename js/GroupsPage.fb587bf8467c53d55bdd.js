(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[734],{76422:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Je});var r,l=n(59713),o=n.n(l),a=n(63038),c=n.n(a),i=n(1427),u=n.n(i),s=n(69859),d=n(24350),m=n.n(d),p=n(94654),v="LOAD_GROUPS",f="LOAD_TRESHOLD",E="LOAD_DEVICES_INFO",g="LOAD_CANARIES_INFO",O=n.n(p)()([v,"LOAD_GROUP_DETAIL",f,E,g],(function(e){return[e,"".concat(e,"_PENDING"),"".concat(e,"_FULFILLED"),"".concat(e,"_REJECTED")]})),b=(m()(O,(function(e){return e})),n(319)),h=n.n(b),y=n(35451),P=n(84564),j=n(19694),L=n(36853),x=n(29988),D=n(22115),S=n(16730),w=n(12990),k=n(37655),T=n(4088),I=n(14206),_=["done","error","pending","unknown","updating","warning","notification"],C={done:{icon:y.default,color:T.Z.value},error:{icon:P.default,color:w.Z.value},pending:{icon:x.ZP},updating:{icon:D.ZP},unknown:{icon:S.ZP},warning:{icon:j.default,color:k.Z.value},notification:{icon:L.default,color:I.Z.value}},N=function(e,t){return Math.round(Math.random()*(t-e)+e)},R=function(){return Math.random().toString(36).substr(2,10)},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e10;return new Date(+new Date-Math.floor(Math.random()*e))},F=function(){return _[N(0,_.length)]},G=function(){return{uuid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),name:R(),sensors:N(0,5e3),is_secure:Boolean(Math.round(10*Math.random())%2),last_seen:A(),status:F()}},$=function(e){var t=e.perPage,n=e.page||1,r=t||20;return insights.chrome.auth.getUser().then((function(){return{results:h()(new Array(t)).map(G),meta:{count:200,limit:r*n,offset:r*(n-1)}}}))},U=n(75061),Z=n(25311);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const M=(0,Z.Gg)((r={},o()(r,"".concat(v,"_PENDING"),(function(e){return B(B({},e),{},{groups:[],isLoading:!0})})),o()(r,"".concat(v,"_FULFILLED"),(function(e,t){var n=t.payload;return B(B({},e),{},{isLoading:!1,groups:(null==n?void 0:n.results)||[],meta:(null==n?void 0:n.meta)||{}})})),r),{});var H;function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const z=(0,Z.Gg)((H={},o()(H,"".concat(f,"_PENDING"),(function(e){return q(q({},e),{},{threshold:{},isLoading:!0})})),o()(H,"".concat(f,"_FULFILLED"),(function(e,t){var n=t.payload;return q(q({},e),{},{threshold:null==n?void 0:n.results,isLoading:!1})})),H),{});var J;function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const X=(0,Z.Gg)((J={},o()(J,"".concat(E,"_PENDING"),(function(e){return Q(Q({},e),{},{devicesInfo:{},isLoading:!0})})),o()(J,"".concat(E,"_FULFILLED"),(function(e,t){var n=t.payload;return Q(Q({},e),{},{devicesInfo:null==n?void 0:n.results,isLoading:!1})})),J),{});var Y;function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ne=(0,Z.Gg)((Y={},o()(Y,"".concat(g,"_PENDING"),(function(e){return te(te({},e),{},{canariesInfo:{},isLoading:!0})})),o()(Y,"".concat(g,"_FULFILLED"),(function(e,t){var n=t.payload;return te(te({},e),{},{canariesInfo:null==n?void 0:n.results,isLoading:!1})})),Y),{});var re=n(14224),le=n(89583),oe=n(81159),ae=n(34023),ce=n(13877),ie=n(26577),ue=n(6202),se=n(47835),de=n(29515),me=n(62851),pe=n(49287),ve=n(18038),fe=n(2095),Ee=n(85962),ge=n(21015),Oe=n(8896),be=n(67463),he=n(34348),ye=n(20018),Pe=n(19017),je=n(53325),Le=n(63540),xe=n(24774),De=n(80256),Se=n(65395),we=n(55399),ke=n(67154),Te=n.n(ke),Ie=n(6479),_e=n.n(Ie),Ce=n(45697),Ne=n.n(Ce),Re=function(e){var t,n,r=e.status,l=_e()(e,["status"]),o=(null==C||null===(t=C[r])||void 0===t?void 0:t.icon)||S.ZP;return u().createElement(o,Te()({},l,{color:null==C||null===(n=C[r])||void 0===n?void 0:n.color}))};Re.propTypes={status:Ne().oneOf(_)};const Ae=Re;var Fe=n(75663),Ge=n(53934),$e=function(e){var t=e.isSecure,n=_e()(e,["isSecure"]),r=t?Fe.ZP:Ge.ZP;return u().createElement(r,n)};$e.propTypes={isSecure:Ne().bool},$e.defaultProps={isSecure:!1};const Ue=$e;var Ze=n(14905),Ve=n(17908);const Be=function(){var e,t,n,r,l,a,c,d,m=(0,s.useDispatch)(),p=(0,s.useSelector)((function(e){var t=e.thresholdReducer;return(null==t?void 0:t.threshold)||{}})),v=(0,s.useSelector)((function(e){var t=e.thresholdReducer;return null==t?void 0:t.isLoading})),O=(0,s.useSelector)((function(e){var t=e.devicesInfoReducer;return null==t?void 0:t.isLoading})),b=(0,s.useSelector)((function(e){var t=e.devicesInfoReducer;return(null==t?void 0:t.devicesInfo)||{}})),y=(0,s.useSelector)((function(e){var t=e.canariesInfoReducer;return(null==t?void 0:t.canariesInfo)||{}})),P=(0,s.useSelector)((function(e){var t=e.canariesInfoReducer;return null==t?void 0:t.isLoading}));return(0,i.useEffect)((function(){var e,t;(0,U.JH)().register({thresholdReducer:z,devicesInfoReducer:X,canariesInfoReducer:ne}),m({type:f,payload:(e=N(2,5),t=100,Promise.resolve({results:h()(new Array(e)).map((function(){var e=N(0,t);return t-=e,o()({},R(),e)}))}))}),m({type:E,payload:Promise.resolve({results:{requiredApproval:N(0,100),orphaned:N(0,100),delivering:N(0,100)}})}),m({type:g,payload:Promise.resolve({results:{sensors:{time:A(),status:F()},scanners:{time:A(),status:F()},kiosks:{time:A(),status:F()},antenna:{time:A(),status:F()}}})})}),[]),u().createElement(pe.r,{hasGutter:!0},u().createElement(ve.P,{span:3},u().createElement(fe.Card,null,u().createElement(ge.O,null,u().createElement(he.Title,{headingLevel:"h3"},"Health threshold")),u().createElement(Ee.CardBody,null,!1===v?u().createElement(Ze.Td,{ariaDesc:"Health threshold",ariaTitle:"Health threshold",constrainToVisibleArea:!0,legendOrientation:"vertical",legendPosition:"right",height:230,width:450,data:p.map((function(e){var t,n;return{x:null===(t=Object.keys(e))||void 0===t?void 0:t[0],y:null===(n=Object.values(e))||void 0===n?void 0:n[0]}})),legendData:p.map((function(e){var t,n;return{name:"".concat(null===(t=Object.keys(e))||void 0===t?void 0:t[0],": ").concat(null===(n=Object.values(e))||void 0===n?void 0:n[0])}})),padding:{bottom:20,left:20,right:140,top:20},labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},themeColor:Ve.nz.multiOrdered}):u().createElement(Oe.b,null,u().createElement(be.Spinner,null))))),u().createElement(ve.P,{span:3},u().createElement(fe.Card,null,u().createElement(ge.O,null,u().createElement(he.Title,{headingLevel:"h3"},"Devices info")),u().createElement(Ee.CardBody,null,u().createElement(ye.TextContent,null,u().createElement(Pe.Gn,{component:Pe.F_.dl},u().createElement(je.Ts,{component:je.v$.dt},!1===O?u().createElement(Le.Text,{component:Le.TextVariants.h1},u().createElement(we.Link,{to:"/groups"},null==b?void 0:b.requiredApproval)):u().createElement(ie.O,null)),u().createElement(je.Ts,{component:je.v$.dd},"Required approvals"),u().createElement(je.Ts,{component:je.v$.dt},!1===O?u().createElement(Le.Text,{component:Le.TextVariants.h1},u().createElement(we.Link,{to:"/groups"},null==b?void 0:b.orphaned)):u().createElement(ie.O,null)),u().createElement(je.Ts,{component:je.v$.dd},"Orphaned devices"),u().createElement(je.Ts,{component:je.v$.dt},!1===O?u().createElement(Le.Text,{component:Le.TextVariants.h1},u().createElement(we.Link,{to:"/groups"},null==b?void 0:b.delivering)):u().createElement(ie.O,null)),u().createElement(je.Ts,{component:je.v$.dd},"Devices on the way")))))),u().createElement(ve.P,{span:3},u().createElement(fe.Card,null,u().createElement(ge.O,null,u().createElement(he.Title,{headingLevel:"h3"},"Last Canaries")),u().createElement(Ee.CardBody,null,u().createElement(ye.TextContent,null,u().createElement(Pe.Gn,{component:Pe.F_.dl},u().createElement(je.Ts,{component:je.v$.dt},u().createElement(we.Link,{to:"/groups"},"Sensors")),u().createElement(je.Ts,{component:je.v$.dd},!1===P?u().createElement(xe.Level,null,u().createElement(De.LevelItem,null,u().createElement(Se.t,{date:null==y||null===(e=y.sensors)||void 0===e?void 0:e.time})),u().createElement(De.LevelItem,null,u().createElement(Ae,{status:null==y||null===(t=y.sensors)||void 0===t?void 0:t.status}))):u().createElement(ie.O,null)),u().createElement(je.Ts,{component:je.v$.dt},u().createElement(we.Link,{to:"/groups"},"Scanners")),u().createElement(je.Ts,{component:je.v$.dd},!1===P?u().createElement(xe.Level,null,u().createElement(De.LevelItem,null,u().createElement(Se.t,{date:null==y||null===(n=y.scanners)||void 0===n?void 0:n.time})),u().createElement(De.LevelItem,null,u().createElement(Ae,{status:null==y||null===(r=y.scanners)||void 0===r?void 0:r.status}))):u().createElement(ie.O,null)),u().createElement(je.Ts,{component:je.v$.dt},u().createElement(we.Link,{to:"/groups"},"Kiosks")),u().createElement(je.Ts,{component:je.v$.dd},!1===P?u().createElement(xe.Level,null,u().createElement(De.LevelItem,null,u().createElement(Se.t,{date:null==y||null===(l=y.kiosks)||void 0===l?void 0:l.time})),u().createElement(De.LevelItem,null,u().createElement(Ae,{status:null==y||null===(a=y.kiosks)||void 0===a?void 0:a.status}))):u().createElement(ie.O,null)),u().createElement(je.Ts,{component:je.v$.dt},u().createElement(we.Link,{to:"/groups"},"Antenna")),u().createElement(je.Ts,{component:je.v$.dd},!1===P?u().createElement(xe.Level,null,u().createElement(De.LevelItem,null,u().createElement(Se.t,{date:null==y||null===(c=y.antenna)||void 0===c?void 0:c.time})),u().createElement(De.LevelItem,null,u().createElement(Ae,{status:null==y||null===(d=y.antenna)||void 0===d?void 0:d.status}))):u().createElement(ie.O,null))))))))};var Me=n(34723),He=[{title:"Name of group",transforms:[Me.sortable,(0,Me.cellWidth)("max")]},{title:"Number of devices",transforms:[Me.sortable]},{title:"Secure",transforms:[Me.sortable,(0,Me.cellWidth)(10)]},{title:"Last seen",transforms:[Me.sortable,(0,Me.cellWidth)(15)]},{title:"Status",transforms:[Me.sortable,(0,Me.cellWidth)(10)]}];const We=function(){var e=(0,i.useState)({}),t=c()(e,2),n=t[0],r=t[1],l=(0,s.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.groups}));return u().createElement(Me.Table,{"aria-label":"Groups table",actions:[{title:"Adopt",onClick:console.log},{title:"Reject",onClick:console.log}],cells:He,sortBy:n,onSort:function(e,t,n){return r((function(){return{index:t,direction:n}}))},rows:l.map((function(e){return{cells:[{title:u().createElement(we.Link,{to:"/groups/".concat(null==e?void 0:e.uuid)},null==e?void 0:e.name)},null==e?void 0:e.sensors,{title:u().createElement(Ue,{isSecure:null==e?void 0:e.is_secure})},{title:u().createElement(Se.t,{date:null==e?void 0:e.last_seen})},{title:u().createElement(Ae,{status:null==e?void 0:e.status})}]}}))},u().createElement(Me.TableHeader,null),u().createElement(Me.TableBody,null))};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Je=function(){var e=(0,i.useState)({}),t=c()(e,2),n=t[0],r=t[1],l=(0,s.useDispatch)(),o=(0,s.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.isLoading})),a=(0,s.useSelector)((function(e){var t=e.groupsReducer;return(null==t?void 0:t.meta)||{page:1}}));return(0,i.useEffect)((function(){(0,U.JH)().register({groupsReducer:M}),l(function(){return{type:v,payload:$({perPage:arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,page:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1})}}())}),[]),u().createElement(i.Fragment,null,u().createElement(re.mr,{className:"pf-m-light"},u().createElement(re.BV,{title:"Available groups"})),u().createElement(le.o,{className:"edge-groups"},u().createElement(oe.K,{hasGutter:!0},u().createElement(ae.v,{className:"edge-groups__info"},u().createElement(Be,null)),u().createElement(ae.v,{isFilled:!0},u().createElement(se.U,!1===o?{pagination:{itemCount:null==a?void 0:a.count,page:(null==a?void 0:a.offset)/(null==a?void 0:a.limit)+1,perPage:Number(null==a?void 0:a.limit),isCompact:!0},dedicatedAction:u().createElement(ue.Button,{onClick:function(){return console.log("ff")},isDisabled:!1!==o},"Add group"),filterConfig:{items:[{label:"Name",type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return r(ze(ze({},n||{}),{},{name:t}))},value:(null==n?void 0:n.name)||"",placeholder:"Filter by name"}},{label:"Security",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return r(ze(ze({},n||{}),{},{name:t}))},items:[{value:"isSecure",label:"Secure"},{value:"nonSecure",label:"Not secure"}],value:(null==n?void 0:n.security)||[]}},{label:"Status",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return r(ze(ze({},n||{}),{},{name:t}))},items:_.map((function(e){return{value:e,label:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}})),value:(null==n?void 0:n.status)||[]}}]}}:{pagination:u().createElement(ie.O,null)}),!1===o?u().createElement(We,null):u().createElement(me.c,{colSize:5,rowSize:15}),u().createElement(de.f,{isFooter:!0},!1===o&&u().createElement(ce.Pagination,{itemCount:null==a?void 0:a.count,page:(null==a?void 0:a.offset)/(null==a?void 0:a.limit)+1,perPage:Number(null==a?void 0:a.limit),dropDirection:"up"}))))))}}}]);
//# sourceMappingURL=GroupsPage.fb587bf8467c53d55bdd.js.map