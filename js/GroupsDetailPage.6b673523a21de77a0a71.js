"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[673],{38857:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ce});var a=n(4942),r=n(15861),l=n(29439),i=n(87757),o=n.n(i),u=n(93264),s=n.n(u),c=n(75662),m=n(50693),d=n(16475),p=n(64029),v=n(32835),f=n(69174),g=n(52643),E=n(2372),y=n(56455),b=n(48716),h=n(38775),O=n(53895),D=n(82041),I=n(87462),P=n(91290),S=n(35224),_=n(79706),R=n(47173),w=n(45697),k=n.n(w),C=function(e){var t=e.title,n=e.content;return s().createElement(s().Fragment,null,s().createElement("span",null,t),s().createElement(_.J,{headerContent:s().createElement("div",null,t),bodyContent:s().createElement("div",null,n)},s().createElement(R.zx,{variant:"plain","aria-label":"Action for ".concat(t),className:"ins-active-general_information__popover-icon"},s().createElement(P.ZP,null))))};C.propTypes={title:k().string,content:k().string};const j=C;var N=n(35451),U=n(84564),Z=n(18802),T=function(e){var t=e.status;return"green"===t?s().createElement(s().Fragment,null,s().createElement(N.ZP,{color:"green",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-success-color-200"},"Passed")):"red"===t?s().createElement(s().Fragment,null,s().createElement(U.ZP,{color:"red",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-danger-color-200"},"Failed and reverted")):s().createElement(s().Fragment,null,s().createElement(Z.ZP,{className:"pf-u-mr-sm"}),s().createElement("span",null,"Waiting for update"))};T.propTypes={status:k().string};const x=T;var L=n(58753),A=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(736)]).then(n.bind(n,92373))})),z=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(736)]).then(n.bind(n,20786))})),M=(0,u.lazy)((function(){return n.e(252).then(n.bind(n,18569))})),F=(0,u.lazy)((function(){return n.e(252).then(n.bind(n,91768))})),B=(0,u.lazy)((function(){return n.e(252).then(n.bind(n,38514))})),G=(0,u.lazy)((function(){return n.e(252).then(n.bind(n,10392))})),W=(0,u.lazy)((function(){return Promise.all([n.e(252),n.e(570)]).then(n.bind(n,84570))}));const q=function(){var e=(0,D.useSelector)((function(e){var t=e.permissionsReducer;return null==t?void 0:t.writePermissions})),t=(0,D.useSelector)((function(e){var t,n=e.systemProfileStore;return{greenbootStatus:null==n||null===(t=n.systemProfile)||void 0===t?void 0:t.greenboot_status,rhcHealth:null}})),n=t.greenbootStatus,a=t.rhcHealth;return s().createElement(u.Suspense,{fallback:""},s().createElement(A,{store:(0,D.useStore)(),writePermissions:e,SystemCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(z,(0,I.Z)({},e,{hasCPUs:!1,hasSockets:!1,hasCores:!1,hasCPUFlags:!1,hasRAM:!1,hasSAP:!1,extra:[{title:s().createElement(j,{title:"GreenBoot Status",content:"This is a description about greenboot status"}),value:s().createElement(x,{status:n})}]})))},OperatingSystemCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""}," ",s().createElement(G,e))},BiosCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""}," ",s().createElement(W,e))},InfrastructureCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(F,e))},ConfigurationCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(M,(0,I.Z)({},e,{hasKernelModules:!0})))},CollectionCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(B,(0,I.Z)({},e,{extra:[{title:"RHC Health (broker functioning)",value:L.qi[null==a?void 0:a.toUpperCase()]||s().createElement(S.u,{content:"Unknown service status"},s().createElement(P.ZP,{className:"ins-c-inventory__detail--unknown"}))}]})))}}))};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=(0,n(18546).Gg)({LOAD_ENTITY_FULFILLED:function(e){return V(V({},e),{},{loaded:!0,activeApps:[{title:"General information",name:"general_information",component:q}]})}}),K=n(59245),$=n(32002),Y=n(14638),Q=n(28883),X=n(29873),ee=n(33902),te=n(22663),ne=n(87116),ae=n(86350),re=n(94768),le=n(80236),ie=n(68340),oe=n(68774),ue=n(78140),se=n(25834),ce=n(29390),me=n(68920),de=n(5230),pe=n(94778),ve=n(83215),fe=n(66702);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t,n,a,r,l,i,o=e.updateCveModal,c=e.setUpdateCveModal,m=e.setReload,d=(0,D.useDispatch)(),p=(0,u.useContext)(K.g).getRegistry,v=(0,D.useSelector)((function(e){var t=e.imageDetailReducer;return{data:(null==t?void 0:t.data)||null}}),D.shallowEqual).data;(0,u.useEffect)((function(){var e=p().register({imageDetailReducer:de.OD});return(null==o?void 0:o.imageId)&&(0,pe.J_)(d,null==o?void 0:o.imageId),function(){return e()}}),[d]);var f=function(){c((function(e){return Ee(Ee({},e),{},{isOpen:!1})}))};return v?s().createElement(le.u,{variant:"medium",title:"Update image: ".concat(null==v||null===(t=v.image)||void 0===t?void 0:t.Name),description:"Review the information and click Create image to start the build process",isOpen:o.isOpen,onClose:f,actions:[s().createElement(R.zx,{key:"confirm",variant:"primary",onClick:function(){var e,t,n,a,r,l,i,o,u,s,c={Id:null==v||null===(e=v.image)||void 0===e?void 0:e.ID,description:null==v||null===(t=v.image)||void 0===t?void 0:t.Description,name:null==v||null===(n=v.image)||void 0===n?void 0:n.Name,version:(null==v||null===(a=v.image)||void 0===a?void 0:a.Version)+1,architecture:"x86_64",credentials:null==v||null===(r=v.image)||void 0===r?void 0:r.Installer.SshKey,username:null==v||null===(l=v.image)||void 0===l?void 0:l.Installer.Username,imageType:null==v||null===(i=v.image)||void 0===i?void 0:i.OutputTypes,"selected-packages":null==v||null===(o=v.image)||void 0===o||null===(u=o.Packages)||void 0===u?void 0:u.map((function(e){return{name:e.Name}})),release:null==v||null===(s=v.image)||void 0===s?void 0:s.Distribution};f(),m(!0),(0,pe.Es)(d,c,(function(e){var t,n;d(Ee(Ee({},(0,ve.wN)({variant:"info",title:"Update image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,fe.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,ve.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,ve.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))},function(e){return(0,pe.n9)(e)}]}}}})),(0,pe.n9)(d),d((0,pe.Fj)({name:null==v||null===(t=v.image)||void 0===t?void 0:t.Name,id:null==v||null===(n=v.image)||void 0===n?void 0:n.ID}))}))}},"Create Image"),s().createElement(R.zx,{key:"cancel",variant:"link",onClick:f},"Cancel")]},s().createElement(oe.D,null,s().createElement(ue.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Details")),s().createElement(se.G,{component:se.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Name"),s().createElement(ue.T,{component:ue.v.dd},null==v||null===(n=v.image)||void 0===n?void 0:n.Name),s().createElement(ue.T,{component:ue.v.dt},"Version"),s().createElement(ue.T,{component:ue.v.dd},(null==v||null===(a=v.image)||void 0===a?void 0:a.Version)+1),s().createElement(ue.T,{component:ue.v.dt},"Description"),s().createElement(ue.T,{component:ue.v.dd},null==v||null===(r=v.image)||void 0===r?void 0:r.Description)),s().createElement(ue.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Output")),s().createElement(se.G,{component:se.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Release"),s().createElement(ue.T,{component:ue.v.dd},me.Ei[null==v||null===(l=v.image)||void 0===l?void 0:l.Distribution]),s().createElement(ue.T,{component:ue.v.dt},"Output type"),s().createElement(ue.T,{component:ue.v.dd},me.bd[null==v||null===(i=v.image)||void 0===i?void 0:i.ImageType])),s().createElement(ue.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Packages")),s().createElement(se.G,{component:se.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Updated"),s().createElement(ue.T,{className:"pf-u-pl-lg",component:ue.v.dd},null==o?void 0:o.cveCount)))):s().createElement(ce.Y,null,s().createElement(g.b,null,s().createElement(E.$,{isSVG:!0,diameter:"100px"})))};ye.propTypes={updateCveModal:k().shape({isOpen:k().bool.isRequired,imageId:k().string,cveCount:k().number}).isRequired,setUpdateCveModal:k().func.isRequired,setReload:k().bool};const be=ye;function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(e){var t=e.systemProfile,n=e.setUpdateModal,a=e.imageId,i=e.setReload,m=(0,c.useRouteMatch)("/fleet-management/:inventoryId").params,d=(0,u.useContext)(K.g).getRegistry,p=(0,u.useState)({isOpen:!1,imageId:null,cveCount:0}),v=(0,l.Z)(p,2),f=v[0],g=v[1],E=(0,u.useState)(null),y=(0,l.Z)(E,2),b=y[0],h=y[1],O=(0,u.useState)(null),D=(0,l.Z)(O,2),I=D[0],P=D[1],S=(0,u.useState)("noAlert"),_=(0,l.Z)(S,2),w=_[0],k=_[1];(0,u.useEffect)((function(){g((function(e){return Oe(Oe({},e),{},{imageId:a})}))}),[a]),(0,u.useEffect)((function(){(0,r.Z)(o().mark((function e(){var n,a,r,l,i,u,s,c,m,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.system_profile){e.next=2;break}return e.abrupt("return");case 2:return m={id:null==t||null===(n=t.system_profile)||void 0===n||null===(a=n.image_data)||void 0===a||null===(r=a.ImageInfo)||void 0===r||null===(l=r.Image)||void 0===l?void 0:l.ImageSetID},e.next=5,(0,fe.dt)(m);case 5:d=e.sent,P(null==d||null===(i=d.Data)||void 0===i||null===(u=i.images)||void 0===u||null===(s=u[0])||void 0===s||null===(c=s.image)||void 0===c?void 0:c.Status);case 7:case"end":return e.stop()}}),e)})))()}),[t]),(0,u.useEffect)((function(){var e;(null==b||!b.isLoading)&&(null==b||null===(e=b.meta)||void 0===e||!e.filter)&&g((function(e){var t;return Oe(Oe({},e),{},{cveCount:null==b||null===(t=b.data)||void 0===t?void 0:t.length})})),k((function(e){return function(e,t,n,a,r){var l,i,o,u,s,c,m,d;return null!=e&&e.isLoading||null!=e&&null!==(l=e.meta)&&void 0!==l&&l.filter||null==t||!t.system_profile?r:!(null!=e&&null!==(i=e.data)&&void 0!==i&&i.length)>0||!a?"noAlert":"BUILDING"===(null==t||null===(o=t.system_profile)||void 0===o?void 0:o.status)||"CREATED"===(null==t||null===(u=t.system_profile)||void 0===u?void 0:u.status)?"systemUpdating":(null==t||null===(s=t.system_profile)||void 0===s||null===(c=s.image_data)||void 0===c||null===(m=c.ImageInfo)||void 0===m||null===(d=m.UpdatesAvailable)||void 0===d?void 0:d.length)>0?"updateDevice":"BUILDING"===n||"CREATED"===n?"imageBuilding":"updateImage"}(b,t,I,a,e)}))}),[b,t,I]);var C={updateImage:s().createElement(ne.b,{className:"pf-u-mb-md",variant:"info",isInline:!0,title:"To remediate CVEs, update the image.",actionLinks:s().createElement(R.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){g((function(e){return Oe(Oe({},e),{},{isOpen:!0})}))}},"Update Image")}),imageBuilding:s().createElement(ne.b,{className:"pf-u-mb-md",customIcon:s().createElement(re.ZP,null),variant:"info",isInline:!0,title:"Image build in progress. Once completed, you'll need to update your device."}),updateDevice:s().createElement(ne.b,{className:"pf-u-mb-md",variant:"warning",isInline:!0,title:" Image build completed. Update device to the newest image version to remediate CVEs.",actionLinks:s().createElement(R.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){n((function(e){return Oe(Oe({},e),{},{isOpen:!0})}))}},"Update Device")}),systemUpdating:s().createElement(ne.b,{className:"pf-u-mb-md",customIcon:s().createElement(re.ZP,null),variant:"info",isInline:!0,title:"Device updating. No additional actions required."}),noAlert:s().createElement(s().Fragment,null)};return s().createElement(s().Fragment,null,s().createElement(ae.Z,{className:"add-100vh"},C[w],s().createElement(te.Z,{appName:"vulnerability",module:"./SystemDetail",getRegistry:d,customIntlProvider:!0,entity:{id:m.inventoryId},canSelect:!1,canEditPairStatus:!1,canManageColumns:!1,linkToCustomerPortal:!0,defaultColumns:["synopsis","public_date","impact","cvss_score","advisory"],filters:["filter","security_rule","known_exploit","impact","cvss_score","advisory"],customAction:function(e){h(e)}})),f.isOpen&&s().createElement(be,{updateCveModal:f,setUpdateCveModal:g,setReload:i}))};De.propTypes={imageId:k().string,systemProfile:k().object,setUpdateModal:k().func,setReload:k().bool};const Ie=De;var Pe=function(e){var t=e.systemProfile,n=e.imageId,a=e.setUpdateModal,r=e.setReload,i=(0,u.useState)(0),o=(0,l.Z)(i,2),c=o[0],m=o[1];return s().createElement("div",{className:"edge-c-device--detail add-100vh"},s().createElement(Y.m,{className:"pf-u-ml-md",activeKey:c,onSelect:function(e,t){return m(t)}},s().createElement(Q.O,{eventKey:0,title:s().createElement(X.T,null,"Details")},s().createElement(ee.Z,{showTags:!0,fallback:""})),s().createElement(Q.O,{eventKey:1,title:s().createElement(X.T,null,"Vulnerability")},s().createElement(Ie,{systemProfile:t,setUpdateModal:a,imageId:n,setReload:r}))))};Pe.propTypes={imageId:k().string,systemProfile:k().object,setUpdateModal:k().func,setReload:k().bool};const Se=Pe;var _e=n(19694);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=s().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(735),n.e(344)]).then(n.bind(n,79358))}));const Ce=function(){var e,t,n,a,i,I,P,S,_,R,w,k,C,j,U,T,x,L,A,z,M,F,B,G,W,q,J,V,Y,Q,X=(0,u.useState)(null),ee=(0,l.Z)(X,2),te=ee[0],ne=ee[1],ae=(0,u.useContext)(K.g).getRegistry,re=(0,c.useParams)(),le=re.inventoryId,ie=re.uuid,oe=(0,D.useSelector)((function(e){var t=e.entityDetails;return null==t?void 0:t.entity})),ue=(0,D.useSelector)((function(e){var t=e.groupsDetailReducer;return null==t?void 0:t.name})),se=(0,D.useSelector)((function(e){var t,n=e.entityDetails;return null==n||null===(t=n.entity)||void 0===t?void 0:t.id})),ce=(0,u.useState)({isOpen:!1,deviceData:null}),me=(0,l.Z)(ce,2),de=me[0],pe=me[1],ve=(0,u.useState)(!0),ge=(0,l.Z)(ve,2),Ee=ge[0],ye=ge[1],be=(0,u.useState)(!1),he=(0,l.Z)(be,2),Oe=he[0],De=he[1];return(0,u.useEffect)((function(){var e,t;insights.chrome.registerModule("inventory"),null===(e=insights.chrome)||void 0===e||null===(t=e.hideGlobalFilter)||void 0===t||t.call(e,!0),insights.chrome.appAction("system-detail")}),[]),(0,u.useEffect)((function(){(0,r.Z)(o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=oe&&oe.display_name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,fe.Z4)(se);case 4:a=e.sent,ye(!1),pe((function(e){var t,n;return we(we({},e),{},{deviceData:{display_name:oe.display_name,id:oe.id,system_profile:{image_data:a,status:null==a||null===(t=a.UpdateTransactions)||void 0===t||null===(n=t[a.UpdateTransactions.length-1])||void 0===n?void 0:n.Status}}})})),ne(null==a||null===(t=a.ImageInfo)||void 0===t||null===(n=t.Image)||void 0===n?void 0:n.ID);case 8:case"end":return e.stop()}}),e)})))()}),[oe,Oe]),(0,u.useEffect)((function(){var e,t,n;null===(e=insights)||void 0===e||null===(t=e.chrome)||void 0===t||null===(n=t.appObjectId)||void 0===n||n.call(t,le)}),[le]),s().createElement(s().Fragment,null,s().createElement(h.Z,{hideInvLink:!0,showTags:!0,onLoad:function(e){var t=e.mergeWithDetail;ae().register(we({systemProfileStore:$.ZP},t(H)))}},s().createElement(b.Z,null,s().createElement(p.a,{ouiaId:"systems-list"},s().createElement(v.g,null,s().createElement(c.Link,{to:ie?"/groups":"/fleet-management"},ie?"Groups":"Fleet management")),ie&&s().createElement(v.g,null,ue?s().createElement(c.Link,{to:"/groups/".concat(ie)},ue):s().createElement(y.Z,{size:y.i.xs})),s().createElement(v.g,{isActive:!0},s().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},(null==oe?void 0:oe.display_name)||s().createElement(y.Z,{size:y.i.xs})))),s().createElement(O.Z,{fallback:"",actions:[{title:"Update",isDisabled:"BUILDING"===(null===(e=de.deviceData)||void 0===e||null===(t=e.system_profile)||void 0===t||null===(n=t.image_data)||void 0===n||null===(a=n.UpdateTransactions)||void 0===a||null===(i=a[(null===(I=de.deviceData)||void 0===I||null===(P=I.system_profile)||void 0===P||null===(S=P.image_data)||void 0===S?void 0:S.UpdateTransactions.length)-1])||void 0===i?void 0:i.Status)||"CREATED"===(null===(_=de.deviceData)||void 0===_||null===(R=_.system_profile)||void 0===R||null===(w=R.image_data)||void 0===w||null===(k=w.UpdateTransactions)||void 0===k||null===(C=k[(null===(j=de.deviceData)||void 0===j||null===(U=j.system_profile)||void 0===U||null===(T=U.image_data)||void 0===T?void 0:T.UpdateTransactions.length)-1])||void 0===C?void 0:C.Status)||!(null!==(x=de.deviceData)&&void 0!==x&&null!==(L=x.system_profile)&&void 0!==L&&null!==(A=L.image_data)&&void 0!==A&&null!==(z=A.ImageInfo)&&void 0!==z&&null!==(M=z.UpdatesAvailable)&&void 0!==M&&M.length)>0,onClick:function(){pe((function(e){return we(we({},e),{},{isOpen:!0})}))}}],hideBack:!0,hideInvDrawer:!0}),Ee?s().createElement(y.Z,{size:y.i.xs}):"BUILDING"===(null==de||null===(F=de.deviceData)||void 0===F||null===(B=F.system_profile)||void 0===B?void 0:B.status)||"CREATED"===(null==de||null===(G=de.deviceData)||void 0===G||null===(W=G.system_profile)||void 0===W?void 0:W.status)?s().createElement(f._,{className:"pf-u-mt-sm",color:"blue",icon:s().createElement(Z.ZP,null)},"Updating"):(null==de||null===(q=de.deviceData)||void 0===q||null===(J=q.system_profile)||void 0===J||null===(V=J.image_data)||void 0===V||null===(Y=V.ImageInfo)||void 0===Y||null===(Q=Y.UpdatesAvailable)||void 0===Q?void 0:Q.length)>0?s().createElement(f._,{className:"pf-u-mt-sm",color:"orange",icon:s().createElement(_e.ZP,null)},"Update Available"):s().createElement(f._,{className:"pf-u-mt-sm",color:"green",icon:s().createElement(N.ZP,{color:"green"})},"Running")),s().createElement(m.r,{gutter:"md"},s().createElement(d.P,{span:12},s().createElement(Se,{systemProfile:null==de?void 0:de.deviceData,imageId:te,setUpdateModal:pe,setReload:De}))),de.isOpen&&s().createElement(u.Suspense,{fallback:s().createElement(g.b,null,s().createElement(E.$,null))},s().createElement(ke,{navigateBack:function(){history.push({pathname:history.location.pathname}),pe((function(e){return we(we({},e),{},{isOpen:!1})}))},setUpdateModal:pe,updateModal:de,refreshTable:function(){return De(!0)}}))))}},75220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var a=n(15861),r=n(93433),l=n(4942),i=n(29439),o=n(87757),u=n.n(o),s=n(93264),c=n.n(s),m=n(82041),d=n(75662),p=n(48716),v=n(39173),f=n(86350),g=n(33739),E=n(94778),y=n(59245),b=n(58061),h=n(28191),O=n(92298),D=n(32203),I=n(70),P=n(62394),S=n(47173),_=n(52643),R=n(2372),w=n(50693),k=n(16475),C=n(49739),j=n(83826),N=n(45697),U=n.n(N),Z=function(e){var t=e.orphaned,n=e.active,a=e.noReports,r=e.neverReported;return c().createElement(D.Z,{className:"tiles-card"},c().createElement(I.l,null,"Device summary"),c().createElement(P.e,null,c().createElement(w.r,null,c().createElement(k.P,{span:6},c().createElement(C.K,{hasGutter:!0},c().createElement(j.v,null,c().createElement(S.zx,{isDisabled:!0,isInline:!0,className:"pf-u-pr-md",variant:"link"},n)," ","Active"),c().createElement(j.v,null,c().createElement(S.zx,{isDisabled:!0,isInline:!0,className:"pf-u-pr-md",variant:"link"},t)," ","Orphaned"))),c().createElement(k.P,{span:6},c().createElement(C.K,{hasGutter:!0},c().createElement(j.v,null,c().createElement(S.zx,{isDisabled:!0,isInline:!0,className:"pf-u-pr-md",variant:"link"},a),"Stale"),c().createElement(j.v,null,c().createElement(S.zx,{isDisabled:!0,isInline:!0,className:"pf-u-pr-md",variant:"link"},r),"Registered but never reported"))))))};Z.propTypes={orphaned:U().number,active:U().number,noReports:U().number,neverReported:U().number};const T=function(){var e=(0,m.useSelector)((function(e){var t=e.deviceSummaryReducer;return{isLoading:void 0===(null==t?void 0:t.isLoading)||(null==t?void 0:t.isLoading),hasError:(null==t?void 0:t.hasError)||!1,data:(null==t?void 0:t.data)||null}}),m.shallowEqual),t=e.isLoading,n=e.hasError,a=e.data;return t?c().createElement(D.Z,{className:"tiles-card"},c().createElement(I.l,null,"Device summary information"),c().createElement(P.e,null,c().createElement(_.b,null,c().createElement(R.$,null)))):n?c().createElement(D.Z,{className:"tiles-card"},c().createElement(I.l,null,"Device summary information"),c().createElement(P.e,null,a)):c().createElement(Z,{orphaned:a.orphaned,active:a.active,noReports:a.noReports,neverReported:a.neverReported})};var x=n(5230),L=function(){var e=(0,s.useContext)(y.g).getRegistry,t=(0,m.useDispatch)();return(0,s.useEffect)((function(){var n=e().register({imagesReducer:x.b4,deviceSummaryReducer:x.mR});return(0,E.lL)(t),(0,E.MB)(t),function(){return n()}}),[t]),c().createElement(h.k,{className:"tiles"},c().createElement(O.B,null,c().createElement(T,null)))};L.propTypes={onNewImageClick:U().func};var A=n(79851),z=n(34512),M=n(35451),F=n(18802),B=n(87673),G=n(19694),W=n(37655),q=n(17860),J=function(e){var t,n,a,r=e.imageData,l=e.rpm_ostree_deployments,i=r||{},o=i.UpdateTransactions,u=i.ImageInfo;return void 0===(null==l?void 0:l.length)?c().createElement(A.P,null,c().createElement(z.J,{className:"pf-u-mr-sm"},c().createElement(B.ZP,{color:"grey"})),c().createElement(z.J,null,"Unspecified")):l[0].booted?"BUILDING"===(null==o||null===(t=o[o.length-1])||void 0===t?void 0:t.Status)||"CREATED"===(null==o||null===(n=o[o.length-1])||void 0===n?void 0:n.Status)?c().createElement(A.P,null,c().createElement(z.J,{className:"pf-u-mr-sm"},c().createElement(F.ZP,{color:q.Z.value})),c().createElement(z.J,null,"Updating")):(null==u||null===(a=u.UpdatesAvailable)||void 0===a?void 0:a.length)>0?c().createElement(A.P,null,c().createElement(z.J,{className:"pf-u-mr-sm"},c().createElement(G.ZP,{color:W.Z.value})),c().createElement(z.J,{className:"pf-u-warning-color-200"},"Update Available")):c().createElement(A.P,null,c().createElement(z.J,{className:"pf-u-mr-sm"},c().createElement(M.ZP,{color:"green"})),c().createElement(z.J,null,"Running")):c().createElement(A.P,null,c().createElement(z.J,{className:"pf-u-mr-sm"},c().createElement(F.ZP,{color:"blue"})),c().createElement(z.J,null,"Booting"))};J.propTypes={id:U().string,updateTransactions:U().array,rpm_ostree_deployments:U().array,imageData:U().object};const V=J;var H=n(66702);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=c().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(735),n.e(344)]).then(n.bind(n,79358))})),Q={deviceStatus:{label:"Device status",value:[],titles:[]}},X=[{value:"approval",label:"Required approval"},{value:"ophaned",label:"Orphaned"},{value:"delivering",label:"On the way"}];const ee=function(){var e=(0,s.useState)(Q),t=(0,i.Z)(e,1)[0],n=(0,s.useState)({isOpen:!1,deviceData:null}),l=(0,i.Z)(n,2),o=l[0],h=l[1],O=(0,s.useContext)(y.g).getRegistry,D=(0,s.useRef)(null),I=(0,d.useHistory)(),P=(0,m.useDispatch)();return(0,s.useEffect)((function(){return insights.chrome.registerModule("inventory"),"true"===new URLSearchParams(I.location.search).get("update_device")&&h((function(e){return $($({},e),{},{isOpen:!0})})),function(){return P((0,E.Qo)())}}),[]),c().createElement(s.Fragment,null,c().createElement(p.Z,{className:"pf-m-light"},c().createElement(v.Z,{title:"Fleet management"})),c().createElement(f.Z,{className:"edge-devices"},c().createElement(L,null),c().createElement(g.Z,{ref:D,onRefresh:function(e,t){!t&&D&&D.current?D.current.onRefreshData(e):t&&t(e)},tableProps:{canSelectAll:!1,variant:"compact",actionResolver:function(e){var t;return null!=e&&null!==(t=e.system_profile)&&void 0!==t&&t.image_data?[{title:"Update",onClick:function(e,t,n){h((function(e){return $($({},e),{},{isOpen:!0,deviceData:n})}))}}]:null!=e&&e.system_profile?[{title:"No Action"}]:null},areActionsDisabled:function(e){var t,n,a,r,l,i,o,u,s=(null==e||null===(t=e.system_profile)||void 0===t||null===(n=t.image_data)||void 0===n?void 0:n.UpdateTransactions)||[];return"BUILDING"===(null===(a=s[s.length-1])||void 0===a?void 0:a.Status)||"CREATED"===(null===(r=s[s.length-1])||void 0===r?void 0:r.Status)||!(null!=e&&null!==(l=e.system_profile)&&void 0!==l&&null!==(i=l.image_data)&&void 0!==i&&null!==(o=i.ImageInfo)&&void 0!==o&&null!==(u=o.UpdatesAvailable)&&void 0!==u&&u.length)>0}},columns:function(e){var t=e.filter((function(e){return["display_name","updated"].includes(e.key)}));return t.filter((function(e){return"updated"===e.key}))[0].props={width:20},[].concat((0,r.Z)(t),[{key:"system_profile",title:"Device status",renderFunc:function(e){return c().createElement(V,{rpm_ostree_deployments:e.rpm_ostree_deployments,imageData:e.image_data})},props:{width:20,isStatic:!0}}])},getEntities:function(){var e=(0,a.Z)(u().mark((function e(t,n,l,i){var o,s,c,m,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(void 0,$($({},n),{},{filter:$($({},n.filter),{},{system_profile:$($({},null===(o=n.filter)||void 0===o?void 0:o.system_profile),{},{host_type:"edge"})}),fields:$($({},null==n?void 0:n.fields),{},{system_profile:[].concat((0,r.Z)((null==n||null===(s=n.fields)||void 0===s?void 0:s.system_profile)||[]),["host_type","operating_system","greenboot_status","greenboot_fallback_detected","rpm_ostree_deployments"])})}));case 2:return c=e.sent,m=c.results.map(function(){var e=(0,a.Z)(u().mark((function e(t){var n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.Z4)(t.id);case 2:return n=e.sent,a=n&&404!==n?n:{data:null},e.abrupt("return",$($({},t),{},{system_profile:$($({},t.system_profile),{},{image_data:Object.prototype.hasOwnProperty.call(a,"data")?null:a})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(m);case 6:return d=e.sent,e.abrupt("return",$($({},c),{},{results:d}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),hideFilters:{registeredWith:!0},hasCheckbox:!1,activeFiltersConfig:$({},(0,b.pM)(t)&&{filters:(0,b.I)(t,(function(e){var t;return null===(t=X.find((function(t){return t.value===e})))||void 0===t?void 0:t.label}))}),onRowClick:function(e,t){return I.push("/fleet-management/".concat(t))},onLoad:function(e){var t,n,a=e.mergeWithEntities;null===(t=O())||void 0===t||null===(n=t.register)||void 0===n||n.call(t,$({},a()))}})),o.isOpen&&c().createElement(s.Suspense,{fallback:c().createElement(_.b,null,c().createElement(R.$,null))},c().createElement(Y,{navigateBack:function(){I.push({pathname:I.location.pathname}),h((function(e){return $($({},e),{},{isOpen:!1})}))},setUpdateModal:h,updateModal:o,refreshTable:D.current.onRefreshData})))}},14511:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(4942),r=n(29439),l=n(93264),i=n.n(l),o=n(48716),u=n(39173),s=n(86350),c=n(2372),m=n(52643),d=n(75662),p=n(59245),v=n(5230),f=n(383),g=n(45697),E=n.n(g),y=n(82041),b=n(4147),h=n(68340),O=n(35224),D=n(62410),I=n(9043),P=n(94778),S=n(27577),_=function(e){var t=e.index;return i().createElement("div",null,i().createElement(O.u,{content:i().createElement("div",null,"More options"),reference:function(){return document.getElementById("pf-dropdown-toggle-id-".concat(t))}}))};_.propTypes={index:E().number};var R=[{label:"Name",type:"text"},{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],w=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,S.cellWidth)(35)]},{title:"Current Version",type:"version",sort:!1,columnTransforms:[(0,S.cellWidth)(15)]},{title:"Last Updated",type:"updated_at",sort:!0,columnTransforms:[(0,S.cellWidth)(25)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,S.cellWidth)(30)]}],k=function(e){return e.map((function(e,t){var n=e.image_set,a=e.image_build_iso_url;return{id:null==n?void 0:n.ID,cells:[{title:i().createElement(d.Link,{to:"".concat(b._j.gb,"/").concat(null==n?void 0:n.ID)},null==n?void 0:n.Name)},null==n?void 0:n.Images[0].Version,{title:i().createElement(D.Z,{date:null==n?void 0:n.UpdatedAt})},{title:i().createElement(i().Fragment,null,i().createElement(_,{index:t}),i().createElement(I.Z,{status:null==n?void 0:n.Images[0].Status}))}],imageStatus:null==n?void 0:n.Images[0].Status,isoURL:a||null,latestImageID:null==n?void 0:n.Images[0].ID}}))},C=function(e){var t=e.openCreateWizard,n=e.openUpdateWizard,a=(0,y.useSelector)((function(e){var t,n,a=e.edgeImageSetsReducer;return{count:(null==a||null===(t=a.data)||void 0===t?void 0:t.Count)||0,data:(null==a||null===(n=a.data)||void 0===n?void 0:n.Data)||null,isLoading:void 0===(null==a?void 0:a.isLoading)||a.isLoading,hasError:null==a?void 0:a.hasError}}),y.shallowEqual),r=a.count,l=a.data,o=a.isLoading,u=a.hasError;return i().createElement(f.Z,{apiFilterSort:!0,filters:R,loadTableData:P.n9,tableData:{count:r,data:l,isLoading:o,hasError:u},columnNames:w,rows:l?k(l):[],emptyStateMessage:"No images found",emptyStateActionMessage:"Create new image",emptyStateAction:t,actionResolver:function(e){var t=[];return null!=e&&e.isoURL&&t.push({title:i().createElement(h.x,{className:"force-text-black remove-underline",component:"a",href:e.isoURL,rel:"noopener noreferrer",target:"_blank"},"Download")}),"SUCCESS"!==(null==e?void 0:e.imageStatus)&&"ERROR"!==(null==e?void 0:e.imageStatus)||t.push({title:"Update Image",onClick:function(e,t,a){n(a.latestImageID)}}),"BUILDING"===(null==e?void 0:e.imageStatus)&&null!=e&&e.id&&t.push({title:""}),t},areActionsDisabled:function(e){return"BUILDING"===(null==e?void 0:e.imageStatus)},defaultSort:{index:2,direction:"desc"},toolbarButtons:[{title:"Create new image",click:function(){return t()}}]})};C.propTypes={clearFilters:E().func.isRequired,openCreateWizard:E().func.isRequired,openUpdateWizard:E().func.isRequired,filters:E().array.isRequired,pagination:E().shape({page:E().number,perPage:E().number}).isRequired};const j=C;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=i().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(735),n.e(344)]).then(n.bind(n,49477))})),T=i().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(735),n.e(46)]).then(n.bind(n,53010))}));const x=function(){var e=(0,l.useContext)(p.g).getRegistry,t=(0,l.useState)(!1),n=(0,r.Z)(t,2),a=n[0],f=n[1],g=(0,l.useState)({isOpen:!1,imageId:null}),E=(0,r.Z)(g,2),y=E[0],b=E[1],h=(0,d.useHistory)();return(0,l.useEffect)((function(){var t=e().register({edgeImageSetsReducer:v.Mx});return function(){return t()}}),[]),i().createElement(l.Fragment,null,i().createElement(o.Z,{className:"pf-m-light"},i().createElement(u.Z,{title:"Images"})),i().createElement(s.Z,{className:"edge-devices"},i().createElement(j,{openCreateWizard:function(){h.push({pathname:h.location.pathname,search:new URLSearchParams({create_image:!0}).toString()}),f(!0)},openUpdateWizard:function(e){h.push({pathname:h.location.pathname,search:new URLSearchParams({update_image:!0}).toString()}),b({isOpen:!0,imageId:e})}})),a&&i().createElement(l.Suspense,{fallback:i().createElement(m.b,null,i().createElement(c.$,null))},i().createElement(Z,{navigateBack:function(){h.push({pathname:h.location.pathname}),f(!1)}})),y.isOpen&&i().createElement(l.Suspense,{fallback:i().createElement(m.b,null,i().createElement(c.$,null))},i().createElement(T,{navigateBack:function(){h.push({pathname:h.location.pathname}),b((function(e){return U(U({},e),{},{isOpen:!1})}))},updateImageID:y.imageId})))}}}]);
//# sourceMappingURL=../sourcemaps/GroupsDetailPage.0ae80ad98e061e4d788847238fcdfa08.js.map