(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[734],{88028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ge});var r,o=n(59713),l=n.n(o),a=n(63038),c=n.n(a),i=n(1427),u=n.n(i),s=n(69859),d=n(24350),p=n.n(d),f=n(94654),m="LOAD_GROUPS",v="LOAD_TRESHOLD",g="LOAD_DEVICES_INFO",b=n.n(f)()([m,"LOAD_GROUP_DETAIL",v,g],(function(e){return[e,"".concat(e,"_PENDING"),"".concat(e,"_FULFILLED"),"".concat(e,"_REJECTED")]})),O=(p()(b,(function(e){return e})),n(319)),h=n.n(O),E=["done","error","pending","unknown","warning","notification"],y=function(e,t){return Math.round(Math.random()*(t-e)+e)},P=function(){return Math.random().toString(36).substr(2,10)},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e10;return new Date(+new Date-Math.floor(Math.random()*e))},x=function(){return{uuid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),name:P(),sensors:y(0,5e3),is_secure:Boolean(Math.round(10*Math.random())%2),last_seen:j(),status:E[y(0,E.length)]}},D=function(e){var t=e.perPage,n=e.page||1,r=t||20;return insights.chrome.auth.getUser().then((function(){return{results:h()(new Array(t)).map(x),meta:{count:200,limit:r*n,offset:r*(n-1)}}}))},w=n(75061),L=n(25311);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T=(0,L.Gg)((r={},l()(r,"".concat(m,"_PENDING"),(function(e){return _(_({},e),{},{groups:[],isLoading:!0})})),l()(r,"".concat(m,"_FULFILLED"),(function(e,t){var n=t.payload;return _(_({},e),{},{isLoading:!1,groups:(null==n?void 0:n.results)||[],meta:(null==n?void 0:n.meta)||{}})})),r),{});var C;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=(0,L.Gg)((C={},l()(C,"".concat(v,"_PENDING"),(function(e){return N(N({},e),{},{threshold:{},isLoading:!0})})),l()(C,"".concat(v,"_FULFILLED"),(function(e,t){var n=t.payload;return N(N({},e),{},{threshold:null==n?void 0:n.results,isLoading:!1})})),C),{});var R;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const G=(0,L.Gg)((R={},l()(R,"".concat(g,"_PENDING"),(function(e){return F(F({},e),{},{devicesInfo:{},isLoading:!0})})),l()(R,"".concat(g,"_FULFILLED"),(function(e,t){var n=t.payload;return F(F({},e),{},{devicesInfo:null==n?void 0:n.results,isLoading:!1})})),R),{});var U=n(14224),V=n(89583),B=n(81159),M=n(34023),H=n(13877),$=n(26577),q=n(6202),z=n(47835),J=n(29515),K=n(62851),Q=n(49287),W=n(18038),X=n(2095),Y=n(85962),Z=n(21015),ee=n(8896),te=n(67463),ne=n(34348),re=n(20018),oe=n(19017),le=n(53325),ae=n(63540),ce=n(55399),ie=n(14905),ue=n(17908);const se=function(){var e=(0,s.useDispatch)(),t=(0,s.useSelector)((function(e){var t=e.thresholdReducer;return(null==t?void 0:t.threshold)||{}})),n=(0,s.useSelector)((function(e){var t=e.thresholdReducer;return null==t?void 0:t.isLoading})),r=(0,s.useSelector)((function(e){var t=e.devicesInfoReducer;return null==t?void 0:t.isLoading})),o=(0,s.useSelector)((function(e){var t=e.devicesInfoReducer;return(null==t?void 0:t.devicesInfo)||{}}));return(0,i.useEffect)((function(){var t,n;(0,w.JH)().register({thresholdReducer:I,devicesInfoReducer:G}),e({type:v,payload:(t=y(2,5),n=100,Promise.resolve({results:h()(new Array(t)).map((function(){var e=y(0,n);return n-=e,l()({},P(),e)}))}))}),e({type:g,payload:Promise.resolve({results:{requiredApproval:y(0,100),orphaned:y(0,100),delivering:y(0,100)}})})}),[]),u().createElement(Q.r,{hasGutter:!0},u().createElement(W.P,{span:3},u().createElement(X.Card,null,u().createElement(Z.O,null,u().createElement(ne.Title,{headingLevel:"h3"},"Health threshold")),u().createElement(Y.CardBody,null,!1===n?u().createElement(ie.Td,{ariaDesc:"Health threshold",ariaTitle:"Health threshold",constrainToVisibleArea:!0,legendOrientation:"vertical",legendPosition:"right",height:230,width:450,data:t.map((function(e){var t,n;return{x:null===(t=Object.keys(e))||void 0===t?void 0:t[0],y:null===(n=Object.values(e))||void 0===n?void 0:n[0]}})),legendData:t.map((function(e){var t,n;return{name:"".concat(null===(t=Object.keys(e))||void 0===t?void 0:t[0],": ").concat(null===(n=Object.values(e))||void 0===n?void 0:n[0])}})),padding:{bottom:20,left:20,right:140,top:20},labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},themeColor:ue.nz.multiOrdered}):u().createElement(ee.b,null,u().createElement(te.Spinner,null))))),u().createElement(W.P,{span:3},u().createElement(X.Card,null,u().createElement(Z.O,null,u().createElement(ne.Title,{headingLevel:"h3"},"Devices info")),u().createElement(Y.CardBody,null,u().createElement(re.TextContent,null,u().createElement(oe.Gn,{component:oe.F_.dl},u().createElement(le.Ts,{component:le.v$.dt},!1===r?u().createElement(ae.Text,{component:ae.TextVariants.h1},u().createElement(ce.Link,{to:"/groups"},null==o?void 0:o.requiredApproval)):u().createElement($.O,null)),u().createElement(le.Ts,{component:le.v$.dd},"Required approvals"),u().createElement(le.Ts,{component:le.v$.dt},!1===r?u().createElement(ae.Text,{component:ae.TextVariants.h1},u().createElement(ce.Link,{to:"/groups"},null==o?void 0:o.orphaned)):u().createElement($.O,null)),u().createElement(le.Ts,{component:le.v$.dd},"Orphaned devices"),u().createElement(le.Ts,{component:le.v$.dt},!1===r?u().createElement(ae.Text,{component:ae.TextVariants.h1},u().createElement(ce.Link,{to:"/groups"},null==o?void 0:o.delivering)):u().createElement($.O,null)),u().createElement(le.Ts,{component:le.v$.dd},"Devices on the way")))))),u().createElement(W.P,{span:3},u().createElement(X.Card,null,u().createElement(Z.O,null,"Last Canaries"),u().createElement(Y.CardBody,null))))};var de=n(34723),pe=[{title:"Name of group",transforms:[de.sortable]},{title:"Number of devices",transforms:[de.sortable]},{title:"Secure",transforms:[de.sortable]},{title:"Last seen",transforms:[de.sortable]},{title:"Status",transforms:[de.sortable]}];const fe=function(){var e=(0,i.useState)({}),t=c()(e,2),n=t[0],r=t[1],o=(0,s.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.groups}));return u().createElement(de.Table,{"aria-label":"Groups table",cells:pe,sortBy:n,onSort:function(e,t,n){return r((function(){return{index:t,direction:n}}))},rows:o.map((function(e){return{cells:[{title:u().createElement(ce.Link,{to:"/groups/".concat(null==e?void 0:e.uuid)},null==e?void 0:e.name)},null==e?void 0:e.sensors,{title:(null==e?void 0:e.is_secure)?"secure":"non secure"},{title:new Date(null==e?void 0:e.last_seen).toDateString()},null==e?void 0:e.status]}}))},u().createElement(de.TableHeader,null),u().createElement(de.TableBody,null))};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ge=function(){var e=(0,i.useState)({}),t=c()(e,2),n=t[0],r=t[1],o=(0,s.useDispatch)(),l=(0,s.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.isLoading})),a=(0,s.useSelector)((function(e){var t=e.groupsReducer;return(null==t?void 0:t.meta)||{page:1}}));return(0,i.useEffect)((function(){(0,w.JH)().register({groupsReducer:T}),o(function(){return{type:m,payload:D({perPage:arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,page:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1})}}())}),[]),u().createElement(i.Fragment,null,u().createElement(U.mr,{className:"pf-m-light"},u().createElement(U.BV,{title:"Available groups"})),u().createElement(V.o,{className:"edge-groups"},u().createElement(B.K,{hasGutter:!0},u().createElement(M.v,{className:"edge-groups__info"},u().createElement(se,null)),u().createElement(M.v,{isFilled:!0},u().createElement(z.U,!1===l?{pagination:{itemCount:null==a?void 0:a.count,page:(null==a?void 0:a.offset)/(null==a?void 0:a.limit)+1,perPage:Number(null==a?void 0:a.limit),isCompact:!0},dedicatedAction:u().createElement(q.Button,{onClick:function(){return console.log("ff")},isDisabled:!1!==l},"Add group"),filterConfig:{items:[{label:"Name",type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return r(ve(ve({},n||{}),{},{name:t}))},value:(null==n?void 0:n.name)||"",placeholder:"Filter by name"}},{label:"Security",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return r(ve(ve({},n||{}),{},{name:t}))},items:[{value:"isSecure",label:"Secure"},{value:"nonSecure",label:"Not secure"}],value:(null==n?void 0:n.security)||[]}},{label:"Status",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return r(ve(ve({},n||{}),{},{name:t}))},items:E.map((function(e){return{value:e,label:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}})),value:(null==n?void 0:n.status)||[]}}]}}:{pagination:u().createElement($.O,null)}),!1===l?u().createElement(fe,null):u().createElement(K.c,{colSize:5,rowSize:15}),u().createElement(J.f,{isFooter:!0},!1===l&&u().createElement(H.Pagination,{itemCount:null==a?void 0:a.count,page:(null==a?void 0:a.offset)/(null==a?void 0:a.limit)+1,perPage:Number(null==a?void 0:a.limit),dropDirection:"up"}))))))}}}]);
//# sourceMappingURL=GroupsPage.a18ce1d544c3f24e92de.js.map