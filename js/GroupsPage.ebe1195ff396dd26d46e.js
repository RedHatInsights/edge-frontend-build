(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[734],{89159:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Oe});var l=n(87757),r=n.n(l),a=n(48926),o=n.n(a),c=n(59713),u=n.n(c),i=n(63038),s=n.n(i),m=n(1427),d=n.n(m),v=n(69859),p=n(83958),E=n(4250),f=n(75061),g=n(27713),h=n(8969),b=n(14224),O=n(89583),S=n(81159),y=n(34023),k=n(13877),T=n(26577),P=n(6202),C=n(47835),L=n(29515),w=n(62851),j=n(49287),x=n(18038),D=n(2095),R=n(85962),N=n(21015),$=n(8896),_=n(67463),A=n(34348),I=n(20018),Z=n(19017),G=n(53325),F=n(63540),z=n(24774),B=n(80256),q=n(45587),H=n(36842),K=n(21508),V=n(65395),W=n(55399),Q=n(67154),U=n.n(Q),J=n(6479),X=n.n(J),Y=n(45697),M=n.n(Y),ee=n(16730),te=function(e){var t,n,l=e.status,r=X()(e,["status"]),a=(null===h.E||void 0===h.E||null===(t=h.E[l])||void 0===t?void 0:t.icon)||ee.ZP;return d().createElement(a,U()({},r,{color:null===h.E||void 0===h.E||null===(n=h.E[l])||void 0===n?void 0:n.color}))};te.propTypes={status:M().oneOf(h.O)};const ne=te;var le=n(75663),re=n(53934),ae=function(e){var t=e.isSecure,n=X()(e,["isSecure"]),l=t?le.ZP:re.ZP;return d().createElement(l,n)};ae.propTypes={isSecure:M().bool},ae.defaultProps={isSecure:!1};const oe=ae;var ce=n(5029),ue=n(17908),ie=n(5634);const se=function(){var e,t,n,l,r,a,o,c,u=(0,v.useDispatch)(),i=(0,v.useSelector)((function(e){var t=e.thresholdReducer;return(null==t?void 0:t.threshold)||{}})),s=(0,v.useSelector)((function(e){var t=e.thresholdReducer;return null==t?void 0:t.isLoading})),p=(0,v.useSelector)((function(e){var t=e.devicesInfoReducer;return null==t?void 0:t.isLoading})),f=(0,v.useSelector)((function(e){var t=e.devicesInfoReducer;return(null==t?void 0:t.devicesInfo)||{}})),g=(0,v.useSelector)((function(e){var t=e.canariesInfoReducer;return(null==t?void 0:t.canariesInfo)||{}})),h=(0,v.useSelector)((function(e){var t=e.canariesInfoReducer;return null==t?void 0:t.isLoading}));return(0,m.useEffect)((function(){u((0,E.QK)()),u((0,E._n)()),u((0,E.PE)())}),[]),d().createElement(j.r,{hasGutter:!0},d().createElement(x.P,{span:3},d().createElement(D.Card,null,d().createElement(N.O,null,d().createElement(A.Title,{headingLevel:"h3"},"Health threshold")),d().createElement(R.e,null,!1===s?d().createElement(ce.Td,{ariaDesc:"Health threshold",ariaTitle:"Health threshold",constrainToVisibleArea:!0,legendOrientation:"vertical",legendPosition:"right",height:230,width:450,data:i.map((function(e){var t,n;return{x:null===(t=Object.keys(e))||void 0===t?void 0:t[0],y:null===(n=Object.values(e))||void 0===n?void 0:n[0]}})),legendData:i.map((function(e){var t,n;return{name:"".concat(null===(t=Object.keys(e))||void 0===t?void 0:t[0],": ").concat(null===(n=Object.values(e))||void 0===n?void 0:n[0])}})),padding:{bottom:20,left:20,right:140,top:20},labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},themeColor:ue.nz.multiOrdered}):d().createElement($.b,null,d().createElement(_.Spinner,null))))),d().createElement(x.P,{span:3},d().createElement(D.Card,null,d().createElement(N.O,null,d().createElement(A.Title,{headingLevel:"h3"},"Devices info")),d().createElement(R.e,null,d().createElement(I.D,null,d().createElement(Z.Gn,{component:Z.F_.dl},d().createElement(G.Ts,{component:G.v$.dt},!1===p?d().createElement(F.xv,{component:F.qO.h1},d().createElement(W.Link,{to:"/groups"},null==f?void 0:f.requiredApproval)):d().createElement(T.O,null)),d().createElement(G.Ts,{component:G.v$.dd},"Required approvals"),d().createElement(G.Ts,{component:G.v$.dt},!1===p?d().createElement(F.xv,{component:F.qO.h1},d().createElement(W.Link,{to:"/groups"},null==f?void 0:f.orphaned)):d().createElement(T.O,null)),d().createElement(G.Ts,{component:G.v$.dd},"Orphaned devices"),d().createElement(G.Ts,{component:G.v$.dt},!1===p?d().createElement(F.xv,{component:F.qO.h1},d().createElement(W.Link,{to:"/groups"},null==f?void 0:f.delivering)):d().createElement(T.O,null)),d().createElement(G.Ts,{component:G.v$.dd},"Devices on the way")))))),d().createElement(x.P,{span:3},d().createElement(D.Card,null,d().createElement(N.O,null,d().createElement(A.Title,{headingLevel:"h3"},"Last Canaries")),d().createElement(R.e,null,d().createElement(I.D,null,d().createElement(Z.Gn,{component:Z.F_.dl},d().createElement(G.Ts,{component:G.v$.dt},d().createElement(W.Link,{to:"/groups"},"Sensors")),d().createElement(G.Ts,{component:G.v$.dd},!1===h?d().createElement(z.a,null,d().createElement(B.Z,null,d().createElement(V.t,{date:null==g||null===(e=g.sensors)||void 0===e?void 0:e.time})),d().createElement(B.Z,null,d().createElement(ne,{status:null==g||null===(t=g.sensors)||void 0===t?void 0:t.status}))):d().createElement(T.O,null)),d().createElement(G.Ts,{component:G.v$.dt},d().createElement(W.Link,{to:"/groups"},"Scanners")),d().createElement(G.Ts,{component:G.v$.dd},!1===h?d().createElement(z.a,null,d().createElement(B.Z,null,d().createElement(V.t,{date:null==g||null===(n=g.scanners)||void 0===n?void 0:n.time})),d().createElement(B.Z,null,d().createElement(ne,{status:null==g||null===(l=g.scanners)||void 0===l?void 0:l.status}))):d().createElement(T.O,null)),d().createElement(G.Ts,{component:G.v$.dt},d().createElement(W.Link,{to:"/groups"},"Kiosks")),d().createElement(G.Ts,{component:G.v$.dd},!1===h?d().createElement(z.a,null,d().createElement(B.Z,null,d().createElement(V.t,{date:null==g||null===(r=g.kiosks)||void 0===r?void 0:r.time})),d().createElement(B.Z,null,d().createElement(ne,{status:null==g||null===(a=g.kiosks)||void 0===a?void 0:a.status}))):d().createElement(T.O,null)),d().createElement(G.Ts,{component:G.v$.dt},d().createElement(W.Link,{to:"/groups"},"Antenna")),d().createElement(G.Ts,{component:G.v$.dd},!1===h?d().createElement(z.a,null,d().createElement(B.Z,null,d().createElement(V.t,{date:null==g||null===(o=g.antenna)||void 0===o?void 0:o.time})),d().createElement(B.Z,null,d().createElement(ne,{status:null==g||null===(c=g.antenna)||void 0===c?void 0:c.status}))):d().createElement(T.O,null))))),d().createElement(q.e,null,d().createElement(H.Split,null,d().createElement(K.SplitItem,{isFilled:!0}),d().createElement(K.SplitItem,null,d().createElement(W.Link,{to:"/groups"},"See canaries ",d().createElement(ie.ZP,null))))))))};var me=n(219),de=n(74183),ve=n(34723),pe=[{title:"Name of group",transforms:[ve.sortable,(0,ve.cellWidth)("max")]},{title:"Number of devices",transforms:[ve.sortable]},{title:"Secure",transforms:[ve.sortable,(0,ve.cellWidth)(10)]},{title:"Last seen",transforms:[ve.sortable,(0,ve.cellWidth)(15)]},{title:"Status",transforms:[ve.sortable,(0,ve.cellWidth)(10)]}],Ee=function(e){var t=e.onAddNewGroup,n=(0,m.useState)({}),l=s()(n,2),r=l[0],a=l[1],o=(0,v.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.groups}));return d().createElement(ve.Table,U()({"aria-label":"Groups table"},o.length>0&&{actions:[{title:"Adopt",onClick:console.log},{title:"Reject",onClick:console.log}]},{cells:pe,sortBy:r,onSort:function(e,t,n){return a((function(){return{index:t,direction:n}}))},rows:o.length>0?o.map((function(e){var t;return{cells:[{title:d().createElement(W.Link,{to:"/groups/".concat(null==e?void 0:e.uuid)},null==e?void 0:e.name)},null==e||null===(t=e.sensors)||void 0===t?void 0:t.length,{title:d().createElement(oe,{isSecure:null==e?void 0:e.is_secure})},{title:d().createElement(V.t,{date:null==e?void 0:e.last_seen})},{title:d().createElement(ne,{status:null==e?void 0:e.status})}]}})):[{cells:[{title:d().createElement($.b,null,d().createElement(me.ub,{variant:me.IQ.full},d().createElement(A.Title,{headingLevel:"h5",size:"lg"},"No matching groups found"),d().createElement(de.B,null,"This filter criteria matches no groups. ",d().createElement("br",null)," Try changing your filter settings. Or adding new group."),d().createElement(P.Button,{variant:"primary",onClick:t},"Add group"))),props:{colSpan:pe.length+1}}]}]}),d().createElement(ve.TableHeader,null),d().createElement(ve.TableBody,null))};Ee.propTypes={onAddNewGroup:M().func};const fe=Ee;function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=(0,m.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(370),n.e(0),n.e(310)]).then(n.bind(n,69310))}));const Oe=function(){var e=(0,m.useState)({}),t=s()(e,2),n=t[0],l=t[1],a=(0,m.useState)(!1),c=s()(a,2),u=c[0],i=c[1],j=(0,v.useDispatch)(),x=(0,v.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.isLoading})),D=(0,v.useSelector)((function(e){var t=e.groupsReducer;return(null==t?void 0:t.meta)||{page:1}}));return(0,m.useEffect)((function(){(0,f.JH)().register({groupsReducer:g.zX,thresholdReducer:g.KT,devicesInfoReducer:g.bh,canariesInfoReducer:g.KY}),j((0,E.tb)())}),[]),d().createElement(m.Fragment,null,d().createElement(b.mr,{className:"pf-m-light"},d().createElement(b.BV,{title:"Available groups"})),d().createElement(O.o,{className:"edge-groups"},d().createElement(S.K,{hasGutter:!0},d().createElement(y.v,{className:"edge-groups__info"},d().createElement(se,null)),d().createElement(y.v,{isFilled:!0},d().createElement(C.U,!1===x?{pagination:{itemCount:null==D?void 0:D.count,page:(null==D?void 0:D.offset)/(null==D?void 0:D.limit)+1,perPage:Number(null==D?void 0:D.limit),isCompact:!0},dedicatedAction:d().createElement(P.Button,{onClick:function(){return i(!0)},isDisabled:!1!==x},"Add group"),filterConfig:{items:[{label:"Name",type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return l(he(he({},n||{}),{},{name:t}))},value:(null==n?void 0:n.name)||"",placeholder:"Filter by name"}},{label:"Security",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return l(he(he({},n||{}),{},{name:t}))},items:[{value:"isSecure",label:"Secure"},{value:"nonSecure",label:"Not secure"}],value:(null==n?void 0:n.security)||[]}},{label:"Status",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return l(he(he({},n||{}),{},{name:t}))},items:h.O.map((function(e){return{value:e,label:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}})),value:(null==n?void 0:n.status)||[]}}]}}:{pagination:d().createElement(T.O,null)}),!1===x?d().createElement(fe,{onAddNewGroup:function(){return i(!0)}}):d().createElement(w.c,{colSize:5,rowSize:15}),d().createElement(L.f,{isFooter:!0},!1===x&&d().createElement(k.Pagination,{itemCount:null==D?void 0:D.count,page:(null==D?void 0:D.offset)/(null==D?void 0:D.limit)+1,perPage:Number(null==D?void 0:D.limit),dropDirection:"up"}))))),u&&d().createElement(m.Suspense,{fallback:""},d().createElement(be,{isOpened:u,onAction:function(e,t){e&&o()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.d_)({groupName:t["group-name"],isSecure:t["is-secure"],systemIDs:t.selected});case 2:j((0,E.tb)());case 3:case"end":return e.stop()}}),e)})))(),i(!1)}})))}}}]);
//# sourceMappingURL=GroupsPage.ebe1195ff396dd26d46e.js.map