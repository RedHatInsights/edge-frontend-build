(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[6132,4807,1575],{76034:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var r=n(44914),a=n.n(r),o=n(5556),c=n.n(o),i=n(95658),s=n(57502),u=n(56899),l=n(27471),d=n(99851),p=n(8490),m=n(22069),f=n(71100),v=n(45321),g=function(e){return a().createElement(m.E,null,a().createElement("strong",null,e," "),"and all its data will be permanently deleted. Associated systems will be removed from the group but will not be deleted.")},b=function(e){return{fields:[{component:s.A.PLAIN_TEXT,name:"warning-message",label:g(e)},{component:s.A.CHECKBOX,name:"confirmation",label:"I understand that this action cannot be undone.",validate:[{type:i.A.REQUIRED}]}]}},y=function(){return a().createElement(p.I,{status:"warning"},a().createElement(d.Ay,null))},h=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,r=e.reloadData,o=e.modalState,c=o.id,i=o.name,s=(0,v.useDispatch)();return a().createElement(u.A,{isOpen:t,closeModal:function(){return n(!1)},title:"Delete group",titleIconVariant:y,variant:"danger",submitLabel:"Delete",schema:b(i),onSubmit:function(){var e={onSuccess:{title:"Success",description:"".concat(i," has been removed successfully")},onError:{title:"Error",description:"Failed to delete group"}};(0,f.A)(s,(function(){return(0,l.Lv)(c)}),e)},reloadData:r})};h.propTypes={id:c().number,name:c().string,modalState:c().object,isModalOpen:c().bool,setIsModalOpen:c().func,reloadData:c().func};const E=h},40403:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var r=n(10467),a=n(54756),o=n.n(a),c=n(44914),i=n.n(c),s=n(5556),u=n.n(s),l=n(95658),d=n(57502),p=n(56899),m=n(27471),f=n(17427),v=n(71100),g=n(45321),b=function(){var e=(0,r.A)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.R4)(t);case 2:if(!e.sent.data.isValid){e.next=5;break}return e.abrupt("return","Group name already exists");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={fields:[{component:d.A.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:l.A.REQUIRED},{type:l.A.MAX_LENGTH,threshold:50},f.m0,b]}]},h=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,r=e.reloadData,a=e.modalState,o=a.id,c=a.name,s=(0,g.useDispatch)();return i().createElement(p.A,{isOpen:t,closeModal:function(){return n(!1)},title:"Rename group",submitLabel:"Save",schema:y,initialValues:a,onSubmit:function(e){var t={onSuccess:{title:"Success",description:"".concat(c," has been renamed to ").concat(e.name," successfully")},onError:{title:"Error",description:"Failed to rename group"}};(0,v.A)(s,(function(){return(0,m.Hk)(o,e)}),t)},reloadData:r})};h.propTypes={id:u().number,modalState:u().object,isModalOpen:u().bool,setIsModalOpen:u().func,reloadData:u().func};const E=h},86822:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var r=n(60436),a=n(64467),o=n(5544),c=n(44914),i=n.n(c),s=n(92697),u=n(86726),l=n(96998),d=n(96553),p=n(71906),m=n(45523),f=n(81855),v=n(53926),g=n(5715),b=n(99780),y=n(83241),h=n(16401),E=n(72511),O=n(61574),D=n(30083),A=n(20689),S=n(37742),w=n(27471),I=n(10467),k=n(54756),j=n.n(k),P=n(72583),M=n(16165),C=n(5556),T=n.n(C),_=n(29082),x=n(43085),L=n(71100),R=n(45321),V=function(e){var t,n,r=e.groupId,a=e.closeModal,s=e.isOpen,u=e.reloadData,l=e.groupName,d=e.locationProp,p=e.navigateProp,m=(0,x.A)({api:_.ZK,tableReload:!0}),f=(0,o.A)(m,2),v=f[0],g=f[1],b=v.data,y=v.isLoading,h=v.hasError,E=(0,c.useState)([]),O=(0,o.A)(E,2),D=O[0],A=O[1],k=(0,R.useDispatch)();return i().createElement(M.a,{id:"add-systems-modal",title:"Add systems",position:"top",isOpen:s,onClose:a,variant:"large",actions:[i().createElement(P.$n,{isDisabled:0===D.length,key:"confirm",variant:"primary",onClick:function(){var e={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(l," successfully")},onError:{title:"Error",description:"An error occurred making the request"}};(0,L.A)(k,(function(){return(0,w.FW)(parseInt(r),D.map((function(e){return{ID:e.deviceID}})))}),e),setTimeout((0,I.A)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),500),a()}},"Add systems"),i().createElement(P.$n,{key:"cancel",variant:"link",onClick:a},"Cancel")]},i().createElement(S.default,{selectedItems:A,skeletonRowQuantity:15,hasCheckbox:!0,isLoading:y,hasError:h,count:null==b?void 0:b.count,data:(null==b||null===(t=b.data)||void 0===t?void 0:t.devices)||[],fetchDevices:g,enforceEdgeGroups:null==b||null===(n=b.data)||void 0===n?void 0:n.enforce_edge_groups,locationProp:d,navigateProp:p}))};V.propTypes={groupId:T().string,closeModal:T().func,isOpen:T().bool,reloadData:T().func,groupName:T().string,locationProp:T().func,navigateProp:T().func};const N=V;var G=n(17427),U=n(57502),q=n(55318),F=n(932),H=n(56899),Q=n(76034),z=n(40403),J=n(39440);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=i().lazy((function(){return Promise.all([n.e(1709),n.e(5563),n.e(4018),n.e(6863),n.e(5516),n.e(4785),n.e(6043),n.e(2941)]).then(n.bind(n,49629))})),Z=function(e){var t,n,a,I,k,j,P,M,C,T=e.locationProp,_=e.navigateProp,V=e.paramsProp,X=(0,G.h)(J.xo),Z=(0,G.h)(J.QX),K=(0,R.useDispatch)(),$=(0,O.W6)(),Y=V?V():(0,O.g)(),ee=null!=Y&&Y.id?Y.id:Y.groupId,te=T?T():(0,O.zy)(),ne=te.search,re=te.pathname,ae=window.location.pathname.indexOf("edge")>0?"edge":D.J.inventory,oe=(0,c.useState)(!1),ce=(0,o.A)(oe,2),ie=ce[0],se=ce[1],ue=(0,c.useState)(!1),le=(0,o.A)(ue,2),de=le[0],pe=le[1],me=(0,c.useState)({isOpen:!1,name:"",deviceId:null}),fe=(0,o.A)(me,2),ve=fe[0],ge=fe[1],be=(0,c.useState)({isOpen:!1,deviceData:null,imageData:null}),ye=(0,o.A)(be,2),he=ye[0],Ee=ye[1],Oe=(0,x.A)({api:w.Qo,id:ee,tableReload:!0}),De=(0,o.A)(Oe,2),Ae=De[0],Se=De[1],we=Ae.data,Ie=Ae.isLoading,ke=Ae.hasError,je=null==we||null===(t=we.DeviceGroup)||void 0===t?void 0:t.Name,Pe=(0,c.useState)([]),Me=(0,o.A)(Pe,2),Ce=Me[0],Te=Me[1],_e=(0,c.useState)(!1),xe=(0,o.A)(_e,2),Le=xe[0],Re=xe[1],Ve=(0,c.useState)({id:null,name:""}),Ne=(0,o.A)(Ve,2),Ge=Ne[0],Ue=Ne[1],qe=(0,c.useState)(!1),Fe=(0,o.A)(qe,2),He=Fe[0],Qe=Fe[1],ze=(0,c.useState)(!1),Je=(0,o.A)(ze,2),Xe=Je[0],Be=Je[1],We=function(){var e={onSuccess:{title:"Success",description:"".concat(ve.name," has been removed successfully")},onError:{title:"Error",description:"Failed to remove system"}};(0,L.A)(K,(function(){return(0,w.cA)(ee,ve.deviceId)}),e),setTimeout((function(){return Re(!0)}),800)},Ze="Actions for group details view",Ke="group-details-dropdown";return i().createElement(i().Fragment,null,i().createElement(y.A,{className:"pf-m-light"},je?i().createElement(s.Q,null,i().createElement(u.J,null,(0,G.d)({pathname:"edge"===ae?"edge".concat(D.J.fleetManagement):"insights/inventory/groups",linkText:"Groups"})),i().createElement(u.J,null,je)):i().createElement(s.Q,null,i().createElement(u.J,{isActive:!0},i().createElement(p.E,{width:"100px"}))),i().createElement(l.s,{justifyContent:{default:"justifyContentSpaceBetween"}},i().createElement(d.Z,null,je?i().createElement(h.A,{title:je}):i().createElement(p.E,{width:"150px"})),i().createElement(d.Z,null,i().createElement(f.m,{position:v.nU.right,toggle:i().createElement(g.C,{id:Ke,toggleIndicator:A.Ay,onToggle:function(e,t){return se(t)},isDisabled:!1,"aria-label":Ze},i().createElement(m.m,{content:Ze,triggerRef:function(){return document.getElementById(Ke)}}),"Actions"),isOpen:ie,dropdownItems:[i().createElement(b.t,{key:"delete-device-group",onClick:function(){return Ue({id:ee,name:je}),void Qe(!0)}},"Delete group"),i().createElement(b.t,{key:"rename-device-group",onClick:function(){return Ue({id:ee,name:je}),void Be(!0)}},"Rename group"),i().createElement(b.t,{key:"update-all-devices",isDisabled:(0,G.AT)({deviceData:null==we||null===(n=we.DevicesView)||void 0===n||null===(n=n.devices)||void 0===n?void 0:n.map((function(e){return{imageSetId:null==e?void 0:e.ImageSetID}})),imageData:null==we||null===(a=we.DevicesView)||void 0===a||null===(a=a.devices)||void 0===a?void 0:a.some((function(e){return e.ImageID}))}),onClick:function(){se(!1),Ee((function(e){var t,n;return B(B({},e),{},{isOpen:!0,deviceData:null==we||null===(t=we.DevicesView)||void 0===t||null===(t=t.devices)||void 0===t?void 0:t.map((function(e){return{id:null==e?void 0:e.DeviceUUID,display_name:""===(null==e?void 0:e.DeviceName)?"localhost":null==e?void 0:e.DeviceName}})),imageSetId:null==we||null===(n=we.DevicesView)||void 0===n||null===(n=n.devices.find((function(e){return e.ImageSetID})))||void 0===n?void 0:n.ImageSetID})}))}},"Update")]})))),i().createElement("section",{className:"edge-devices pf-l-page__main-section pf-c-page__main-section"},(0,G.Rj)(Ie,null==we||null===(I=we.DeviceGroup)||void 0===I?void 0:I.Devices.length,ne)?i().createElement(l.s,{justifyContent:{default:"justifyContentCenter"}},i().createElement(E.A,{icon:"plus",title:"Add systems to the group",body:"Create groups to help manage your systems more effectively.",primaryAction:{text:"Add systems",click:function(){return pe(!0)}},secondaryActions:[{type:"link",title:"Learn more about system groups",link:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/working_with_systems_in_the_edge_management_application/index"}]})):i().createElement(S.default,{data:(null==we||null===(k=we.DevicesView)||void 0===k?void 0:k.devices)||[],count:null==we||null===(j=we.DevicesView)||void 0===j?void 0:j.total,isLoading:Ie,locationProp:T,navigateProp:_,paramsProp:O.g,hasError:ke,hasCheckbox:!0,handleSingleDeviceRemoval:We,kebabItems:[{isDisabled:!(Ce.length>0),title:"Remove from ".concat(X&&Z?"workspace":"group"),onClick:function(){return ge({name:"",deviceId:null,isOpen:!0})}},{isDisabled:(0,G.AT)({deviceData:Ce,imageData:null===(P=Ce[0])||void 0===P?void 0:P.updateImageData}),title:"Update selected",onClick:function(){return Ee((function(e){return B(B({},e),{},{isOpen:!0,deviceData:(0,r.A)(Ce),imageSetId:Ce.find((function(e){return null==e?void 0:e.imageSetId})).imageSetId})}))}}],selectedItems:Te,setRemoveModal:ge,setIsAddModalOpen:pe,hasModalSubmitted:Le,setHasModalSubmitted:Re,fetchDevices:Se,isAddSystemsView:!0,enforceEdgeGroups:null==we||null===(M=we.DevicesView)||void 0===M?void 0:M.enforce_edge_groups})),de&&i().createElement(N,{groupId:ee,closeModal:function(){return pe(!1)},isOpen:de,reloadData:Se,groupName:null==we||null===(C=we.DeviceGroup)||void 0===C?void 0:C.Name,locationProp:T,navigateProp:_}),ve.isOpen&&i().createElement(H.A,{isOpen:ve.isOpen,closeModal:function(){return ge(!1)},title:"Remove from ".concat(X&&Z?"workspace":"group"),submitLabel:"Remove",variant:"danger",schema:{fields:[{component:U.A.PLAIN_TEXT,name:"warning-text",label:"Do you want to remove ".concat(Ce.length>0?"".concat(Ce.length," system").concat(1===Ce.length?"":"s"):"".concat(ve.name)," from ").concat(je,"?")}]},onSubmit:ve.deviceId?We:function(){var e={onSuccess:{title:"Success",description:"".concat(Ce.length," systems have been removed successfully")},onError:{title:"Error",description:"failed to remove systems"}};(0,L.A)(K,(function(){return(0,w.HG)(parseInt(ee),Ce.map((function(e){return{ID:e.deviceID}})))}),e),setTimeout((function(){return Re(!0)}),800)},reloadData:Se}),he.isOpen&&i().createElement(c.Suspense,{fallback:i().createElement(q.a,null,i().createElement(F.y,null))},i().createElement(W,{navigateBack:function(){$.push({pathname:re}),Ee((function(e){return B(B({},e),{},{isOpen:!1})}))},setUpdateModal:Ee,updateModal:he,refreshTable:Se})),He&&i().createElement(Q.A,{isModalOpen:He,setIsModalOpen:Qe,reloadData:function(){return $.push(D.J.fleetManagement)},modalState:Ge}),Xe&&i().createElement(z.A,{isModalOpen:Xe,setIsModalOpen:Be,reloadData:function(){return Se()},modalState:Ge}))};Z.propTypes={locationProp:T().func,navigateProp:T().func,paramsProp:T().func};const K=Z},27471:(e,t,n)=>{"use strict";n.d(t,{Df:()=>s,EI:()=>c,FW:()=>p,HG:()=>f,HN:()=>m,Hk:()=>l,Lv:()=>d,Qo:()=>u,R4:()=>b,cA:()=>g,f:()=>i,f4:()=>h,ny:()=>v,se:()=>y,wj:()=>o});var r=n(83986),a=n(56830),o=function(e){return a.instance.post("".concat(r.rm,"/device-groups/"),{Name:e.name,Type:"static"})},c=function(e){return a.instance.post("".concat(r.kb,"/groups"),{name:e.name})},i=function(e){var t=e.query,n=(0,r.Lm)(t);return a.instance.get("".concat(r.rm,"/device-groups?").concat(n))},s=function(e){var t=e.query,n=(0,r.Lm)(t);return a.instance.get("".concat(r.kb,"/groups?").concat(n))},u=function(e){var t=e.id,n=e.query,o=(0,r.Lm)(n);return a.instance.get("".concat(r.rm,"/device-groups/").concat(t,"/view?").concat(o))},l=function(e,t){return a.instance.put("".concat(r.rm,"/device-groups/").concat(e),{Name:t.name,Type:"static"})},d=function(e){return a.instance.delete("".concat(r.rm,"/device-groups/").concat(e))},p=function(e,t){return a.instance.post("".concat(r.rm,"/device-groups/").concat(e,"/devices"),{ID:e,Devices:t})},m=function(e,t){var n=[];return t.forEach((function(e){return n.push(e.UUID)})),a.instance.post("".concat(r.kb,"/groups/").concat(e,"/hosts"),n)},f=function(e,t){return a.instance.delete("".concat(r.rm,"/device-groups/").concat(e,"/devices"),{data:{ID:e,Devices:t}})},v=function(e,t){return a.instance.delete("".concat(r.kb,"/groups/").concat(e,"/hosts/")+t.join(","))},g=function(e,t){return a.instance.delete("".concat(r.rm,"/device-groups/").concat(e,"/devices/").concat(t))},b=function(e){return a.instance.get("".concat(r.rm,"/device-groups/checkName/").concat(e))},y=function(){return a.instance.get("".concat(r.rm,"/device-groups/enforce-edge-groups"))},h=function(e){return a.instance.get("".concat(r.kb,"/groups?name=").concat(e,"&order_by=name&order_how=ASC"))}},56899:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(10467),a=n(64467),o=n(58168),c=n(54756),i=n.n(c),s=n(44914),u=n.n(s),l=n(16165),d=n(97744),p=n(63537),m=n(24408),f=n(5556),v=n.n(f);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.isOpen,n=e.title,a=e.titleIconVariant,c=e.closeModal,s=e.submitLabel,f=e.schema,v=e.initialValues,g=e.variant,y=e.reloadData,h=e.size,E=e.onSubmit,O=e.additionalMappers,D=e.validatorMapper;return u().createElement(l.a,{variant:null!=h?h:"small",title:n,titleIconVariant:null!=a?a:null,isOpen:t,onClose:c},u().createElement(d.A,{schema:f,validatorMapper:D,FormTemplate:function(e){return u().createElement(p.Ay,(0,o.A)({},e,{submitLabel:s,disableSubmit:["invalid"],buttonsProps:{submit:{variant:g}}}))},initialValues:v,componentMapper:O?b(b({},O),m.Ay):m.Ay,onSubmit:function(){var e=(0,r.A)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:setTimeout((0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),500),c();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onCancel:function(){return c()}}))};y.propTypes={isOpen:v().bool,title:v().string,closeModal:v().func,reloadData:v().func,submitLabel:v().string,schema:v().object,initialValues:v().object,variant:v().string,onSubmit:v().func,size:v().string,additionalMappers:v().object,titleIconVariant:v().any,validatorMapper:v().object};const h=y},43085:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(64467),a=n(10467),o=n(5544),c=n(54756),i=n.n(c),s=n(11830),u=n(44914),l=n(45321);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m=function(e){var t,n=e.api,r=e.id,c=void 0===r?null:r,d=e.statusMessages,m=e.tableReload,f=void 0!==m&&m,v=(0,l.useDispatch)(),g=(0,u.useState)([]),b=(0,o.A)(g,2),y=b[0],h=b[1],E=(0,u.useState)(!0),O=(0,o.A)(E,2),D=O[0],A=O[1],S=(0,u.useState)(!1),w=(0,o.A)(S,2),I=w[0],k=w[1],j=(0,u.useState)((function(){return n})),P=(0,o.A)(j,2),M=P[0],C=P[1],T=null===(t=d)||void 0===t?void 0:t.onSuccess;d||(d={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var _=function(){var e=(0,a.A)(i().mark((function e(){var t,n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",A(!0),e.prev=2,e.next=5,M({id:c,query:t});case 5:n=e.sent,h(n),T&&v(p({},(0,s.z8)(p({variant:"success"},d.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),k(!0),v(p({},(0,s.z8)(p({variant:"danger"},d.onError))));case 14:return e.prev=14,A(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){f||_()}),[]),[{data:y,isLoading:D,hasError:I},_,M,C]}},25823:()=>{},16369:()=>{},62275:()=>{},89205:()=>{},20681:()=>{},43502:()=>{},61858:()=>{},43619:()=>{},7302:()=>{},5637:()=>{},86073:()=>{},67879:()=>{},87034:()=>{},70043:()=>{},98469:()=>{},21289:()=>{},36752:()=>{},85586:()=>{}}]);
//# sourceMappingURL=../sourcemaps/GroupsDetail.b6ccecb8324ddc87a388a29ab315d4a9.js.map