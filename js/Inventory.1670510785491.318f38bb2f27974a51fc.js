(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[8471],{36621:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var r=n(70655),a=n(92950),o=n(49945),c=n(38296);const i=e=>{var{children:t,className:n,component:i="div",id:s,isLiveRegion:l=!1}=e,u=(0,r.__rest)(e,["children","className","component","id","isLiveRegion"]);const d=i;return a.createElement(d,Object.assign({id:s,className:(0,c.i)(o.Z.helperText,n)},l&&{"aria-live":"polite"},u),t)};i.displayName="HelperText"},65673:(e,t,n)=>{"use strict";n.d(t,{u:()=>p});var r=n(70655),a=n(92950),o=n(49945),c=n(38296),i=n(80965),s=n(69957),l=n(68778),u=n(43047);const d={default:"",indeterminate:o.Z.modifiers.indeterminate,warning:o.Z.modifiers.warning,success:o.Z.modifiers.success,error:o.Z.modifiers.error},p=e=>{var{children:t,className:n,component:p="div",variant:m="default",icon:f,isDynamic:v=!1,hasIcon:g=v,id:h,screenReaderText:y=`${m} status`}=e,b=(0,r.__rest)(e,["children","className","component","variant","icon","isDynamic","hasIcon","id","screenReaderText"]);const I=p;return a.createElement(I,Object.assign({className:(0,c.i)(o.Z.helperTextItem,d[m],v&&o.Z.modifiers.dynamic,n),id:h},b),f&&a.createElement("span",{className:(0,c.i)(o.Z.helperTextItemIcon),"aria-hidden":!0},f),g&&!f&&a.createElement("span",{className:(0,c.i)(o.Z.helperTextItemIcon),"aria-hidden":!0},("default"===m||"indeterminate"===m)&&a.createElement(i.ZP,null),"warning"===m&&a.createElement(s.ZP,null),"success"===m&&a.createElement(l.ZP,null),"error"===m&&a.createElement(u.ZP,null)),a.createElement("span",{className:(0,c.i)(o.Z.helperTextItemText)},t,v&&a.createElement("span",{className:"pf-u-screen-reader"},": ",y,";")))};p.displayName="HelperTextItem"},80965:(e,t,n)=>{"use strict";n.d(t,{V_:()=>o,ZP:()=>c,jm:()=>a});var r=n(40400);const a={name:"MinusIcon",height:512,width:448,svgPath:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",yOffset:0,xOffset:0},o=(0,r.IU)(a),c=o},49945:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(71338);const r={helperText:"pf-c-helper-text",helperTextItem:"pf-c-helper-text__item",helperTextItemIcon:"pf-c-helper-text__item-icon",helperTextItemText:"pf-c-helper-text__item-text",modifiers:{indeterminate:"pf-m-indeterminate",warning:"pf-m-warning",success:"pf-m-success",error:"pf-m-error",dynamic:"pf-m-dynamic"},themeDark:"pf-theme-dark"}},80292:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ae});var r=n(15861),a=n(4942),o=n(29439),c=n(64687),i=n.n(c),s=n(92950),l=n.n(s),u=n(80123),d=n(39173),p=n(14748),m=n(15656),f=n(45697),v=n.n(f),g=n(64124),h=n(96354),y=n(60722),b=n(87462),I=n(23279),E=n.n(I),Z=n(36621),S=n(65673),O=n(54680),D=n(92694),x=n(41693),M=n(48880),T=n(96094),w=n(87029);const N=function(e){(0,x.Z)(e);var t=(0,M.default)().change,n=(0,s.useState)(!1),r=(0,o.Z)(n,2),a=r[0],c=r[1],i=(0,s.useState)(null),u=(0,o.Z)(i,2),d=u[0],p=u[1],m=(0,T.Z)({api:w.jA}),f=(0,o.Z)(m,2),v=f[0],g=v.data,h=v.isLoading,y=f[1],I=(0,s.useState)(""),N=(0,o.Z)(I,2),k=N[0],_=N[1],P=function(e){p(e),c(!1),t("group",e)},R=(null==g?void 0:g.data)||[],j=(null==g?void 0:g.count)||0;return l().createElement(l().Fragment,null,l().createElement(Z.p,null,!h&&!d&&a&&j>R.length?l().createElement(S.u,{variant:"warning",className:"pf-u-font-weight-bold"},"Over ",R.length," results found. Refine your search."):l().createElement(S.u,{className:"pf-u-font-weight-bold"},"Select a group")),l().createElement(O.P,{variant:"typeahead",typeAheadAriaLabel:"Select a group",onToggle:function(e){c(e)},onSelect:function(e,t){e&&P(t)},onClear:function(){_(""),y(),P(null)},selections:d||k,isOpen:a,onFilter:E()((function(e,t){e&&t!=k&&(_(t),y({name:encodeURIComponent(t)}))}),300),"aria-labelledby":"typeahead-select-id-1",placeholderText:"Type or click to select a group",noResultsFoundText:h?"Loading...":"No results found",isInputValuePersisted:!0,maxHeight:"180px"},h?[]:null==R?void 0:R.map((function(e){var t=e.DeviceGroup;return l().createElement(D.$,(0,b.Z)({key:t.ID,value:{toString:function(){return t.Name},groupId:t.ID}},t.description&&{description:t.description}))}))))};var k=n(32349),_=n(86706),P=n(47173),R=n(68340),j=function(e){var t=e.closeModal;return l().createElement(l().Fragment,null,l().createElement(R.x,null,"Or"),l().createElement(P.zx,{variant:"secondary",className:"pf-u-w-50",onClick:t},"Create Group"))};j.propTypes={closeModal:v().func};var A=function(e){var t=e.length>1?"".concat(e.length," systems"):e[0].name;return l().createElement(R.x,null,"Select a group to add ",l().createElement("strong",null,t," ")," or create a new one.")},C=function(e){return{fields:[{component:h.Z.PLAIN_TEXT,name:"description",label:A(e)},{component:"search-input",name:"group",label:"Select a group",isRequired:!0,validate:[{type:g.Z.REQUIRED}]},{component:"create-group-btn",name:"create-group-btn"}]}},G=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,r=e.setIsCreateGroupModalOpen,a=e.reloadData,o=e.deviceIds,c=(0,_.I0)();return l().createElement(y.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Add to group",submitLabel:"Add",additionalMappers:{"search-input":{component:N},"create-group-btn":{component:j,closeModal:function(){r(!0),n(!1)}}},schema:C(o),onSubmit:function(e){var t=e.group,n={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(t.toString()," successfully")},onError:{title:"Error",description:"Failed to add system to group"}};(0,k.Z)(c,(function(){return(0,w.e3)(parseInt(t.groupId),o)}),n)},reloadData:a})};const L=G;G.propTypes={isModalOpen:v().bool,setIsModalOpen:v().func,setIsCreateGroupModalOpen:v().func,reloadData:v().func,deviceIds:v().array};var F=function(e){(0,x.Z)(e);var t=(0,M.default)().change,n=(0,s.useState)(!1),r=(0,o.Z)(n,2),a=r[0],c=r[1],i=(0,s.useState)(null),u=(0,o.Z)(i,2),d=u[0],p=u[1],m=function(){p(null),t("group",null),c(!1)};return l().createElement(l().Fragment,null,l().createElement(O.P,{variant:"typeahead",typeAheadAriaLabel:"Select a state",onToggle:function(e){return c(e)},onSelect:function(e,n,r){r?m():(p(n),c(!1)),t("group",n)},onClear:m,selections:d,isOpen:a,"aria-labelledby":"typeahead-select-id-1",placeholderText:"Type or click select group"},e.defaultOptions.map((function(e,t){var n=e.DeviceGroup;return l().createElement(D.$,(0,b.Z)({key:t,value:{toString:function(){return n.Name},groupId:n.ID}},n.description&&{description:n.description}))}))))};F.propTypes={defaultOptions:v().array};const U=F;var H=n(69957),$=n(37655),V=function(e){var t=e[0].deviceGroups,n=e.length>1?"".concat(e.length," systems"):e[0].name,r=1===t.length?t[0].Name:"".concat(t.length," groups");return t.length>1?l().createElement(R.x,null,"Select the group you want to remove ",l().createElement("strong",null,n)," from."):l().createElement(R.x,null,"Do you want to remove ",l().createElement("strong",null,n," ")," from"," ",l().createElement("strong",null,r),"?")},q=function(){return l().createElement(H.ZP,{color:$.Z.value})},X=function(e){var t={fields:[{component:h.Z.PLAIN_TEXT,name:"description",label:V(e)}]};return e[0].deviceGroups.length>1&&t.fields.push({component:"search-input",name:"group",label:"Select a group",isRequired:!0,validate:[{type:g.Z.REQUIRED}]}),t},z=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,r=e.reloadData,a=e.deviceInfo,o=(0,_.I0)(),c=a[0].deviceGroups;return l().createElement(y.Z,{isOpen:t,variant:"danger",closeModal:function(){return n(!1)},title:"Remove from group",submitLabel:"Remove",titleIconVariant:q,additionalMappers:{"search-input":{component:U,defaultOptions:c.map((function(e){return{DeviceGroup:e}}))||[]}},schema:X(a),onSubmit:function(e){var t=c.length>1,n=t?e.group.toString():c[0].Name,r=t?e.group.groupId:c[0].ID,i={onSuccess:{title:"Success",description:"".concat(a[0].name," has been removed from ").concat(n," successfully")},onError:{title:"Error",description:"Failed to remove system from group"}};(0,k.Z)(o,(function(){return(0,w._j)(r,a[0].ID)}),i)},reloadData:r})};const Q=z;z.propTypes={isModalOpen:v().bool,setIsModalOpen:v().func,reloadData:v().func,deviceInfo:v().array};var B=n(41825),J=n(8027),K=n(96620),W=n(52643),Y=n(2372);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=l().lazy((function(){return Promise.all([n.e(6085),n.e(2409),n.e(3339),n.e(3006),n.e(6681)]).then(n.bind(n,68940))}));const ae=function(){var e,t=(0,K.useHistory)(),n=(0,T.Z)({api:J.$v,tableReload:!0}),a=(0,o.Z)(n,2),c=a[0],f=a[1],v=c.data,g=c.isLoading,h=c.hasError,y=(0,s.useState)(!1),b=(0,o.Z)(y,2),I=b[0],E=b[1],Z=(0,s.useState)(!1),S=(0,o.Z)(Z,2),O=S[0],D=S[1],x=(0,s.useState)([]),M=(0,o.Z)(x,2),w=M[0],N=M[1],k=(0,s.useState)([]),_=(0,o.Z)(k,2),P=_[0],R=_[1],j=(0,s.useState)(!1),A=(0,o.Z)(j,2),C=A[0],G=A[1],F=(0,s.useState)(!1),U=(0,o.Z)(F,2),H=U[0],$=U[1],V=(0,s.useState)(!1),q=(0,o.Z)(V,2),X=q[0],z=q[1],ee=(0,s.useState)({isOpen:!1,deviceData:null,imageData:null}),ae=(0,o.Z)(ee,2),oe=ae[0],ce=ae[1],ie=function(e,t){E(!0),t?N(e):R(e),G(t)},se=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:$(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l().createElement(l().Fragment,null,l().createElement(u.Z,{className:"pf-m-light"},l().createElement(d.Z,{title:"Systems"})),l().createElement(p.Z,{className:"edge-devices"},l().createElement(m.Z,{isSystemsView:!0,data:null==v||null===(e=v.data)||void 0===e?void 0:e.devices,count:null==v?void 0:v.count,isLoading:g,hasError:h,setUpdateModal:ce,updateModal:oe,handleAddDevicesToGroup:ie,handleRemoveDevicesFromGroup:function(e,t){D(!0),t?N(e):R(e),G(t)},handleUpdateSelected:function(){ce((function(e){return te(te({},e),{},{deviceData:P.map((function(e){return{id:e.id,display_name:e.display_name,deviceStatus:e.deviceStatus}})),imageData:{imageName:P[0].imageName},imageSetId:P[0].imageSetId,isOpen:!0})}))},hasCheckbox:!0,selectedItems:R,selectedItemsUpdateable:function(){var e=!1;if(P.length>0){var t,n=P[0].imageSetId,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(P);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.imageSetId!==n){e=!1;break}(!e&&a.updateImageData&&"updateAvailable"===a.deviceStatus||"unresponsive"===a.deviceStatus||"error"===a.deviceStatus)&&(e=!0)}}catch(e){r.e(e)}finally{r.f()}}return e}(),kebabItems:[{isDisabled:!(P.length>0),title:"Add to group",onClick:function(){return ie(P.map((function(e){return{ID:e.deviceID,name:e.display_name}})),!1)}}],hasModalSubmitted:H,setHasModalSubmitted:$,fetchDevices:f})),oe.isOpen&&l().createElement(s.Suspense,{fallback:l().createElement(W.b,null,l().createElement(Y.$,null))},l().createElement(re,{navigateBack:function(){t.push({pathname:t.location.pathname}),ce((function(e){return te(te({},e),{},{isOpen:!1})}))},setUpdateModal:ce,updateModal:oe,refreshTable:se})),I&&l().createElement(L,{isModalOpen:I,setIsModalOpen:E,setIsCreateGroupModalOpen:z,reloadData:se,deviceIds:C?w:P}),X&&l().createElement(B.Z,{isModalOpen:X,setIsModalOpen:z,reloadData:se,deviceIds:C?w:P}),O&&l().createElement(Q,{isModalOpen:O,setIsModalOpen:D,reloadData:se,deviceInfo:C?w:P}))}},41825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(15861),a=n(64687),o=n.n(a),c=n(92950),i=n.n(c),s=n(45697),l=n.n(s),u=n(64124),d=n(96354),p=n(60722),m=n(87029),f=n(48903),v=n(32349),g=n(86706),h=function(){var e=(0,r.Z)(o().mark((function e(){var t,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=n.length>0&&void 0!==n[0]?n[0]:"").length){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,(0,m.Tb)(t);case 5:if(!e.sent.data.isValid){e.next=8;break}throw"Group name already exists";case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y={groupName:function(){return h}},b={fields:[{component:d.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,autoFocus:!0,validate:[{type:"groupName"},{type:u.Z.REQUIRED},{type:u.Z.MAX_LENGTH,threshold:50},f.qg]}]},I=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.deviceIds,c=e.reloadData,s=(0,g.I0)(),l=function(e){var t={onSuccess:{title:"Success",description:"".concat(e.name," has been created successfully")},onError:{title:"Error",description:"Failed to create group"}};return(0,v.Z)(s,(function(){return(0,m.sS)(e)}),t)},u=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:n=e.sent,r=n.ID,c={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(t.name," successfully")},onError:{title:"Error",description:"Failed to add system to group"}},(0,v.Z)(s,(function(){return(0,m.e3)(parseInt(r),a)}),c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i().createElement(p.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Create group",submitLabel:"Create",schema:b,onSubmit:a?u:l,reloadData:c,validatorMapper:y})};const E=I;I.propTypes={isModalOpen:l().bool,setIsModalOpen:l().func,reloadData:l().func,deviceIds:l().array}},71338:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Inventory.7e892be49aaff1a8347b19daee1f8b08.js.map