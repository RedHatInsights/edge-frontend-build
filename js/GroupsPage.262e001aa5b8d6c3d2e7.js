(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[734],{85659:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ee});var l=n(87757),r=n.n(l),a=n(48926),o=n.n(a),c=n(59713),u=n.n(c),i=n(63038),s=n.n(i),m=n(1427),d=n.n(m),p=n(69859),v=n(83958),E=n(4250),f=n(75061),g=n(96416),h=n(8969),b=n(68433),y=n(44510),O=n(49739),k=n(83826),S=n(518),T=n(15209),D=n(47173),w=n(29924),L=n(35585),x=n(40308),C=n(50693),P=n(16475),R=n(32203),j=n(62394),Z=n(70401),A=n(52643),I=n(2372),N=n(60485),_=n(68774),z=n(25834),G=n(78140),F=n(68340),J=n(48140),q=n(86050),H=n(49734),W=n(79851),K=n(34512),B=n(89478),V=n(55399),U=n(76464),X=n(5029),M=n(17908),Q=n(11306);const Y=function(){var e,t,n,l,r,a,o,c,u=(0,p.useDispatch)(),i=(0,p.useSelector)((function(e){var t=e.thresholdReducer;return(null==t?void 0:t.threshold)||{}})),s=(0,p.useSelector)((function(e){var t=e.thresholdReducer;return null==t?void 0:t.isLoading})),v=(0,p.useSelector)((function(e){var t=e.devicesInfoReducer;return null==t?void 0:t.isLoading})),f=(0,p.useSelector)((function(e){var t=e.devicesInfoReducer;return(null==t?void 0:t.devicesInfo)||{}})),g=(0,p.useSelector)((function(e){var t=e.canariesInfoReducer;return(null==t?void 0:t.canariesInfo)||{}})),h=(0,p.useSelector)((function(e){var t=e.canariesInfoReducer;return null==t?void 0:t.isLoading}));return(0,m.useEffect)((function(){u((0,E.QK)()),u((0,E._n)()),u((0,E.PE)())}),[]),d().createElement(C.r,{hasGutter:!0},d().createElement(P.P,{span:3},d().createElement(R.Z,null,d().createElement(Z.O,null,d().createElement(N.D,{headingLevel:"h3"},"Health threshold")),d().createElement(j.e,null,!1===s?d().createElement(X.Td,{ariaDesc:"Health threshold",ariaTitle:"Health threshold",constrainToVisibleArea:!0,legendOrientation:"vertical",legendPosition:"right",height:230,width:450,data:i.map((function(e){var t,n;return{x:null===(t=Object.keys(e))||void 0===t?void 0:t[0],y:null===(n=Object.values(e))||void 0===n?void 0:n[0]}})),legendData:i.map((function(e){var t,n;return{name:"".concat(null===(t=Object.keys(e))||void 0===t?void 0:t[0],": ").concat(null===(n=Object.values(e))||void 0===n?void 0:n[0])}})),padding:{bottom:20,left:20,right:140,top:20},labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},themeColor:M.nz.multiOrdered}):d().createElement(A.b,null,d().createElement(I.$,null))))),d().createElement(P.P,{span:3},d().createElement(R.Z,null,d().createElement(Z.O,null,d().createElement(N.D,{headingLevel:"h3"},"Devices info")),d().createElement(j.e,null,d().createElement(_.D,null,d().createElement(z.G,{component:z.F.dl},d().createElement(G.T,{component:G.v.dt},!1===v?d().createElement(F.x,{component:F.q.h1},d().createElement(V.Link,{to:"/groups"},null==f?void 0:f.requiredApproval)):d().createElement(T.O,null)),d().createElement(G.T,{component:G.v.dd},"Required approvals"),d().createElement(G.T,{component:G.v.dt},!1===v?d().createElement(F.x,{component:F.q.h1},d().createElement(V.Link,{to:"/groups"},null==f?void 0:f.orphaned)):d().createElement(T.O,null)),d().createElement(G.T,{component:G.v.dd},"Orphaned devices"),d().createElement(G.T,{component:G.v.dt},!1===v?d().createElement(F.x,{component:F.q.h1},d().createElement(V.Link,{to:"/groups"},null==f?void 0:f.delivering)):d().createElement(T.O,null)),d().createElement(G.T,{component:G.v.dd},"Devices on the way")))))),d().createElement(P.P,{span:3},d().createElement(R.Z,null,d().createElement(Z.O,null,d().createElement(N.D,{headingLevel:"h3"},"Last Canaries")),d().createElement(j.e,null,d().createElement(_.D,null,d().createElement(z.G,{component:z.F.dl},d().createElement(G.T,{component:G.v.dt},d().createElement(V.Link,{to:"/groups"},"Sensors")),d().createElement(G.T,{component:G.v.dd},!1===h?d().createElement(J.a,null,d().createElement(q.Z,null,d().createElement(B.t,{date:null==g||null===(e=g.sensors)||void 0===e?void 0:e.time})),d().createElement(q.Z,null,d().createElement(U.J,{status:null==g||null===(t=g.sensors)||void 0===t?void 0:t.status}))):d().createElement(T.O,null)),d().createElement(G.T,{component:G.v.dt},d().createElement(V.Link,{to:"/groups"},"Scanners")),d().createElement(G.T,{component:G.v.dd},!1===h?d().createElement(J.a,null,d().createElement(q.Z,null,d().createElement(B.t,{date:null==g||null===(n=g.scanners)||void 0===n?void 0:n.time})),d().createElement(q.Z,null,d().createElement(U.J,{status:null==g||null===(l=g.scanners)||void 0===l?void 0:l.status}))):d().createElement(T.O,null)),d().createElement(G.T,{component:G.v.dt},d().createElement(V.Link,{to:"/groups"},"Kiosks")),d().createElement(G.T,{component:G.v.dd},!1===h?d().createElement(J.a,null,d().createElement(q.Z,null,d().createElement(B.t,{date:null==g||null===(r=g.kiosks)||void 0===r?void 0:r.time})),d().createElement(q.Z,null,d().createElement(U.J,{status:null==g||null===(a=g.kiosks)||void 0===a?void 0:a.status}))):d().createElement(T.O,null)),d().createElement(G.T,{component:G.v.dt},d().createElement(V.Link,{to:"/groups"},"Antenna")),d().createElement(G.T,{component:G.v.dd},!1===h?d().createElement(J.a,null,d().createElement(q.Z,null,d().createElement(B.t,{date:null==g||null===(o=g.antenna)||void 0===o?void 0:o.time})),d().createElement(q.Z,null,d().createElement(U.J,{status:null==g||null===(c=g.antenna)||void 0===c?void 0:c.status}))):d().createElement(T.O,null))))),d().createElement(H.e,null,d().createElement(W.P,null,d().createElement(K.J,{isFilled:!0}),d().createElement(K.J,null,d().createElement(V.Link,{to:"/groups"},"See canaries ",d().createElement(Q.ZP,null))))))))};var $=n(67154),ee=n.n($),te=n(45697),ne=n.n(te),le=n(9947),re=n(75106),ae=n(33237),oe=[{title:"Name of group",transforms:[ae.sortable,(0,ae.cellWidth)("max")]},{title:"Number of devices",transforms:[ae.sortable]},{title:"Secure",transforms:[ae.sortable,(0,ae.cellWidth)(10)]},{title:"Last seen",transforms:[ae.sortable,(0,ae.cellWidth)(15)]},{title:"Status",transforms:[ae.sortable,(0,ae.cellWidth)(10)]}],ce=function(e){var t=e.onAddNewGroup,n=(0,m.useState)({}),l=s()(n,2),r=l[0],a=l[1],o=(0,p.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.groups}));return d().createElement(ae.Table,ee()({"aria-label":"Groups table"},o.length>0&&{actions:[{title:"Adopt",onClick:console.log},{title:"Reject",onClick:console.log}]},{cells:oe,sortBy:r,onSort:function(e,t,n){return a((function(){return{index:t,direction:n}}))},rows:o.length>0?o.map((function(e){var t;return{cells:[{title:d().createElement(V.Link,{to:"/groups/".concat(null==e?void 0:e.uuid)},null==e?void 0:e.name)},null==e||null===(t=e.sensors)||void 0===t?void 0:t.length,{title:d().createElement(U.U,{isSecure:null==e?void 0:e.is_secure})},{title:d().createElement(B.t,{date:null==e?void 0:e.last_seen})},{title:d().createElement(U.J,{status:null==e?void 0:e.status})}]}})):[{cells:[{title:d().createElement(A.b,null,d().createElement(le.u,{variant:le.I.full},d().createElement(N.D,{headingLevel:"h5",size:"lg"},"No matching groups found"),d().createElement(re.B,null,"This filter criteria matches no groups. ",d().createElement("br",null)," Try changing your filter settings. Or adding new group."),d().createElement(D.zx,{variant:"primary",onClick:t},"Add group"))),props:{colSpan:oe.length+1}}]}]}),d().createElement(ae.TableHeader,null),d().createElement(ae.TableBody,null))};ce.propTypes={onAddNewGroup:ne().func};const ue=ce;var ie=n(87242),se=n(86163);const me={fields:[{component:ie.Z.WIZARD,name:"wizzard",inModal:!0,title:"Create new group",fields:[{title:"General information",name:"step-1",nextStep:"choos-systems",fields:[{component:ie.Z.TEXT_FIELD,name:"group-name",type:"text",label:"Group name",isRequired:!0,validate:[{type:"required"}]},{component:ie.Z.SWITCH,name:"is-secure",label:"Is secure"}]},{title:"Choose systems",name:"choos-systems",fields:[{component:se.k,name:"select-system"}]}]}]};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=(0,m.lazy)((function(){return Promise.all([n.e(410),n.e(0),n.e(459)]).then(n.bind(n,75459))}));const Ee=function(){var e=(0,m.useState)({}),t=s()(e,2),n=t[0],l=t[1],a=(0,m.useState)(!1),c=s()(a,2),u=c[0],i=c[1],C=(0,p.useDispatch)(),P=(0,p.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.isLoading})),R=(0,p.useSelector)((function(e){var t=e.groupsReducer;return(null==t?void 0:t.meta)||{page:1}}));return(0,m.useEffect)((function(){(0,f.JH)().register({groupsReducer:g.zX,thresholdReducer:g.KT,devicesInfoReducer:g.bh,canariesInfoReducer:g.KY}),C((0,E.tb)())}),[]),d().createElement(m.Fragment,null,d().createElement(b.m,{className:"pf-m-light"},d().createElement(b.B,{title:"Available groups"})),d().createElement(y.o,{className:"edge-groups"},d().createElement(O.K,{hasGutter:!0},d().createElement(k.v,{className:"edge-groups__info"},d().createElement(Y,null)),d().createElement(k.v,{isFilled:!0},d().createElement(w.U,!1===P?{pagination:{itemCount:null==R?void 0:R.count,page:(null==R?void 0:R.offset)/(null==R?void 0:R.limit)+1,perPage:Number(null==R?void 0:R.limit),isCompact:!0},dedicatedAction:d().createElement(D.zx,{onClick:function(){return i(!0)},isDisabled:!1!==P},"Add group"),filterConfig:{items:[{label:"Name",type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return l(pe(pe({},n||{}),{},{name:t}))},value:(null==n?void 0:n.name)||"",placeholder:"Filter by name"}},{label:"Security",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return l(pe(pe({},n||{}),{},{name:t}))},items:[{value:"isSecure",label:"Secure"},{value:"nonSecure",label:"Not secure"}],value:(null==n?void 0:n.security)||[]}},{label:"Status",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return l(pe(pe({},n||{}),{},{name:t}))},items:h.O.map((function(e){return{value:e,label:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}})),value:(null==n?void 0:n.status)||[]}}]}}:{pagination:d().createElement(T.O,null)}),!1===P?d().createElement(ue,{onAddNewGroup:function(){return i(!0)}}):d().createElement(x.c,{colSize:5,rowSize:15}),d().createElement(L.f,{isFooter:!0},!1===P&&d().createElement(S.t,{itemCount:null==R?void 0:R.count,page:(null==R?void 0:R.offset)/(null==R?void 0:R.limit)+1,perPage:Number(null==R?void 0:R.limit),dropDirection:"up"}))))),u&&d().createElement(m.Suspense,{fallback:""},d().createElement(ve,{schema:me,isOpened:u,onAction:function(e,t){e&&o()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.d_)({groupName:t["group-name"],isSecure:t["is-secure"],systemIDs:t.selected});case 2:C((0,E.tb)());case 3:case"end":return e.stop()}}),e)})))(),i(!1)}})))}}}]);
//# sourceMappingURL=GroupsPage.262e001aa5b8d6c3d2e7.js.map