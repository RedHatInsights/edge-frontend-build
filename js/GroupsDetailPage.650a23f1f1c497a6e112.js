"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[673],{38857:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Me});var a=n(93433),l=n(4942),r=n(15861),o=n(29439),i=n(87757),c=n.n(i),u=n(93264),s=n.n(u),d=n(75662),m=n(50693),p=n(16475),v=n(64029),f=n(32835),g=n(69174),b=n(52643),E=n(2372),y=n(56455),h=n(48716),I=n(38775),O=n(53895),D=n(82041),S=n(87462),Z=n(91290),w=n(35224),P=n(79706),j=n(47173),k=n(45697),C=n.n(k),M=function(e){var t=e.title,n=e.content;return s().createElement(s().Fragment,null,s().createElement("span",null,t),s().createElement(P.J,{headerContent:s().createElement("div",null,t),bodyContent:s().createElement("div",null,n)},s().createElement(j.zx,{variant:"plain","aria-label":"Action for ".concat(t),className:"ins-active-general_information__popover-icon"},s().createElement(Z.ZP,null))))};M.propTypes={title:C().string,content:C().string};const T=M;var N=n(35451),_=n(84564),U=n(18802),R=function(e){var t=e.status;return"green"===t?s().createElement(s().Fragment,null,s().createElement(N.ZP,{color:"green",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-success-color-200"},"Passed")):"red"===t?s().createElement(s().Fragment,null,s().createElement(_.ZP,{color:"red",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-danger-color-200"},"Failed and reverted")):s().createElement(s().Fragment,null,s().createElement(U.ZP,{className:"pf-u-mr-sm"}),s().createElement("span",null,"Waiting for update"))};R.propTypes={status:C().string};const A=R;var L=n(58753),x=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(736)]).then(n.bind(n,92373))})),F=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(736)]).then(n.bind(n,20786))})),G=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252)]).then(n.bind(n,18569))})),z=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252)]).then(n.bind(n,91768))})),B=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252)]).then(n.bind(n,38514))})),W=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252)]).then(n.bind(n,10392))})),H=(0,u.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(570)]).then(n.bind(n,84570))}));const q=function(){var e=(0,D.useSelector)((function(e){var t=e.permissionsReducer;return null==t?void 0:t.writePermissions})),t=(0,D.useSelector)((function(e){var t,n=e.systemProfileStore;return{greenbootStatus:null==n||null===(t=n.systemProfile)||void 0===t?void 0:t.greenboot_status,rhcHealth:null}})),n=t.greenbootStatus,a=t.rhcHealth;return s().createElement(u.Suspense,{fallback:""},s().createElement(x,{store:(0,D.useStore)(),writePermissions:e,SystemCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(F,(0,S.Z)({},e,{hasCPUs:!1,hasSockets:!1,hasCores:!1,hasCPUFlags:!1,hasRAM:!1,hasSAP:!1,extra:[{title:s().createElement(T,{title:"GreenBoot Status",content:"This is a description about greenboot status"}),value:s().createElement(A,{status:n})}]})))},OperatingSystemCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""}," ",s().createElement(W,e))},BiosCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""}," ",s().createElement(H,e))},InfrastructureCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(z,e))},ConfigurationCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(G,(0,S.Z)({},e,{hasKernelModules:!0})))},CollectionCardWrapper:function(e){return s().createElement(u.Suspense,{fallback:""},s().createElement(B,(0,S.Z)({},e,{extra:[{title:"RHC Health (broker functioning)",value:L.qi[null==a?void 0:a.toUpperCase()]||s().createElement(w.u,{content:"Unknown service status"},s().createElement(Z.ZP,{className:"ins-c-inventory__detail--unknown"}))}]})))}}))};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=(0,n(18546).Gg)({LOAD_ENTITY_FULFILLED:function(e){return J(J({},e),{},{loaded:!0,activeApps:[{title:"General information",name:"general_information",component:q}]})}}),$=n(59245),X=n(32002),K=n(14638),Y=n(28883),ee=n(29873),te=n(33902),ne=n(22663),ae=n(87116),le=n(86350),re=n(94768),oe=n(80236),ie=n(68340),ce=n(68774),ue=n(78140),se=n(25834),de=n(29390),me=n(68920),pe=n(5230),ve=n(94778),fe=n(83215),ge=n(66702);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t,n,a,l,r,o,i=e.updateCveModal,c=e.setUpdateCveModal,d=e.setReload,m=(0,D.useDispatch)(),p=(0,u.useContext)($.g).getRegistry,v=(0,D.useSelector)((function(e){var t=e.imageDetailReducer;return{data:(null==t?void 0:t.data)||null}}),D.shallowEqual).data;(0,u.useEffect)((function(){var e=p().register({imageDetailReducer:pe.OD});return(null==i?void 0:i.imageId)&&(0,ve.J_)(m,null==i?void 0:i.imageId),function(){return e()}}),[m]);var f=function(){c((function(e){return Ee(Ee({},e),{},{isOpen:!1})}))};return v?s().createElement(oe.u,{variant:"medium",title:"Update image: ".concat(null==v||null===(t=v.image)||void 0===t?void 0:t.Name),description:"Review the information and click Create image to start the build process",isOpen:i.isOpen,onClose:f,actions:[s().createElement(j.zx,{key:"confirm",variant:"primary",onClick:function(){var e,t,n,a,l,r,o,i,c,u,s={Id:null==v||null===(e=v.image)||void 0===e?void 0:e.ID,description:null==v||null===(t=v.image)||void 0===t?void 0:t.Description,name:null==v||null===(n=v.image)||void 0===n?void 0:n.Name,version:(null==v||null===(a=v.image)||void 0===a?void 0:a.Version)+1,architecture:"x86_64",credentials:null==v||null===(l=v.image)||void 0===l?void 0:l.Installer.SshKey,username:null==v||null===(r=v.image)||void 0===r?void 0:r.Installer.Username,imageType:null==v||null===(o=v.image)||void 0===o?void 0:o.OutputTypes,"selected-packages":null==v||null===(i=v.image)||void 0===i||null===(c=i.Packages)||void 0===c?void 0:c.map((function(e){return{name:e.Name}})),release:null==v||null===(u=v.image)||void 0===u?void 0:u.Distribution};f(),d(!0),(0,ve.Es)(m,s,(function(e){var t,n;m(Ee(Ee({},(0,fe.wN)({variant:"info",title:"Update image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,ge.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,fe.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,fe.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))},function(e){return(0,ve.n9)(e)}]}}}})),(0,ve.n9)(m),m((0,ve.Fj)({name:null==v||null===(t=v.image)||void 0===t?void 0:t.Name,id:null==v||null===(n=v.image)||void 0===n?void 0:n.ID}))}))}},"Create Image"),s().createElement(j.zx,{key:"cancel",variant:"link",onClick:f},"Cancel")]},s().createElement(ce.D,null,s().createElement(ue.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Details")),s().createElement(se.G,{component:se.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Name"),s().createElement(ue.T,{component:ue.v.dd},null==v||null===(n=v.image)||void 0===n?void 0:n.Name),s().createElement(ue.T,{component:ue.v.dt},"Version"),s().createElement(ue.T,{component:ue.v.dd},(null==v||null===(a=v.image)||void 0===a?void 0:a.Version)+1),s().createElement(ue.T,{component:ue.v.dt},"Description"),s().createElement(ue.T,{component:ue.v.dd},null==v||null===(l=v.image)||void 0===l?void 0:l.Description)),s().createElement(ue.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Output")),s().createElement(se.G,{component:se.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Release"),s().createElement(ue.T,{component:ue.v.dd},me.Ei[null==v||null===(r=v.image)||void 0===r?void 0:r.Distribution]),s().createElement(ue.T,{component:ue.v.dt},"Output type"),s().createElement(ue.T,{component:ue.v.dd},me.bd[null==v||null===(o=v.image)||void 0===o?void 0:o.ImageType])),s().createElement(ue.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Packages")),s().createElement(se.G,{component:se.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Updated"),s().createElement(ue.T,{className:"pf-u-pl-lg",component:ue.v.dd},null==i?void 0:i.cveCount)))):s().createElement(de.Y,null,s().createElement(b.b,null,s().createElement(E.$,{isSVG:!0,diameter:"100px"})))};ye.propTypes={updateCveModal:C().shape({isOpen:C().bool.isRequired,imageId:C().string,cveCount:C().number}).isRequired,setUpdateCveModal:C().func.isRequired,setReload:C().bool};const he=ye;function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(e){var t=e.systemProfile,n=e.setUpdateModal,a=e.imageId,l=e.setReload,i=(0,d.useRouteMatch)("/inventory/:deviceId").params,m=(0,u.useContext)($.g).getRegistry,p=(0,u.useState)({isOpen:!1,imageId:null,cveCount:0}),v=(0,o.Z)(p,2),f=v[0],g=v[1],b=(0,u.useState)(null),E=(0,o.Z)(b,2),y=E[0],h=E[1],I=(0,u.useState)(null),O=(0,o.Z)(I,2),D=O[0],S=O[1],Z=(0,u.useState)("noAlert"),w=(0,o.Z)(Z,2),P=w[0],k=w[1];(0,u.useEffect)((function(){g((function(e){return Oe(Oe({},e),{},{imageId:a})}))}),[a]),(0,u.useEffect)((function(){(0,r.Z)(c().mark((function e(){var n,a,l,r,o,i,u,s,d,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.system_profile){e.next=2;break}return e.abrupt("return");case 2:return d={id:null==t||null===(n=t.system_profile)||void 0===n||null===(a=n.image_data)||void 0===a||null===(l=a.ImageInfo)||void 0===l||null===(r=l.Image)||void 0===r?void 0:r.ImageSetID},e.next=5,(0,ge.dt)(d);case 5:m=e.sent,S(null==m||null===(o=m.Data)||void 0===o||null===(i=o.images)||void 0===i||null===(u=i[0])||void 0===u||null===(s=u.image)||void 0===s?void 0:s.Status);case 7:case"end":return e.stop()}}),e)})))()}),[t]),(0,u.useEffect)((function(){var e;(null==y||!y.isLoading)&&(null==y||null===(e=y.meta)||void 0===e||!e.filter)&&g((function(e){var t;return Oe(Oe({},e),{},{cveCount:null==y||null===(t=y.data)||void 0===t?void 0:t.length})})),k((function(e){return function(e,t,n,a,l){var r,o,i,c,u,s,d,m;return null!=e&&e.isLoading||null!=e&&null!==(r=e.meta)&&void 0!==r&&r.filter||null==t||!t.system_profile?l:!(null!=e&&null!==(o=e.data)&&void 0!==o&&o.length)>0||!a?"noAlert":"BUILDING"===(null==t||null===(i=t.system_profile)||void 0===i?void 0:i.status)||"CREATED"===(null==t||null===(c=t.system_profile)||void 0===c?void 0:c.status)?"systemUpdating":(null==t||null===(u=t.system_profile)||void 0===u||null===(s=u.image_data)||void 0===s||null===(d=s.ImageInfo)||void 0===d||null===(m=d.UpdatesAvailable)||void 0===m?void 0:m.length)>0?"updateDevice":"BUILDING"===n||"CREATED"===n?"imageBuilding":"updateImage"}(y,t,D,a,e)}))}),[y,t,D]);var C={updateImage:s().createElement(ae.b,{className:"pf-u-mb-md",variant:"info",isInline:!0,title:"To remediate CVEs, update the image.",actionLinks:s().createElement(j.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){g((function(e){return Oe(Oe({},e),{},{isOpen:!0})}))}},"Update Image")}),imageBuilding:s().createElement(ae.b,{className:"pf-u-mb-md",customIcon:s().createElement(re.ZP,null),variant:"info",isInline:!0,title:"Image build in progress. Once completed, you'll need to update your device."}),updateDevice:s().createElement(ae.b,{className:"pf-u-mb-md",variant:"warning",isInline:!0,title:" Image build completed. Update device to the newest image version to remediate CVEs.",actionLinks:s().createElement(j.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){n((function(e){return Oe(Oe({},e),{},{isOpen:!0})}))}},"Update Device")}),systemUpdating:s().createElement(ae.b,{className:"pf-u-mb-md",customIcon:s().createElement(re.ZP,null),variant:"info",isInline:!0,title:"Device updating. No additional actions required."}),noAlert:s().createElement(s().Fragment,null)};return s().createElement(s().Fragment,null,s().createElement(le.Z,{className:"add-100vh"},C[P],s().createElement(ne.Z,{appName:"vulnerability",module:"./SystemDetail",getRegistry:m,customIntlProvider:!0,entity:{id:i.deviceId},canSelect:!1,canEditPairStatus:!1,canManageColumns:!1,linkToCustomerPortal:!0,defaultColumns:["synopsis","public_date","impact","cvss_score","advisory"],filters:["filter","security_rule","known_exploit","impact","cvss_score","advisory"],customAction:function(e){h(e)}})),f.isOpen&&s().createElement(he,{updateCveModal:f,setUpdateCveModal:g,setReload:l}))};De.propTypes={imageId:C().string,systemProfile:C().object,setUpdateModal:C().func,setReload:C().bool};const Se=De;var Ze=function(e){var t=e.systemProfile,n=e.imageId,a=e.setUpdateModal,l=e.setReload,r=(0,u.useState)(0),i=(0,o.Z)(r,2),c=i[0],d=i[1];return s().createElement("div",{className:"edge-c-device--detail add-100vh"},s().createElement(K.m,{className:"pf-u-ml-md",activeKey:c,onSelect:function(e,t){return d(t)}},s().createElement(Y.O,{eventKey:0,title:s().createElement(ee.T,null,"Details")},s().createElement(te.Z,{showTags:!0,fallback:""})),s().createElement(Y.O,{eventKey:1,title:s().createElement(ee.T,null,"Vulnerability")},s().createElement(Se,{systemProfile:t,setUpdateModal:a,imageId:n,setReload:l}))))};Ze.propTypes={imageId:C().string,systemProfile:C().object,setUpdateModal:C().func,setReload:C().bool};const we=Ze;var Pe=n(19694);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=s().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(444),n.e(940),n.e(344)]).then(n.bind(n,68940))}));const Me=function(){var e,t,n,l,i,S,Z,w,P,j,k,C,M,T,_,R,A,L,x,F,G,z,B,W,H,q,V,J,K,Y,ee=(0,u.useState)(null),te=(0,o.Z)(ee,2),ne=te[0],ae=te[1],le=(0,u.useContext)($.g).getRegistry,re=(0,d.useParams)(),oe=re.inventoryId,ie=re.uuid,ce=(0,D.useSelector)((function(e){var t=e.entityDetails;return null==t?void 0:t.entity})),ue=(0,D.useSelector)((function(e){var t=e.groupsDetailReducer;return null==t?void 0:t.name})),se=(0,D.useSelector)((function(e){var t,n=e.entityDetails;return null==n||null===(t=n.entity)||void 0===t?void 0:t.id})),de=(0,u.useState)({isOpen:!1,deviceData:null}),me=(0,o.Z)(de,2),pe=me[0],ve=me[1],fe=(0,u.useState)(!0),be=(0,o.Z)(fe,2),Ee=be[0],ye=be[1],he=(0,u.useState)(!1),Ie=(0,o.Z)(he,2),Oe=Ie[0],De=Ie[1];return(0,u.useEffect)((function(){var e,t;insights.chrome.registerModule("inventory"),null===(e=insights.chrome)||void 0===e||null===(t=e.hideGlobalFilter)||void 0===t||t.call(e,!0),insights.chrome.appAction("system-detail")}),[]),(0,u.useEffect)((function(){(0,r.Z)(c().mark((function e(){var t,n,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=ce&&ce.display_name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,ge.Z4)(se);case 4:l=e.sent,ye(!1),ve((function(e){var t,n,r,o;return ke(ke({},e),{},{deviceData:[].concat((0,a.Z)(e.deviceData||[]),[{display_name:ce.display_name,id:ce.id,system_profile:{image_data:l,status:null==l||null===(t=l.UpdateTransactions)||void 0===t||null===(n=t[l.UpdateTransactions.length-1])||void 0===n?void 0:n.Status}}]),imageData:null==l||null===(r=l.ImageInfo)||void 0===r||null===(o=r.UpdatesAvailable)||void 0===o?void 0:o[0]})})),ae(null==l||null===(t=l.ImageInfo)||void 0===t||null===(n=t.Image)||void 0===n?void 0:n.ID);case 8:case"end":return e.stop()}}),e)})))()}),[ce,Oe]),(0,u.useEffect)((function(){var e,t,n;null===(e=insights)||void 0===e||null===(t=e.chrome)||void 0===t||null===(n=t.appObjectId)||void 0===n||n.call(t,oe)}),[oe]),s().createElement(s().Fragment,null,s().createElement(I.Z,{hideInvLink:!0,showTags:!0,onLoad:function(e){var t=e.mergeWithDetail;le().register(ke({systemProfileStore:X.ZP},t(Q)))}},s().createElement(h.Z,null,s().createElement(v.a,{ouiaId:"systems-list"},s().createElement(f.g,null,s().createElement(d.Link,{to:ie?"/groups":"/inventory"},ie?"Groups":"Systems")),ie&&s().createElement(f.g,null,ue?s().createElement(d.Link,{to:"/groups/".concat(ie)},ue):s().createElement(y.Z,{size:y.i.xs})),s().createElement(f.g,{isActive:!0},s().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},(null==ce?void 0:ce.display_name)||s().createElement(y.Z,{size:y.i.xs})))),s().createElement(O.Z,{fallback:"",actions:[{title:"Update",isDisabled:"BUILDING"===(null===(e=pe.deviceData)||void 0===e||null===(t=e.system_profile)||void 0===t||null===(n=t.image_data)||void 0===n||null===(l=n.UpdateTransactions)||void 0===l||null===(i=l[(null===(S=pe.deviceData)||void 0===S||null===(Z=S.system_profile)||void 0===Z||null===(w=Z.image_data)||void 0===w?void 0:w.UpdateTransactions.length)-1])||void 0===i?void 0:i.Status)||"CREATED"===(null===(P=pe.deviceData)||void 0===P||null===(j=P.system_profile)||void 0===j||null===(k=j.image_data)||void 0===k||null===(C=k.UpdateTransactions)||void 0===C||null===(M=C[(null===(T=pe.deviceData)||void 0===T||null===(_=T.system_profile)||void 0===_||null===(R=_.image_data)||void 0===R?void 0:R.UpdateTransactions.length)-1])||void 0===M?void 0:M.Status)||!(null!==(A=pe.deviceData)&&void 0!==A&&null!==(L=A.system_profile)&&void 0!==L&&null!==(x=L.image_data)&&void 0!==x&&null!==(F=x.ImageInfo)&&void 0!==F&&null!==(G=F.UpdatesAvailable)&&void 0!==G&&G.length)>0,onClick:function(){ve((function(e){return ke(ke({},e),{},{isOpen:!0})}))}}],hideBack:!0,hideInvDrawer:!0}),Ee?s().createElement(y.Z,{size:y.i.xs}):"BUILDING"===(null==pe||null===(z=pe.deviceData)||void 0===z||null===(B=z.system_profile)||void 0===B?void 0:B.status)||"CREATED"===(null==pe||null===(W=pe.deviceData)||void 0===W||null===(H=W.system_profile)||void 0===H?void 0:H.status)?s().createElement(g._,{className:"pf-u-mt-sm",color:"blue",icon:s().createElement(U.ZP,null)},"Updating"):(null==pe||null===(q=pe.deviceData)||void 0===q||null===(V=q.system_profile)||void 0===V||null===(J=V.image_data)||void 0===J||null===(K=J.ImageInfo)||void 0===K||null===(Y=K.UpdatesAvailable)||void 0===Y?void 0:Y.length)>0?s().createElement(g._,{className:"pf-u-mt-sm",color:"orange",icon:s().createElement(Pe.ZP,null)},"Update Available"):s().createElement(g._,{className:"pf-u-mt-sm",color:"green",icon:s().createElement(N.ZP,{color:"green"})},"Running")),s().createElement(m.r,{gutter:"md"},s().createElement(p.P,{span:12},s().createElement(we,{systemProfile:null==pe?void 0:pe.deviceData,imageId:ne,setUpdateModal:ve,setReload:De}))),pe.isOpen&&s().createElement(u.Suspense,{fallback:s().createElement(b.b,null,s().createElement(E.$,null))},s().createElement(Ce,{navigateBack:function(){history.push({pathname:history.location.pathname}),ve((function(e){return ke(ke({},e),{},{isOpen:!1})}))},setUpdateModal:ve,updateModal:pe,refreshTable:function(){return De(!0)}}))))}},15656:(e,t,n)=>{n.d(t,{Z:()=>j});var a=n(4942),l=n(93264),r=n.n(l),o=n(5604),i=n(45697),c=n.n(i),u=n(4147),s=n(75662),d=n(62410),m=n(27577),p=n(79851),v=n(34512),f=n(94778),g=n(3035),b=n(68778),E=n(69957),y=n(94768),h=n(58061);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){var t,n;return null!=e&&null!==(t=e.ImageInfo)&&void 0!==t&&t.UpdatesAvailable?"updateAvailable":null!=e&&null!==(n=e.Device)&&void 0!==n&&n.Booted?"running":"booting"},S=function(e){var t=e.Device,n=D(t);return{booting:r().createElement(p.P,{className:"pf-u-info-color-100"},r().createElement(v.J,{className:"pf-u-mr-sm"},r().createElement(y.ZP,null)),r().createElement(v.J,null,"Booting")),running:r().createElement(p.P,{className:"pf-u-success-color-100"},r().createElement(v.J,{className:"pf-u-mr-sm"},r().createElement(b.ZP,null)),r().createElement(v.J,null,"Running")),updateAvailable:r().createElement(p.P,{className:"pf-u-warning-color-100"},r().createElement(v.J,{className:"pf-u-mr-sm"},r().createElement(E.ZP,null)),r().createElement(v.J,null,"Update Available"))}[n]},Z=[{label:"Name",type:"text"},{label:"Image",type:"text"},{label:"Status",type:"checkbox",options:[{option:"Booting",value:"booting"},{option:"Running",value:"running"},{option:"Update Available",value:"updateAvailable"},{option:"Updating",value:"updating"}]}],w=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,m.cellWidth)(30)]},{title:"Image",type:"image",sort:!1,columnTransforms:[(0,m.cellWidth)(20)]},{title:"Groups",type:"groups",sort:!1,columnTransforms:[(0,m.cellWidth)(15)]},{title:"Last Seen",type:"last_seen",sort:!0,columnTransforms:[(0,m.cellWidth)(15)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,m.cellWidth)(25)]}],P=function(e){var t,n=e.hasCheckbox,a=void 0!==n&&n,l=e.selectedItems,i=e.skeletonRowQuantity,c=e.data,m=e.count,p=e.isLoading,v=e.hasError,b=e.setUpdateModal,E=e.kebabItems,y=e.setRemoveModal,I=e.setIsAddModalOpen,P=e.handleAddDevicesToGroup,j=e.hasModalSubmitted,k=e.setHasModalSubmitted,C=y,M=I,T=(0,s.useHistory)();return r().createElement(r().Fragment,null,(0,h.A8)(p,m,T)?r().createElement(g.Z,{"data-testid":"general-table-empty-state-no-data",icon:"plus",title:"Connect edge devices",body:"Connect and manage edge devices here after registering them via the console. To start, create a RHEL for Edge image and install it to your target device.",secondaryActions:[{title:"How to connect a device",link:"/",type:"link"}]}):r().createElement(o.Z,{apiFilterSort:!1,filters:Z,loadTableData:f.MQ,tableData:{count:m,isLoading:p,hasError:v},columnNames:w,rows:(t=c||[],null==t?void 0:t.map((function(e){var t,n,a,l,o,i,c,m,p,v,f,g,b,E,y,h,I,O,Z,w,P,j,k,C;return{rowInfo:{deviceID:null==e||null===(t=e.Device)||void 0===t?void 0:t.ID,id:null==e||null===(n=e.Device)||void 0===n?void 0:n.UUID,display_name:null==e||null===(a=e.Device)||void 0===a?void 0:a.DeviceName,updateImageData:null==e||null===(l=e.ImageInfo)||void 0===l||null===(o=l.UpdatesAvailable)||void 0===o?void 0:o[0],deviceStatus:D(e),imageSetId:null==e||null===(i=e.ImageInfo)||void 0===i||null===(c=i.Image)||void 0===c?void 0:c.ImageSetID,imageName:null==e||null===(m=e.ImageInfo)||void 0===m||null===(p=m.Image)||void 0===p?void 0:p.Name},noApiSortFilter:[(null==e||null===(v=e.Device)||void 0===v?void 0:v.DeviceName)||"",(null==e||null===(f=e.ImageInfo)||void 0===f||null===(g=f.Image)||void 0===g?void 0:g.Name)||"","",(null==e||null===(b=e.Device)||void 0===b?void 0:b.LastSeen)||"",D(e)],cells:[{title:r().createElement(s.Link,{to:"".concat(u._j.OJ,"/").concat(null==e||null===(E=e.Device)||void 0===E?void 0:E.UUID)},null==e||null===(y=e.Device)||void 0===y?void 0:y.DeviceName)},{title:null!=e&&null!==(h=e.ImageInfo)&&void 0!==h&&null!==(I=h.Image)&&void 0!==I&&I.Name?r().createElement(s.Link,{to:"".concat(u._j.gb,"/").concat(null==e||null===(O=e.ImageInfo)||void 0===O||null===(Z=O.Image)||void 0===Z?void 0:Z.ImageSetID,"/versions/").concat(null==e||null===(w=e.ImageInfo)||void 0===w||null===(P=w.Image)||void 0===P?void 0:P.ID,"/details")},null==e||null===(j=e.ImageInfo)||void 0===j||null===(k=j.Image)||void 0===k?void 0:k.Name):"unavailable"},{title:"-"},{title:r().createElement(d.Z,{date:null==e||null===(C=e.Device)||void 0===C?void 0:C.LastSeen})},{title:r().createElement(S,{Device:e})}]}}))),actionResolver:function(e){var t,n=[];return p?n:null!=e&&null!==(t=e.rowInfo)&&void 0!==t&&t.id?(P&&n.push({title:"Add to group",onClick:function(){return P([{ID:e.rowInfo.deviceID,name:e.rowInfo.display_name}],!0)}}),function(e){var t;return"updateAvailable"!==(null===(t=e.rowInfo)||void 0===t?void 0:t.deviceStatus)}(e)||n.push({title:"Update",onClick:function(e,t,n){b((function(e){return O(O({},e),{},{isOpen:!0,deviceData:[{id:n.rowInfo.id,display_name:n.rowInfo.display_name}],imageData:n.rowInfo.updateImageData})}))}}),C&&n.push({title:"Remove from group",onClick:function(){return y({name:e.rowInfo.display_name,isOpen:!0,deviceId:e.rowInfo.deviceID})}}),n):n},defaultSort:{index:3,direction:"desc"},toolbarButtons:M?[{title:"Add systems",click:function(){return I(!0)}}]:[],hasCheckbox:a,skeletonRowQuantity:i,selectedItems:l,kebabItems:E,hasModalSubmitted:j,setHasModalSubmitted:k}))};P.propTypes={imageData:c().object,urlParam:c().string,openUpdateWizard:c().func,skeletonRowQuantity:c().number,temp:c().func,hasCheckbox:c().bool,setIsModalOpen:c().func,selectedItems:c().array,reload:c().bool,setReload:c().func,data:c().array,count:c().number,isLoading:c().bool,hasError:c().bool,setUpdateModal:c().func,handleSingleDeviceRemoval:c().func,kebabItems:c().array,setRemoveModal:c().func,setIsAddModalOpen:c().func,hasModalSubmitted:c().bool,setHasModalSubmitted:c().func,handleAddDevicesToGroup:c().func};const j=P},87675:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var a=n(4942),l=n(29439),r=n(93264),o=n.n(r),i=n(48716),c=n(39173),u=n(86350),s=n(75662),d=n(15656),m=n(45697),p=n.n(m),v=n(64124),f=n(96354),g=n(60722),b=n(87462),E=n(54680),y=n(92694),h=n(48880),I=function(e){var t=e.defaultOptions,n=(0,h.default)().change,a=(0,r.useState)(t),i=(0,l.Z)(a,2),c=i[0],u=i[1],s=(0,r.useState)(!1),d=(0,l.Z)(s,2),m=d[0],p=d[1],v=(0,r.useState)(null),f=(0,l.Z)(v,2),g=f[0],I=f[1],O=function(){I(null),p(!1),u(t)};return o().createElement("div",null,o().createElement(E.P,{variant:"typeahead",typeAheadAriaLabel:"Select a state",onToggle:function(e){return p(e)},onSelect:function(e,t,a){console.log("select"),a?O():(I(t),p(!1),console.log("selected:",t.toString())),n("group",t)},onClear:O,selections:g,isOpen:m,"aria-labelledby":"typeahead-select-id-1",placeholderText:"Type or click select group"},null==c?void 0:c.map((function(e,t){var n=e.DeviceGroup;return o().createElement(y.$,(0,b.Z)({key:t,value:{toString:function(){return n.Name},groupId:n.ID}},n.description&&{description:n.description}))}))))};I.propTypes={defaultOptions:p().array};const O=I;var D=n(96094),S=n(32349),Z=n(66702),w=n(82041),P=n(47173),j=n(68340),k=function(e){var t=e.openModal;return o().createElement(o().Fragment,null,o().createElement(j.x,null,"Or"),o().createElement(P.zx,{variant:"secondary",className:"pf-u-w-50",onClick:t},"Create Group"))};k.propTypes={openModal:p().bool};var C=function(e){var t=e.length>1?"".concat(e.length," systems"):e[0].name;return o().createElement(j.x,null,"Select a group to add ",o().createElement("strong",null,t," ")," or create a new one.")},M=function(e){return{fields:[{component:f.Z.PLAIN_TEXT,name:"description",label:C(e)},{component:"search-input",name:"name",label:"Select a group",isRequired:!0,validate:[{type:v.Z.REQUIRED}]},{component:"create-group-btn",name:"create-group-btn"}]}},T=function(e){var t,n=e.isModalOpen,a=e.setIsModalOpen,r=e.setIsCreateGroupModalOpen,i=e.reloadData,c=e.deviceIds,u=(0,w.useDispatch)(),s=(0,D.Z)(Z.jA),d=(0,l.Z)(s,1)[0];return o().createElement(g.Z,{isOpen:n,openModal:function(){return a(!1)},title:"Add to group",submitLabel:"Add",additionalMappers:{"search-input":{component:O,defaultOptions:(null==d||null===(t=d.data)||void 0===t?void 0:t.data)||[]},"create-group-btn":{component:k,openModal:function(){r(!0),a(!1)}}},schema:M(c),onSubmit:function(e){var t=e.group,n={onSuccess:{title:"Success",description:"Device(s) have been added to ".concat(t.toString()," successfully")},onError:{title:"Error",description:"Failed to add device to group"}};(0,S.Z)(u,(function(){return(0,Z.e3)(parseInt(t.groupId),c)}),n)},reloadData:i})};const N=T;T.propTypes={isModalOpen:p().bool,setIsModalOpen:p().func,setIsCreateGroupModalOpen:p().func,reloadData:p().func,deviceIds:p().array};var _=n(41825),U=n(52643),R=n(2372);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=o().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(444),n.e(940),n.e(344)]).then(n.bind(n,68940))}));const F=function(){var e=(0,D.Z)(Z.$v),t=(0,l.Z)(e,2),n=t[0],a=t[1],m=n.data,p=n.isLoading,v=n.hasError,f=(0,r.useState)(!1),g=(0,l.Z)(f,2),b=g[0],E=g[1],y=(0,r.useState)([]),h=(0,l.Z)(y,2),I=h[0],O=h[1],S=(0,r.useState)([]),w=(0,l.Z)(S,2),P=w[0],j=w[1],k=(0,r.useState)(!1),C=(0,l.Z)(k,2),M=C[0],T=C[1],A=(0,r.useState)(!1),F=(0,l.Z)(A,2),G=F[0],z=F[1],B=(0,r.useState)(!1),W=(0,l.Z)(B,2),H=W[0],q=W[1],V=(0,r.useState)({isOpen:!1,deviceData:null,imageData:null}),J=(0,l.Z)(V,2),Q=J[0],$=J[1];console.log(I,P);var X=(0,s.useHistory)(),K=function(e,t){E(!0),t?O(e):j(e),T(t)};return o().createElement(r.Fragment,null,o().createElement(i.Z,{className:"pf-m-light"},o().createElement(c.Z,{title:"Systems"})),o().createElement(u.Z,{className:"edge-devices"},o().createElement(d.Z,{data:null==m?void 0:m.data,count:null==m?void 0:m.count,isLoading:p,hasError:v,setUpdateModal:$,handleAddDevicesToGroup:K,hasCheckbox:!0,selectedItems:j,kebabItems:[{isDisabled:!(P.length>0),title:"Add to group",onClick:function(){return K(P.map((function(e){return{ID:e.deviceID,name:e.display_name}})),!1)}}],hasModalSubmitted:G,setHasModalSubmitted:z})),Q.isOpen&&o().createElement(r.Suspense,{fallback:o().createElement(U.b,null,o().createElement(R.$,null))},o().createElement(x,{navigateBack:function(){X.push({pathname:X.location.pathname}),$((function(e){return L(L({},e),{},{isOpen:!1})}))},setUpdateModal:$,updateModal:Q,refreshTable:a})),b&&o().createElement(N,{isModalOpen:b,setIsModalOpen:E,setIsCreateGroupModalOpen:q,reloadData:function(){a(),setTimeout((function(){return z(!0)}),800)},deviceIds:M?I:P}),H&&o().createElement(_.Z,{isModalOpen:H,setIsModalOpen:q,reloadData:function(){a(),setTimeout((function(){return z(!0)}),800)},deviceIds:M?I:P}))}},41825:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(15861),l=n(87757),r=n.n(l),o=n(93264),i=n.n(o),c=n(45697),u=n.n(c),s=n(64124),d=n(96354),m=n(60722),p=n(66702),v=n(58061),f=n(32349),g=n(82041),b={fields:[{component:d.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:s.Z.REQUIRED},{type:s.Z.MAX_LENGTH,threshold:50},v.qg]}]},E=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,l=e.deviceIds,o=e.reloadData,c=(0,g.useDispatch)(),u=function(e){var t={onSuccess:{title:"Success",description:"".concat(e.name," has been created successfully")},onError:{title:"Error",description:"Failed to create group"}};return(0,f.Z)(c,(function(){return(0,p.sS)(e)}),t)},s=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:n=e.sent,a=n.ID,o={onSuccess:{title:"Success",description:"Device(s) have been added to ".concat(t.name," successfully")},onError:{title:"Error",description:"Failed to add device to group"}},(0,f.Z)(c,(function(){return(0,p.e3)(parseInt(a),l)}),o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i().createElement(m.Z,{isOpen:t,openModal:function(){return n(!1)},title:"Create Group",submitLabel:"Create",schema:b,onSubmit:l?s:u,reloadData:o})};const y=E;E.propTypes={isModalOpen:u().bool,setIsModalOpen:u().func,reloadData:u().func,deviceIds:u().array}},47906:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(93264),l=n.n(a),r=n(45697),o=n.n(r),i=n(64124),c=n(96354),u=n(60722),s=n(66702),d=n(69957),m=n(37655),p=n(68340),v=n(32349),f=n(82041),g=function(e){return l().createElement(p.x,null,l().createElement("strong",null,e," "),"and all its data will be permanently deleted. Associated systems will be removed from the group but will not be deleted.")},b=function(e){return{fields:[{component:c.Z.PLAIN_TEXT,name:"warning-message",label:g(e)},{component:c.Z.CHECKBOX,name:"confirmation",label:"I understand that this action cannot be undone.",validate:[{type:i.Z.REQUIRED}]}]}},E=function(){return l().createElement(d.ZP,{color:m.Z.value})},y=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.reloadData,r=e.modalState,o=r.id,i=r.name,c=(0,f.useDispatch)();return l().createElement(u.Z,{isOpen:t,openModal:function(){return n(!1)},title:"Delete group",titleIconVariant:E,variant:"danger",submitLabel:"Delete",schema:b(i),onSubmit:function(){var e={onSuccess:{title:"Success",description:"".concat(i," has been removed successfully")},onError:{title:"Error",description:"Failed to delete group"}};(0,v.Z)(c,(function(){return(0,s.yq)(o)}),e)},reloadData:a})};y.propTypes={id:o().number,name:o().string,modalState:o().object,isModalOpen:o().bool,setIsModalOpen:o().func,reloadData:o().func};const h=y},99456:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(29439),l=n(93264),r=n.n(l),o=n(28191),i=n(48716),c=n(39173),u=n(86350),s=n(45697),d=n.n(s),m=n(5604),p=n(75662),v=n(4147),f=n(35224),g=[{label:"Name",type:"text"},{label:"Image",type:"text"}],b=[{title:"Name",type:"name",sort:!0},{title:"Systems",type:"name",sort:!1},{title:"Image",type:"name",sort:!1}],E=function(e){var t=e.data,n=e.count,a=e.isLoading,l=e.hasError,o=e.handleCreateModal,i=e.handleRenameModal,c=e.handleDeleteModal,u=null==t?void 0:t.map((function(e){var t,n,a,l=null==e?void 0:e.DeviceGroup,o=l.ID,i=l.Name,c=l.Devices,u=e.DevicesImageInfo;u||(u=[]);var s=null!=c?c:[],d=r().createElement("div",null,r().createElement(f.u,{content:r().createElement("div",null,u.map((function(e,t){return r().createElement("p",{key:t},e.Name)})))},r().createElement("span",null,"Multiple images")));return{rowInfo:{id:o,title:i,image:0===u.length?"-":u.length>1?"Multiple images":null===(t=u[0])||void 0===t?void 0:t.Name},noApiSortFilter:[i,"",0===u.length?"-":u.length>1?"Multiple images":null===(n=u[0])||void 0===n?void 0:n.Name],cells:[{title:r().createElement(p.Link,{to:"".concat(v._j.r9,"/").concat(o)},i)},{title:s.length},{title:0===u.length?"-":u.length>1?d:null===(a=u[0])||void 0===a?void 0:a.Name}]}}));return r().createElement(r().Fragment,null,r().createElement(m.Z,{apiFilterSort:!1,filters:g,tableData:{count:n,data:t,isLoading:a,hasError:l},columnNames:b,rows:u,actionResolver:function(e){if(null==e||!e.rowInfo)return[];var t=null==e?void 0:e.rowInfo,n=t.id,a=t.title;return n&&[{title:"Rename",onClick:function(){return i(n,a)}},{title:"Delete",onClick:function(){return c(n,a)}}]},areActionsDisabled:function(){return!1},defaultSort:{index:0,direction:"desc"},emptyFilterState:{title:"No matching groups found",body:"To continue, edit your filter settings and try again"},toolbarButtons:[{title:"Create group",click:o}]}))};E.propTypes={data:d().array,count:d().number,openModal:d().func,isLoading:d().bool,hasError:d().bool,handleRenameModal:d().func,handleDeleteModal:d().func,handleCreateModal:d().func};const y=E;var h=n(3035),I=n(66702),O=n(41825),D=n(64124),S=n(96354),Z=n(60722),w=n(58061),P=n(32349),j=n(82041),k={fields:[{component:S.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:D.Z.REQUIRED},{type:D.Z.MAX_LENGTH,threshold:50},w.qg]}]},C=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.reloadData,l=e.modalState,o=l.id,i=l.name,c=(0,j.useDispatch)();return r().createElement(Z.Z,{isOpen:t,openModal:function(){return n(!1)},title:"Rename group",submitLabel:"Save",schema:k,initialValues:l,onSubmit:function(e){var t={onSuccess:{title:"Success",description:"".concat(i," has been renamed to ").concat(e.name," successfully")},onError:{title:"Error",description:"Failed to rename group"}};(0,P.Z)(c,(function(){return(0,I.OS)(o,e)}),t)},reloadData:a})};C.propTypes={id:d().number,modalState:d().object,isModalOpen:d().bool,setIsModalOpen:d().func,reloadData:d().func};const M=C;var T=n(47906),N=n(96094);const _=function(){var e=(0,N.Z)(I.jA),t=(0,a.Z)(e,2),n=t[0],s=t[1],d=n.data,m=n.isLoading,p=n.hasError,v=(0,l.useState)({id:null,name:""}),f=(0,a.Z)(v,2),g=f[0],b=f[1],E=(0,l.useState)(!1),D=(0,a.Z)(E,2),S=D[0],Z=D[1],w=(0,l.useState)(!1),P=(0,a.Z)(w,2),j=P[0],k=P[1],C=(0,l.useState)(!1),_=(0,a.Z)(C,2),U=_[0],R=_[1];return r().createElement(r().Fragment,null,r().createElement(i.Z,{className:"pf-m-light"},r().createElement(c.Z,{title:"Groups"})),r().createElement(u.Z,{className:"edge-devices"},m||(null==d?void 0:d.count)>0?r().createElement(y,{data:(null==d?void 0:d.data)||[],count:null==d?void 0:d.count,isLoading:m,hasError:p,handleRenameModal:function(e,t){b({id:e,name:t}),k(!0)},handleDeleteModal:function(e,t){b({id:e,name:t}),R(!0)},handleCreateModal:function(){return Z(!0)}}):r().createElement(o.k,{justifyContent:{default:"justifyContentCenter"}},r().createElement(h.Z,{icon:"module",title:"Create a system group",body:"Create system groups to help manage your devices more effectively",primaryAction:{text:"Create group",click:function(){return Z(!0)}},secondaryActions:[{type:"link",title:"Learn more about system groups",link:"#"}]}))),S&&r().createElement(O.Z,{isModalOpen:S,setIsModalOpen:Z,reloadData:s}),j&&r().createElement(M,{isModalOpen:j,setIsModalOpen:k,reloadData:s,modalState:g}),U&&r().createElement(T.Z,{isModalOpen:U,setIsModalOpen:R,reloadData:s,modalState:g}))}},17628:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(93433),l=n(4942),r=n(29439),o=n(93264),i=n.n(o),c=n(64029),u=n(32835),s=n(56787),d=n(84457),m=n(75728),p=n(99355),v=n(28191),f=n(92298),g=n(15209),b=n(48716),E=n(39173),y=n(86350),h=n(3035),I=n(75662),O=n(4147),D=n(5964),S=n(15656),Z=n(66702),w=n(60722),P=n(45697),j=n.n(P),k=n(96094),C=function(e){var t=e.groupId,n=e.closeModal,a=e.isOpen,l=e.reloadData,o=(0,k.Z)(Z.$v),c=(0,r.Z)(o,1)[0],u=c.data,s=c.isLoading,d=c.hasError,m=[];return i().createElement(w.Z,{isOpen:a,openModal:n,title:"Add systems",submitLabel:"Add systems",additionalMappers:{"device-table":{component:S.Z,selectedItems:function(e){m=e},skeletonRowQuantity:15,hasCheckbox:!0,isLoading:s,hasError:d,count:null==u?void 0:u.count,data:(null==u?void 0:u.data)||[]}},schema:{fields:[{component:"device-table",name:"device-table"}]},onSubmit:function(){(0,Z.e3)(parseInt(t),m.map((function(e){return{ID:e.deviceID}})))},reloadData:l,size:"large"})};C.propTypes={groupId:j().string,closeModal:j().func,isOpen:j().bool,reloadData:j().func};const M=C;var T=n(58061),N=n(32349),_=n(82041),U=n(96354),R=n(52643),A=n(2372),L=n(47906);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=i().lazy((function(){return n.e(940).then(n.bind(n,68940))}));const z=function(){var e,t,n,l,P,j,C,x,z,B=(0,_.useDispatch)(),W=(0,I.useParams)(),H=(0,I.useHistory)(),q=(0,o.useState)(!1),V=(0,r.Z)(q,2),J=V[0],Q=V[1],$=(0,o.useState)(!1),X=(0,r.Z)($,2),K=X[0],Y=X[1],ee=(0,o.useState)({isOpen:!1,name:"",deviceId:null}),te=(0,r.Z)(ee,2),ne=te[0],ae=te[1],le=(0,o.useState)({isOpen:!1,deviceData:null,imageData:null}),re=(0,r.Z)(le,2),oe=re[0],ie=re[1],ce=(0,k.Z)((function(){return(0,Z.VL)(fe)})),ue=(0,r.Z)(ce,2),se=ue[0],de=ue[1],me=se.data,pe=se.isLoading,ve=se.hasError,fe=W.groupId,ge=null==me||null===(e=me.DeviceGroup)||void 0===e?void 0:e.Name,be=(0,o.useState)([]),Ee=(0,r.Z)(be,2),ye=Ee[0],he=Ee[1],Ie=(0,o.useState)(!1),Oe=(0,r.Z)(Ie,2),De=Oe[0],Se=Oe[1],Ze=(0,o.useState)({id:null,name:""}),we=(0,r.Z)(Ze,2),Pe=we[0],je=we[1],ke=(0,o.useState)(!1),Ce=(0,r.Z)(ke,2),Me=Ce[0],Te=Ce[1];(0,o.useEffect)((function(){H.push({pathname:H.location.pathname,search:(0,T.fz)("add_system_modal=true",K)})}),[K]);var Ne=function(){var e={onSuccess:{title:"Success",description:"".concat(ne.name," has been removed successfully")},onError:{title:"Error",description:"Failed to remove device"}};(0,N.Z)(B,(function(){return(0,Z._j)(fe,ne.deviceId)}),e),setTimeout((function(){return Se(!0)}),800)};return i().createElement(i().Fragment,null,i().createElement(b.Z,{className:"pf-m-light"},ge?i().createElement(c.a,null,i().createElement(u.g,null,i().createElement(I.Link,{to:"".concat(O._j.r9)},"Groups")),i().createElement(u.g,null,ge)):i().createElement(c.a,{isActive:!0},i().createElement(g.O,{width:"100px"})),i().createElement(v.k,{justifyContent:{default:"justifyContentSpaceBetween"}},i().createElement(f.B,null,ge?i().createElement(E.Z,{title:ge}):i().createElement(g.O,{width:"150px"})),i().createElement(f.B,null,i().createElement(s.L,{position:p.ir.right,toggle:i().createElement(m.Z,{id:"image-set-details-dropdown",toggleIndicator:D.ZP,onToggle:function(e){return Q(e)},isDisabled:!1},"Actions"),isOpen:J,dropdownItems:[i().createElement(d.h,{key:"delete-device-group",onClick:function(){return je({id:fe,name:ge}),void Te(!0)}},"Delete Group"),i().createElement(d.h,{key:"update-all-devices",isDisabled:(0,T.yb)({deviceData:null==me||null===(t=me.Devices)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map((function(e){var t;return{imageSetId:null==e||null===(t=e.ImageInfo)||void 0===t?void 0:t.Image.ImageSetID}})),imageData:null==me||null===(l=me.Devices)||void 0===l||null===(P=l.data[0].ImageInfo.UpdatesAvailable)||void 0===P?void 0:P[0]}),onClick:function(){return ie((function(e){var t,n,a,l;return F(F({},e),{},{isOpen:!0,deviceData:null==me||null===(t=me.Devices)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map((function(e){var t,n,a,l,r,o,i,c,u,s,d,m;return{deviceID:null==e||null===(t=e.Device)||void 0===t?void 0:t.ID,id:null==e||null===(n=e.Device)||void 0===n?void 0:n.UUID,display_name:null==e||null===(a=e.Device)||void 0===a?void 0:a.DeviceName,updateImageData:null==e||null===(l=e.ImageInfo)||void 0===l||null===(r=l.UpdatesAvailable)||void 0===r?void 0:r[0],deviceStatus:(s=e,null!=s&&null!==(d=s.ImageInfo)&&void 0!==d&&d.UpdatesAvailable?"updateAvailable":null!=s&&null!==(m=s.Device)&&void 0!==m&&m.Booted?"running":"booting"),imageSetId:null==e||null===(o=e.ImageInfo)||void 0===o||null===(i=o.Image)||void 0===i?void 0:i.ImageSetID,imageName:null==e||null===(c=e.ImageInfo)||void 0===c||null===(u=c.Image)||void 0===u?void 0:u.Name}})),imageData:null==me||null===(a=me.Devices)||void 0===a||null===(l=a.data[0].ImageInfo.UpdatesAvailable)||void 0===l?void 0:l[0]})}))}},"Update")]})))),i().createElement(y.Z,{className:"edge-devices"},pe||(null==me||null===(j=me.Devices)||void 0===j?void 0:j.count)>0?i().createElement(S.Z,{data:(null==me||null===(C=me.Devices)||void 0===C?void 0:C.data)||[],count:null==me||null===(x=me.Devices)||void 0===x?void 0:x.count,isLoading:pe,hasError:ve,hasCheckbox:!0,handleSingleDeviceRemoval:Ne,kebabItems:[{isDisabled:!(ye.length>0),title:"Remove from group",onClick:function(){return ae({name:"",deviceId:null,isOpen:!0})}},{isDisabled:(0,T.yb)({deviceData:ye,imageData:null===(z=ye[0])||void 0===z?void 0:z.updateImageData}),title:"Update selected",onClick:function(){return ie((function(e){return F(F({},e),{},{isOpen:!0,deviceData:(0,a.Z)(ye),imageData:ye[0].updateImageData})}))}}],selectedItems:he,setRemoveModal:ae,setIsAddModalOpen:Y,setUpdateModal:ie,hasModalSubmitted:De,setHasModalSubmitted:Se}):i().createElement(v.k,{justifyContent:{default:"justifyContentCenter"}},i().createElement(h.Z,{icon:"cube",title:"Add systems to the group",body:"Create system groups to help manage your devices more effectively",primaryAction:{text:"Add systems",click:function(){return Y(!0)}},secondaryActions:[{type:"link",title:"Learn more about system groups",link:"#"}]}))),K&&i().createElement(M,{groupId:fe,closeModal:function(){return Y(!1)},isOpen:K,reloadData:de}),ne.isOpen&&i().createElement(w.Z,{isOpen:ne.isOpen,openModal:function(){return ae(!1)},title:"Remove from group",submitLabel:"Remove",schema:{fields:[{component:U.Z.PLAIN_TEXT,name:"warning-text",label:"Do you want to remove ".concat(ye.length>0?"".concat(ye.length," system").concat(1===ye.length?"":"s"):"".concat(ne.name)," from ").concat(ge,"?")}]},onSubmit:ne.deviceId?Ne:function(){var e={onSuccess:{title:"Success",description:"".concat(ye.length," devices have been removed successfully")},onError:{title:"Error",description:"failed to remove devices"}};(0,N.Z)(B,(function(){return(0,Z.tW)(parseInt(fe),ye.map((function(e){return{ID:e.deviceID}})))}),e),setTimeout((function(){return Se(!0)}),800)},reloadData:de}),oe.isOpen&&i().createElement(o.Suspense,{fallback:i().createElement(R.b,null,i().createElement(A.$,null))},i().createElement(G,{navigateBack:function(){H.push({pathname:H.location.pathname}),ie((function(e){return F(F({},e),{},{isOpen:!1})}))},setUpdateModal:ie,updateModal:oe,refreshTable:de})),Me&&i().createElement(L.Z,{isModalOpen:Me,setIsModalOpen:Te,reloadData:function(){return H.push(O._j.r9)},modalState:Pe}))}},14511:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(4942),l=n(29439),r=n(93264),o=n.n(r),i=n(48716),c=n(39173),u=n(86350),s=n(2372),d=n(52643),m=n(75662),p=n(59245),v=n(5230),f=n(5604),g=n(45697),b=n.n(g),E=n(82041),y=n(4147),h=n(68340),I=n(35224),O=n(62410),D=n(9043),S=n(94778),Z=n(27577),w=n(3035),P=n(58061),j=function(e){var t=e.index;return o().createElement("div",null,o().createElement(I.u,{content:o().createElement("div",null,"More options"),reference:function(){return document.getElementById("pf-dropdown-toggle-id-".concat(t))}}))};j.propTypes={index:b().number};var k=[{label:"Name",type:"text"},{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],C=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,Z.cellWidth)(35)]},{title:"Current Version",type:"version",sort:!1,columnTransforms:[(0,Z.cellWidth)(15)]},{title:"Last Updated",type:"updated_at",sort:!0,columnTransforms:[(0,Z.cellWidth)(25)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,Z.cellWidth)(30)]}],M=function(e){return e.map((function(e,t){var n=e.image_set,a=e.image_build_iso_url;return{rowInfo:{id:null==n?void 0:n.ID,imageStatus:null==n?void 0:n.Images[0].Status,isoURL:a||null,latestImageID:null==n?void 0:n.Images[0].ID},cells:[{title:o().createElement(m.Link,{to:"".concat(y._j.gb,"/").concat(null==n?void 0:n.ID)},null==n?void 0:n.Name)},null==n?void 0:n.Images[0].Version,{title:o().createElement(O.Z,{date:null==n?void 0:n.UpdatedAt})},{title:o().createElement(o().Fragment,null,o().createElement(j,{index:t}),o().createElement(D.Z,{status:null==n?void 0:n.Images[0].Status}))}]}}))},T=function(e){var t=e.openCreateWizard,n=e.openUpdateWizard,a=(0,E.useSelector)((function(e){var t,n,a=e.edgeImageSetsReducer;return{count:(null==a||null===(t=a.data)||void 0===t?void 0:t.Count)||0,data:(null==a||null===(n=a.data)||void 0===n?void 0:n.Data)||[],isLoading:void 0===(null==a?void 0:a.isLoading)||a.isLoading,hasError:null==a?void 0:a.hasError}}),E.shallowEqual),l=a.count,r=a.data,i=a.isLoading,c=a.hasError,u=(0,m.useHistory)();return o().createElement(o().Fragment,null,(0,P.A8)(i,l,u)?o().createElement(w.Z,{"data-testid":"general-table-empty-state-no-data",icon:"plus",title:"No images found",body:"",primaryAction:{click:t,text:"Create new image"},secondaryActions:[]}):o().createElement(f.Z,{apiFilterSort:!0,filters:k,loadTableData:S.n9,tableData:{count:l,data:r,isLoading:i,hasError:c},columnNames:C,rows:r?M(r):[],actionResolver:function(e){var t,a,l,r,i,c,u=[];return null!==(t=e.rowInfo)&&void 0!==t&&t.isoURL&&u.push({title:o().createElement(h.x,{className:"force-text-black remove-underline",component:"a",href:null===(c=e.rowInfo)||void 0===c?void 0:c.isoURL,rel:"noopener noreferrer",target:"_blank"},"Download")}),"SUCCESS"!==(null===(a=e.rowInfo)||void 0===a?void 0:a.imageStatus)&&"ERROR"!==(null===(l=e.rowInfo)||void 0===l?void 0:l.imageStatus)||u.push({title:"Update Image",onClick:function(e,t,a){var l;n(null===(l=a.rowInfo)||void 0===l?void 0:l.latestImageID)}}),"BUILDING"===(null===(r=e.rowInfo)||void 0===r?void 0:r.imageStatus)&&null!==(i=e.rowInfo)&&void 0!==i&&i.id&&u.push({title:""}),u},areActionsDisabled:function(e){var t;return"BUILDING"===(null===(t=e.rowInfo)||void 0===t?void 0:t.imageStatus)},defaultSort:{index:2,direction:"desc"},toolbarButtons:[{title:"Create new image",click:function(){return t()}}]}))};T.propTypes={clearFilters:b().func,openCreateWizard:b().func,openUpdateWizard:b().func,filters:b().array,pagination:b().shape({page:b().number,perPage:b().number})};const N=T;function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=o().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(444),n.e(940),n.e(344)]).then(n.bind(n,49477))})),A=o().lazy((function(){return Promise.all([n.e(410),n.e(736),n.e(444),n.e(46)]).then(n.bind(n,53010))}));const L=function(){var e=(0,r.useContext)(p.g).getRegistry,t=(0,r.useState)(!1),n=(0,l.Z)(t,2),a=n[0],f=n[1],g=(0,r.useState)({isOpen:!1,imageId:null}),b=(0,l.Z)(g,2),E=b[0],y=b[1],h=(0,m.useHistory)();return(0,r.useEffect)((function(){var t=e().register({edgeImageSetsReducer:v.Mx});return function(){return t()}}),[]),o().createElement(r.Fragment,null,o().createElement(i.Z,{className:"pf-m-light"},o().createElement(c.Z,{title:"Images"})),o().createElement(u.Z,{className:"edge-devices"},o().createElement(N,{openCreateWizard:function(){h.push({pathname:h.location.pathname,search:(0,P.fz)("create_image=true",!0)}),f(!0)},openUpdateWizard:function(e){h.push({pathname:h.location.pathname,search:(0,P.fz)("update_image=true",!0)}),y({isOpen:!0,imageId:e})}})),a&&o().createElement(r.Suspense,{fallback:o().createElement(d.b,null,o().createElement(s.$,null))},o().createElement(R,{navigateBack:function(){h.push({pathname:h.location.pathname,search:(0,P.fz)("create_image=true",!1)}),f(!1)}})),E.isOpen&&o().createElement(r.Suspense,{fallback:o().createElement(d.b,null,o().createElement(s.$,null))},o().createElement(A,{navigateBack:function(){h.push({pathname:h.location.pathname,search:(0,P.fz)("update_image=true",!1)}),y((function(e){return U(U({},e),{},{isOpen:!1})}))},updateImageID:E.imageId})))}},32349:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(4942),l=n(15861),r=n(87757),o=n.n(r),i=n(83215);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=function(e,t,n){var a,r=null===(a=n)||void 0===a?void 0:a.onSuccess;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var c=function(){var a=(0,l.Z)(o().mark((function a(){var l;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t();case 3:return l=a.sent,r&&e(u({},(0,i.wN)(u({variant:"success"},n.onSuccess)))),a.abrupt("return",l);case 8:return a.prev=8,a.t0=a.catch(0),e(u({},(0,i.wN)(u({variant:"danger"},n.onError)))),a.abrupt("return",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return c()}}}]);