(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[7563],{64029:(e,t,n)=>{"use strict";n.d(t,{a:()=>c});var a=n(70655),r=n(92950),o=n(44303),i=n(38296),l=n(62472);const c=e=>{var{children:t=null,className:n="","aria-label":s="Breadcrumb",ouiaId:u,ouiaSafe:d=!0}=e,m=(0,a.__rest)(e,["children","className","aria-label","ouiaId","ouiaSafe"]);const p=(0,l.S$)(c.displayName,u,d);return r.createElement("nav",Object.assign({},m,{"aria-label":s,className:(0,i.i)(o.Z.breadcrumb,n)},p),r.createElement("ol",{className:o.Z.breadcrumbList},r.Children.map(t,((e,t)=>{const n=t>0;return r.isValidElement(e)?r.cloneElement(e,{showDivider:n}):e}))))};c.displayName="Breadcrumb"},32835:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var a=n(70655),r=n(92950),o=n(93174),i=n(44303),l=n(38296);const c=e=>{var{children:t=null,className:n="",to:c,isActive:s=!1,isDropdown:u=!1,showDivider:d,target:m,component:p="a",render:v}=e,f=(0,a.__rest)(e,["children","className","to","isActive","isDropdown","showDivider","target","component","render"]);const b=p,g=s?"page":void 0,h=(0,l.i)(i.Z.breadcrumbLink,s&&i.Z.modifiers.current);return r.createElement("li",Object.assign({},f,{className:(0,l.i)(i.Z.breadcrumbItem,n)}),d&&r.createElement("span",{className:i.Z.breadcrumbItemDivider},r.createElement(o.ZP,null)),"button"===p&&r.createElement("button",{className:h,"aria-current":g,type:"button"},t),u&&r.createElement("span",{className:(0,l.i)(i.Z.breadcrumbDropdown)},t),v&&v({className:h,ariaCurrent:g}),c&&!v&&r.createElement(b,{href:c,target:m,className:h,"aria-current":g},t),!c&&"button"!==p&&!u&&t)};c.displayName="BreadcrumbItem"},44303:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a}),n(58392);const a={breadcrumb:"pf-c-breadcrumb",breadcrumbDropdown:"pf-c-breadcrumb__dropdown",breadcrumbHeading:"pf-c-breadcrumb__heading",breadcrumbItem:"pf-c-breadcrumb__item",breadcrumbItemDivider:"pf-c-breadcrumb__item-divider",breadcrumbLink:"pf-c-breadcrumb__link",breadcrumbList:"pf-c-breadcrumb__list",dropdownToggle:"pf-c-dropdown__toggle",modifiers:{current:"pf-m-current",overpassFont:"pf-m-overpass-font"},themeDark:"pf-theme-dark"}},47906:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(92950),r=n.n(a),o=n(45697),i=n.n(o),l=n(64124),c=n(96354),s=n(60722),u=n(87029),d=n(69957),m=n(37655),p=n(68340),v=n(32349),f=n(86706),b=function(e){return r().createElement(p.x,null,r().createElement("strong",null,e," "),"and all its data will be permanently deleted. Associated systems will be removed from the group but will not be deleted.")},g=function(e){return{fields:[{component:c.Z.PLAIN_TEXT,name:"warning-message",label:b(e)},{component:c.Z.CHECKBOX,name:"confirmation",label:"I understand that this action cannot be undone.",validate:[{type:l.Z.REQUIRED}]}]}},h=function(){return r().createElement(d.ZP,{color:m.Z.value})},E=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.reloadData,o=e.modalState,i=o.id,l=o.name,c=(0,f.I0)();return r().createElement(s.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Delete group",titleIconVariant:h,variant:"danger",submitLabel:"Delete",schema:g(l),onSubmit:function(){var e={onSuccess:{title:"Success",description:"".concat(l," has been removed successfully")},onError:{title:"Error",description:"Failed to delete group"}};(0,v.Z)(c,(function(){return(0,u.yq)(i)}),e)},reloadData:a})};E.propTypes={id:i().number,name:i().string,modalState:i().object,isModalOpen:i().bool,setIsModalOpen:i().func,reloadData:i().func};const y=E},61381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(15861),r=n(64687),o=n.n(r),i=n(92950),l=n.n(i),c=n(45697),s=n.n(c),u=n(64124),d=n(96354),m=n(60722),p=n(87029),v=n(48903),f=n(32349),b=n(86706),g=function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Tb)(t);case 2:if(!e.sent.data.isValid){e.next=5;break}return e.abrupt("return","Group name already exists");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={fields:[{component:d.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:u.Z.REQUIRED},{type:u.Z.MAX_LENGTH,threshold:50},v.qg,g]}]},E=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.reloadData,r=e.modalState,o=r.id,i=r.name,c=(0,b.I0)();return l().createElement(m.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Rename group",submitLabel:"Save",schema:h,initialValues:r,onSubmit:function(e){var t={onSuccess:{title:"Success",description:"".concat(i," has been renamed to ").concat(e.name," successfully")},onError:{title:"Error",description:"Failed to rename group"}};(0,f.Z)(c,(function(){return(0,p.OS)(o,e)}),t)},reloadData:a})};E.propTypes={id:s().number,modalState:s().object,isModalOpen:s().bool,setIsModalOpen:s().func,reloadData:s().func};const y=E},30991:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var a=n(93433),r=n(4942),o=n(29439),i=n(92950),l=n.n(i),c=n(64029),s=n(32835),u=n(56787),d=n(84457),m=n(75728),p=n(99355),v=n(28191),f=n(92298),b=n(15209),g=n(16545),h=n(80123),E=n(39173),y=n(14748),D=n(3035),I=n(96620),Z=n(9192),O=n(5964),S=n(15656),w=n(87029),k=n(15861),_=n(64687),N=n.n(_),M=n(47173),C=n(80236),j=n(45697),A=n.n(j),L=n(8027),T=n(96094),x=n(32349),P=n(86706),R=function(e){var t,n=e.groupId,a=e.closeModal,r=e.isOpen,c=e.reloadData,s=e.groupName,u=(0,T.Z)({api:L.$v,tableReload:!0}),d=(0,o.Z)(u,2),m=d[0],p=d[1],v=m.data,f=m.isLoading,b=m.hasError,g=(0,i.useState)([]),h=(0,o.Z)(g,2),E=h[0],y=h[1],D=(0,P.I0)();return l().createElement(C.u,{id:"add-systems-modal",title:"Add systems",position:"top",isOpen:r,onClose:a,variant:"large",actions:[l().createElement(M.zx,{isDisabled:0===E.length,key:"confirm",variant:"primary",onClick:function(){var e={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(s," successfully")},onError:{title:"Error",description:"An error occurred making the request"}};(0,x.Z)(D,(function(){return(0,w.e3)(parseInt(n),E.map((function(e){return{ID:e.deviceID}})))}),e),setTimeout((0,k.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),500),a()}},"Add systems"),l().createElement(M.zx,{key:"cancel",variant:"link",onClick:a},"Cancel")]},l().createElement(S.Z,{selectedItems:y,skeletonRowQuantity:15,hasCheckbox:!0,isLoading:f,hasError:b,count:null==v?void 0:v.count,data:(null==v||null===(t=v.data)||void 0===t?void 0:t.devices)||[],fetchDevices:p}))};R.propTypes={groupId:A().string,closeModal:A().func,isOpen:A().bool,reloadData:A().func,groupName:A().string};const V=R;var B=n(48903),G=n(96354),U=n(52643),F=n(2372),H=n(60722),X=n(47906),q=n(61381);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=l().lazy((function(){return Promise.all([n.e(6085),n.e(2409),n.e(3339),n.e(3006),n.e(6681)]).then(n.bind(n,68940))}));const K=function(){var e,t,n,r,k,_,N,M,C,j,A=(0,P.I0)(),L=(0,I.useParams)(),R=(0,I.useHistory)(),z=L.groupId,K=(0,i.useState)(!1),W=(0,o.Z)(K,2),J=W[0],Y=W[1],ee=(0,i.useState)(!1),te=(0,o.Z)(ee,2),ne=te[0],ae=te[1],re=(0,i.useState)({isOpen:!1,name:"",deviceId:null}),oe=(0,o.Z)(re,2),ie=oe[0],le=oe[1],ce=(0,i.useState)({isOpen:!1,deviceData:null,imageData:null}),se=(0,o.Z)(ce,2),ue=se[0],de=se[1],me=(0,T.Z)({api:w.VL,id:z,tableReload:!0}),pe=(0,o.Z)(me,2),ve=pe[0],fe=pe[1],be=ve.data,ge=ve.isLoading,he=ve.hasError,Ee=null==be||null===(e=be.DeviceGroup)||void 0===e?void 0:e.Name,ye=(0,i.useState)([]),De=(0,o.Z)(ye,2),Ie=De[0],Ze=De[1],Oe=(0,i.useState)(!1),Se=(0,o.Z)(Oe,2),we=Se[0],ke=Se[1],_e=(0,i.useState)({id:null,name:""}),Ne=(0,o.Z)(_e,2),Me=Ne[0],Ce=Ne[1],je=(0,i.useState)(!1),Ae=(0,o.Z)(je,2),Le=Ae[0],Te=Ae[1],xe=(0,i.useState)(!1),Pe=(0,o.Z)(xe,2),Re=Pe[0],Ve=Pe[1];(0,i.useEffect)((function(){R.push({pathname:R.location.pathname,search:(0,B.fz)("add_system_modal=true",ne)})}),[ne]);var Be=function(){var e={onSuccess:{title:"Success",description:"".concat(ie.name," has been removed successfully")},onError:{title:"Error",description:"Failed to remove system"}};(0,x.Z)(A,(function(){return(0,w._j)(z,ie.deviceId)}),e),setTimeout((function(){return ke(!0)}),800)},Ge="Actions for group details view",Ue="group-details-dropdown";return l().createElement(l().Fragment,null,l().createElement(h.Z,{className:"pf-m-light"},Ee?l().createElement(c.a,null,l().createElement(s.g,null,l().createElement(I.Link,{to:"".concat(Z._["fleet-management"])},"Groups")),l().createElement(s.g,null,Ee)):l().createElement(c.a,null,l().createElement(s.g,{isActive:!0},l().createElement(b.O,{width:"100px"}))),l().createElement(v.k,{justifyContent:{default:"justifyContentSpaceBetween"}},l().createElement(f.B,null,Ee?l().createElement(E.Z,{title:Ee}):l().createElement(b.O,{width:"150px"})),l().createElement(f.B,null,l().createElement(u.L,{position:p.ir.right,toggle:l().createElement(m.Z,{id:Ue,toggleIndicator:O.ZP,onToggle:function(e){return Y(e)},isDisabled:!1,"aria-label":Ge},l().createElement(g.u,{content:Ge,reference:function(){return document.getElementById(Ue)}}),"Actions"),isOpen:J,dropdownItems:[l().createElement(d.h,{key:"delete-device-group",onClick:function(){return Ce({id:z,name:Ee}),void Te(!0)}},"Delete group"),l().createElement(d.h,{key:"rename-device-group",onClick:function(){return Ce({id:z,name:Ee}),void Ve(!0)}},"Rename group"),l().createElement(d.h,{key:"update-all-devices",isDisabled:(0,B.yb)({deviceData:null==be||null===(t=be.DevicesView)||void 0===t||null===(n=t.devices)||void 0===n?void 0:n.map((function(e){return{imageSetId:null==e?void 0:e.ImageSetID}})),imageData:null==be||null===(r=be.DevicesView)||void 0===r||null===(k=r.devices)||void 0===k?void 0:k.some((function(e){return e.ImageID}))}),onClick:function(){Y(!1),de((function(e){var t,n,a,r;return Q(Q({},e),{},{isOpen:!0,deviceData:null==be||null===(t=be.DevicesView)||void 0===t||null===(n=t.devices)||void 0===n?void 0:n.map((function(e){return{id:null==e?void 0:e.DeviceUUID,display_name:""===(null==e?void 0:e.DeviceName)?"localhost":null==e?void 0:e.DeviceName}})),imageSetId:null==be||null===(a=be.DevicesView)||void 0===a||null===(r=a.devices.find((function(e){return e.ImageSetID})))||void 0===r?void 0:r.ImageSetID})}))}},"Update")]})))),l().createElement(y.Z,{className:"edge-devices"},(0,B.A8)(ge,null==be||null===(_=be.DeviceGroup)||void 0===_?void 0:_.Devices.length,R)?l().createElement(v.k,{justifyContent:{default:"justifyContentCenter"}},l().createElement(D.Z,{icon:"plus",title:"Add systems to the group",body:"Create groups to help manage your systems more effectively.",primaryAction:{text:"Add systems",click:function(){return ae(!0)}},secondaryActions:[{type:"link",title:"Learn more about system groups",link:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/working_with_systems_in_the_edge_management_application/index"}]})):l().createElement(S.Z,{data:(null==be||null===(N=be.DevicesView)||void 0===N?void 0:N.devices)||[],count:null==be||null===(M=be.DevicesView)||void 0===M?void 0:M.total,isLoading:ge,hasError:he,hasCheckbox:!0,handleSingleDeviceRemoval:Be,kebabItems:[{isDisabled:!(Ie.length>0),title:"Remove from group",onClick:function(){return le({name:"",deviceId:null,isOpen:!0})}},{isDisabled:(0,B.yb)({deviceData:Ie,imageData:null===(C=Ie[0])||void 0===C?void 0:C.updateImageData}),title:"Update selected",onClick:function(){return de((function(e){return Q(Q({},e),{},{isOpen:!0,deviceData:(0,a.Z)(Ie),imageSetId:Ie.find((function(e){return null==e?void 0:e.imageSetId})).imageSetId})}))}}],selectedItems:Ze,setRemoveModal:le,setIsAddModalOpen:ae,hasModalSubmitted:we,setHasModalSubmitted:ke,fetchDevices:fe,isAddSystemsView:!0})),ne&&l().createElement(V,{groupId:z,closeModal:function(){return ae(!1)},isOpen:ne,reloadData:fe,groupName:null==be||null===(j=be.DeviceGroup)||void 0===j?void 0:j.Name}),ie.isOpen&&l().createElement(H.Z,{isOpen:ie.isOpen,closeModal:function(){return le(!1)},title:"Remove from group",submitLabel:"Remove",variant:"danger",schema:{fields:[{component:G.Z.PLAIN_TEXT,name:"warning-text",label:"Do you want to remove ".concat(Ie.length>0?"".concat(Ie.length," system").concat(1===Ie.length?"":"s"):"".concat(ie.name)," from ").concat(Ee,"?")}]},onSubmit:ie.deviceId?Be:function(){var e={onSuccess:{title:"Success",description:"".concat(Ie.length," systems have been removed successfully")},onError:{title:"Error",description:"failed to remove systems"}};(0,x.Z)(A,(function(){return(0,w.tW)(parseInt(z),Ie.map((function(e){return{ID:e.deviceID}})))}),e),setTimeout((function(){return ke(!0)}),800)},reloadData:fe}),ue.isOpen&&l().createElement(i.Suspense,{fallback:l().createElement(U.b,null,l().createElement(F.$,null))},l().createElement($,{navigateBack:function(){R.push({pathname:R.location.pathname}),de((function(e){return Q(Q({},e),{},{isOpen:!1})}))},setUpdateModal:de,updateModal:ue,refreshTable:fe})),Le&&l().createElement(X.Z,{isModalOpen:Le,setIsModalOpen:Te,reloadData:function(){return R.push(Z._["fleet-management"])},modalState:Me}),Re&&l().createElement(q.Z,{isModalOpen:Re,setIsModalOpen:Ve,reloadData:function(){return fe()},modalState:Me}))}},58392:()=>{}}]);
//# sourceMappingURL=../sourcemaps/GroupsDetail.a2c3251a8c4605ec27bad55dbd9ea1a1.js.map