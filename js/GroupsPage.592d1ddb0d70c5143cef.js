(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[734],{25041:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var l=n(59713),r=n.n(l),a=n(63038),o=n.n(a),c=n(1427),u=n.n(c),i=n(69859),s=n(43388),m=n(75061),d=n(27713),v=n(8969),E=n(14224),p=n(89583),f=n(81159),g=n(34023),h=n(13877),b=n(26577),O=n(6202),T=n(47835),S=n(29515),y=n(62851),L=n(49287),k=n(18038),C=n(2095),x=n(85962),I=n(21015),P=n(8896),j=n(67463),R=n(34348),$=n(20018),_=n(19017),w=n(53325),D=n(63540),N=n(24774),A=n(80256),V=n(45587),B=n(36842),F=n(21508),J=n(65395),G=n(55399),H=n(76464),K=n(14905),z=n(17908),W=n(5634);const U=function(){var e,t,n,l,r,a,o,m,d=(0,i.useDispatch)(),v=(0,i.useSelector)((function(e){var t=e.thresholdReducer;return(null==t?void 0:t.threshold)||{}})),E=(0,i.useSelector)((function(e){var t=e.thresholdReducer;return null==t?void 0:t.isLoading})),p=(0,i.useSelector)((function(e){var t=e.devicesInfoReducer;return null==t?void 0:t.isLoading})),f=(0,i.useSelector)((function(e){var t=e.devicesInfoReducer;return(null==t?void 0:t.devicesInfo)||{}})),g=(0,i.useSelector)((function(e){var t=e.canariesInfoReducer;return(null==t?void 0:t.canariesInfo)||{}})),h=(0,i.useSelector)((function(e){var t=e.canariesInfoReducer;return null==t?void 0:t.isLoading}));return(0,c.useEffect)((function(){d((0,s.QK)()),d((0,s._n)()),d((0,s.PE)())}),[]),u().createElement(L.r,{hasGutter:!0},u().createElement(k.P,{span:3},u().createElement(C.Card,null,u().createElement(I.O,null,u().createElement(R.Title,{headingLevel:"h3"},"Health threshold")),u().createElement(x.CardBody,null,!1===E?u().createElement(K.Td,{ariaDesc:"Health threshold",ariaTitle:"Health threshold",constrainToVisibleArea:!0,legendOrientation:"vertical",legendPosition:"right",height:230,width:450,data:v.map((function(e){var t,n;return{x:null===(t=Object.keys(e))||void 0===t?void 0:t[0],y:null===(n=Object.values(e))||void 0===n?void 0:n[0]}})),legendData:v.map((function(e){var t,n;return{name:"".concat(null===(t=Object.keys(e))||void 0===t?void 0:t[0],": ").concat(null===(n=Object.values(e))||void 0===n?void 0:n[0])}})),padding:{bottom:20,left:20,right:140,top:20},labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},themeColor:z.nz.multiOrdered}):u().createElement(P.b,null,u().createElement(j.Spinner,null))))),u().createElement(k.P,{span:3},u().createElement(C.Card,null,u().createElement(I.O,null,u().createElement(R.Title,{headingLevel:"h3"},"Devices info")),u().createElement(x.CardBody,null,u().createElement($.TextContent,null,u().createElement(_.Gn,{component:_.F_.dl},u().createElement(w.Ts,{component:w.v$.dt},!1===p?u().createElement(D.Text,{component:D.TextVariants.h1},u().createElement(G.Link,{to:"/groups"},null==f?void 0:f.requiredApproval)):u().createElement(b.O,null)),u().createElement(w.Ts,{component:w.v$.dd},"Required approvals"),u().createElement(w.Ts,{component:w.v$.dt},!1===p?u().createElement(D.Text,{component:D.TextVariants.h1},u().createElement(G.Link,{to:"/groups"},null==f?void 0:f.orphaned)):u().createElement(b.O,null)),u().createElement(w.Ts,{component:w.v$.dd},"Orphaned devices"),u().createElement(w.Ts,{component:w.v$.dt},!1===p?u().createElement(D.Text,{component:D.TextVariants.h1},u().createElement(G.Link,{to:"/groups"},null==f?void 0:f.delivering)):u().createElement(b.O,null)),u().createElement(w.Ts,{component:w.v$.dd},"Devices on the way")))))),u().createElement(k.P,{span:3},u().createElement(C.Card,null,u().createElement(I.O,null,u().createElement(R.Title,{headingLevel:"h3"},"Last Canaries")),u().createElement(x.CardBody,null,u().createElement($.TextContent,null,u().createElement(_.Gn,{component:_.F_.dl},u().createElement(w.Ts,{component:w.v$.dt},u().createElement(G.Link,{to:"/groups"},"Sensors")),u().createElement(w.Ts,{component:w.v$.dd},!1===h?u().createElement(N.Level,null,u().createElement(A.LevelItem,null,u().createElement(J.t,{date:null==g||null===(e=g.sensors)||void 0===e?void 0:e.time})),u().createElement(A.LevelItem,null,u().createElement(H.J,{status:null==g||null===(t=g.sensors)||void 0===t?void 0:t.status}))):u().createElement(b.O,null)),u().createElement(w.Ts,{component:w.v$.dt},u().createElement(G.Link,{to:"/groups"},"Scanners")),u().createElement(w.Ts,{component:w.v$.dd},!1===h?u().createElement(N.Level,null,u().createElement(A.LevelItem,null,u().createElement(J.t,{date:null==g||null===(n=g.scanners)||void 0===n?void 0:n.time})),u().createElement(A.LevelItem,null,u().createElement(H.J,{status:null==g||null===(l=g.scanners)||void 0===l?void 0:l.status}))):u().createElement(b.O,null)),u().createElement(w.Ts,{component:w.v$.dt},u().createElement(G.Link,{to:"/groups"},"Kiosks")),u().createElement(w.Ts,{component:w.v$.dd},!1===h?u().createElement(N.Level,null,u().createElement(A.LevelItem,null,u().createElement(J.t,{date:null==g||null===(r=g.kiosks)||void 0===r?void 0:r.time})),u().createElement(A.LevelItem,null,u().createElement(H.J,{status:null==g||null===(a=g.kiosks)||void 0===a?void 0:a.status}))):u().createElement(b.O,null)),u().createElement(w.Ts,{component:w.v$.dt},u().createElement(G.Link,{to:"/groups"},"Antenna")),u().createElement(w.Ts,{component:w.v$.dd},!1===h?u().createElement(N.Level,null,u().createElement(A.LevelItem,null,u().createElement(J.t,{date:null==g||null===(o=g.antenna)||void 0===o?void 0:o.time})),u().createElement(A.LevelItem,null,u().createElement(H.J,{status:null==g||null===(m=g.antenna)||void 0===m?void 0:m.status}))):u().createElement(b.O,null))))),u().createElement(V.e,null,u().createElement(B.Split,null,u().createElement(F.SplitItem,{isFilled:!0}),u().createElement(F.SplitItem,null,u().createElement(G.Link,{to:"/groups"},"See canaries ",u().createElement(W.ZP,null))))))))};var q=n(34723),Q=[{title:"Name of group",transforms:[q.sortable,(0,q.cellWidth)("max")]},{title:"Number of devices",transforms:[q.sortable]},{title:"Secure",transforms:[q.sortable,(0,q.cellWidth)(10)]},{title:"Last seen",transforms:[q.sortable,(0,q.cellWidth)(15)]},{title:"Status",transforms:[q.sortable,(0,q.cellWidth)(10)]}];const X=function(){var e=(0,c.useState)({}),t=o()(e,2),n=t[0],l=t[1],r=(0,i.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.groups}));return u().createElement(q.Table,{"aria-label":"Groups table",actions:[{title:"Adopt",onClick:console.log},{title:"Reject",onClick:console.log}],cells:Q,sortBy:n,onSort:function(e,t,n){return l((function(){return{index:t,direction:n}}))},rows:r.map((function(e){return{cells:[{title:u().createElement(G.Link,{to:"/groups/".concat(null==e?void 0:e.uuid)},null==e?void 0:e.name)},null==e?void 0:e.sensors,{title:u().createElement(H.U,{isSecure:null==e?void 0:e.is_secure})},{title:u().createElement(J.t,{date:null==e?void 0:e.last_seen})},{title:u().createElement(H.J,{status:null==e?void 0:e.status})}]}}))},u().createElement(q.TableHeader,null),u().createElement(q.TableBody,null))};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const M=function(){var e=(0,c.useState)({}),t=o()(e,2),n=t[0],l=t[1],r=(0,i.useDispatch)(),a=(0,i.useSelector)((function(e){var t=e.groupsReducer;return null==t?void 0:t.isLoading})),L=(0,i.useSelector)((function(e){var t=e.groupsReducer;return(null==t?void 0:t.meta)||{page:1}}));return(0,c.useEffect)((function(){(0,m.JH)().register({groupsReducer:d.zX,thresholdReducer:d.KT,devicesInfoReducer:d.bh,canariesInfoReducer:d.KY}),r((0,s.tb)())}),[]),u().createElement(c.Fragment,null,u().createElement(E.mr,{className:"pf-m-light"},u().createElement(E.BV,{title:"Available groups"})),u().createElement(p.o,{className:"edge-groups"},u().createElement(f.K,{hasGutter:!0},u().createElement(g.v,{className:"edge-groups__info"},u().createElement(U,null)),u().createElement(g.v,{isFilled:!0},u().createElement(T.U,!1===a?{pagination:{itemCount:null==L?void 0:L.count,page:(null==L?void 0:L.offset)/(null==L?void 0:L.limit)+1,perPage:Number(null==L?void 0:L.limit),isCompact:!0},dedicatedAction:u().createElement(O.Button,{onClick:function(){return console.log("ff")},isDisabled:!1!==a},"Add group"),filterConfig:{items:[{label:"Name",type:"text",filterValues:{key:"text-filter",onChange:function(e,t){return l(Z(Z({},n||{}),{},{name:t}))},value:(null==n?void 0:n.name)||"",placeholder:"Filter by name"}},{label:"Security",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return l(Z(Z({},n||{}),{},{name:t}))},items:[{value:"isSecure",label:"Secure"},{value:"nonSecure",label:"Not secure"}],value:(null==n?void 0:n.security)||[]}},{label:"Status",type:"checkbox",filterValues:{key:"text-filter",onChange:function(e,t){return l(Z(Z({},n||{}),{},{name:t}))},items:v.O.map((function(e){return{value:e,label:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}})),value:(null==n?void 0:n.status)||[]}}]}}:{pagination:u().createElement(b.O,null)}),!1===a?u().createElement(X,null):u().createElement(y.c,{colSize:5,rowSize:15}),u().createElement(S.f,{isFooter:!0},!1===a&&u().createElement(h.Pagination,{itemCount:null==L?void 0:L.count,page:(null==L?void 0:L.offset)/(null==L?void 0:L.limit)+1,perPage:Number(null==L?void 0:L.limit),dropDirection:"up"}))))))}}}]);
//# sourceMappingURL=GroupsPage.592d1ddb0d70c5143cef.js.map