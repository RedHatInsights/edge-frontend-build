(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[8365],{22409:(e,t,n)=>{"use strict";n.d(t,{db:()=>q,$B:()=>Y,Sp:()=>Q,tW:()=>N,Ud:()=>O,B9:()=>y,l9:()=>V,jS:()=>K,j7:()=>d,bR:()=>R});var a=n(29439),r=n(92950),l=n.n(r),i=n(47173),o=n(6468),s=n(70363),c=n(45697),u=n.n(c),m=function(e){var t=e.buttonLabels,n=t.cancel,c=t.submit,u=t.back,m=(0,r.useState)(!1),d=(0,a.Z)(m,2),p=d[0],f=d[1],v=(0,r.useContext)(s.default),g=v.handlePrev,h=v.formOptions;return l().createElement(o.lP,null,(function(){return l().createElement(l().Fragment,null,l().createElement(i.zx,{variant:"primary",type:"button",isDisabled:!h.valid||h.getState().validating||p,onClick:function(){h.onSubmit({values:h.getState().values,setIsSaving:f})}},c),l().createElement(i.zx,{type:"button",variant:"secondary",onClick:g,isDisabled:p},u),l().createElement("div",{className:"pf-c-wizard__footer-cancel"},l().createElement(i.zx,{type:"button",variant:"link",onClick:h.onCancel,isDisabled:p},n)))}))};m.propTypes={buttonLabels:u().shape({cancel:u().node,submit:u().node,back:u().node}),isSaving:u().bool};const d={name:"review",title:"Review",buttons:m,fields:[{name:"review",component:"review"}]};var p=n(96354),f=n(68340),v=n(68774),g=n(48880),h=n(98309),b=function(){var e,t,n=null===(e=(0,(0,g.default)().getState)())||void 0===e||null===(t=e.values)||void 0===t?void 0:t.release,a=void 0!==n?h.Ei[n]:"";return l().createElement(v.D,null,l().createElement(f.x,null,"Add packages to your ",l().createElement(f.x,{component:"b"},a)," image."))};const y={title:"Additional Red Hat packages",name:"packages",nextStep:"repositories",substepOf:"Content",fields:[{component:p.Z.PLAIN_TEXT,name:"google-cloud-text-component",label:l().createElement(b,null)},{component:"package-selector",name:"selected-packages",label:"Available options",initialValue:[],clearedValue:[]}]};var E=n(93433),k=n(54680),x=n(92694),w=n(64124),Z=n(48903),S=function(){var e,t,n,i,o=(0,Z.gV)("fleet-management.temporary-releases"),s=(0,g.default)(),c=s.change,u=s.getState,m=(null===(e=u())||void 0===e||null===(t=e.values)||void 0===t?void 0:t.release)||(o?h.ml:h.az),d=(null===(n=u())||void 0===n||null===(i=n.values)||void 0===i?void 0:i.release_options)||(o?(0,Z.pS)(m,[].concat((0,E.Z)(h.vk),(0,E.Z)(h.R8))):(0,Z.pS)(m)),p=(0,r.useState)(d),f=(0,a.Z)(p,2),v=f[0],b=f[1],y=(0,r.useState)(!1),w=(0,a.Z)(y,2),S=w[0],O=w[1],P=(0,r.useState)(m),T=(0,a.Z)(P,2),C=T[0],_=T[1];return l().createElement(k.P,{variant:"single",width:"100%",onToggle:function(e){return O(e)},onSelect:function(e,t,n){n?(_(m),O(!1),b(d)):(_(t),O(!1)),c("release",t)},selections:C,isOpen:S,style:{paddingLeft:0,marginLeft:0}},v.map((function(e){return l().createElement(x.$,{key:e.value,value:e.value},e.label)})))};const O={title:"Options",name:"imageOutput",nextStep:function(e){var t,n=e.values;return null!=n&&null!==(t=n.imageType)&&void 0!==t&&t.includes("rhel-edge-installer")||!n.imageType?"registration":"activationKey"},fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement(f.x,null,"Enter some basic information about your image.")},{component:p.Z.PLAIN_TEXT,name:"release",label:l().createElement(S,null),validate:[{type:w.Z.REQUIRED}],isRequired:!0},{component:"image-output-checkbox",name:"imageType",options:Object.entries(h.bd).map((function(e){var t=(0,a.Z)(e,2);return{value:t[0],label:t[1]}})),initialValue:["rhel-edge-installer","rhel-edge-commit"],clearedValue:[],validate:[{type:w.Z.REQUIRED}]}]};var P=n(15861),T=n(64687),C=n.n(T),_=n(28191),j=n(92298),A=n(93597),D=function(){var e,t=null===(e=(0,(0,g.default)().getState)().values)||void 0===e?void 0:e.description;return l().createElement("h1",null,(null==t?void 0:t.length)||0,"/250")};const N=function(){return{title:"Details",name:"imageSetDetails",nextStep:"imageOutput",fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement(f.x,null,"Enter a name and description to easily identify your image later.")},{component:p.Z.TEXT_FIELD,name:"name",label:"Image name",placeholder:"Image name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",validate:[(0,P.Z)(C().mark((function e(){var t,n=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=n.length>0&&void 0!==n[0]?n[0]:"").length){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,(0,A.H1)(t);case 5:if(!e.sent.ImageExists){e.next=8;break}throw"Name already exists";case 8:case"end":return e.stop()}}),e)}))),{type:w.Z.REQUIRED},{type:w.Z.MAX_LENGTH,threshold:50},Z.qg],isRequired:!0},{component:p.Z.TEXTAREA,style:{paddingRight:"32px",height:"25vh"},name:"description",label:l().createElement(_.k,{justifyContent:{default:"justifyContentSpaceBetween"}},l().createElement(j.B,null,l().createElement(f.x,{component:"b"},"Description")),l().createElement(j.B,null,l().createElement(D,null))),placeholder:"Add description",resizeOrientation:"vertical",validate:[{type:w.Z.MAX_LENGTH,threshold:250}]}]}},R={title:"Details",name:"imageSetDetails",nextStep:"imageOutput",fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement(f.x,null,"Enter a description to easily identify your image later.")},{component:p.Z.TEXTAREA,style:{height:"25vh"},name:"description",label:"Description",placeholder:"Add description",validate:[{type:w.Z.MAX_LENGTH,threshold:250}]}]};var I=n(36621),L=n(65673);const V={title:"System registration",name:"registration",nextStep:"activationKey",fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement(f.x,null,"Use this to log into your system.")},{component:p.Z.TEXT_FIELD,label:"Username",placeholder:"Enter username",helperText:l().createElement(I.p,null,l().createElement(L.u,{className:"pf-u-mt-xs",variant:"indeterminate"},"Can only contain letters, numbers, hyphens ( - ), and underscores( _ ).")),name:"username",validate:[{type:w.Z.REQUIRED},{type:w.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:"Can only contain letters, numbers, hyphens ( - ), and underscores( _ )."},{type:w.Z.MAX_LENGTH,threshold:50},{type:"reservedUsernameValidator"}],isRequired:!0},{component:"ssh-input-field",name:"credentials",validate:[{type:w.Z.REQUIRED},{type:w.Z.PATTERN,pattern:/^(ssh-(rsa|dss|ed25519)|ecdsa-sha2-nistp(256|384|521)) \S+/}],isRequired:!0}]},q={title:"Activation Keys",name:"activationKey",nextStep:"packages",fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement(f.x,null,"Automatically register your systems with Red Hat to enhance security and track your spending.")},{component:p.Z.PLAIN_TEXT,name:"method",label:"Registration Method"},{component:"activation-keys-selector",name:"activationKey"},{component:p.Z.PLAIN_TEXT,name:"subscription-register-later",label:l().createElement(f.x,null,l().createElement(f.x,null,"Register Later"),l().createElement(f.x,null,"On initial boot, systems will need to be registered manually before having access to updates or Red Hat services. Registering and connecting your systems during the image creation is recommended."),l().createElement(f.x,null,"If you prefer to register later, review the instructions for manual registration with remote host configuration."),l().createElement(i.zx,{component:"a",target:"_blank",variant:"link",iconPosition:"right",href:"https://access.redhat.com/articles/rhc"},"Registering with remote host configuration")),condition:{or:[{when:"register-system",is:"register-later"}]}}]};var F=n(73411);const K=function(e,t){return{title:"Custom repositories",name:"repositories",nextStep:function(t){var n,a,r=t.values;return(null==r||null===(n=r["third-party-repositories"])||void 0===n?void 0:n.length)>0||null!=r&&r["show-custom-packages"]||(null==r||null===(a=r["initial-custom-repositories"])||void 0===a?void 0:a.length)>0?e?"additionalCustomPackages":"customPackages":"review"},substepOf:"Content",fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement(f.x,null,"Choose from linked custom repositories from which to search and add packages to this image.")},{component:"custom-repo-table",name:"third-party-repositories",label:l().createElement(F.Z,{locationProp:t}),initialValue:[],clearedValue:[],initializeOnMount:!0}]}};var U=n(41448),X=n(46043),H=n(49739),z=n(83826),B=n(19694),M=function(e){var t=e.variant,n=e.title;return l().createElement(U.b,{className:"pf-u-mt-lg",variant:t,isInline:!0,title:n,style:{"--pf-c-content--h4--MarginTop":0}})};M.propTypes={variant:u().string,title:u().string};var G=function(){var e,t,n,a,o,s,c,u,m=(0,g.default)(),d=m.getState,p=m.change,b=null===(e=d())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["third-party-repositories"],y=null===(n=d())||void 0===n||null===(a=n.values)||void 0===a?void 0:a["initial-custom-repositories"],E=null===(o=d())||void 0===o||null===(s=o.values)||void 0===s?void 0:s["custom-packages"],k=null===(c=d())||void 0===c||null===(u=c.values)||void 0===u?void 0:u.release,x=void 0!==k?h.Ei[k]:"";return(0,r.useEffect)((function(){p("validate-custom-repos",!0),p("show-custom-packages",!0)}),[]),l().createElement(l().Fragment,null,l().createElement(v.D,null,l().createElement(f.x,null,"Add packages from"," ",l().createElement(X.J,{style:{visibility:"visible"},position:"bottom",headerContent:"Custom Repositories",bodyContent:l().createElement(H.K,null,b.map((function(e){var t=e.name;return l().createElement(z.v,{key:t},l().createElement(f.x,null,t))})))},l().createElement(i.zx,{variant:"link",isInline:!0},b.length," custom"," ",1===b.length?"repository":"repositories"))," ","to your ",l().createElement("b",null,x)," image.")),0===b.length&&E.length>0?l().createElement(M,{variant:"danger",title:"No custom repositories linked. Clear custom packages or link a repository."}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0!==t.length||0!==n.length)&&(t.length<e.length||!e.every((function(e){return t.find((function(t){return t.name===e.name}))})))}(y,b,E)?l().createElement(M,{variant:"warning",title:"Linked custom repositories were removed when these packages were added. Ensure the package list is still correct."}):null)};const Q={title:"Additional custom packages",name:"customPackages",nextStep:"review",substepOf:"Content",fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement(G,null)},{component:"custom-package-text-area",style:{paddingRight:"32px",height:"25vh"},name:"custom-packages",initialValue:[],clearedValue:[]},{component:p.Z.PLAIN_TEXT,name:"packageDetails",label:l().createElement(f.x,null,"Specify individual packages by exact name and casing, with no whitespace, one entry to a line, and can include hyphens ( - ).")},{component:p.Z.PLAIN_TEXT,name:"warning",label:l().createElement(f.x,{className:"pf-u-warning-color-200"},l().createElement(B.ZP,{className:"pf-u-warning-color-100"}),"  Packages names that do not have exact name and casing will not be included in the image.")}]};var W=function(e){var t=e.variant,n=e.title;return l().createElement(U.b,{className:"pf-u-mt-lg",variant:t,isInline:!0,title:n,style:{"--pf-c-content--h4--MarginTop":0}})};W.propTypes={variant:u().string,title:u().string};var $=function(){var e,t,n,a,o,s,c,u,m=(0,g.default)(),d=m.getState,p=m.change,b=null===(e=d())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["third-party-repositories"],y=null===(n=d())||void 0===n||null===(a=n.values)||void 0===a?void 0:a["initial-custom-repositories"],E=null===(o=d())||void 0===o||null===(s=o.values)||void 0===s?void 0:s["custom-packages"],k=null===(c=d())||void 0===c||null===(u=c.values)||void 0===u?void 0:u.release,x=void 0!==k?h.Ei[k]:"";return(0,r.useEffect)((function(){p("validate-custom-repos",!0),p("show-custom-packages",!0)}),[]),l().createElement(l().Fragment,null,l().createElement(v.D,null,l().createElement(f.x,null,"Search and choose packages from linked"," ",l().createElement(X.J,{style:{visibility:"visible"},position:"bottom",headerContent:"Custom Repositories",bodyContent:l().createElement(H.K,null,b.map((function(e){var t=e.name;return l().createElement(z.v,{key:t},l().createElement(f.x,null,t))})))},l().createElement(i.zx,{variant:"link",isInline:!0},"custom ",1===b.length?"repository":"repositories"))," ","to add to your ",l().createElement("b",null,x)," image.")),0===b.length&&E.length>0?l().createElement(W,{variant:"danger",title:"No custom repositories linked. Clear custom packages or link a repository."}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0!==t.length||0!==n.length)&&(t.length<e.length||!e.every((function(e){return t.find((function(t){return t.name===e.name}))})))}(y,b,E)?l().createElement(W,{variant:"warning",title:"Linked custom repositories were removed when these packages were added. Ensure the package list is still correct."}):null)};const Y={title:"Additional custom packages",name:"additionalCustomPackages",nextStep:"review",substepOf:"Content",fields:[{component:p.Z.PLAIN_TEXT,name:"description",label:l().createElement($,null)},{component:"additional-custom-packages",name:"custom-packages",label:"Available options",initialValue:[],clearedValue:[]}]}},11977:(e,t,n)=>{"use strict";n.d(t,{Es:()=>o,bB:()=>c,dd:()=>l,eS:()=>i,gK:()=>s});var a=n(66702),r=n(93454),l=function(e){var t=e.imageID,n=void 0===t?"":t,l=e.query,i=(0,a.Vs)(l);return r.instance.get("".concat(a.Ds,"/thirdpartyrepo?").concat(n?"imageID=".concat(n,"&"):"").concat(i))},i=function(e){return r.instance.post("".concat(a.Ds,"/thirdpartyrepo"),{Name:e.name,URL:e.baseURL})},o=function(e){return r.instance.put("".concat(a.Ds,"/thirdpartyrepo/").concat(e.id),{Name:e.name,URL:e.baseURL})},s=function(e){return r.instance.delete("".concat(a.Ds,"/thirdpartyrepo/").concat(e))},c=function(e){return r.instance.get("".concat(a.Ds,"/thirdpartyrepo/checkName/").concat(e))}},88665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ce});var a=n(4942),r=n(87462),l=n(92950),i=n.n(l),o=n(79442),s=n(67850),c=n(89235),u=n(37619),m=n(45697),d=n.n(m),p=n(20873),f=n(93433),v=n(15861),g=n(29439),h=n(45987),b=n(64687),y=n.n(b),E=n(48880),k=n(41693),x=n(93597),w=n(68774),Z=n(68340),S=n(47173),O=n(92656),P=n(18793),T=n(34665),C=n(17224),_=n(93542),j=n(66317),A=n(36621),D=n(65673),N=n(65802),R=n(46836),I=n(92607),L=n(15627),V=n(80810),q=n(94949),F=n(71973),K=n(94086),U=n(93174),X=n(98309),H=["defaultArch"];function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var B=function(e){var t=e.text;return i().createElement(Z.x,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},t)};B.propTypes={text:d().string};var M=function(e){var t=e.heading,n=e.body;return i().createElement(w.D,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},i().createElement(Z.x,{component:"h3"},t),i().createElement(Z.x,{component:"small"},n))};M.propTypes={heading:d().string,body:d().string};var G=function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selected:!1,isVisible:!0},e)}))},Q=function(e){var t=e.defaultArch,n=(0,h.Z)(e,H),a=(0,E.default)(),r=a.change,o=a.getState,s=(0,k.Z)(n).input,c=i().useState([]),u=(0,g.Z)(c,2),m=u[0],d=u[1],p=i().useState([]),b=(0,g.Z)(p,2),Z=b[0],z=b[1],Q=i().useState(""),W=(0,g.Z)(Q,2),$=W[0],Y=W[1],J=(0,l.useState)(!1),ee=(0,g.Z)(J,2),te=ee[0],ne=ee[1],ae=(0,l.useState)(!1),re=(0,g.Z)(ae,2),le=re[0],ie=re[1],oe=(0,l.useState)(null),se=(0,g.Z)(oe,2),ce=se[0],ue=se[1],me=(0,l.useState)(!1),de=(0,g.Z)(me,2),pe=de[0],fe=de[1],ve=(0,l.useState)(!1),ge=(0,g.Z)(ve,2),he=ge[0],be=ge[1],ye=(0,l.useState)(!1),Ee=(0,g.Z)(ye,2),ke=Ee[0],xe=Ee[1];(0,l.useEffect)((function(){var e,t,n=(null===(e=o())||void 0===e||null===(t=e.values)||void 0===t?void 0:t[s.name])||[];z((0,X.n)(G(n)));var a=document.querySelector('[aria-label="available search input"]');return null==a||a.addEventListener("keydown",Ze),function(){return a.removeEventListener("keydown",Ze)}}),[]),(0,l.useEffect)((function(){te&&(we(),ne(!1))}),[te]),(0,l.useEffect)((function(){Se()}),[ce]);var we=function(){var e=(0,v.Z)(y().mark((function e(){var n,a,r,l,i,s,c,u,m,p;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==$){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,x.EV)((null===(n=o())||void 0===n||null===(a=n.values)||void 0===a?void 0:a.release)||"rhel-85",(null===(r=o())||void 0===r||null===(l=r.values)||void 0===l?void 0:l.architecture)||t,$);case 4:if(i=e.sent,s=i.data,c=i.meta,s){e.next=12;break}return fe(!0),ie(!1),d([]),e.abrupt("return");case 12:if(!(c.count>100)){e.next=27;break}if(fe(!1),ie(!0),u=null,s.forEach((function(e,t){e.name!==$||(u=t)})),m=!Z.find((function(e){return e.name===s[u].name})),null===u||!m){e.next=22;break}return xe(!0),d(G([s[u]])),e.abrupt("return");case 22:return xe(!1),d([]),e.abrupt("return");case 27:ie(!1),xe(!1);case 29:p=s.filter((function(e){return!Z.find((function(t){return t.name===e.name}))})),d((0,X.n)(G(p))),fe(!1);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(e){"Enter"===e.key&&(e.stopPropagation(),ne(!0))},Se=function(){if(ce){var e=document.querySelector(".pf-m-".concat(ce.pane," .pf-c-dual-list-selector__menu"));ce.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-c-dual-list-selector__list-item-row").classList.add("pf-u-background-color-disabled-color-300")})),setTimeout((function(){ce.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-c-dual-list-selector__list-item-row").classList.remove("pf-u-background-color-disabled-color-300")}))}),400),e.scrollTop=ce.scrollHeight,ue(null)}},Oe=function(e){for(var t=e?m:Z,n=e?Z:m,a=[],l=0;l<t.length;l++){var i=t[l];i.selected&&i.isVisible&&(a.push(i),t.splice(l,1),i.selected=!1,l--)}var o=61*(n=(0,X.n)([].concat((0,f.Z)(n),a))).findIndex((function(e){return e.name===a[0].name}));e?(d((0,X.n)((0,f.Z)(t))),z(n),r(s.name,n)):(z((0,X.n)((0,f.Z)(t))),d(n),r(s.name,(0,f.Z)(t))),ue({pkgs:a,pane:e?"chosen":"available",scrollHeight:o}),xe(!1)},Pe=function(e){e?(z((0,X.n)([].concat((0,f.Z)(m.filter((function(e){return e.isVisible}))),(0,f.Z)(Z)))),d((0,X.n)((0,f.Z)(m.filter((function(e){return!e.isVisible}))))),r(s.name,[].concat((0,f.Z)(m),(0,f.Z)(Z)))):(d((0,X.n)([].concat((0,f.Z)(Z.filter((function(e){return e.isVisible}))),(0,f.Z)(m)))),z((0,X.n)((0,f.Z)(Z.filter((function(e){return!e.isVisible}))))),r(s.name,[])),xe(!1)},Te=function(e){return i().createElement(i().Fragment,null,i().createElement(N.B,null,i().createElement(I.oi,{id:"".concat(e?"available":"chosen","-textinput"),type:"search",onChange:function(t){Y(t),e||(0,f.Z)(Z).forEach((function(e){e.isVisible=""===t||e.name.toLowerCase().includes(t.toLowerCase())}))},placeholder:"Search for packages",onFocus:function(){return be(!0)},onBlur:function(){return be(!1)},validated:le&&e&&!he?"warning":"","aria-label":e?"available search input":"chosen search input","data-testid":e?"available-search-input":"chosen-search-input"}),e?i().createElement(S.zx,{onClick:we,isDisabled:!e,variant:"control","aria-label":"search button for search input","data-testid":"package-search"},i().createElement(V.ZP,null)):i().createElement(R.O,null,i().createElement(V.ZP,{className:"pf-u-ml-xs pf-u-mr-xs"}))),le&&e&&i().createElement(A.p,null,i().createElement(D.u,{variant:"warning"},"Over 100 results found. Refine your search.")))},Ce=function(e,t){return e.map((function(e,n){return e.isVisible?i().createElement(C.z,{key:n,isSelected:e.selected,id:"composable-option-".concat(n),onOptionSelect:function(e){return function(e,t,n){if(n){var a=(0,f.Z)(Z);a[t].selected=!Z[t].selected,z((0,X.n)(a))}else{var r=(0,f.Z)(m);r[t].selected=!m[t].selected,d((0,X.n)(r))}}(0,n,t)}},i().createElement(w.D,null,i().createElement("span",{id:"package-".concat(e.name),className:"pf-c-dual-list-selector__item-text"},e.name),i().createElement("small",null,e.summary))):null}))},_e=function(e){var t=e.filter((function(e){return e.isVisible})).length,n=e.filter((function(e){return e.selected&&e.isVisible})).length;return n>0?"".concat(n," of ").concat(t," items selected"):"".concat(t," ").concat(t>1?"items":"item")};return i().createElement(O.I,null,i().createElement(P.b,{title:"Available packages",status:_e(m),searchInput:Te(!0)},i().createElement(T.l,{style:{height:"290px"},"data-testid":"available-packages-list"},m.length>0&&!ke?Ce(m,!1):pe?i().createElement(M,{heading:"No Results Found",body:"Adjust your search and try again"}):le?i().createElement(i().Fragment,null,ke&&i().createElement(A.p,null,i().createElement(D.u,{className:"pf-u-ml-md pf-u-mt-md",variant:"indeterminate"},"Exact match")),ke&&Ce(m,!1),ke&&i().createElement(L.i,{className:"pf-u-mt-md",inset:{default:"insetMd"}}),i().createElement(M,{heading:"Too many results to display",body:"Please make the search more specific and try again"})):i().createElement(B,{text:"Search above to add additional packages to your image."}))),i().createElement(_.x,{"aria-label":"Selector controls"},i().createElement(j.u,{isDisabled:!m.some((function(e){return e.selected})),onClick:function(){return Oe(!0)},"aria-label":"Add selected",tooltipContent:"Add selected"},i().createElement(U.ZP,null)),i().createElement(j.u,{isDisabled:0===m.length,onClick:function(){return Pe(!0)},"aria-label":"Add all",tooltipContent:"Add all"},i().createElement(K.ZP,null)),i().createElement(j.u,{isDisabled:0===Z.length,onClick:function(){return Pe(!1)},"aria-label":"Remove all",tooltipContent:"Remove all"},i().createElement(q.ZP,null)),i().createElement(j.u,{onClick:function(){return Oe(!1)},isDisabled:!Z.some((function(e){return e.selected})),"aria-label":"Remove selected",tooltipContent:"Remove selected"},i().createElement(F.ZP,null))),i().createElement(P.b,{title:"Chosen packages",status:_e(Z),searchInput:Te(!1),isChosen:!0},i().createElement(T.l,{style:{height:"290px"},"data-testid":"chosen-packages-list"},0===Z.length?i().createElement(B,{text:"No packages added."}):Z.filter((function(e){return e.isVisible})).length>0?Ce(Z,!0):i().createElement(M,{heading:"No Results Found",body:"Adjust your search and try again"}))))};Q.propTypes={defaultArch:d().string};const W=Q;var $=n(11306),Y=["defaultArch"],J=function(e){var t=e.text;return i().createElement(Z.x,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},t)};J.propTypes={text:d().string};var ee=function(e){var t=e.heading,n=e.body;return i().createElement(w.D,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},i().createElement(Z.x,{component:"h3"},t),i().createElement(Z.x,{component:"small"},n))};ee.propTypes={heading:d().string,body:d().string};var te=function(e){return e.map((function(e){return{selected:!1,isVisible:!0,name:e.package_name||e.name,summary:e.summary}}))},ne=function(e){e.defaultArch;var t=(0,h.Z)(e,Y),n=(0,E.default)(),a=n.change,r=n.getState,o=(0,k.Z)(t).input,s=i().useState([]),c=(0,g.Z)(s,2),u=c[0],m=c[1],d=i().useState([]),p=(0,g.Z)(d,2),b=p[0],Z=p[1],V=i().useState(""),H=(0,g.Z)(V,2),z=H[0],B=H[1],M=(0,l.useState)(!1),G=(0,g.Z)(M,2),Q=G[0],W=G[1],ne=(0,l.useState)(!1),ae=(0,g.Z)(ne,2),re=ae[0],le=ae[1],ie=(0,l.useState)(null),oe=(0,g.Z)(ie,2),se=oe[0],ce=oe[1],ue=(0,l.useState)(!1),me=(0,g.Z)(ue,2),de=me[0],pe=me[1],fe=(0,l.useState)(!1),ve=(0,g.Z)(fe,2),ge=ve[0],he=ve[1],be=(0,l.useState)(!1),ye=(0,g.Z)(be,2),Ee=ye[0],ke=ye[1];(0,l.useEffect)((function(){var e,t,n=(null===(e=r())||void 0===e||null===(t=e.values)||void 0===t?void 0:t[o.name])||[];Z((0,X.n)(te(n)));var a=document.querySelector('[aria-label="available search input"]');return null==a||a.addEventListener("keydown",we),function(){return a.removeEventListener("keydown",we)}}),[]),(0,l.useEffect)((function(){Q&&(xe(),W(!1))}),[Q]),(0,l.useEffect)((function(){Ze()}),[se]);var xe=function(){var e=(0,v.Z)(y().mark((function e(){var t,n,a,l,i,o,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==z){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,x.Sj)(null===(t=(null===(n=r())||void 0===n||null===(a=n.values)||void 0===a?void 0:a["third-party-repositories"])||[])||void 0===t?void 0:t.map((function(e){return e.URL})),z);case 4:if(l=e.sent,le(!1),ke(!1),pe(!1),l){e.next=12;break}return pe(!0),m([]),e.abrupt("return");case 12:if(!(l.length>100)){e.next=24;break}if(pe(!1),le(!0),i=null,l.forEach((function(e,t){e.package_name!==z||(i=t)})),o=!b.find((function(e){return e.name===l[i].name})),null===i||!o){e.next=22;break}return ke(!0),m(te([l[i]])),e.abrupt("return");case 22:return m([]),e.abrupt("return");case 24:s=l.filter((function(e){return!b.find((function(t){return t.name===e.name}))})),m((0,X.n)(te(s))),pe(!1);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(e){"Enter"===e.key&&(e.stopPropagation(),W(!0))},Ze=function(){if(se){var e=document.querySelector(".pf-m-".concat(se.pane," .pf-c-dual-list-selector__menu"));se.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-c-dual-list-selector__list-item-row").classList.add("pf-u-background-color-disabled-color-300")})),setTimeout((function(){se.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-c-dual-list-selector__list-item-row").classList.remove("pf-u-background-color-disabled-color-300")}))}),400),e.scrollTop=se.scrollHeight,ce(null)}},Se=function(e){for(var t=e?u:b,n=e?b:u,r=[],l=0;l<t.length;l++){var i=t[l];i.selected&&i.isVisible&&(r.push(i),t.splice(l,1),i.selected=!1,l--)}var s=61*(n=(0,X.n)([].concat((0,f.Z)(n),r))).findIndex((function(e){return e.name===r[0].name}));e?(m((0,X.n)((0,f.Z)(t))),Z(n),a(o.name,n)):(Z((0,X.n)((0,f.Z)(t))),m(n),a(o.name,(0,f.Z)(t))),ce({pkgs:r,pane:e?"chosen":"available",scrollHeight:s}),ke(!1)},Oe=function(e){e?(Z((0,X.n)([].concat((0,f.Z)(u.filter((function(e){return e.isVisible}))),(0,f.Z)(b)))),m((0,X.n)((0,f.Z)(u.filter((function(e){return!e.isVisible}))))),a(o.name,[].concat((0,f.Z)(u),(0,f.Z)(b)))):(m((0,X.n)([].concat((0,f.Z)(b.filter((function(e){return e.isVisible}))),(0,f.Z)(u)))),Z((0,X.n)((0,f.Z)(b.filter((function(e){return!e.isVisible}))))),a(o.name,[])),ke(!1)},Pe=function(e){return i().createElement(i().Fragment,null,i().createElement(N.B,null,i().createElement(I.oi,{id:"".concat(e?"available":"chosen","-textinput"),type:"arrow",onChange:function(t){B(t),e||(0,f.Z)(b).forEach((function(e){e.isVisible=""===t||e.name.toLowerCase().includes(t.toLowerCase())}))},placeholder:"Search for packages",onFocus:function(){return he(!0)},onBlur:function(){return he(!1)},validated:re&&e&&!ge?"warning":"","aria-label":e?"available search input":"chosen search input","data-testid":e?"available-search-input":"chosen-search-input"}),e?i().createElement(S.zx,{onClick:xe,isDisabled:!e,variant:"control","aria-label":"search button for search input","data-testid":"package-search"},i().createElement($.ZP,null)):i().createElement(R.O,null,i().createElement($.ZP,{className:"pf-u-ml-xs pf-u-mr-xs"}))),re&&e&&i().createElement(A.p,null,i().createElement(D.u,{variant:"warning"},"Over 100 results found. Refine your search.")))},Te=function(e,t){return e.map((function(e,n){return e.isVisible?i().createElement(C.z,{key:n,isSelected:e.selected,id:"composable-option-".concat(n),onOptionSelect:function(e){return function(e,t,n){if(n){var a=(0,f.Z)(b);a[t].selected=!b[t].selected,Z((0,X.n)(a))}else{var r=(0,f.Z)(u);r[t].selected=!u[t].selected,m((0,X.n)(r))}}(0,n,t)}},i().createElement(w.D,null,i().createElement("span",{id:"package-".concat(e.name),className:"pf-c-dual-list-selector__item-text"},e.name),i().createElement("small",null,e.summary))):null}))},Ce=function(e){var t=e.filter((function(e){return e.isVisible})).length,n=e.filter((function(e){return e.selected&&e.isVisible})).length;return n>0?"".concat(n," of ").concat(t," items selected"):"".concat(t," ").concat(t>1?"items":"item")};return i().createElement(O.I,null,i().createElement(P.b,{title:"Available packages",status:Ce(u),searchInput:Pe(!0)},i().createElement(T.l,{style:{height:"290px"},"data-testid":"available-packages-list"},u.length>0&&!Ee?Te(u,!1):de?i().createElement(ee,{heading:"No Results Found",body:"Adjust your search and try again"}):re?i().createElement(i().Fragment,null,Ee&&i().createElement(A.p,null,i().createElement(D.u,{className:"pf-u-ml-md pf-u-mt-md",variant:"indeterminate"},"Exact match")),Ee&&Te(u,!1),Ee&&i().createElement(L.i,{className:"pf-u-mt-md",inset:{default:"insetMd"}}),i().createElement(ee,{heading:"Too many results to display",body:"Please make the search more specific and try again"})):i().createElement(J,{text:"Search above to add additional packages to your image."}))),i().createElement(_.x,{"aria-label":"Selector controls"},i().createElement(j.u,{isDisabled:!u.some((function(e){return e.selected})),onClick:function(){return Se(!0)},"aria-label":"Add selected",tooltipContent:"Add selected"},i().createElement(U.ZP,null)),i().createElement(j.u,{isDisabled:0===u.length,onClick:function(){return Oe(!0)},"aria-label":"Add all",tooltipContent:"Add all"},i().createElement(K.ZP,null)),i().createElement(j.u,{isDisabled:0===b.length,onClick:function(){return Oe(!1)},"aria-label":"Remove all",tooltipContent:"Remove all"},i().createElement(q.ZP,null)),i().createElement(j.u,{onClick:function(){return Se(!1)},isDisabled:!b.some((function(e){return e.selected})),"aria-label":"Remove selected",tooltipContent:"Remove selected"},i().createElement(F.ZP,null))),i().createElement(P.b,{title:"Chosen packages",status:Ce(b),searchInput:Pe(!1),isChosen:!0},i().createElement(T.l,{style:{height:"290px"},"data-testid":"chosen-packages-list"},0===b.length?i().createElement(J,{text:"No packages added."}):b.filter((function(e){return e.isVisible})).length>0?Te(b,!0):i().createElement(ee,{heading:"No Results Found",body:"Adjust your search and try again"}))))};ne.propTypes={defaultArch:d().string};const ae=ne;var re=n(73411),le=n(59775),ie=n(93149),oe=n(23393);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=function(){return function(e,t){if(0===e.length)return{checkbox:"select at least one validation method"};var n={};return!e.includes("password")||void 0!==t.password&&""!==t.password||(n=ce(ce({},n),{},{password:"Required"})),!e.includes("sshKey")||void 0!==t.sshKey&&""!==t.sshKey||(n=ce(ce({},n),{},{sshKey:"Required"})),n}};const me=function(e){var t=(0,k.Z)(e),n=t.input,a=t.meta,o=(0,l.useCallback)((function(e,t){n.onChange(e?[].concat((0,f.Z)(n.value),[t.currentTarget.id]):n.value.filter((function(e){return e!==t.currentTarget.id})))}),[n.onChange]),s=(0,k.Z)({name:"password"}).input,c=(0,k.Z)({name:"sshKey"}).input;return i().createElement(le.c,{label:"Select at least one to validate credentials",isHelperTextBeforeField:!0,hasNoPaddingTop:!0,isRequired:!0,isStack:!0},i().createElement(ie.X,{label:"Password",id:"password",isChecked:n.value.includes("password"),onChange:o}),n.value.includes("password")?i().createElement(le.c,{helperTextInvalid:a.dirty&&void 0!==a.error.password?a.error.password:void 0},i().createElement(I.oi,(0,r.Z)({type:"password"},s))):null,i().createElement(ie.X,{label:"SSH",id:"sshKey",isChecked:n.value.includes("sshKey"),onChange:o}),n.value.includes("sshKey")?i().createElement(le.c,{helperTextInvalid:a.dirty&&void 0!==a.error.sshKey?a.error.sshKey:void 0},i().createElement(oe.Kx,c)):null)};var de=n(15265),pe=function(){return i().createElement(A.p,{className:"pf-u-ml-lg"},i().createElement(D.u,{className:"pf-u-pb-md",variant:"warning",hasIcon:!0},"Creating an installable version of your image increases the build time and is not needed for updating existing systems. ",i().createElement("br",null),"You can create an installable version of this image later if you continue with this option"))},fe={"rhel-edge-commit":"An OSTree commit is always created when building an image.","rhel-edge-installer":"An installable version of the image is typically created with a brand new image."},ve=function(e){var t=(0,E.default)().getState,n=(0,k.Z)(e).input,a=(0,l.useCallback)((function(e,t){n.onChange(e?[].concat((0,f.Z)(n.value),[t.currentTarget.id]):n.value.filter((function(e){return e!==t.currentTarget.id})))}),[n.onChange]);return i().createElement(le.c,{label:"Output type",isHelperTextBeforeField:!0,hasNoPaddingTop:!0,isRequired:!0,isStack:!0},e.options.map((function(e,r){var o,s,c=e.value,u=e.label;return i().createElement(l.Fragment,{key:r},i().createElement(ie.X,{label:u,id:c,isChecked:n.value.includes(c),onChange:a,isDisabled:"rhel-edge-commit"===c}),i().createElement(w.D,null,null!==(o=t())&&void 0!==o&&null!==(s=o.initialValues)&&void 0!==s&&s.isUpdate&&"rhel-edge-installer"===c?i().createElement(pe,null):i().createElement(A.p,{className:"pf-u-ml-lg pf-u-pb-sm"},i().createElement(D.u,{variant:"indeterminate"},fe[c]))),"rhel-edge-installer"===c&&i().createElement(l.Fragment,null,i().createElement(Z.x,{component:Z.q.small},i().createElement(Z.x,{target:"_blank",href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/composing_installing_and_managing_rhel_for_edge_images/index#edge-how-to-compose-and-deploy-a-rhel-for-edge-image_introducing-rhel-for-edge-images",component:Z.q.a,isVisitedLink:!0},"Learn more about image types.",i().createElement(de.ZP,{className:"pf-u-ml-sm"})))))})))};ve.propTypes={input:d().array,options:d().arrayOf(d().shape({value:d().string,label:d().string}))};const ge=ve;function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}const be=function(e){var t=(0,k.Z)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:"credentials"},e)),n=t.input,o=t.meta;return i().createElement(le.c,null,i().createElement(le.c,{label:"SSH key",helperTextInvalid:o.error,validated:o.error&&o.touched?"error":"default",isRequired:!0},i().createElement(oe.Kx,(0,r.Z)({className:"pf-u-h-25vh",id:"credentials",placeholder:"Paste your public SSH key"},n))),i().createElement(l.Fragment,null,i().createElement(Z.x,{component:Z.q.small},i().createElement(Z.x,{target:"_blank",href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/assembly_using-secure-communications-between-two-systems-with-openssh_configuring-basic-system-settings#generating-ssh-key-pairs_assembly_using-secure-communications-between-two-systems-with-openssh",isVisitedLink:!0,component:Z.q.a},"Learn more about SSH keys",i().createElement(de.ZP,{className:"pf-u-ml-sm"})))))};var ye=n(54680),Ee=n(92694);const ke=function(){var e,t,n=(0,E.default)(),a=n.change,r=n.getState,o=(null===(e=r())||void 0===e||null===(t=e.values)||void 0===t?void 0:t.activationKey)||"",s=(0,l.useState)({}),c=(0,g.Z)(s,2),u=c[0],m=c[1],d=(0,l.useState)(null),p=(0,g.Z)(d,2),f=p[0],h=p[1],b=(0,l.useState)(!1),k=(0,g.Z)(b,2),w=k[0],O=k[1],P=(0,l.useState)(o),T=(0,g.Z)(P,2),C=T[0],_=T[1],j=(0,l.useState)(!1),A=(0,g.Z)(j,2),D=A[0],N=A[1];(0,l.useEffect)((function(){var e,t;null!==(e=r())&&void 0!==e&&null!==(t=e.initialValues)&&void 0!==t&&t.isUpdate?N(!0):(0,v.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Y)();case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);var R=[];(0,l.useEffect)((function(){var e;null!=u&&(R.push({value:null,label:"Select activation key"}),null==u||null===(e=u.body)||void 0===e||e.forEach((function(e){R.push({value:e.name,label:e.name})})),h(R))}),[u]);var I=function(){return i().createElement(S.zx,{component:"a",target:"_blank",variant:"link",icon:i().createElement(de.ZP,null),iconPosition:"right",isInline:!0,href:"https://".concat(window.location.host,"/insights/connector/activation-keys")},"Activation keys page")};return i().createElement(le.c,null,i().createElement(le.c,{label:"Activation key to use for this image"},i().createElement(ye.P,{variant:"single",width:"100%",onToggle:function(){return O(!w)},onSelect:function(e,t,n){n?(_(null),O(!1)):(_(t),O(!1),a("activationKey",t))},selections:C,isOpen:w,style:{paddingLeft:0,marginLeft:0},placeholderText:"Select activation key",isDisabled:D},null==f?void 0:f.map((function(e){return i().createElement(Ee.$,{key:e.value,value:e.value},e.label)})))),i().createElement("br",null),i().createElement(l.Fragment,null,i().createElement(Z.x,null,i().createElement(Z.x,null,"By default, activation key is generated and preset for you. Admins can create and manage keys by visiting the ",i().createElement(I,null)))))};var xe=["root","bin","daemon","sys","adm","tty","disk","lp","mem","kmem","wheel","cdrom","sync","shutdown","halt","mail","news","uucp","operator","games","gopher","ftp","man","oprofile","pkiuser","dialout","floppy","games","slocate","utmp","squid","pvm","named","postgres","mysql","nscd","rpcuser","console","rpc","amandabackup","tape","netdump","utempter","vdsm","kvm","rpm","ntp","video","dip","mailman","gdm","xfs","pppusers","popusers","slipusers","mailnull","apache","wnn","smmsp","puppet","tomcat","lock","ldap","frontpage","nut","beagleindex","tss","piranha","prelude-manager","snortd","audio","condor","nslcd","wine","pegasus","webalizer","haldaemon","vcsa","avahi","realtime","tcpdump","privoxy","sshd","radvd","cyrus","saslauth","arpwatch","fax","nocpulse","desktop","dbus","jonas","clamav","screen","quaggavt","sabayon","polkituser","wbpriv","postfix","postdrop","majordomo","quagga","exim","distcache","radiusd","hsqldb","dovecot","ident","users","qemu","ovirt","rhevm","jetty","saned","vhostmd","usbmuxd","bacula","cimsrvr","mock","ricci","luci","activemq","cassandra","stap-server","stapusr","stapsys","stapdev","swift","glance","nova","keystone","quantum","cinder","ceilometer","ceph","avahi-autoipd","pulse","rtkit","abrt","retrace","ovirtagent","ats","dhcpd","myproxy","sanlock","aeolus","wallaby","katello","elasticsearch","mongodb","wildfly","jbosson-agent","jbosson","heat","haproxy","hacluster","haclient","systemd-journal","systemd-network","systemd-resolve","gnats","listar","nobody",""],we=function(){return function(e){return xe.includes(e)?"This is a username reserved for the system":void 0}},Ze=n(64124);const Se=function(e){var t=(0,k.Z)(e).input,n=(0,l.useState)(t.value.map((function(e){return e.name})).join("\n")),a=(0,g.Z)(n,2),r=a[0],o=a[1];return i().createElement(le.c,{label:"Packages",type:"string"},i().createElement(oe.Kx,{"aria-label":"custom-package-wizard-step",placeholder:"Enter or paste packages from linked repositories, one entry per line.\rExamplePackage\rexample-package\rexamplepackage",value:r,onChange:function(e){var n=e.split(/[,\s]+/g).reduce((function(e,t){return""!==t?[].concat((0,f.Z)(e),[{name:t}]):e}),[]);t.onChange(n),o(e)},onKeyDown:function(e){"Enter"===e.key&&e.stopPropagation()},style:{paddingRight:"32px",height:"25vh"}}))};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=function(e){var t=e.schema,n=e.onSubmit,a=e.onClose,l=e.customComponentMapper,m=e.initialValues,d=e.defaultArch;return t?i().createElement(o.Z,{schema:t,className:"image-builder",subscription:{values:!0},FormTemplate:function(e){return i().createElement(s.ZP,(0,r.Z)({},e,{showFormControls:!1}))},onSubmit:function(e){return n(e)},initialValues:m,componentMapper:Pe(Pe({},c.YS),{},{"registration-creds":{component:me},"image-output-checkbox":{component:ge},"ssh-input-field":{component:be},"activation-keys-selector":{component:ke},review:p.Z,"package-selector":{component:W,defaultArch:d},"custom-repo-table":{component:re.Z},"custom-package-text-area":{component:Se},"additional-custom-packages":{component:ae}},l),validate:function(e){var t,n,a={};return e["validate-custom-repos"]&&(null===(t=e["custom-packages"])||void 0===t?void 0:t.length)>0&&0===(null===(n=e["third-party-repositories"])||void 0===n?void 0:n.length)&&(a["custom-packages"]="No custom repositories linked"),a},validatorMapper:Pe(Pe({},Ze.Z),{},{registrationCredsValidator:ue,reservedUsernameValidator:we}),onCancel:a}):i().createElement(u.$,null)};Te.propTypes={schema:d().object,initialValues:d().object,onSubmit:d().func.isRequired,onClose:d().func.isRequired,customComponentMapper:d().shape((0,a.Z)({},d().string,d().oneOfType([d().node,d().shape({component:d().node})]))),defaultArch:d().string};const Ce=Te},20873:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(92950),r=n.n(a),l=n(68774),i=n(68340),o=n(48880),s=n(98309),c=n(50693),u=n(16475),m=n(78140),d=n(45697),p=n.n(d),f=function(e){var t=e.title,n=e.data,a=e.testid;return r().createElement(c.r,{className:"pf-u-pb-xl","data-testid":a,hasGutter:!0},r().createElement(u.P,{span:12},r().createElement(i.x,{component:i.q.h2},t)),n.map((function(e){var t=e.name,n=e.value;return r().createElement(c.r,{key:t},r().createElement(u.P,{span:3},r().createElement(m.T,{component:m.v.dt},t)),r().createElement(u.P,{span:9},r().createElement(m.T,{component:m.v.dd},n)))})))};f.propTypes={title:p().string,data:p().arrayOf(p().shape({name:p().string,value:p().string})),testid:p().string};const v=f,g=function(){var e,t=(0,o.default)().getState,n=t().initialValues.isUpdate,c=[{name:"Name",value:t().values.name},{name:"Version",value:String(t().initialValues.version+1)},{name:"Description",value:t().values.description}],u=[{name:"Username",value:t().values.username},{name:"ssh-key",value:t().values.credentials}],m=[{name:"Activation Key",value:t().values.activationKey}],d=t().initialValues["selected-packages"]||[],p=t().values["selected-packages"]||[],f=t().initialValues["third-party-repositories"].length?t().initialValues["custom-packages"]:[],g=t().values["third-party-repositories"].length?t().values["custom-packages"]:[],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,n){var a=n.name;return e+(t.some((function(e){return e.name===a}))?0:1)}),0)};return r().createElement(a.Fragment,null,r().createElement(l.D,null,r().createElement(i.x,null,"Review the information and click"," ",r().createElement(i.x,{component:"b"},"Create image")," to start the build process."),r().createElement(v,{title:"Details",data:c,testid:"review-image-details"}),r().createElement(v,{title:"Output",data:(e=[{name:"Release",value:s.Ei[t().values.release]},{name:"Output Type",value:s.bd["rhel-edge-commit"]}],t().values.imageType.includes("rhel-edge-installer")&&e.push({name:"",value:s.bd["rhel-edge-installer"]}),e),testid:"review-image-output"}),t().values.imageType.includes("rhel-edge-installer")?r().createElement(v,{title:"Registration",data:u,testid:"review-image-registration"}):null,r().createElement(v,{title:"Acivation Key",data:m,testid:"review-image-activation-key"}),r().createElement(v,{title:"Packages",data:[{name:n?"Custom Updated":"Custom Added",value:String(h(g,f))},{name:n?"RHEL Updated":"RHEL Added",value:String(h(p,d))}],testid:"review-image-packages"})))}},73411:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var a=n(29439),r=n(92950),l=n.n(r),i=n(21061),o=n(15265),s=n(41448),c=n(68340),u=n(45697),m=n.n(u),d=n(3035),p=n(11977),f=n(96094),v=n(48880),g=n(41693),h=n(48903),b=n(9192),y=[{label:"Name",type:"text"}],E=function(e){var t,n,u,m,E,k,x,w,Z=(0,v.default)(),S=Z.change,O=Z.getState,P=(0,g.Z)(e).input,T=null===(t=O())||void 0===t||null===(n=t.values)||void 0===n?void 0:n.isUpdate,C=null===(u=O())||void 0===u||null===(m=u.values)||void 0===m?void 0:m.imageID,_=null===(E=O())||void 0===E||null===(k=E.values)||void 0===k?void 0:k["third-party-repositories"],j=(0,f.Z)({api:function(e){var t=e.query;return(0,p.dd)({imageID:T?C.toString():"",query:t})},tableReload:!0}),A=(0,a.Z)(j,2),D=A[0],N=A[1],R=D.data,I=D.isLoading,L=D.hasError;(0,r.useEffect)((function(){S("validate-custom-repos",!1),S("third-party-repositories",_)}),[]);var V,q=null==e||null===(x=e.label)||void 0===x||null===(w=x.props)||void 0===w?void 0:w.locationProp,F=(0,h.gV)("edge-management.custom_repos_ui"),K=(0,h.gV)("edge-management.skip-custom-repo");return l().createElement(l().Fragment,null,K?l().createElement(s.b,{title:"Repositories unavailable",variant:"warning",isInline:!0},"The Content service cannot be reached, please check back later."):!I&&!(null!=R&&R.count)>0?l().createElement(d.Z,{target:"_blank",icon:"repository",title:"No custom repositories available",body:"Add custom repositories to build RHEL for Edge images with additional packages.",primaryAction:{text:"Custom repositories",href:F?b._.contentSourcesRepositories:b._.repositories}}):l().createElement(i.Z,{apiFilterSort:!0,locationProp:q,isUseApi:!0,loadTableData:N,filters:y,tableData:{count:null==R?void 0:R.count,data:R,isLoading:I,hasError:L},columnNames:[{title:"Name",type:"name",sort:!1}],rows:I?[]:(V=R,V.data.map((function(e){var t=e.ID,n=e.Name,a=e.URL;return{rowInfo:{id:t,name:n,URL:a,uuid:e.uuid},cells:[{title:l().createElement(l().Fragment,null,l().createElement(c.x,{className:"pf-u-mb-xs",component:c.q.p},l().createElement("span",null,(0,h.aS)(n,50))),l().createElement(c.x,{component:c.q.a,href:a,target:"_blank",rel:"noopener noreferrer"},a," ",l().createElement(o.ZP,{className:"pf-u-ml-sm"})))}]}}))),defaultSort:{index:0,direction:"desc"},hasCheckbox:!0,selectedItems:function(e){var t=null==e?void 0:e.map((function(e){return{id:null==e?void 0:e.id,name:null==e?void 0:e.name,URL:null==e?void 0:e.URL,uuid:null==e?void 0:e.uuid}}));P.onChange(t),t.length?S("show-custom-packages",!0):S("show-custom-packages",!1)},initSelectedItems:P.value}))};E.propTypes={data:m().array,closeModal:m().func,locationProp:m().object,label:m().object,props:m().func};const k=E},32349:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(4942),r=n(15861),l=n(64687),i=n.n(l),o=n(83215);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(e,t,n,a){var l,s,u,m=null===(l=n)||void 0===l?void 0:l.onSuccess,d=null===(s=n)||void 0===s?void 0:s.onInfo,p=null===(u=n)||void 0===u?void 0:u.onWarning;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var f=function(){var l=(0,r.Z)(i().mark((function r(){var l;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t();case 3:return l=r.sent,d&&(a?a.hasInfo(n.onInfo):e(c({},(0,o.wN)(c({variant:"info"},n.onInfo))))),m&&(a?a.hasSuccess(n.onSuccess):e(c({},(0,o.wN)(c({variant:"success"},n.onSuccess))))),p&&(a?a.hasWarning(n.onWarning):e(c({},(0,o.wN)(c({variant:"warning"},n.onWarning))))),r.abrupt("return",l);case 10:return r.prev=10,r.t0=r.catch(0),a?a.err(n.onError,r.t0):e(c({},(0,o.wN)(c(c({variant:"danger"},n.onError),{},{description:null!==r.t0&&void 0!==r.t0&&r.t0.Title?"".concat(n.onError.description,": ").concat(r.t0.Title):n.onError.description})))),r.abrupt("return",r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return l.apply(this,arguments)}}();return f()}},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},81754:()=>{},10497:()=>{},10108:()=>{},54476:()=>{},80897:()=>{},40837:()=>{},71338:()=>{},98379:()=>{},91993:()=>{},99624:()=>{},27479:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},40209:()=>{},38299:()=>{},72816:()=>{}}]);
//# sourceMappingURL=../sourcemaps/8365.4d304762d1ab6d03986cae65fd0bc9f5.js.map