"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[907],{52907:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(15861),r=n(4942),o=n(29439),i=n(87757),l=n.n(i),s=n(93264),c=n.n(s),p=n(3035),u=n(87462),m=n(80236),d=n(79442),b=n(67850),f=n(41387),y=n(45697),E=n.n(y),v=function(e){var t=e.isOpen,n=e.title,r=e.openModal,o=e.submitLabel,i=e.schema,s=e.initialValues,p=e.variant,y=e.reloadData,E=e.onSubmit;return c().createElement(m.u,{variant:"small",title:n,isOpen:t,onClose:r},c().createElement(d.Z,{schema:i,FormTemplate:function(e){return c().createElement(b.ZP,(0,u.Z)({},e,{submitLabel:o,disableSubmit:["invalid"],buttonsProps:{submit:{variant:p}}}))},initialValues:s,componentMapper:f.ZP,onSubmit:function(){var e=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:r(),y();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onCancel:function(){return r()}}))};v.propTypes={isOpen:E().bool,title:E().string,openModal:E().func,reloadData:E().func,submitLabel:E().string,schema:E().object,initialValues:E().object,variant:E().string,onSubmit:E().func};const h=v;var R=n(66702),g=n(64124),L=function(e){var t=e.isOpen,n=e.openModal,a=e.reloadData,r={fields:[{component:"plain-text",name:"title",label:"Link to a custom repository to add packages to RHEL for Edge images."},{component:"text-field",name:"name",label:"Name",placeholder:"Repository name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:g.Z.REQUIRED}]},{component:"textarea",name:"baseURL",label:"BaseURL",placeholder:"https://",helperText:"Enter the baseURL for the custom repository.",isRequired:!0,validate:[{type:g.Z.REQUIRED},{type:g.Z.URL,message:"Must be a valid url"}]}]};return c().createElement(h,{title:"Add Repository",isOpen:t,openModal:function(){return n({type:"add"})},submitLabel:"Add",schema:r,onSubmit:function(e){return(0,R.eS)(e)},reloadData:a})};L.propTypes={openModal:E().func,reloadData:E().func,isOpen:E().boo};const O=L;var U=n(36621),x=n(65673),D=function(e){var t=e.openModal,n=e.isOpen,a=e.id,r=e.name,o=e.baseURL,i=e.reloadData,l={fields:[{component:"plain-text",name:"title",label:"Update information about this custom repository."},{component:"text-field",name:"name",label:"Name",placeholder:"Repository name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:g.Z.REQUIRED}]},{component:"textarea",name:"baseURL",label:"BaseURL",placeholder:"https://",helperText:c().createElement(U.p,{hasIcon:!0},c().createElement(x.u,{className:"pf-u-pb-md",variant:"warning",hasIcon:!0},"If you change the repo URL, you may not have access to the packages that were used to build images that reference this repository.")),isRequired:!0,validate:[{type:g.Z.REQUIRED},{type:g.Z.URL,message:"Must be a valid url"}]}]};return c().createElement(h,{title:"Edit Repository",isOpen:n,openModal:function(){return t({type:"edit"})},submitLabel:"Update",schema:l,initialValues:{id:a,name:r,baseURL:o},onSubmit:function(e){return(0,R.Es)(e)},reloadData:i})};D.propTypes={openModal:E().func,reloadData:E().func,isOpen:E().boo,id:E().number,name:E().string,baseURL:E().string,setData:E().func};const Z=D;var M=n(68774),w=n(68340),k=n(19694),S=n(37655),P=function(e){var t=e.label,n=e.text;return c().createElement(M.D,null,c().createElement(w.x,{component:"b"},t),c().createElement(w.x,null,n))};P.propTypes={label:E().string,text:E().string};var j=function(e){var t=e.openModal,n=e.id,a=e.isOpen,r=e.name,o=e.baseURL,i=e.reloadData,l={fields:[{component:"plain-text",name:"description",label:"Removing a repository could affect your ability to update images."},{component:"plain-text",name:"name",label:c().createElement(P,{label:"Name",text:r})},{component:"plain-text",name:"baseURL",label:c().createElement(P,{label:"baseURL",text:o})}]};return c().createElement(h,{title:c().createElement(c().Fragment,null,c().createElement(k.ZP,{color:S.Z.value,className:"pf-u-mr-md"}),"Remove Repository"),isOpen:a,openModal:function(){return t({type:"remove"})},submitLabel:"Remove",schema:l,initialValues:{id:n},variant:"danger",onSubmit:function(e){var t=e.id;return(0,R.gK)(t)},reloadData:i})};j.propTypes={openModal:E().func,reloadData:E().func,isOpen:E().boo,id:E().number,name:E().string,baseURL:E().string,setData:E().func};const A=j,N=function(){return c().createElement(M.D,{style:{padding:"15px",backgroundColor:"white"}},c().createElement(w.x,{component:w.q.h1},"Custom repositories"),c().createElement(w.x,{component:w.q.p},"Add custom repositories to build RHEL for Edge images with additional packages."," "))};var C=n(383),F=n(15265),T=[{label:"Name",type:"text"}],_=function(e){var t=e.data,n=e.openModal,a=t.map((function(e){var t=e.id,n=e.name,a=e.baseURL;return{id:t,repoName:n,repoBaseURL:a,noApiSortFilter:[n,a],cells:[{title:c().createElement(c().Fragment,null,c().createElement(w.x,{classname:"pf-u-mb-xs",component:w.q.p},n),c().createElement(w.x,{component:w.q.a},c().createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},a," ",c().createElement(F.ZP,{classname:"pf-u-ml-sm"}))))}]}}));return c().createElement(C.Z,{apiFilterSort:!1,filters:T,tableData:{count:t.length,data:t,isLoading:!1,hasError:!1},columnNames:[{title:"Name",type:"name",sort:!0}],rows:a,actionResolver:function(e){var t=e.id,a=e.repoName,r=e.repoBaseURL;return[{title:"Edit",onClick:function(){return n({type:"edit",id:t,name:a,baseURL:r})}},{title:"Remove",onClick:function(){return n({type:"remove",id:t,name:a,baseURL:r})}}]},areActionsDisabled:function(){return!1},defaultSort:{index:0,direction:"desc"},toolbarButtons:[{title:"Add repository",click:function(){return n({type:"add"})}}]})};_.propTypes={data:E().array,openModal:E().func};const q=_;var I=n(86350),B=n(48716),V=n(39173),Q=n(79706),H=n(55795);const J=function(){return c().createElement(B.Z,null,c().createElement(c().Fragment,null,c().createElement(V.Z,{title:"Applications settings"}),c().createElement("p",{className:"pf-u-mt-sm"},"Settings for Fleet Management",c().createElement(Q.J,{"aria-label":"Basic popover",headerContent:c().createElement("div",null,"About Fleet Management"),bodyContent:c().createElement("div",null,"Fleet Management is a service that allows you to provision, update and maintain edge systems.")},c().createElement(H.ZP,{style:{cursor:"pointer"},className:"pf-u-ml-xs"})))))};var K=n(15209);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const W=function(){var e=(0,s.useState)([]),t=(0,o.Z)(e,2),n=t[0],i=t[1],u=(0,s.useState)(!1),m=(0,o.Z)(u,2),d=m[0],b=m[1],f=(0,s.useState)({isOpen:{add:!1,edit:!1,remove:!1},id:null,name:"",baseURL:""}),y=(0,o.Z)(f,2),E=y[0],v=y[1],h=function(e){var t=e.type,n=e.id,a=void 0===n?null:n,o=e.name,i=void 0===o?"":o,l=e.baseURL,s=void 0===l?"":l;v((function(e){return G(G({},e),{},{id:a,name:i,baseURL:s,isOpen:G(G({},e.isOpen),{},(0,r.Z)({},t,!e.isOpen[t]))})}))},g=function(){var e=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.dd)();case 2:t=e.sent,i(t.data.map((function(e){return G({id:e.ID,name:e.Name,baseURL:e.URL},e)}))),b(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){return g()}),[]),c().createElement(c().Fragment,null,c().createElement(J,null),c().createElement(I.Z,null,d?n.length>0?c().createElement(c().Fragment,null,c().createElement(N,null),c().createElement(q,{data:n,openModal:h})):c().createElement(p.Z,{icon:"repository",title:"Add a custom repository",body:"Add custom repositories to build RHEL for Edge images with additional packages.",primaryAction:{text:"Add Repository",click:function(){return h({type:"add"})}},secondaryActions:[]}):c().createElement(K.O,null),c().createElement(O,{isOpen:E.isOpen.add,openModal:h,reloadData:g}),c().createElement(Z,{isOpen:E.isOpen.edit,id:E.id,name:E.name,baseURL:E.baseURL,openModal:h,reloadData:g}),c().createElement(A,{isOpen:E.isOpen.remove,id:E.id,name:E.name,baseURL:E.baseURL,openModal:h,reloadData:g})))}}}]);
//# sourceMappingURL=../sourcemaps/907.9f54308aee21a1d6e248bf8a7cd9b09f.js.map