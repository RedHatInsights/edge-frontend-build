/*! For license information please see GroupsDetail.50c0f9958814681be4b1.js.LICENSE.txt */
(self.webpackChunkedge=self.webpackChunkedge||[]).push([[6132,1575],{63767:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(74848),r=n(93345),o=n.n(r),i=n(59304),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},c=36e5,l=24*c,d=30*l,u=365*l,p=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},m=[{rightBound:1/0,description:function(e){return p(Math.round(e/u),"year")}},{rightBound:u,description:function(e){return p(Math.round(e/d),"month")}},{rightBound:d,description:function(e){return p(Math.round(e/l),"day")}},{rightBound:l,description:function(e){return p(Math.round(e/c),"hour")}},{rightBound:c,description:function(e){return p(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],g=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},v=function(e){return{exact:function(e){return g(e)+" UTC"},onlyDate:function(e){return g(e).slice(0,-6)},relative:function(e){return m.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),g(e))},invalid:function(){return"Invalid date"}}[e]},f=function(e,t,n){return{exact:function(t){return v(e)(t)},onlyDate:function(t){return v(e)(t)},relative:function(r){return function(e,t,n,r){return void 0===r&&(r=""),(0,a.jsx)(i.Tooltip,s({},n,{content:(0,a.jsxs)("div",{children:[r,e]}),children:t}))}(v("exact")(r),(0,a.jsx)("span",{children:v(e)(r)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const h=function(e){var t=e.date,n=e.type,r=void 0===n?"relative":n,i=e.extraTitle,s=e.tooltipProps,c=t instanceof Date?t:new Date(t),l=null==t||"Invalid Date"===c.toString()?"invalid":r;return(0,a.jsx)(o().Fragment,{children:f(l,s,i)(c)})}},16594:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(74848),r=n(46942),o=n.n(r),i=n(93345);const s=n.n(i)().createContext("light");var c=n(69),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)};const d=function(e){var t=e.className,n=e.children,r=e.ouiaId,i=e.ouiaSafe,d=void 0===i||i,u=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["className","children","ouiaId","ouiaSafe"]),p=o()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),m="RHI/Header",g=(0,c.useOUIAId)(m,r,d);return(0,a.jsx)(s.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var i=o()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,a.jsx)("section",l({"data-ouia-component-type":m,"data-ouia-component-id":g,"data-ouia-safe":d},u,{className:"".concat(p," ").concat(i),"widget-type":"InsightsPageHeader",children:n}))}})}},16401:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(74848),r=n(46942),o=n.n(r),i=n(63068),s=n(69),c=n(86228),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)};const d=function(e){var t=e.className,n=e.title,r=e.actionsContent,d=e.ouiaId,u=e.ouiaSafe,p=void 0===u||u,m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),g=o()(t),v="RHI/Header",f=(0,s.useOUIAId)(v,d,p);return(0,a.jsxs)(c.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,a.jsx)(c.FlexItem,{className:"pf-v5-u-flex-grow-1",children:(0,a.jsx)(i.Title,l({headingLevel:"h1",size:"2xl",className:g,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":v,"data-ouia-component-id":f,"data-ouia-safe":p},m,{children:n}))}),r?(0,a.jsx)(c.FlexItem,{children:r}):null]})}},83120:(e,t,n)=>{var a=n(14528),r=n(45891);e.exports=function e(t,n,o,i,s){var c=-1,l=t.length;for(o||(o=r),s||(s=[]);++c<l;){var d=t[c];n>0&&o(d)?n>1?e(d,n-1,o,i,s):a(s,d):i||(s[s.length]=d)}return s}},45891:(e,t,n)=>{var a=n(51873),r=n(72428),o=n(56449),i=a?a.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(i&&e&&e[i])}},91884:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var a=n(93345),r=n.n(a),o=n(5556),i=n.n(o),s=n(95658),c=n(57502),l=n(59409),d=n(84577),u=n(73262),p=n.n(u),m=n(22357),g=n(55729),v=n(55270),f=n(36870);const h=e=>r().createElement(g.Text,null,r().createElement("strong",null,e," "),"and all its data will be permanently deleted. Associated systems will be removed from the group but will not be deleted."),y=e=>({fields:[{component:c.A.PLAIN_TEXT,name:"warning-message",label:h(e)},{component:c.A.CHECKBOX,name:"confirmation",label:"I understand that this action cannot be undone.",validate:[{type:s.A.REQUIRED}]}]}),b=()=>r().createElement(m.Icon,{status:"warning"},r().createElement(p(),null)),I=({isModalOpen:e,setIsModalOpen:t,reloadData:n,modalState:a})=>{const{id:o,name:i}=a,s=(0,f.wA)();return r().createElement(l.A,{isOpen:e,closeModal:()=>t(!1),title:"Delete group",titleIconVariant:b,variant:"danger",submitLabel:"Delete",schema:y(i),onSubmit:()=>{const e={onSuccess:{title:"Success",description:`${i} has been removed successfully`},onError:{title:"Error",description:"Failed to delete group"}};(0,v.A)(s,(()=>(0,d.Lv)(o)),e)},reloadData:n})};I.propTypes={id:i().number,name:i().string,modalState:i().object,isModalOpen:i().bool,setIsModalOpen:i().func,reloadData:i().func};const E=I},38693:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(93345),r=n.n(a),o=n(5556),i=n.n(o),s=n(95658),c=n(57502),l=n(59409),d=n(84577),u=n(55833),p=n(55270),m=n(36870);const g={fields:[{component:c.A.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:s.A.REQUIRED},{type:s.A.MAX_LENGTH,threshold:50},u.m0,async e=>{if((await(0,d.R4)(e)).data.isValid)return"Group name already exists"}]}]},v=({isModalOpen:e,setIsModalOpen:t,reloadData:n,modalState:a})=>{const{id:o,name:i}=a,s=(0,m.wA)();return r().createElement(l.A,{isOpen:e,closeModal:()=>t(!1),title:"Rename group",submitLabel:"Save",schema:g,initialValues:a,onSubmit:e=>{const t={onSuccess:{title:"Success",description:`${i} has been renamed to ${e.name} successfully`},onError:{title:"Error",description:"Failed to rename group"}};(0,p.A)(s,(()=>(0,d.Hk)(o,e)),t)},reloadData:n})};v.propTypes={id:i().number,modalState:i().object,isModalOpen:i().bool,setIsModalOpen:i().func,reloadData:i().func};const f=v},43094:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>H});var a=n(93345),r=n.n(a),o=n(96937),i=n(53419),s=n(46537),c=n(7475),l=n(81855),d=n(53926),u=n(5715),p=n(99780),m=n(16594),g=n(16401),v=n(78185),f=n(61574),h=n(19357),y=n(31562),b=n.n(y),I=n(43920),E=n(84577),S=n(90555),D=n(48263),O=n(5556),A=n.n(O),w=n(60732),x=n(78259),k=n(55270),M=n(36870);const j=({groupId:e,closeModal:t,isOpen:n,reloadData:o,groupName:i,locationProp:s,navigateProp:c})=>{const[l,d]=(0,x.A)({api:w.ZK,tableReload:!0}),{data:u,isLoading:p,hasError:m}=l,[g,v]=(0,a.useState)([]),f=(0,M.wA)();return r().createElement(D.Modal,{id:"add-systems-modal",title:"Add systems",position:"top",isOpen:n,onClose:t,variant:"large",actions:[r().createElement(S.Button,{isDisabled:0===g.length,key:"confirm",variant:"primary",onClick:()=>{const n={onSuccess:{title:"Success",description:`System(s) have been added to ${i} successfully`},onError:{title:"Error",description:"An error occurred making the request"}};(0,k.A)(f,(()=>(0,E.FW)(parseInt(e),g.map((e=>({ID:e.deviceID}))))),n),setTimeout((async()=>await o()),500),t()}},"Add systems"),r().createElement(S.Button,{key:"cancel",variant:"link",onClick:t},"Cancel")]},r().createElement(I.default,{selectedItems:v,skeletonRowQuantity:15,hasCheckbox:!0,isLoading:p,hasError:m,count:u?.count,data:u?.data?.devices||[],fetchDevices:d,enforceEdgeGroups:u?.data?.enforce_edge_groups,locationProp:s,navigateProp:c}))};j.propTypes={groupId:A().string,closeModal:A().func,isOpen:A().bool,reloadData:A().func,groupName:A().string,locationProp:A().func,navigateProp:A().func};const $=j;var T=n(55833),C=n(57502),P=n(11879),_=n(80475),N=n(59409),L=n(91884),R=n(38693),B=n(51102);const V=r().lazy((()=>Promise.all([n.e(6863),n.e(9304),n.e(265),n.e(4171),n.e(1657),n.e(6959),n.e(7179),n.e(6459),n.e(4422),n.e(2941)]).then(n.bind(n,27729)))),F=({locationProp:e,navigateProp:t,paramsProp:n})=>{const y=(0,T.h)(B.xo),S=(0,T.h)(B.QX),D=(0,M.wA)(),O=(0,f.W6)(),A=n?n():(0,f.g)(),w=A?.id?A.id:A.groupId,{search:j,pathname:F}=e?e():(0,f.zy)(),H=window.location.pathname.indexOf("edge")>0?"edge":h.J.inventory,[U,G]=(0,a.useState)(!1),[q,z]=(0,a.useState)(!1),[Q,X]=(0,a.useState)({isOpen:!1,name:"",deviceId:null}),[J,W]=(0,a.useState)({isOpen:!1,deviceData:null,imageData:null}),[K,Z]=(0,x.A)({api:E.Qo,id:w,tableReload:!0}),{data:Y,isLoading:ee,hasError:te}=K,ne=Y?.DeviceGroup?.Name,[ae,re]=(0,a.useState)([]),[oe,ie]=(0,a.useState)(!1),[se,ce]=(0,a.useState)({id:null,name:""}),[le,de]=(0,a.useState)(!1),[ue,pe]=(0,a.useState)(!1),me=()=>{const e={onSuccess:{title:"Success",description:`${Q.name} has been removed successfully`},onError:{title:"Error",description:"Failed to remove system"}};(0,k.A)(D,(()=>(0,E.cA)(w,Q.deviceId)),e),setTimeout((()=>ie(!0)),800)},ge="Actions for group details view",ve="group-details-dropdown";return r().createElement(r().Fragment,null,r().createElement(m.A,{className:"pf-m-light"},ne?r().createElement(o.Breadcrumb,null,r().createElement(o.BreadcrumbItem,null,(0,T.d)({pathname:"edge"===H?`edge${h.J.fleetManagement}`:"insights/inventory/groups",linkText:"Groups"})),r().createElement(o.BreadcrumbItem,null,ne)):r().createElement(o.Breadcrumb,null,r().createElement(o.BreadcrumbItem,{isActive:!0},r().createElement(s.Skeleton,{width:"100px"}))),r().createElement(i.Flex,{justifyContent:{default:"justifyContentSpaceBetween"}},r().createElement(i.FlexItem,null,ne?r().createElement(g.A,{title:ne}):r().createElement(s.Skeleton,{width:"150px"})),r().createElement(i.FlexItem,null,r().createElement(l.m,{position:d.nU.right,toggle:r().createElement(u.C,{id:ve,toggleIndicator:b(),onToggle:(e,t)=>G(t),isDisabled:!1,"aria-label":ge},r().createElement(c.Tooltip,{content:ge,triggerRef:()=>document.getElementById(ve)}),"Actions"),isOpen:U,dropdownItems:[r().createElement(p.t,{key:"delete-device-group",onClick:()=>(ce({id:w,name:ne}),void de(!0))},"Delete group"),r().createElement(p.t,{key:"rename-device-group",onClick:()=>(ce({id:w,name:ne}),void pe(!0))},"Rename group"),r().createElement(p.t,{key:"update-all-devices",isDisabled:(0,T.AT)({deviceData:Y?.DevicesView?.devices?.map((e=>({imageSetId:e?.ImageSetID}))),imageData:Y?.DevicesView?.devices?.some((e=>e.ImageID))}),onClick:()=>{G(!1),W((e=>({...e,isOpen:!0,deviceData:Y?.DevicesView?.devices?.map((e=>({id:e?.DeviceUUID,display_name:""===e?.DeviceName?"localhost":e?.DeviceName}))),imageSetId:Y?.DevicesView?.devices.find((e=>e.ImageSetID))?.ImageSetID})))}},"Update")]})))),r().createElement("section",{className:"edge-devices pf-l-page__main-section pf-c-page__main-section"},(0,T.Rj)(ee,Y?.DeviceGroup?.Devices.length,j)?r().createElement(i.Flex,{justifyContent:{default:"justifyContentCenter"}},r().createElement(v.A,{icon:"plus",title:"Add systems to the group",body:"Create groups to help manage your systems more effectively.",primaryAction:{text:"Add systems",click:()=>z(!0)},secondaryActions:[{type:"link",title:"Learn more about system groups",link:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/working_with_systems_in_the_edge_management_application/index"}]})):r().createElement(I.default,{data:Y?.DevicesView?.devices||[],count:Y?.DevicesView?.total,isLoading:ee,locationProp:e,navigateProp:t,paramsProp:f.g,hasError:te,hasCheckbox:!0,handleSingleDeviceRemoval:me,kebabItems:[{isDisabled:!(ae.length>0),title:"Remove from "+(y&&S?"workspace":"group"),onClick:()=>X({name:"",deviceId:null,isOpen:!0})},{isDisabled:(0,T.AT)({deviceData:ae,imageData:ae[0]?.updateImageData}),title:"Update selected",onClick:()=>W((e=>({...e,isOpen:!0,deviceData:[...ae],imageSetId:ae.find((e=>e?.imageSetId)).imageSetId})))}],selectedItems:re,setRemoveModal:X,setIsAddModalOpen:z,hasModalSubmitted:oe,setHasModalSubmitted:ie,fetchDevices:Z,isAddSystemsView:!0,enforceEdgeGroups:Y?.DevicesView?.enforce_edge_groups})),q&&r().createElement($,{groupId:w,closeModal:()=>z(!1),isOpen:q,reloadData:Z,groupName:Y?.DeviceGroup?.Name,locationProp:e,navigateProp:t}),Q.isOpen&&r().createElement(N.A,{isOpen:Q.isOpen,closeModal:()=>X(!1),title:"Remove from "+(y&&S?"workspace":"group"),submitLabel:"Remove",variant:"danger",schema:{fields:[{component:C.A.PLAIN_TEXT,name:"warning-text",label:`Do you want to remove ${ae.length>0?`${ae.length} system${1===ae.length?"":"s"}`:`${Q.name}`} from ${ne}?`}]},onSubmit:Q.deviceId?me:()=>{const e={onSuccess:{title:"Success",description:`${ae.length} systems have been removed successfully`},onError:{title:"Error",description:"failed to remove systems"}};(0,k.A)(D,(()=>(0,E.HG)(parseInt(w),ae.map((e=>({ID:e.deviceID}))))),e),setTimeout((()=>ie(!0)),800)},reloadData:Z}),J.isOpen&&r().createElement(a.Suspense,{fallback:r().createElement(P.Bullseye,null,r().createElement(_.Spinner,null))},r().createElement(V,{navigateBack:()=>{O.push({pathname:F}),W((e=>({...e,isOpen:!1})))},setUpdateModal:W,updateModal:J,refreshTable:Z})),le&&r().createElement(L.A,{isModalOpen:le,setIsModalOpen:de,reloadData:()=>O.push(h.J.fleetManagement),modalState:se}),ue&&r().createElement(R.A,{isModalOpen:ue,setIsModalOpen:pe,reloadData:()=>Z(),modalState:se}))};F.propTypes={locationProp:A().func,navigateProp:A().func,paramsProp:A().func};const H=F},84577:(e,t,n)=>{"use strict";n.d(t,{Df:()=>c,EI:()=>i,FW:()=>p,HG:()=>g,HN:()=>m,Hk:()=>d,Lv:()=>u,Qo:()=>l,R4:()=>h,cA:()=>f,f:()=>s,f4:()=>b,ny:()=>v,se:()=>y,wj:()=>o});var a=n(11268),r=n(56830);const o=e=>r.instance.post(`${a.rm}/device-groups/`,{Name:e.name,Type:"static"}),i=e=>r.instance.post(`${a.kb}/groups`,{name:e.name}),s=({query:e})=>{const t=(0,a.Lm)(e);return r.instance.get(`${a.rm}/device-groups?${t}`)},c=({query:e})=>{const t=(0,a.Lm)(e);return r.instance.get(`${a.kb}/groups?${t}`)},l=({id:e,query:t})=>{const n=(0,a.Lm)(t);return r.instance.get(`${a.rm}/device-groups/${e}/view?${n}`)},d=(e,t)=>r.instance.put(`${a.rm}/device-groups/${e}`,{Name:t.name,Type:"static"}),u=e=>r.instance.delete(`${a.rm}/device-groups/${e}`),p=(e,t)=>r.instance.post(`${a.rm}/device-groups/${e}/devices`,{ID:e,Devices:t}),m=(e,t)=>{const n=[];return t.forEach((e=>n.push(e.UUID))),r.instance.post(`${a.kb}/groups/${e}/hosts`,n)},g=(e,t)=>r.instance.delete(`${a.rm}/device-groups/${e}/devices`,{data:{ID:e,Devices:t}}),v=(e,t)=>r.instance.delete(`${a.kb}/groups/${e}/hosts/`+t.join(",")),f=(e,t)=>r.instance.delete(`${a.rm}/device-groups/${e}/devices/${t}`),h=e=>r.instance.get(`${a.rm}/device-groups/checkName/${e}`),y=()=>r.instance.get(`${a.rm}/device-groups/enforce-edge-groups`),b=e=>r.instance.get(`${a.kb}/groups?name=${e}&order_by=name&order_how=ASC`)},59409:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var a=n(93345),r=n.n(a),o=n(48263),i=n(97744),s=n(63537),c=n(24408),l=n(5556),d=n.n(l);const u=({isOpen:e,title:t,titleIconVariant:n,closeModal:a,submitLabel:l,schema:d,initialValues:u,variant:p,reloadData:m,size:g,onSubmit:v,additionalMappers:f,validatorMapper:h})=>r().createElement(o.Modal,{variant:g??"small",title:t,titleIconVariant:n??null,isOpen:e,onClose:a},r().createElement(i.A,{schema:d,validatorMapper:h,FormTemplate:e=>r().createElement(s.Ay,{...e,submitLabel:l,disableSubmit:["invalid"],buttonsProps:{submit:{variant:p}}}),initialValues:u,componentMapper:f?{...f,...c.Ay}:c.Ay,onSubmit:async e=>{await v(e),setTimeout((async()=>await m()),500),a()},onCancel:()=>a()}));u.propTypes={isOpen:d().bool,title:d().string,closeModal:d().func,reloadData:d().func,submitLabel:d().string,schema:d().object,initialValues:d().object,variant:d().string,onSubmit:d().func,size:d().string,additionalMappers:d().object,titleIconVariant:d().any,validatorMapper:d().object};const p=u},78259:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(11830),r=n(93345),o=n(36870);const i=({api:e,id:t=null,statusMessages:n,tableReload:i=!1})=>{const s=(0,o.wA)(),[c,l]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)((()=>e)),f=n?.onSuccess;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});const h=async(e="")=>{u(!0);try{const r=await g({id:t,query:e});l(r),f&&s({...(0,a.z8)({variant:"success",...n.onSuccess})})}catch(e){m(!0),s({...(0,a.z8)({variant:"danger",...n.onError})})}finally{u(!1)}};return(0,r.useEffect)((()=>{i||h()}),[]),[{data:c,isLoading:d,hasError:p},h,g,v]}},25823:()=>{},16369:()=>{},62275:()=>{},89205:()=>{},20681:()=>{},46942:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}}]);