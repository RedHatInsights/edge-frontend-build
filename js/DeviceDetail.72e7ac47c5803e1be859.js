(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[2073],{38857:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ue});var r=n(4942),a=n(15861),o=n(29439),i=n(64687),l=n.n(i),c=n(96985),s=n.n(c),u=n(64029),d=n(32835),m=n(52643),p=n(37619),v=n(35664),f=n(89376),g=n(38775),E=n(53895),b=n(78334),y=n(77760),h=n(87462),O=n(91290),P=n(75824),Z=n(46043),w=n(47173),S=n(45697),D=n.n(S),I=function(e){var t=e.title,n=e.content;return s().createElement(s().Fragment,null,s().createElement("span",null,t),s().createElement(Z.J,{headerContent:s().createElement("div",null,t),bodyContent:s().createElement("div",null,n)},s().createElement(w.zx,{variant:"plain","aria-label":"Action for ".concat(t),className:"ins-active-general_information__popover-icon"},s().createElement(O.ZP,null))))};I.propTypes={title:D().string,content:D().string};const k=I;var C=n(35451),j=n(84564),R=n(18802),N=function(e){var t=e.status;return"green"===t?s().createElement(s().Fragment,null,s().createElement(C.ZP,{color:"green",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-success-color-200"},"Passed")):"red"===t?s().createElement(s().Fragment,null,s().createElement(j.ZP,{color:"red",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-danger-color-200"},"Failed and reverted")):s().createElement(s().Fragment,null,s().createElement(R.ZP,{className:"pf-u-mr-sm"}),s().createElement("span",null,"Waiting for update"))};N.propTypes={status:D().string};const T=N;var x=n(22663),U=n(17939),L=function(e){return s().createElement(x.Z,(0,h.Z)({appName:"inventory",module:"./GeneralInformation",fallback:s().createElement(U.Z,{numberOfRows:3})},e))},_=function(e){return s().createElement(x.Z,(0,h.Z)({appName:"inventory",module:"./SystemCard",fallback:s().createElement(U.Z,{numberOfRows:5})},e))},H=function(e){return s().createElement(x.Z,(0,h.Z)({appName:"inventory",module:"./OperatingSystemCard",fallback:s().createElement(U.Z,{numberOfRows:6})},e))},A=function(e){return s().createElement(x.Z,(0,h.Z)({appName:"inventory",module:"./BiosCard",fallback:s().createElement(U.Z,{numberOfRows:4})},e))},M=function(e){return s().createElement(x.Z,(0,h.Z)({appName:"inventory",module:"./CollectionCard",fallback:s().createElement(U.Z,{numberOfRows:7})},e))},q=function(e){return s().createElement(x.Z,(0,h.Z)({appName:"inventory",module:"./InfrastructureCard",fallback:s().createElement(U.Z,{numberOfRows:6})},e))},F=s().lazy((function(){return n.e(2672).then(n.bind(n,84570))})),G=function(e){var t=(0,y.useStore)();return s().createElement(c.Suspense,{fallback:""}," ",s().createElement(q,(0,h.Z)({},e,{store:t})))},Q=function(e){var t=(0,y.useStore)();return s().createElement(c.Suspense,{fallback:""}," ",s().createElement(F,(0,h.Z)({},e,{store:t})))},V=function(e){var t=(0,y.useStore)();return s().createElement(c.Suspense,{fallback:""},s().createElement(A,(0,h.Z)({},e,{store:t})))},B=function(e){var t=(0,y.useStore)();return s().createElement(c.Suspense,{fallback:""},s().createElement(H,(0,h.Z)({},e,{hasKernelModules:!0,store:t})))},z=function(e){var t=(0,y.useStore)();return s().createElement(c.Suspense,{fallback:""},s().createElement(M,(0,h.Z)({},e,{extra:[{title:"RHC Health (broker functioning)",value:s().createElement(P.u,{content:"Unknown service status"},s().createElement(O.ZP,{className:"ins-c-inventory__detail--unknown"}))}],store:t})))},W=function(e){var t=(0,y.useStore)(),n=(0,y.useSelector)((function(e){var t,n=e.systemProfileStore;return{greenbootStatus:null==n||null===(t=n.systemProfile)||void 0===t?void 0:t.greenboot_status}})).greenbootStatus;return s().createElement(c.Suspense,{fallback:""},s().createElement(_,(0,h.Z)({},e,{store:t,hasCPUs:!1,hasSockets:!1,hasCores:!1,hasCPUFlags:!1,hasRAM:!1,hasSAP:!1,extra:[{title:s().createElement(k,{title:"GreenBoot Status",content:"This is a description about greenboot status"}),value:s().createElement(T,{status:n})}]})))};const J=function(){var e=(0,y.useSelector)((function(e){var t=e.permissionsReducer;return null==t?void 0:t.writePermissions})),t=(0,y.useStore)();return s().createElement(c.Suspense,{fallback:""},s().createElement(L,{store:t,writePermissions:e,SystemCardWrapper:W,OperatingSystemCardWrapper:G,BiosCardWrapper:Q,InfrastructureCardWrapper:V,ConfigurationCardWrapper:B,CollectionCardWrapper:z}))};function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=(0,n(9036).Gg)({LOAD_ENTITY_FULFILLED:function(e){return $($({},e),{},{loaded:!0,activeApps:[{title:"General information",name:"general_information",component:J}]})}}),X=n(59245),ee=n(35262),te=n(28883),ne=n(29873),re=n(41448),ae=n(94768),oe=n(80236),ie=n(68340),le=n(68774),ce=n(78140),se=n(25834),ue=n(29390),de=n(98309),me=n(5230),pe=n(83215),ve=n(94778),fe=n(93597);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=function(e){var t,n,r,a,o,i,l=e.updateCveModal,u=e.setUpdateCveModal,d=e.setReload,v=(0,y.useDispatch)(),f=(0,c.useContext)(X.g).getRegistry,g=(0,y.useSelector)((function(e){var t=e.imageDetailReducer;return{data:(null==t?void 0:t.data)||null}}),y.shallowEqual).data;(0,c.useEffect)((function(){var e=f().register({imageDetailReducer:me.OD});return(null==l?void 0:l.imageId)&&(0,ve.J_)(v,null==l?void 0:l.imageId),function(){return e()}}),[v]);var E=function(){u((function(e){return Ee(Ee({},e),{},{isOpen:!1})}))};return g?s().createElement(oe.u,{variant:"medium",title:"Update image: ".concat(null==g||null===(t=g.image)||void 0===t?void 0:t.Name),description:"Review the information and click Update image to start the build process",isOpen:l.isOpen,onClose:E,actions:[s().createElement(w.zx,{key:"confirm",variant:"primary",onClick:function(){var e,t,n,r,a,o,i,l,c,s,u={Id:null==g||null===(e=g.image)||void 0===e?void 0:e.ID,description:null==g||null===(t=g.image)||void 0===t?void 0:t.Description,name:null==g||null===(n=g.image)||void 0===n?void 0:n.Name,version:(null==g||null===(r=g.image)||void 0===r?void 0:r.Version)+1,architecture:"x86_64",credentials:null==g||null===(a=g.image)||void 0===a?void 0:a.Installer.SshKey,username:null==g||null===(o=g.image)||void 0===o?void 0:o.Installer.Username,imageType:null==g||null===(i=g.image)||void 0===i?void 0:i.OutputTypes,"selected-packages":null==g||null===(l=g.image)||void 0===l||null===(c=l.Packages)||void 0===c?void 0:c.map((function(e){return{name:e.Name}})),release:null==g||null===(s=g.image)||void 0===s?void 0:s.Distribution};E(),d(!0),(0,ve.Es)(v,u,(function(e){var t,n;v(Ee(Ee({},(0,pe.wN)({variant:"info",title:"Updating image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,fe.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,pe.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,pe.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))},function(e){return(0,ve.n9)(e)}]}}}})),(0,ve.n9)(v),v((0,ve.Fj)({name:null==g||null===(t=g.image)||void 0===t?void 0:t.Name,id:null==g||null===(n=g.image)||void 0===n?void 0:n.ID}))}))}},"Update Image"),s().createElement(w.zx,{key:"cancel",variant:"link",onClick:E},"Cancel")]},s().createElement(le.D,null,s().createElement(ce.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Details")),s().createElement(se.G,{component:se.F.dl},s().createElement(ce.T,{component:ce.v.dt},"Name"),s().createElement(ce.T,{component:ce.v.dd},null==g||null===(n=g.image)||void 0===n?void 0:n.Name),s().createElement(ce.T,{component:ce.v.dt},"Version"),s().createElement(ce.T,{component:ce.v.dd},(null==g||null===(r=g.image)||void 0===r?void 0:r.Version)+1),s().createElement(ce.T,{component:ce.v.dt},"Description"),s().createElement(ce.T,{component:ce.v.dd},null==g||null===(a=g.image)||void 0===a?void 0:a.Description)),s().createElement(ce.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Output")),s().createElement(se.G,{component:se.F.dl},s().createElement(ce.T,{component:ce.v.dt},"Release"),s().createElement(ce.T,{component:ce.v.dd},de.Ei[null==g||null===(o=g.image)||void 0===o?void 0:o.Distribution]),s().createElement(ce.T,{component:ce.v.dt},"Output type"),s().createElement(ce.T,{component:ce.v.dd},de.bd[null==g||null===(i=g.image)||void 0===i?void 0:i.ImageType])),s().createElement(ce.T,{component:ie.q.h3},s().createElement(ie.x,{component:"b"},"Packages")),s().createElement(se.G,{component:se.F.dl},s().createElement(ce.T,{component:ce.v.dt},"Updated"),s().createElement(ce.T,{className:"pf-u-pl-lg",component:ce.v.dd},null==l?void 0:l.cveCount)))):s().createElement(ue.Y,null,s().createElement(m.b,null,s().createElement(p.$,{isSVG:!0,diameter:"100px"})))};be.propTypes={updateCveModal:D().shape({isOpen:D().bool.isRequired,imageId:D().string,cveCount:D().number}).isRequired,setUpdateCveModal:D().func.isRequired,setReload:D().bool};const ye=be;function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=function(e){var t=e.deviceData,n=e.setUpdateModal,r=e.imageId,i=e.setReload,u=(0,b.useParams)().deviceId,d=(0,c.useContext)(X.g).getRegistry,m=(0,c.useState)({isOpen:!1,imageId:null,cveCount:0}),p=(0,o.Z)(m,2),v=p[0],f=p[1],g=(0,c.useState)(null),E=(0,o.Z)(g,2),y=E[0],h=E[1],O=(0,c.useState)(null),P=(0,o.Z)(O,2),Z=P[0],S=P[1],D=(0,c.useState)("noAlert"),I=(0,o.Z)(D,2),k=I[0],C=I[1];(0,c.useEffect)((function(){f((function(e){return Oe(Oe({},e),{},{imageId:r})}))}),[r]),(0,c.useEffect)((function(){(0,a.Z)(l().mark((function e(){var n,r,a,o,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i={id:"view",q:{id:null==t||null===(n=t.ImageInfo)||void 0===n||null===(r=n.Image)||void 0===r?void 0:r.ImageSetID}},e.next=5,(0,fe.dt)(i);case 5:c=e.sent,S(null==c||null===(a=c.data)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.Status);case 7:case"end":return e.stop()}}),e)})))()}),[t]),(0,c.useEffect)((function(){var e;(null==y||!y.isLoading)&&(null==y||null===(e=y.meta)||void 0===e||!e.filter)&&f((function(e){var t;return Oe(Oe({},e),{},{cveCount:null==y||null===(t=y.data)||void 0===t?void 0:t.length})})),C((function(e){return function(e,t,n,r,a){var o,i,l,c,s;return null!=e&&e.isLoading||null!=e&&null!==(o=e.meta)&&void 0!==o&&o.filter||!t?a:!(null!=e&&null!==(i=e.data)&&void 0!==i&&i.length)>0||!r?"noAlert":"BUILDING"===(null==t||null===(l=t.UpdateTransactions[0])||void 0===l?void 0:l.Status)||"CREATED"===(null==t||null===(c=t.UpdateTransactions[0])||void 0===c?void 0:c.Status)?"systemUpdating":null!=t&&null!==(s=t.Device)&&void 0!==s&&s.UpdateAvailable?"updateDevice":"BUILDING"===n||"CREATED"===n?"imageBuilding":"updateImage"}(y,t,Z,r,e)}))}),[y,t,Z,r]);var j={updateImage:s().createElement(re.b,{className:"pf-u-mb-md",variant:"info",isInline:!0,title:"To remediate CVEs, update the image.",actionLinks:s().createElement(w.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){f((function(e){return Oe(Oe({},e),{},{isOpen:!0})}))}},"Update Image")}),imageBuilding:s().createElement(re.b,{className:"pf-u-mb-md",customIcon:s().createElement(ae.ZP,null),variant:"info",isInline:!0,title:"Image build in progress. Once completed, you'll need to update your system."}),updateDevice:s().createElement(re.b,{className:"pf-u-mb-md",variant:"warning",isInline:!0,title:" Image build completed. Update system to the newest image version to remediate CVEs.",actionLinks:s().createElement(w.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){n((function(e){return Oe(Oe({},e),{},{isOpen:!0})}))}},"Update system")}),systemUpdating:s().createElement(re.b,{className:"pf-u-mb-md",customIcon:s().createElement(ae.ZP,null),variant:"info",isInline:!0,title:"System updating. No additional actions required."}),noAlert:s().createElement(s().Fragment,null)};return s().createElement(s().Fragment,null,s().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},j[k],s().createElement(x.Z,{appName:"vulnerability",module:"./SystemDetail",getRegistry:d,customIntlProvider:!0,entity:{id:u},canSelect:!1,canEditPairStatus:!1,canManageColumns:!1,linkToCustomerPortal:!0,defaultColumns:["synopsis","public_date","impact","cvss_score","advisory"],filters:["filter","security_rule","known_exploit","impact","cvss_score","advisory"],customAction:function(e){h(e)}})),v.isOpen&&s().createElement(ye,{updateCveModal:v,setUpdateCveModal:f,setReload:i}))};Pe.propTypes={imageId:D().number,deviceData:D().object,setUpdateModal:D().func,setReload:D().func};const Ze=Pe;var we=function(e){var t=e.systemProfile,n=e.imageId,r=e.setUpdateModal,a=e.setReload,i=(0,c.useState)(0),l=(0,o.Z)(i,2),u=l[0],d=l[1];return s().createElement(ee.m,{className:"pf-u-ml-md",activeKey:u,onSelect:function(e,t){return d(t)}},s().createElement(te.O,{eventKey:0,title:s().createElement(ne.T,null,"Details")},s().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},s().createElement(J,null))),s().createElement(te.O,{eventKey:1,title:s().createElement(ne.T,null,"Vulnerability")},s().createElement(Ze,{deviceData:t,setUpdateModal:r,imageId:n,setReload:a})))};we.propTypes={imageId:D().number,systemProfile:D().object,setUpdateModal:D().func,setReload:D().func};const Se=we;var De=n(8027),Ie=n(35681),ke=n(96094),Ce=n(18098),je=n(54025),Re=n(9192);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=s().lazy((function(){return Promise.all([n.e(6954),n.e(8615),n.e(4390),n.e(3006),n.e(6681)]).then(n.bind(n,68940))}));const Ue=function(){var e,t,n,r,i,h,O,P,Z,w=(0,je.useLoadModule)({appName:"inventory",scope:"inventory",module:"./systemProfileStore"},{}),S=(0,o.Z)(w,1)[0].default,D=(0,b.useHistory)(),I=(0,b.useLocation)().pathname,k=(0,b.useParams)(),C=k.deviceId,j=k.groupId,R=(0,c.useState)(null),N=(0,o.Z)(R,2),T=N[0],x=N[1],U=(0,c.useContext)(X.g).getRegistry,L=(0,y.useSelector)((function(e){var t;return null==e||null===(t=e.entityDetails)||void 0===t?void 0:t.loaded})),_=(0,y.useSelector)((function(e){var t=e.entityDetails;return null==t?void 0:t.entity})),H=(0,c.useState)(),A=(0,o.Z)(H,2),M=A[0],q=A[1],F=(0,c.useState)({isOpen:!1,deviceData:null}),G=(0,o.Z)(F,2),Q=G[0],V=G[1],B=(0,c.useState)(!0),z=(0,o.Z)(B,2),W=z[0],J=z[1],K=(0,c.useState)(!1),$=(0,o.Z)(K,2),ee=$[0],te=$[1],ne=(0,ke.Z)({api:function(){return(0,De.$v)({query:{uuid:C}})}}),re=(0,o.Z)(ne,2),ae=re[0],oe=re[1],ie=(null===(e=ae.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.devices)||[],le=(0,o.Z)(ie,1)[0],ce=le||{},se=ce.Status,ue=ce.UpdateAvailable,de=ce.DispatcherStatus,me=ce.LastSeen,pe=ce.DeviceGroups,ve=j?null==pe||null===(n=pe.find((function(e){return e.ID.toString()===j})))||void 0===n?void 0:n.Name:null,fe=(0,Ie.u)(se,ue,de);return(0,c.useEffect)((function(){var e,t;insights.chrome.registerModule("inventory"),null===(e=insights.chrome)||void 0===e||null===(t=e.hideGlobalFilter)||void 0===t||t.call(e,!0),insights.chrome.appAction("system-detail")}),[]),(0,c.useEffect)((function(){(0,a.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=_&&_.display_name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,De._v)(C);case 4:r=e.sent,q(r),J(!1),V((function(e){var t,n;return Te(Te({},e),{},{deviceData:[{display_name:_.display_name,id:_.id,deviceStatus:fe}],imageSetId:null==r||null===(t=r.ImageInfo)||void 0===t||null===(n=t.Image)||void 0===n?void 0:n.ImageSetID})})),x(null==r||null===(t=r.ImageInfo)||void 0===t||null===(n=t.Image)||void 0===n?void 0:n.ID);case 9:case"end":return e.stop()}}),e)})))()}),[_,ee]),S?s().createElement(g.Z,{hideInvLink:!0,showTags:!0,onLoad:function(e){var t=e.mergeWithDetail;U().register(Te({systemProfileStore:S},t(Y)))},inventoryId:C},s().createElement(f.Z,null,ve?s().createElement(u.a,{ouiaId:"groups-list"},s().createElement(d.g,null,s().createElement(b.Link,{to:Re._.fleetManagement},"Groups")),s().createElement(d.g,null,s().createElement(b.Link,{to:"".concat(Re._.fleetManagement,"/").concat(j)},ve)),s().createElement(d.g,{isActive:!0},s().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},(null==_?void 0:_.display_name)||s().createElement(v.Z,{size:v.i.xs})))):s().createElement(u.a,{ouiaId:"systems-list"},s().createElement(d.g,null,s().createElement(b.Link,{to:Re._.inventory},"Systems")),s().createElement(d.g,{isActive:!0},s().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},(null==_?void 0:_.display_name)||s().createElement(v.Z,{size:v.i.xs})))),s().createElement(E.Z,{fallback:"",actions:[{title:"Update",isDisabled:"BUILDING"===(null==M||null===(r=M.UpdateTransactions)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.Status)||"CREATED"===(null==M||null===(h=M.UpdateTransactions)||void 0===h||null===(O=h[0])||void 0===O?void 0:O.Status)||!(null!=M&&null!==(P=M.ImageInfo)&&void 0!==P&&null!==(Z=P.UpdatesAvailable)&&void 0!==Z&&Z.length)>0,onClick:function(){D.push({pathname:"".concat(I,"/update"),search:"?from_details=true"})}}],hideBack:!0,hideInvDrawer:!0,inventoryId:C}),W?s().createElement(v.Z,{size:v.i.xs}):"error"===fe||"unresponsive"===fe?s().createElement(Ce.Z,{lastSeen:me,device:le,position:"right",fetchDevices:oe},s().createElement(Ie.Z,{id:"device-status",type:"error"===fe?"errorWithExclamationCircle":fe,isLink:!0,isLabel:!0,className:"pf-u-mt-sm cursor-pointer"})):s().createElement(Ie.Z,{id:"device-status",type:fe,isLabel:!0,className:"pf-u-mt-sm"})),L&&s().createElement(Se,{systemProfile:M,imageId:T,setUpdateModal:V,setReload:te}),Q.isOpen&&s().createElement(c.Suspense,{fallback:s().createElement(m.b,null,s().createElement(p.$,null))},s().createElement(xe,{navigateBack:function(){D.push({pathname:I}),V((function(e){return Te(Te({},e),{},{isOpen:!1})}))},setUpdateModal:V,updateModal:Q,refreshTable:function(){return te(!0)}}))):s().createElement(m.b,null,s().createElement(p.$,null))}},18098:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(15861),a=n(29439),o=n(64687),i=n.n(o),l=n(96985),c=n.n(l),s=n(46043),u=n(47173),d=n(58844),m=n(3025),p=n(49739),v=n(83826),f=n(48761),g=n(43047),E=n(62410),b=n(32349),y=n(8027),h=n(77760),O=n(45697),P=n.n(O),Z="The playbook failed to run.",w="The service timed out during the last update.",S="UNRESPONSIVE",D=function(e,t,n){return c().createElement("div",null,e===Z?"The playbook failed to run. You can retry the update or build a new one.":e===w?"The service timed out during the last update. You can retry the update or build a new one.":t===S?"The service could not be reached via RHC. The system may communicate at a later time if this is a network issue or could be an indication of a more significant problem.":"Unknown",c().createElement(p.K,{className:"pf-u-mt-sm"},c().createElement(v.v,{className:"pf-u-font-weight-bold"},"Last seen"),c().createElement(v.v,null," ",c().createElement(E.Z,{date:n}))))},I=function(e){var t,n,o=e.id,p=e.device,v=e.position,E=e.fetchDevices,O=e.lastSeen,P=e.children,I=(0,l.useState)(!1),k=(0,a.Z)(I,2),C=k[0],j=k[1],R=(0,h.useDispatch)(),N={onSuccess:{variant:"info",title:"Updating system",description:"".concat(p.DeviceName," was added to the queue.")}};return c().createElement(d.g,null,c().createElement(f.H,null,c().createElement(s.J,{id:o,isVisible:C,shouldOpen:function(){return j(!0)},shouldClose:function(){return j(!1)},"aria-label":"Alert popover",alertseverityvariant:"danger",headerContent:c().createElement("div",{style:{color:"#c9190b"}}," ",c().createElement(g.ZP,{size:"sm"}),(t=p.DispatcherReason,n=p.DispatcherStatus,c().createElement("span",{className:"pf-u-ml-xs"},t===Z?"Playbook error":t===w?"Service timed out":n===S?"Unresponsive":"Unknown"))),icon:"true",variant:"icon",color:"red",position:v,headerComponent:"h6",bodyContent:D(p.DispatcherReason,p.DispatcherStatus,O),footerContent:p.DispatcherStatus!==S?c().createElement(u.zx,{variant:"link",isInline:!0,onClick:function(){(0,b.Z)(R,(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.EQ)({DevicesUUID:[p.DeviceUUID]});case 2:j(!1),E();case 4:case"end":return e.stop()}}),e)}))),N)}}," ","Retry"," "):""},P)),c().createElement(m.b,null," "))};I.propTypes={id:P().string,lastSeen:P().string,children:P().element,device:P().object,position:P().string,fetchDevices:P().func},I.defaultProps={position:"left",id:"retry-update"};const k=I},93597:(e,t,n)=>{"use strict";n.d(t,{$c:()=>y,Bi:()=>u,Dk:()=>g,EC:()=>f,EV:()=>E,H1:()=>s,Kz:()=>b,L0:()=>p,QY:()=>v,Sj:()=>h,dj:()=>m,dt:()=>d});var r=n(15861),a=n(29439),o=n(64687),i=n.n(o),l=n(66702),c=n(93454),s=function(e){var t={name:e};return c.instance.post("".concat(l.Ds,"/images/checkImageName"),t)},u=function(e){var t=e.Id,n=e.name,r=e.version,o=e.description,i=e.release,s=e.architecture,u=e.username,d=e.credentials,m=e.imageType,p=e["selected-packages"],v=e["third-party-repositories"],f=e["custom-packages"],g=m||[],E=(0,a.Z)(g,1)[0];m.length>1&&(E="rhel-edge-installer");var b={name:n,version:r,description:o,distribution:i,imageType:E,packages:null==p?void 0:p.map((function(e){return{name:e.name}})),outputTypes:m,commit:{arch:s},installer:{username:u,sshkey:d},thirdPartyRepositories:null==v?void 0:v.map((function(e){return{ID:e.id,Name:e.name,URL:e.URL,uuid:e.uuid}})),customPackages:null==f?void 0:f.map((function(e){return{Name:e.name}}))},y="".concat(l.Ds,"/images");return r>1&&(y+="/".concat(t,"/update")),c.instance.post(y,b)},d=function(e){var t=e.id,n=e.q,r=void 0===n?{limit:10,offset:0,sort_by:"-created_at"}:n,a=(0,l.Vs)(r);return c.instance.get("".concat(l.Ds,"/image-sets/").concat(t,"?").concat(a))},m=function(e){var t=e.imageSetID,n=e.query,r=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,a=(0,l.Vs)(r);return c.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t,"/versions?").concat(a))},p=function(e){var t=e.id;return c.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0,sort_by:"-created_at"},t=(0,l.Vs)(e);return c.instance.get("".concat(l.Ds,"/image-sets?").concat(t))},f=function(e){return c.instance.get("".concat(l.Ds,"/images/").concat(e,"/status"))},g=function(e){return c.instance.get("".concat(l.Ds,"/updates/device/").concat(e,"/image"))},E=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams({distribution:t,architecture:n,search:r}),e.abrupt("return",(0,c.instance)("".concat(l.DO,"/packages?").concat(a.toString())));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(e){var t=e.id;return c.instance.get("".concat(l.Ds,"/images/").concat(t,"/details"))},y=function(e){var t=e.query;""===t&&(t={limit:20,offset:0,sort_by:"-updated_at"});var n=(0,l.Vs)(t);return c.instance.get("".concat(l.Ds,"/image-sets/view?").concat(n))},h=function(e,t){return c.instance.post("".concat(l.$J,"/rpms/names"),{urls:e,search:t})}},66702:(e,t,n)=>{"use strict";n.d(t,{$J:()=>i,DO:()=>a,Ds:()=>o,Vs:()=>l});var r=n(71002),a="/api/image-builder/v1",o="/api/edge/v1",i="/api/content-sources/v1",l=function(e){return void 0===e?"":Object.keys(e).reduce((function(t,n){var a=void 0;return"object"===(0,r.Z)(e[n])&&"number"==typeof e[n].length&&e[n].length>0&&(a=e[n].reduce((function(e,t){return""===e?"".concat(n,"=").concat(t):"".concat(e,"&").concat(n,"=").concat(t)}),"")),["string","number"].includes((0,r.Z)(e[n]))&&""!==e[n]&&(a="".concat(n,"=").concat(e[n])),void 0===a?t:""===t?"".concat(a):"".concat(t,"&").concat(a)}),"")}},17939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(96985),a=n.n(r),o=n(50383),i=n(45697),l=function(e){for(var t=e.numberOfRows,n=[],r=0;r<t;r++)n.push(a().createElement(a().Fragment,{key:r},a().createElement(o.O,null),a().createElement("br",null)));return a().createElement(a().Fragment,null,n)};const c=l;l.propTypes={numberOfRows:i.PropTypes.number}},35681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f,u:()=>p});var r=n(96985),a=n.n(r),o=n(45697),i=n.n(o),l=n(69174),c=n(75824),s=n(79851),u=n(34512),d=n(98309),m={booting:{text:"Booting",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},building:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},created:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},upToDate:{text:"Up to date",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},success:{text:"Ready",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},passed:{text:"Passed",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},updateAvailable:{text:"Update available",Icon:d.iQ.exclamationTriangle,color:d.OE.yellow,labelColor:"orange"},updating:{text:"Updating",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},error:{text:"Error",Icon:d.iQ.timesCircle,color:d.OE.red,labelColor:"red"},default:{text:"Unknown",Icon:d.iQ.unknown},interrupted:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},unresponsive:{text:"Unresponsive",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"},errorWithExclamationCircle:{text:"Error",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"}},p=function(e,t,n){return"ERROR"===n?"error":"UNRESPONSIVE"===n?"unresponsive":"UPDATING"===e?"updating":t?"updateAvailable":"upToDate"},v=function(e){var t=e.id,n=e.type,r=e.isLabel,o=void 0!==r&&r,i=e.toolTipContent,d=void 0===i?"":i,p=e.className,v=void 0===p?"":p,f=e.isLink,g=Object.prototype.hasOwnProperty.call(m,n)?m[n]:m.default,E=g.text,b=g.Icon,y=g.color,h=g.labelColor;return a().createElement(a().Fragment,null,o?a().createElement(l._,{id:t,color:h,icon:a().createElement(b,null),className:v},E):a().createElement(s.P,{id:t,style:{color:y},className:v},a().createElement(u.J,{className:"pf-u-mr-sm"},d?a().createElement(c.u,{content:"blargh"},a().createElement(b,null)):a().createElement(b,null)),a().createElement(u.J,null,a().createElement("p",{style:f?{textDecoration:" grey dotted underline",cursor:"pointer"}:{}},E))))};const f=v;v.propTypes={id:i().string,type:i().string,isLabel:i().bool,toolTipContent:i().string,className:i().string,isLink:i().bool},v.defaultProps={id:"status"}},98309:(e,t,n)=>{"use strict";n.d(t,{E5:()=>x,Ei:()=>D,OE:()=>T,Op:()=>Z,R8:()=>k,aN:()=>S,az:()=>C,bd:()=>R,iQ:()=>N,ml:()=>j,n:()=>w,vk:()=>I});var r=n(34143),a=n(68778),o=n(54340),i=n(43047),l=n(69957),c=n(53636),s=n(7081),u=n(17542),d=n(64915),m=n(80810),p=n(35453),v=n(15914),f=n(72781),g=n(94768),E=n(73479),b=n(12990),y=n(37655),h=n(4088),O=n(14206),P=n(29987),Z=["done","error","pending","unknown","updating","warning","notification"],w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return e.sort((function(e,n){return"asc"===t?e.name.toLowerCase().localeCompare(n.name.toLowerCase()):n.name.toLowerCase().localeCompare(e.name.toLowerCase())}))},S={"rhel-84":"RHEL 8.4","rhel-85":"RHEL 8.5","rhel-86":"RHEL 8.6","rhel-87":"RHEL 8.7","rhel-90":"RHEL 9.0","rhel-91":"RHEL 9.1"},D={"rhel-91":"Red Hat Enterprise Linux (RHEL) 9.1","rhel-90":"Red Hat Enterprise Linux (RHEL) 9.0","rhel-87":"Red Hat Enterprise Linux (RHEL) 8.7","rhel-86":"Red Hat Enterprise Linux (RHEL) 8.6","rhel-85":"Red Hat Enterprise Linux (RHEL) 8.5","rhel-84":"Red Hat Enterprise Linux (RHEL) 8.4"},I=["rhel-84","rhel-85","rhel-86","rhel-87","rhel-90","rhel-91"],k=["rhel-91"],C="rhel-90",j="rhel-91",R={"rhel-edge-commit":"RHEL for Edge Commit (.tar)","rhel-edge-installer":"RHEL for Edge Installer (.iso)"},N={unknown:u.ZP,repository:d.ZP,search:m.ZP,module:p.ZP,cube:v.ZP,question:E.ZP,plus:s.ZP,checkCircle:a.ZP,exclamationTriangle:l.ZP,timesCircle:f.ZP,inProgress:g.ZP,exclamationCircle:i.ZP},T={green:h.Z.value,yellow:y.Z.value,lightBlue:O.Z.value,blue:P.Z.value,red:b.Z.value},x={done:{icon:a.ZP,color:h.Z.value,title:"Fully adopted"},error:{icon:i.ZP,color:b.Z.value,title:"Error while adopting"},pending:{icon:c.ZP,title:"Pending adoption"},updating:{icon:o.ZP,title:"Updating"},unknown:{icon:u.ZP,title:"Unknown state"},warning:{icon:l.ZP,color:y.Z.value,title:"Warning while adopting"},notification:{icon:r.ZP,color:O.Z.value,title:"Delivering"}}},96094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(4942),a=n(15861),o=n(29439),i=n(64687),l=n.n(i),c=n(83215),s=n(96985),u=n(77760);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=function(e){var t,n=e.api,r=e.id,i=void 0===r?null:r,d=e.statusMessages,p=e.tableReload,v=void 0!==p&&p,f=(0,u.useDispatch)(),g=(0,s.useState)([]),E=(0,o.Z)(g,2),b=E[0],y=E[1],h=(0,s.useState)(!0),O=(0,o.Z)(h,2),P=O[0],Z=O[1],w=(0,s.useState)(!1),S=(0,o.Z)(w,2),D=S[0],I=S[1],k=null===(t=d)||void 0===t?void 0:t.onSuccess;d||(d={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var C=function(){var e=(0,a.Z)(l().mark((function e(){var t,r,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",Z(!0),e.prev=2,e.next=5,n({id:i,query:t});case 5:r=e.sent,y(r),k&&f(m({},(0,c.wN)(m({variant:"success"},d.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),I(!0),f(m({},(0,c.wN)(m({variant:"danger"},d.onError))));case 14:return e.prev=14,Z(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){v||C()}),[]),[{data:b,isLoading:P,hasError:D},C]}},32349:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(4942),a=n(15861),o=n(64687),i=n.n(o),l=n(83215);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(e,t,n){var r,o,c=null===(r=n)||void 0===r?void 0:r.onSuccess,u=null===(o=n)||void 0===o?void 0:o.onInfo;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var d=function(){var r=(0,a.Z)(i().mark((function r(){var a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t();case 3:return a=r.sent,u&&e(s({},(0,l.wN)(s({variant:"info"},n.onInfo)))),c&&e(s({},(0,l.wN)(s({variant:"success"},n.onSuccess)))),r.abrupt("return",a);case 9:return r.prev=9,r.t0=r.catch(0),e(s({},(0,l.wN)(s(s({variant:"danger"},n.onError),{},{description:null!==r.t0&&void 0!==r.t0&&r.t0.Title?"".concat(n.onError.description,": ").concat(r.t0.Title):n.onError.description})))),r.abrupt("return",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(){return r.apply(this,arguments)}}();return d()}},58392:()=>{},32857:()=>{},27567:()=>{},21064:()=>{},82014:()=>{},53336:()=>{},314:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/DeviceDetail.84e4f63d96e0a4fcc93a69507bcb4c9e.js.map