"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[940],{68940:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(4942),l=n(15861),i=n(87757),r=n.n(i),o=n(75418),c=n.n(o),s=n(68774),d=n(68340),u=n(69957),p=n(45697),m=n.n(p),v=n(66702),f=n(28216),g=n(83215),b=n(60722),h=n(96354),y=n(60485),O=n(78140),w=n(25834),D=function(e){var t=e.reviewObject,n=e.key;return c().createElement(s.D,null,c().createElement(y.D,{headingLevel:"h3"},c().createElement(d.x,{component:"b"},t.title)),c().createElement(w.G,{component:w.F.dl},t.rows.map((function(e){return c().createElement(o.Fragment,{key:e.title+n},c().createElement(O.T,{component:O.v.dt},e.title),c().createElement(O.T,{component:O.v.dd},e.value))}))))};D.propTypes={reviewObject:m().object,key:m().string};const E=D;var k=n(62410),j=n(68920);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t,n,a,i,o,p,m,y=e.updateModal,O=e.setUpdateModal,w=e.refreshTable,D=(0,f.I0)(),I=null==y?void 0:y.imageData,T=y.deviceData.length>1,U=y.deviceData.map((function(e){return e.id})),_=T?y.deviceData.map((function(e){return e.display_name})):null==y||null===(t=y.deviceData[0])||void 0===t?void 0:t.display_name,N=function(){var e=(0,l.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.g5)({DevicesUUID:U,CommitId:null==I||null===(t=I.Image)||void 0===t?void 0:t.CommitID});case 3:D(P({},(0,g.wN)({variant:"info",title:"Updating device",description:T?" ".concat(_.length," systems were added to the queue."):" ".concat(_," was added to the queue.")}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),D(P({},(0,g.wN)({variant:"danger",title:"Updating a device was unsuccessful",description:"Response: ".concat(e.t0.statusText)})));case 9:Z(),w&&w();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){O((function(e){return P(P({},e),{},{isOpen:!1})}))},x={title:"Update to version ".concat(null==I?void 0:I.Image.Version),rows:[{title:"Image Name",value:null==I?void 0:I.Image.Name},{title:"Version",value:null==I?void 0:I.Image.Version},{title:"Created",value:c().createElement(k.Z,{date:null==I?void 0:I.Image.CreatedAt})},{title:"Release",value:j.aN[null==I?void 0:I.Image.Distribution]}]},A={title:"Changes from version ".concat((null==I?void 0:I.Image.Version)-1),rows:[{title:"Added",value:(null==I||null===(n=I.PackageDiff)||void 0===n||null===(a=n.Added)||void 0===a?void 0:a.length)||0},{title:"Removed",value:(null==I||null===(i=I.PackageDiff)||void 0===i||null===(o=i.Removed)||void 0===o?void 0:o.length)||0},{title:"Updated",value:(null==I||null===(p=I.PackageDiff)||void 0===p||null===(m=p.Updated)||void 0===m?void 0:m.length)||0}]},R={fields:[{component:h.Z.PLAIN_TEXT,name:"description",label:c().createElement(s.D,null,c().createElement(d.x,null,"Update"," ",c().createElement("span",{className:"pf-u-font-weight-bold pf-u-font-size-md"},T?"".concat(_.length," systems"):_)," ","to latest version of the image linked to it."))},{component:h.Z.PLAIN_TEXT,name:"update-details",label:E({reviewObject:x,key:"update-details"})},{component:h.Z.PLAIN_TEXT,name:"package-details",label:E({reviewObject:A,key:"package-details"})},{component:h.Z.PLAIN_TEXT,name:"warning-text",label:c().createElement(s.D,{className:"pf-u-pt-md"},c().createElement(d.x,{style:{color:"var(--pf-global--palette--gold-500)"},component:"small"},c().createElement(u.ZP,null)," After the update is installed, the device will apply the changes."))}]};return c().createElement(b.Z,{size:"medium",title:"Update system".concat(T?"s":""," to latest image version"),isOpen:y.isOpen,openModal:function(){return O((function(e){return P(P({},e),{},{isOpen:!1})}))},submitLabel:"Update Device",schema:R,onSubmit:N,reloadData:w})};T.propTypes={refreshTable:m().func,updateModal:m().shape({isOpen:m().bool.isRequired,deviceData:m().array.isRequired,imageData:m().object}).isRequired,setUpdateModal:m().func.isRequired};const U=T}}]);
//# sourceMappingURL=../sourcemaps/940.4642d4b6639c945cfc4eda1336679a62.js.map