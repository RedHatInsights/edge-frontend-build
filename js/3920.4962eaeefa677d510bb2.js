"use strict";(self.webpackChunkedge=self.webpackChunkedge||[]).push([[3920],{43920:(e,t,o)=>{o.r(t),o.d(t,{default:()=>D});var a=o(93345),n=o.n(a),r=o(50861),l=o(5556),s=o.n(l),i=o(19357),c=o(61574),d=o(71519),u=o(63767),m=o(35725),p=o(7475),g=o(78185),h=o(55833),b=o(57697),f=o(53320),v=o(51102);const I=[{label:"Name",type:"text"},{label:"Status",type:"checkbox",options:[{option:"Update available",value:"updateAvailable"}]}],y=(e,t,o,a,r,l,s,c)=>e?.map((e=>{let{DeviceName:r,DeviceGroups:d}=e;const{DeviceID:m,DeviceUUID:g,UpdateAvailable:v,LastSeen:I,ImageName:y,ImageSetID:E,Status:D,DispatcherStatus:S,GroupName:w,GroupUUID:k}=e,C=(0,b.N)(D,v,S);""===r&&(r="localhost"),s&&(d=w&&k?[{ID:k,Name:w}]:[]),null===d&&(d=[]);const U=n().createElement("div",null,n().createElement(p.Tooltip,{content:n().createElement("div",null,d.map(((e,t)=>n().createElement("p",{key:t},e.Name))))},n().createElement("span",null,"Multiple groups"))),N="federated"!==a?`edge${i.J.inventory}/${g}`:`insights/inventory/${g}`,x="federated"!==a?`edge${i.J.manageImages}/${E}`:`insights/image-builder/manage-edge-images/${E}`;return{rowInfo:{deviceID:m,id:g,display_name:r,updateImageData:v,deviceStatus:(0,b.N)(D,v,S),imageSetId:E,imageName:y,deviceGroups:d},noApiSortFilter:[r||"",y||"","",I||"",(0,b.N)(D,v)],cells:[{title:t?(0,h.d)({pathname:N,linkText:r,navigate:l}):r},{title:y?t?(0,h.d)({pathname:x,linkText:y,navigate:l}):y:"unavailable"},{title:0===d.length?n().createElement("div",{className:"pf-v5-u-disabled-color-200"},"No"," ",s&&c?"workspace":"group"):1===d.length?d[0].Name:U},{title:I?n().createElement(u.A,{date:I}):"Unknown"},{title:"error"===C||"unresponsive"===C?n().createElement(f.A,{lastSeen:I,fetchDevices:o,device:e},n().createElement(b.A,{type:"error"===C?"errorWithExclamationCircle":C,isLink:!0})):n().createElement(b.A,{type:"error"===C?"errorWithExclamationCircle":C})}]}})),E=({navigateProp:e,historyProp:t,locationProp:o,hasCheckbox:a=!1,selectedItems:l,selectedItemsUpdateable:s,skeletonRowQuantity:u,data:p,count:b,isLoading:f,hasError:E,kebabItems:D,setRemoveModal:S,setIsAddModalOpen:w,handleAddDevicesToGroup:k,handleRemoveDevicesFromGroup:C,handleEditNameSystem:U,handleDeleteSystem:N,handleUpdateSelected:x,hasModalSubmitted:T,setHasModalSubmitted:_,fetchDevices:A,isSystemsView:P=!1,isAddSystemsView:R=!1,urlName:F,enforceEdgeGroups:G})=>{const L=S,M=P,$=t?t():c.W6?(0,c.W6)():null,W=e?e():d.useNavigate?(0,d.useNavigate)():null,{pathname:O,search:z}=o?o():c.zy?(0,c.zy)():null,B=(0,h.h)(v.xo),H=!G&&B,V=(0,h.h)(v.QX),Q=e?"federated":O===i.J.inventory?O:"/"===O?"":`${O}/systems`,j=(0,h.h)(v.Cd);let q=[],J=[];const X=!!p&&p.length>0,Y=((e,t,o)=>[{title:"Name",type:"name",sort:t,columnTransforms:[(0,m.B)(25)]},{title:"Image",type:"image",sort:!1,columnTransforms:[(0,m.B)(20)]},{title:e?o?"Workspace":"Group":"Groups",type:"groups",sort:!1,columnTransforms:[(0,m.B)(15)]},{title:"Last seen",type:"last_seen",sort:t,columnTransforms:[(0,m.B)(15)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,m.B)(25)]}])(H,X,V);if("manage-edge-inventory"===F){for(let e=0;e<I.length;e++){let t=I[e];"Status"===t.label&&(t.label="Image status"),q.push(t)}for(let e=0;e<Y.length;e++){let t=Y[e];"Status"===t.title&&(t.title="Image status"),J.push(t)}}else q=I,J=Y;return n().createElement("div",{className:"edge"},n().createElement(n().Fragment,null,P&&(0,h.Rj)(f,b,z)&&!t?n().createElement(g.A,{"data-testid":"general-table-empty-state-no-data",icon:"plus",title:"Connect edge systems",body:"Connect and manage edge systems here after registering them via the console. To start, create a RHEL for Edge image and install it to your target system.",secondaryActions:[{title:"Create RHEL for Edge images and configure automated management",link:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/create_rhel_for_edge_images_and_configure_automated_management/index",type:"link"}]}):n().createElement(r.A,{historyProp:t,navigateProp:e,locationProp:o,apiFilterSort:!0,isUseApi:!0,filters:q,filtersName:"edge-devices-table-filters",loadTableData:A,tableData:{count:b,isLoading:f,hasError:E},columnNames:J,rows:y(p||[],R||P,A,Q,0,W,H,V),actionResolver:t=>{const o=t=>e?`/insights/inventory/${t.rowInfo.id}/update`:`/inventory/${t.rowInfo.id}/update`,a=[];return f?a:t?.rowInfo?.id?(k&&!j&&a.push({title:"Add to "+(H&&V?"workspace":"group"),isDisabled:!!H&&0!==t?.rowInfo?.deviceGroups.length,onClick:()=>k([{ID:t.rowInfo.deviceID,name:t.rowInfo.display_name,UUID:t.rowInfo.id}],!0)}),U&&a.push({title:"Edit",onClick:()=>U([{ID:t.rowInfo.deviceID,name:t.rowInfo.display_name,UUID:t.rowInfo.id}],!0)}),N&&a.push({title:"Delete",onClick:()=>N([{ID:t.rowInfo.deviceID,display_name:t.rowInfo.display_name,UUID:t.rowInfo.id}],!0)}),C&&!j&&a.push({title:"Remove from "+(H&&V?"workspace":"group"),isDisabled:0===t?.rowInfo?.deviceGroups.length,onClick:()=>C([{ID:t.rowInfo.deviceID,name:t.rowInfo.display_name,deviceGroups:t.rowInfo.deviceGroups,UUID:t.rowInfo.id}],!0)}),!(e=>!e.rowInfo?.UpdateAvailable&&("updating"===e.rowInfo?.deviceStatus||"upToDate"===e.rowInfo?.deviceStatus))(t)&&x&&a.push({title:"Update",onClick:(t,a,n)=>{if(e){const e=o(n);W(e,{replace:!0})}else $.push({pathname:o(n)})}}),L&&a.push({title:"Remove from "+(H&&V?"workspace":"group"),onClick:()=>S({name:t.rowInfo.display_name,isOpen:!0,deviceId:t.rowInfo.deviceID})}),a):a},defaultSort:{index:3,direction:"desc"},toolbarButtons:M?[{isDisabled:!s,title:"Update",id:"toolbar-update-button",click:()=>x()}]:[],hasCheckbox:a,selectedItems:l,skeletonRowQuantity:u,kebabItems:D,hasModalSubmitted:T,setHasModalSubmitted:_})))};E.propTypes={navigateProp:s().func,historyProp:s().func,locationProp:s().func,imageData:s().object,urlParam:s().string,openUpdateWizard:s().func,skeletonRowQuantity:s().number,temp:s().func,hasCheckbox:s().bool,setIsModalOpen:s().func,selectedItems:s().func,selectedItemsUpdateable:s().bool,reload:s().bool,setReload:s().func,data:s().array,count:s().number,isLoading:s().bool,hasError:s().bool,handleSingleDeviceRemoval:s().func,kebabItems:s().array,setRemoveModal:s().func,setIsAddModalOpen:s().func,hasModalSubmitted:s().bool,setHasModalSubmitted:s().func,handleAddDevicesToGroup:s().func,handleRemoveDevicesFromGroup:s().func,handleEditNameSystem:s().func,handleDeleteSystem:s().func,handleUpdateSelected:s().func,fetchDevices:s().func,isSystemsView:s().bool,isAddSystemsView:s().bool,urlName:s().string,groupUUID:s().string,enforceEdgeGroups:s().bool};const D=E},53320:(e,t,o)=>{o.d(t,{A:()=>D});var a=o(93345),n=o.n(a),r=o(22359),l=o(90555),s=o(60107),i=o(10341),c=o(65842),d=o.n(c),u=o(63767),m=o(55270),p=o(60732),g=o(36870),h=o(5556),b=o.n(h);const f="The playbook failed to run.",v="The service timed out during the last update.",I="UNRESPONSIVE",y=(e,t,o)=>n().createElement("div",null,e===f?"The playbook failed to run. You can retry the update or build a new one.":e===v?"The service timed out during the last update. You can retry the update or build a new one.":t===I?"The service could not be reached via RHC. The system may communicate at a later time if this is a network issue or could be an indication of a more significant problem.":"Unknown",n().createElement(i.Stack,{className:"pf-u-mt-sm"},n().createElement(i.StackItem,{className:"pf-u-font-weight-bold"},"Last seen"),n().createElement(i.StackItem,null," ",n().createElement(u.A,{date:o})))),E=({id:e,device:t,position:o,fetchDevices:i,lastSeen:c,children:u})=>{const[h,b]=(0,a.useState)(!1),E=(0,g.wA)(),D={onSuccess:{variant:"info",title:"Updating system",description:`${t.DeviceName} was added to the queue.`}};return n().createElement(s.DescriptionListGroup,null,n().createElement(s.DescriptionListTermHelpText,null,n().createElement(r.Popover,{id:e,isVisible:h,shouldOpen:()=>b(!0),shouldClose:()=>b(!1),"aria-label":"Alert popover",alertseverityvariant:"danger",headerContent:n().createElement("div",{style:{color:"#c9190b"}}," ",n().createElement(d(),{size:"sm"}),(S=t.DispatcherReason,w=t.DispatcherStatus,n().createElement("span",{className:"pf-u-ml-xs"},S===f?"Playbook error":S===v?"Service timed out":w===I?"Unresponsive":"Unknown"))),icon:"true",variant:"icon",color:"red",position:o,headerComponent:"h6",bodyContent:y(t.DispatcherReason,t.DispatcherStatus,c),footerContent:t.DispatcherStatus!==I?n().createElement(l.Button,{variant:"link",isInline:!0,onClick:()=>{(0,m.A)(E,(async()=>{await(0,p.Pn)({DevicesUUID:[t.DeviceUUID]}),b(!1),i()}),D)}}," ","Retry"," "):""},u)),n().createElement(s.DescriptionListDescription,null," "));var S,w};E.propTypes={id:b().string,lastSeen:b().string,children:b().element,device:b().object,position:b().string,fetchDevices:b().func},E.defaultProps={position:"left",id:"retry-update"};const D=E},57697:(e,t,o)=>{o.d(t,{A:()=>g,N:()=>m});var a=o(93345),n=o.n(a),r=o(5556),l=o.n(r),s=o(53707),i=o(7475),c=o(6961),d=o(88993);const u={booting:{text:"Booting",Icon:d.l_.checkCircle,color:d.Fm.green,labelColor:"green"},building:{text:"Image build in progress",Icon:d.l_.inProgress,color:d.Fm.blue,labelColor:"blue"},created:{text:"Image build in progress",Icon:d.l_.inProgress,color:d.Fm.blue,labelColor:"blue"},upToDate:{text:"Up to date",Icon:d.l_.checkCircle,color:d.Fm.green,labelColor:"green"},success:{text:"Ready",Icon:d.l_.checkCircle,color:d.Fm.green,labelColor:"green"},passed:{text:"Passed",Icon:d.l_.checkCircle,color:d.Fm.green,labelColor:"green"},updateAvailable:{text:"Update available",Icon:d.l_.exclamationTriangle,color:d.Fm.yellow,labelColor:"orange"},updating:{text:"Updating",Icon:d.l_.inProgress,color:d.Fm.blue,labelColor:"blue"},error:{text:"Error",Icon:d.l_.timesCircle,color:d.Fm.red,labelColor:"red"},default:{text:"Unknown",Icon:d.l_.unknown},interrupted:{text:"Image build in progress",Icon:d.l_.inProgress,color:d.Fm.blue,labelColor:"blue"},unresponsive:{text:"Unresponsive",Icon:d.l_.exclamationCircle,color:d.Fm.red,labelColor:"red"},errorWithExclamationCircle:{text:"Error",Icon:d.l_.exclamationCircle,color:d.Fm.red,labelColor:"red"}},m=(e,t,o)=>"ERROR"===o?"error":"UNRESPONSIVE"===o?"unresponsive":"UPDATING"===e?"updating":t?"updateAvailable":"upToDate",p=({id:e,type:t,isLabel:o=!1,toolTipContent:a="",className:r="",isLink:l})=>{const{text:d,Icon:m,color:p,labelColor:g}=Object.prototype.hasOwnProperty.call(u,t)?u[t]:u.default;return n().createElement(n().Fragment,null,o?n().createElement(s.Label,{id:e,color:g,icon:n().createElement(m,null),className:r},d):n().createElement(c.Split,{id:e,style:{color:p},className:r},n().createElement(c.SplitItem,{className:"pf-u-mr-sm"},a?n().createElement(i.Tooltip,{content:"blargh"},n().createElement(m,null)):n().createElement(m,null)),n().createElement(c.SplitItem,null,n().createElement("p",{style:l?{textDecoration:" grey dotted underline",cursor:"pointer"}:{}},d))))},g=p;p.propTypes={id:l().string,type:l().string,isLabel:l().bool,toolTipContent:l().string,className:l().string,isLink:l().bool},p.defaultProps={id:"status"}},51102:(e,t,o)=>{o.d(t,{Cd:()=>n,QX:()=>r,xo:()=>a});const a="edgeParity.inventory-groups-enabled",n="edge-management.hide_groups_actions",r="platform.rbac.groups-to-workspaces-rename"},55270:(e,t,o)=>{o.d(t,{A:()=>n});var a=o(11830);const n=(e,t,o,n)=>{const r=o?.onSuccess,l=o?.onInfo,s=o?.onWarning;return o||(o={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}}),(async()=>{try{const i=await t();return l&&(n?n.hasInfo(o.onInfo):e({...(0,a.z8)({variant:"info",...o.onInfo})})),r&&(n?n.hasSuccess(o.onSuccess):e({...(0,a.z8)({variant:"success",...o.onSuccess})})),s&&(n?n.hasWarning(o.onWarning):e({...(0,a.z8)({variant:"warning",...o.onWarning})})),i}catch(t){return n?n.err(o.onError,t):e({...(0,a.z8)({variant:"danger",...o.onError,description:t?.Title?`${o.onError.description}: ${t.Title}`:o.onError.description})}),t}})()}}}]);