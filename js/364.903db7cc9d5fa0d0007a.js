(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[364],{53010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var a=n(93433),i=n(4942),o=n(15861),l=n(29439),r=n(64687),c=n.n(r),s=n(92950),u=n.n(s),d=n(61094),m=n(96354),p=n(25563),v=n(52643),g=n(29390),f=n(37619),b=n(45697),E=n.n(b),h=n(20873),y=n(77760),I=n(93597),S=n(48903),k=n(32349),D=n(98309),O=n(96094);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t,n,i,r,b,E,w,P,T,L,U,j,x,Z,N,_,V,R=e.navigateBack,A=e.updateImageID,B=e.reload,W=e.notificationProp,F=(0,s.useState)(),z=(0,l.Z)(F,2),Q=z[0],q=z[1],G=(0,y.useDispatch)(),K=function(){R(),B&&B()};(0,s.useEffect)((function(){(0,o.Z)(c().mark((function e(){var t,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a||a.getUser().then((function(e){return q(null!=e?e:{})}));case 1:case"end":return e.stop()}}),e)})))()}),[]);var M=(0,O.Z)({api:I.Kz,id:A}),H=(0,l.Z)(M,1)[0],J=H.data,$=H.isLoading,Y=(0,S.gV)("fleet-management.temporary-releases"),X=(0,S.gV)("edge-management.image_wizard_ui"),ee={onSuccess:{title:"Success",description:"Successfully started image update"},onError:{title:"Error",description:"Failed to create image"}};return Q&&J&&!$?u().createElement(d.Z,{onClose:K,customComponentMapper:{review:h.Z},onSubmit:function(e){var t,n,a,i,o,l=e.values;(0,e.setIsSaving)((function(){return!0}));var r=C(C({},l),{},{Id:null==J||null===(t=J.image)||void 0===t?void 0:t.ID,name:null==J||null===(n=J.image)||void 0===n?void 0:n.Name,version:(null==J||null===(a=J.image)||void 0===a?void 0:a.Version)+1,architecture:"x86_64",credentials:l.credentials?l.credentials:null==J||null===(i=J.image)||void 0===i?void 0:i.Installer.SshKey,username:l.username?l.username:null==J||null===(o=J.image)||void 0===o?void 0:o.Installer.Username});(0,k.Z)(G,(function(){return(0,I.Bi)(r)}),ee,W),K()},defaultArch:"x86_64",initialValues:{imageID:null==J?void 0:J.image.ID,name:null==J||null===(t=J.image)||void 0===t?void 0:t.Name,isUpdate:!0,description:null==J||null===(n=J.image)||void 0===n?void 0:n.Description,credentials:null==J||null===(i=J.image)||void 0===i?void 0:i.Installer.SshKey,username:null==J||null===(r=J.image)||void 0===r?void 0:r.Installer.Username,version:null==J||null===(b=J.image)||void 0===b?void 0:b.Version,release:null==J||null===(E=J.image)||void 0===E?void 0:E.Distribution,release_options:Y?(0,S.pS)(null==J||null===(w=J.image)||void 0===w?void 0:w.Distribution,[].concat((0,a.Z)(D.vk),(0,a.Z)(D.R8))):(0,S.pS)(null==J||null===(P=J.image)||void 0===P?void 0:P.Distribution),imageType:["rhel-edge-commit"],"selected-packages":null==J||null===(T=J.image)||void 0===T||null===(L=T.Packages)||void 0===L?void 0:L.map((function(e){return C(C({},e),{},{name:e.Name})})),"third-party-repositories":null==J||null===(U=J.image)||void 0===U||null===(j=U.ThirdPartyRepositories)||void 0===j?void 0:j.map((function(e){return C({id:e.ID,name:e.Name},e)})),"initial-custom-repositories":null==J||null===(x=J.image)||void 0===x||null===(Z=x.ThirdPartyRepositories)||void 0===Z?void 0:Z.map((function(e){return C({id:e.ID,name:e.Name},e)})),"custom-packages":null==J||null===(N=J.image)||void 0===N||null===(_=N.CustomPackages)||void 0===_?void 0:_.map((function(e){return C(C({},e),{},{name:e.Name})}))},test:"",schema:{fields:[{component:m.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Update image"},showTitles:!0,title:"Update image: ".concat(null==J||null===(V=J.image)||void 0===V?void 0:V.Name),crossroads:["target-environment","release","imageType","third-party-repositories"],fields:[p.bR,p.Ud,p.l9,(0,p.jS)(X),p.B9,p.$B,p.j7,p.Sp]}]}}):u().createElement(g.Y,null,u().createElement(v.b,null,u().createElement(f.$,{isSVG:!0,diameter:"100px"})))};P.propTypes={navigateBack:E().func,updateImageID:E().number,reload:E().func,notificationProp:E().object},P.defaultProps={navigateBack:function(){}};const T=P},12877:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ie});var a=n(15861),i=n(4942),o=n(29439),l=n(64687),r=n.n(l),c=n(92950),s=n.n(c),u=n(89376),d=n(49739),m=n(83826),p=n(37619),v=n(52643),g=n(79142),f=n(45697),b=n.n(f),E=n(68340),h=n(25834),y=n(78140),I=n(68774),S=n(50383),k=n(64029),D=n(32835),O=n(79851),w=n(34512),C=n(56787),P=n(84457),T=n(75728),L=n(99355),U=n(75824),j=n(35681),x=n(9192),Z=n(5964),N=n(62410),_=function(e,t,n,a){var i,o=t||(null==e?void 0:e.LastImageDetails),l=[];return(null==o||null===(i=o.image)||void 0===i?void 0:i.ID)&&l.push(s().createElement(P.h,{key:"create-new-version-button",component:"button",onClick:function(){var e;return a(null==o||null===(e=o.image)||void 0===e?void 0:e.ID)}},"Create new version")),n&&l.push(s().createElement(P.h,{key:"download-button",component:"button"},s().createElement(E.x,{className:"force-text-black remove-underline",component:"a",href:n,rel:"noopener noreferrer",target:"_blank"},"Download installable .iso for newest image"))),l},V=function(e){var t,n,a,i,l,r,u,d,m,p,v,f,b,E,P,V,R,A,B,W=e.imageData,F=e.imageVersion,z=e.openUpdateWizard,Q=(0,c.useState)(!1),q=(0,o.Z)(Q,2),G=q[0],K=q[1],M=(0,c.useState)({}),H=(0,o.Z)(M,2),J=H[0],$=H[1];(0,c.useEffect)((function(){$(null==W?void 0:W.data)}),[W]);var Y="Actions for image set details view",X="image-set-details-dropdown";return s().createElement(s().Fragment,null,!W.isLoading&&W.hasError?s().createElement(k.a,null,s().createElement(D.g,null,s().createElement(g.Link,{to:x._.manageImages},"Back to Manage Images"))):s().createElement(s().Fragment,null,s().createElement(k.a,null,s().createElement(D.g,null,s().createElement(g.Link,{to:x._.manageImages},"Manage Images")),F?s().createElement(D.g,null,s().createElement(g.Link,{to:"".concat(x._.manageImages,"/").concat(null==J||null===(t=J.ImageSet)||void 0===t?void 0:t.ID)},null==J||null===(n=J.ImageSet)||void 0===n?void 0:n.Name)):s().createElement(D.g,{isActive:!0},(null==J||null===(a=J.ImageSet)||void 0===a?void 0:a.Name)||s().createElement(S.O,{width:"100px"})),F&&s().createElement(D.g,{isActive:!0},null==F||null===(i=F.image)||void 0===i?void 0:i.Version)),s().createElement(I.D,null,s().createElement(O.P,null,s().createElement(w.J,null,s().createElement(h.G,{component:"dl"},s().createElement(y.T,{component:"h1",className:"grid-align-center pf-u-mb-0"},(null==J||null===(l=J.ImageSet)||void 0===l?void 0:l.Name)||s().createElement(S.O,{width:"150px"})),s().createElement(y.T,{className:"pf-u-pt-sm",component:"dd"},null!=F&&null!==(r=F.image)&&void 0!==r&&r.Status||null!=J&&null!==(u=J.LastImageDetails)&&void 0!==u&&null!==(d=u.image)&&void 0!==d&&d.Status?s().createElement(j.Z,{type:F?null==F||null===(m=F.image)||void 0===m?void 0:m.Status.toLowerCase():null==J||null===(p=J.LastImageDetails)||void 0===p||null===(v=p.image)||void 0===v?void 0:v.Status.toLowerCase()}):s().createElement(S.O,{width:"100px"})),null!=F&&null!==(f=F.image)&&void 0!==f&&f.UpdatedAt||null!=J&&null!==(b=J.LastImageDetails)&&void 0!==b&&null!==(E=b.image)&&void 0!==E&&E.UpdatedAt?s().createElement(y.T,{component:"p"},"Last updated ",s().createElement(N.Z,{date:F?null==F||null===(P=F.image)||void 0===P?void 0:P.UpdatedAt:null==J||null===(V=J.LastImageDetails)||void 0===V||null===(R=V.image)||void 0===R?void 0:R.UpdatedAt})):s().createElement(S.O,{width:"200px"}))),s().createElement(w.J,{isFilled:!0}),s().createElement(w.J,null,s().createElement(C.L,{position:L.ir.right,toggle:s().createElement(T.Z,{id:X,toggleIndicator:Z.ZP,onToggle:function(e){return K(e)},isDisabled:"BUILDING"===(F?null==F||null===(A=F.image)||void 0===A?void 0:A.Status:null==J||null===(B=J.LastImageDetails)||void 0===B?void 0:B.image.Status)||!1,"aria-label":Y},s().createElement(U.u,{content:Y,reference:function(){return document.getElementById(X)}}),"Actions"),isOpen:G,dropdownItems:_(J,F,null==J?void 0:J.ImageBuildIsoURL,z)}))))))};V.propTypes={imageData:b().object,imageVersion:b().object,openUpdateWizard:b().func};const R=V;var A=n(35262),B=n(28883),W=n(29873),F=n(93433),z=n(50693),Q=n(16475),q=n(66435),G=n(98309),K=function(e){var t,n,a,i,l=e.imageData,r=e.imageVersion,u=(0,c.useState)({}),d=(0,o.Z)(u,2),m=d[0],p=d[1];(0,c.useEffect)((function(){var e;p(r||(null==l||null===(e=l.data)||void 0===e?void 0:e.LastImageDetails))}),[l,r]);var v=function(e){return(0,F.Z)(Array(2*e)).map((function(e,t){return s().createElement(S.O,{width:"180px",key:t})}))},f={Version:"Version",Created:function(){return s().createElement(N.Z,{date:null==m||null===(e=m.image)||void 0===e?void 0:e.CreatedAt});var e},"Type(s)":function(){var e,t;return null==m||null===(e=m.image)||void 0===e||null===(t=e.OutputTypes)||void 0===t?void 0:t.map((function(e,t){return s().createElement("div",{key:t},e)}))},Release:function(){var e;return null===G.aN||void 0===G.aN?void 0:G.aN[null==m||null===(e=m.image)||void 0===e?void 0:e.Distribution]},Description:"Description"},b={Username:function(){var e,t;return null==m||null===(e=m.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Username},"SSH key":function(){var e,t;return null==m||null===(e=m.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.SshKey}},k={"Total additional packages":function(){var e,t;return s().createElement(g.Link,{to:"".concat(x._.manageImages,"/").concat(null==m||null===(e=m.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==m||null===(t=m.image)||void 0===t?void 0:t.ID,"/packages/additional")},null==m?void 0:m.additional_packages)},"Total packages":function(){var e,t;return s().createElement(g.Link,{to:"".concat(x._.manageImages,"/").concat(null==m||null===(e=m.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==m||null===(t=m.image)||void 0===t?void 0:t.ID,"/packages/all")},null==m?void 0:m.packages)}},D={Added:function(){return null==m?void 0:m.update_added},Removed:function(){return null==m?void 0:m.update_removed},Updated:function(){return null==m?void 0:m.update_updated}};null!=m&&null!==(t=m.image)&&void 0!==t&&null!==(n=t.Installer)&&void 0!==n&&n.Checksum&&(f["SHA-256 checksum"]=function(){var e,t;return null==m||null===(e=m.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Checksum}),null!=m&&null!==(a=m.image)&&void 0!==a&&null!==(i=a.Commit)&&void 0!==i&&i.OSTreeCommit&&(f["Ostree commit hash"]=function(){var e,t;return null==m||null===(e=m.image)||void 0===e||null===(t=e.Commit)||void 0===t?void 0:t.OSTreeCommit});var O=function(e){return m?Object.entries(e).map((function(e,t){var n,a,i=(0,o.Z)(e,2),l=i[0],r=i[1];return s().createElement(c.Fragment,{key:t},s().createElement(y.T,{className:"details-label",component:y.v.dt},l),"SHA-256 checksum"===l||"Ostree commit hash"===l||"SSH key"===l&&r()?s().createElement(y.T,{component:y.v.dd},s().createElement(q.M5,{hoverTip:"Copy",clickTip:"Copied",variant:"expansion",className:"pf-u-text-break-word",id:"".concat(l.replace(/\s+/g,"-").toLowerCase(),"-clipboard-copy")},"function"==typeof r?r()||"Unavailable":(null==m||null===(n=m.image)||void 0===n?void 0:n[r])||"Unavailable")):s().createElement(y.T,{className:"pf-u-text-break-word",component:y.v.dd},"function"==typeof r?0===r()?0:r()||"Unavailable":(null==m||null===(a=m.image)||void 0===a?void 0:a[r])||"Unavailable"))})):null};return s().createElement(I.D,{className:"pf-u-ml-lg pf-u-mt-md"},s().createElement(z.r,{span:12},s().createElement(Q.P,{span:5},s().createElement(E.x,{component:E.q.h2},r?"Details":"Most recent image"),s().createElement(h.G,{component:h.F.dl},O(f)||v(6)),s().createElement(E.x,{component:E.q.h2},"User information "),s().createElement(h.G,{component:h.F.dl},O(b)||v(2))),s().createElement(Q.P,{span:1}),s().createElement(Q.P,{span:6},s().createElement(E.x,{component:E.q.h2},"Packages "),s().createElement(h.G,{component:h.F.dl},O(k)||v(3)),s().createElement(E.x,{component:E.q.h2},"Changes from previous version"),s().createElement(h.G,{component:h.F.dl},O(D)||v(3)))))};K.propTypes={imageData:b().object,imageVersion:b().object};const M=K;var H=n(73448),J=n(93597),$=n(34766),Y=n(48903),X=n(96094),ee=[{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],te=[{title:"Version",type:"version",sort:!0,columnTransforms:[(0,$.cellWidth)(15)]},{title:"Output",type:"image_type",sort:!1,columnTransforms:[(0,$.cellWidth)(25)]},{title:"Ostree commit hash",type:"ostree_commit_hash",sort:!1,columnTransforms:[(0,$.cellWidth)(20)]},{title:"Created",type:"created_at",sort:!0,columnTransforms:[(0,$.cellWidth)(15)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,$.cellWidth)(35)]}],ne=function(e,t,n){return null==e?void 0:e.map((function(e){return{rowInfo:{id:null==e?void 0:e.ID,imageStatus:null==e?void 0:e.Status,isoURL:null==e?void 0:e.ImageBuildIsoURL,latestImageVersion:n,currentImageVersion:e.Version},noApiSortFilter:[null==e?void 0:e.Version,G.bd[null==e?void 0:e.ImageType],null==e?void 0:e.CreatedAt,null==e?void 0:e.Status],cells:[{title:s().createElement(g.Link,{to:"".concat(x._.manageImages,"/").concat(t,"/versions/").concat(e.ID,"/details")},null==e?void 0:e.Version)},{title:G.bd[null==e?void 0:e.ImageType]},{title:null!=e&&e.CommitCheckSum?s().createElement(U.u,{content:s().createElement("div",null,e.CommitCheckSum)},s().createElement("span",null,(0,Y.aS)(e.CommitCheckSum,5,5))):s().createElement(E.x,null,"Unavailable")},{title:s().createElement(N.Z,{date:null==e?void 0:e.CreatedAt})},{title:s().createElement(j.Z,{type:null==e?void 0:e.Status.toLowerCase()})}]}}))},ae=function(e){var t,n,a,i,l=e.imageData,r=e.openUpdateWizard,c=null==l||null===(t=l.data)||void 0===t||null===(n=t.ImageSet)||void 0===n?void 0:n.ID,u=null==l||null===(a=l.data)||void 0===a||null===(i=a.ImageSet)||void 0===i?void 0:i.Version,d=(0,X.Z)({api:function(e){var t=e.query;return(0,J.dj)({imageSetID:c,query:t})},tableReload:!0}),m=(0,o.Z)(d,2),p=m[0],v=m[1],g=p.data,f=p.isLoading,b=p.hasError;return s().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},s().createElement(H.Z,{apiFilterSort:!0,isUseApi:!0,filters:ee,loadTableData:v,tableData:{count:null==g?void 0:g.count,data:null==g?void 0:g.data,isLoading:f,hasError:b},columnNames:te,rows:ne(null==g?void 0:g.data,c,u),actionResolver:function(e){var t,n,a,i,o,l,c,s=[];return null!==(t=e.rowInfo)&&void 0!==t&&t.isoURL&&s.push({title:"Download",onClick:function(e,t,n){window.open(n.rowInfo.isoURL)}}),("SUCCESS"===(null===(n=e.rowInfo)||void 0===n?void 0:n.imageStatus)||"ERROR"===(null===(a=e.rowInfo)||void 0===a?void 0:a.imageStatus))&&s.push({title:"Update Image",onClick:function(e,t,n){r(n.rowInfo.id)},isDisabled:(null==e||null===(l=e.rowInfo)||void 0===l?void 0:l.latestImageVersion)!==(null==e||null===(c=e.rowInfo)||void 0===c?void 0:c.currentImageVersion)}),"BUILDING"===(null===(i=e.rowInfo)||void 0===i?void 0:i.imageStatus)&&null!==(o=e.rowInfo)&&void 0!==o&&o.id&&s.push({title:""}),s},areActionsDisabled:function(e){var t;return"BUILDING"===(null===(t=e.rowInfo)||void 0===t?void 0:t.imageStatus)},defaultSort:{index:3,direction:"desc"}}))};ae.propTypes={imageData:b().object,urlParam:b().string,imageSetID:b().number,createRows:b().func,openUpdateWizard:b().func};const ie=ae;var oe=n(47173),le=n(15265),re=n(3035),ce=[{label:"Name",type:"text"}],se=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,$.cellWidth)(35)]},{title:"Version",type:"version",sort:!1,columnTransforms:[(0,$.cellWidth)(25)]},{title:"Release",type:"release",sort:!1,columnTransforms:[(0,$.cellWidth)(35)]}],ue=function(e){var t=e.distribution,n=e.installedPackages,a=e.addedPackages;return(0===e.showAll?n.filter((function(e){return(null==a?void 0:a.filter((function(t){return e.name===t.Name})).length)>0})):n).map((function(e){return{noApiSortFilter:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release],cells:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release,{title:s().createElement("a",{href:"https://access.redhat.com/downloads/content/rhel---".concat(t,"/x86_64/7416/").concat(null==e?void 0:e.name,"/").concat(null==e?void 0:e.version,"-").concat(null==e?void 0:e.release,"/").concat(null==e?void 0:e.arch,"/fd431d51/package"),target:"_blank",rel:"noopener noreferrer"},s().createElement(oe.zx,{variant:"link",isSmall:!0,icon:s().createElement(le.ZP,null),iconPosition:"right"},"More information"))}]}}))},de={0:"additional",1:"all"},me={additional:0,all:1},pe=function(e){var t,n,a,i,l,r,u,d,m,p=e.imageVersion,v=(0,g.useHistory)(),f=(0,g.useLocation)().pathname.split("/"),b=7===f.length?me[f[6]]:1,E=null==p||null===(t=p.image)||void 0===t||null===(n=t.Distribution)||void 0===n?void 0:n.split("-")[1].slice(0,-1),h=(0,c.useState)({}),y=(0,o.Z)(h,2),I=y[0],S=y[1],k=(0,c.useState)(b),D=(0,o.Z)(k,2),O=D[0],w=D[1];return(0,c.useEffect)((function(){S(p)}),[p]),(0,c.useEffect)((function(){f[5]!==de[O]&&w(b)}),[f]),"SUCCESS"===(null==p||null===(a=p.image)||void 0===a||null===(i=a.Commit)||void 0===i?void 0:i.Status)?s().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},s().createElement(H.Z,{apiFilterSort:!1,filters:ce,tableData:{count:0===O?null==I?void 0:I.additional_packages:null==I?void 0:I.packages,isLoading:!1,hasError:!1},columnNames:se,rows:null!=I&&null!==(l=I.image)&&void 0!==l&&null!==(r=l.Commit)&&void 0!==r&&r.InstalledPackages?ue({distribution:E,installedPackages:null==I||null===(u=I.image)||void 0===u||null===(d=u.Commit)||void 0===d?void 0:d.InstalledPackages,addedPackages:null==I||null===(m=I.image)||void 0===m?void 0:m.Packages,showAll:O}):[],actionResolver:function(){return[]},areActionsDisabled:function(){return!0},defaultSort:{index:0,direction:"asc"},toggleButton:[{title:"Additional",key:0},{title:"All",key:1}],toggleAction:function(e){var t,n=null===(t=f[5])||void 0===t?void 0:t.toLowerCase();w(e),"packages"===n&&(7===f.length?f[6]=de[e]:f.push(de[e]),v.push(f.join("/")))},toggleState:O,emptyFilterState:{icon:"search",title:"No packages to display"}})):s().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},s().createElement(re.Z,{bgColor:"white",title:"Package data currently unavailable",body:"Packages will be displayed as soon as the image is finished being built.",primaryAction:null,secondaryActions:[]}))};pe.propTypes={imageVersion:b().object};const ve=pe;var ge={details:0,packages:1,versions:1},fe=function(e){var t=e.imageData,n=e.openUpdateWizard,a=e.imageVersion,i=e.isLoading,l=(0,g.useHistory)(),r=(0,g.useLocation)().pathname,u=(0,c.useState)(ge.details),d=(0,o.Z)(u,2),m=d[0],p=d[1],v=a?"imageTab":"imageSetTab",f=(0,Y.Ff)(r,["baseURL","imageSetVersion","imageSetTab","imageVersion","imageTab","packagesToggle"]);return(0,c.useEffect)((function(){f.imageTab?p(ge[f.imageTab]):p(ge[f.imageSetTab])}),[r]),s().createElement(s().Fragment,null,!t.isLoading&&t.hasError?s().createElement(re.Z,{icon:"question",title:"Image not found",body:"Please check you have the correct link with the correct image Id.",primaryAction:{text:"Back to Manage Images",href:x._.manageImages},secondaryActions:[]}):s().createElement("div",{className:"edge-c-device--detail add-100vh"},s().createElement(A.m,{className:"pf-u-ml-md",activeKey:m,onSelect:function(e,t){var n=0===t?"details":a?"packages":"versions";f[v]=n,l.push(f.buildUrl()),p(t)}},s().createElement(B.O,{eventKey:ge.details,title:s().createElement(W.T,null,"Details")},s().createElement(M,{imageData:t,imageVersion:a})),i?s().createElement(B.O,{title:s().createElement(W.T,null,s().createElement(S.O,{width:"75px"}))}):a?s().createElement(B.O,{eventKey:ge.packages,title:s().createElement(W.T,null,"Packages")},s().createElement(ve,{imageVersion:a})):s().createElement(B.O,{eventKey:ge.versions,title:s().createElement(W.T,null,"Versions")},s().createElement(ie,{imageData:t,openUpdateWizard:n})))))};fe.propTypes={imageData:b().object,imageVersion:b().object,openUpdateWizard:b().func,isLoading:b().bool};const be=fe;var Ee=n(53010);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ie=function(){var e=(0,g.useParams)(),t=e.imageId,n=e.imageVersionId,i=(0,g.useHistory)(),l=(0,g.useLocation)().pathname,f=(0,c.useState)({isOpen:!1,updateId:null}),b=(0,o.Z)(f,2),E=b[0],h=b[1],y=(0,c.useState)(null),I=(0,o.Z)(y,2),S=I[0],k=I[1],D=(0,X.Z)({api:J.L0,id:n?"".concat(t,"/versions/").concat(n):"".concat(t),tableReload:!0}),O=(0,o.Z)(D,2),w=O[0],C=O[1],P=w.data,T=w.isLoading,L=function(e){i.push({pathname:l,search:new URLSearchParams({update_image:!0}).toString()}),h((function(t){return ye(ye({},t),{},{isOpen:!t.isLoading,updateId:e})}))};(0,c.useEffect)((function(){k(n?null==P?void 0:P.ImageDetails:null)}),[w,n]),(0,c.useEffect)((function(){C()}),[t,n]);var U=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s().createElement(c.Fragment,null,s().createElement(u.Z,{className:"pf-m-light"},s().createElement(d.K,{hasGutter:!0},s().createElement(m.v,null,s().createElement(R,{imageData:w,imageVersion:S,openUpdateWizard:L})))),s().createElement(be,{imageData:w,urlParam:t,imageVersion:S,openUpdateWizard:L,isLoading:T}),E.isOpen&&s().createElement(c.Suspense,{fallback:s().createElement(v.b,null,s().createElement(p.$,null))},s().createElement(Ee.default,{navigateBack:function(){i.push({pathname:l}),h((function(e){return ye(ye({},e),{},{isOpen:!1})}))},updateImageID:E.updateId,reload:U})))}},93597:(e,t,n)=>{"use strict";n.d(t,{$c:()=>h,Bi:()=>u,Dk:()=>f,EC:()=>g,EV:()=>b,H1:()=>s,Kz:()=>E,L0:()=>p,QY:()=>v,Sj:()=>y,dj:()=>m,dt:()=>d});var a=n(15861),i=n(29439),o=n(64687),l=n.n(o),r=n(66702),c=n(93454),s=function(e){var t={name:e};return c.instance.post("".concat(r.Ds,"/images/checkImageName"),t)},u=function(e){var t=e.Id,n=e.name,a=e.version,o=e.description,l=e.release,s=e.architecture,u=e.username,d=e.credentials,m=e.imageType,p=e["selected-packages"],v=e["third-party-repositories"],g=e["custom-packages"],f=m||[],b=(0,i.Z)(f,1)[0];m.length>1&&(b="rhel-edge-installer");var E={name:n,version:a,description:o,distribution:l,imageType:b,packages:null==p?void 0:p.map((function(e){return{name:e.name}})),outputTypes:m,commit:{arch:s},installer:{username:u,sshkey:d},thirdPartyRepositories:null==v?void 0:v.map((function(e){return{ID:e.id,Name:e.name,URL:e.URL,uuid:e.uuid}})),customPackages:null==g?void 0:g.map((function(e){return{Name:e.name}}))},h="".concat(r.Ds,"/images");return a>1&&(h+="/".concat(t,"/update")),c.instance.post(h,E)},d=function(e){var t=e.id,n=e.q,a=void 0===n?{limit:10,offset:0,sort_by:"-created_at"}:n,i=(0,r.Vs)(a);return c.instance.get("".concat(r.Ds,"/image-sets/").concat(t,"?").concat(i))},m=function(e){var t=e.imageSetID,n=e.query,a=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,i=(0,r.Vs)(a);return c.instance.get("".concat(r.Ds,"/image-sets/view/").concat(t,"/versions?").concat(i))},p=function(e){var t=e.id;return c.instance.get("".concat(r.Ds,"/image-sets/view/").concat(t))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0,sort_by:"-created_at"},t=(0,r.Vs)(e);return c.instance.get("".concat(r.Ds,"/image-sets?").concat(t))},g=function(e){return c.instance.get("".concat(r.Ds,"/images/").concat(e,"/status"))},f=function(e){return c.instance.get("".concat(r.Ds,"/updates/device/").concat(e,"/image"))},b=function(){var e=(0,a.Z)(l().mark((function e(t,n,a){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new URLSearchParams({distribution:t,architecture:n,search:a}),e.abrupt("return",(0,c.instance)("".concat(r.DO,"/packages?").concat(i.toString())));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),E=function(e){var t=e.id;return c.instance.get("".concat(r.Ds,"/images/").concat(t,"/details"))},h=function(e){var t=e.query;""===t&&(t={limit:20,offset:0,sort_by:"-updated_at"});var n=(0,r.Vs)(t);return c.instance.get("".concat(r.Ds,"/image-sets/view?").concat(n))},y=function(e,t){return c.instance.post("".concat(r.$J,"/rpms/names"),{urls:e,search:t})}},66702:(e,t,n)=>{"use strict";n.d(t,{$J:()=>l,DO:()=>i,Ds:()=>o,Vs:()=>r});var a=n(71002),i="/api/image-builder/v1",o="/api/edge/v1",l="/api/content-sources/v1",r=function(e){return void 0===e?"":Object.keys(e).reduce((function(t,n){var i=void 0;return"object"===(0,a.Z)(e[n])&&"number"==typeof e[n].length&&e[n].length>0&&(i=e[n].reduce((function(e,t){return""===e?"".concat(n,"=").concat(t):"".concat(e,"&").concat(n,"=").concat(t)}),"")),["string","number"].includes((0,a.Z)(e[n]))&&""!==e[n]&&(i="".concat(n,"=").concat(e[n])),void 0===i?t:""===t?"".concat(i):"".concat(t,"&").concat(i)}),"")}},35681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,u:()=>p});var a=n(92950),i=n.n(a),o=n(45697),l=n.n(o),r=n(69174),c=n(75824),s=n(79851),u=n(34512),d=n(98309),m={booting:{text:"Booting",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},building:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},created:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},upToDate:{text:"Up to date",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},success:{text:"Ready",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},passed:{text:"Passed",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},updateAvailable:{text:"Update available",Icon:d.iQ.exclamationTriangle,color:d.OE.yellow,labelColor:"orange"},updating:{text:"Updating",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},error:{text:"Error",Icon:d.iQ.timesCircle,color:d.OE.red,labelColor:"red"},default:{text:"Unknown",Icon:d.iQ.unknown},interrupted:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},unresponsive:{text:"Unresponsive",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"},errorWithExclamationCircle:{text:"Error",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"}},p=function(e,t,n){return"ERROR"===n?"error":"UNRESPONSIVE"===n?"unresponsive":"UPDATING"===e?"updating":t?"updateAvailable":"upToDate"},v=function(e){var t=e.id,n=e.type,a=e.isLabel,o=void 0!==a&&a,l=e.toolTipContent,d=void 0===l?"":l,p=e.className,v=void 0===p?"":p,g=e.isLink,f=Object.prototype.hasOwnProperty.call(m,n)?m[n]:m.default,b=f.text,E=f.Icon,h=f.color,y=f.labelColor;return i().createElement(i().Fragment,null,o?i().createElement(r._,{id:t,color:y,icon:i().createElement(E,null),className:v},b):i().createElement(s.P,{id:t,style:{color:h},className:v},i().createElement(u.J,{className:"pf-u-mr-sm"},d?i().createElement(c.u,{content:"blargh"},i().createElement(E,null)):i().createElement(E,null)),i().createElement(u.J,null,i().createElement("p",{style:g?{textDecoration:" grey dotted underline",cursor:"pointer"}:{}},b))))};const g=v;v.propTypes={id:l().string,type:l().string,isLabel:l().bool,toolTipContent:l().string,className:l().string,isLink:l().bool},v.defaultProps={id:"status"}},96094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(4942),i=n(15861),o=n(29439),l=n(64687),r=n.n(l),c=n(83215),s=n(92950),u=n(77760);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=function(e){var t,n=e.api,a=e.id,l=void 0===a?null:a,d=e.statusMessages,p=e.tableReload,v=void 0!==p&&p,g=(0,u.useDispatch)(),f=(0,s.useState)([]),b=(0,o.Z)(f,2),E=b[0],h=b[1],y=(0,s.useState)(!0),I=(0,o.Z)(y,2),S=I[0],k=I[1],D=(0,s.useState)(!1),O=(0,o.Z)(D,2),w=O[0],C=O[1],P=null===(t=d)||void 0===t?void 0:t.onSuccess;d||(d={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var T=function(){var e=(0,i.Z)(r().mark((function e(){var t,a,i=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",k(!0),e.prev=2,e.next=5,n({id:l,query:t});case 5:a=e.sent,h(a),P&&g(m({},(0,c.wN)(m({variant:"success"},d.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),C(!0),g(m({},(0,c.wN)(m({variant:"danger"},d.onError))));case 14:return e.prev=14,k(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){v||T()}),[]),[{data:E,isLoading:S,hasError:w},T]}},58392:()=>{},37625:()=>{},21064:()=>{},82014:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/364.986a571f2aadc763173849f8496bfcf1.js.map