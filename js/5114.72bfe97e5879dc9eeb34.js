(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[5114],{41825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var r=n(15861),c=n(64687),a=n.n(c),o=n(92950),s=n.n(o),u=n(45697),i=n.n(u),p=n(64124),l=n(96354),f=n(60722),d=n(87029),v=n(48903),b=n(32349),g=n(77760),m=n(28118),h=function(){var e=(0,r.Z)(a().mark((function e(){var t,n=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=n.length>0&&void 0!==n[0]?n[0]:"").length){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,(0,d.Tb)(t);case 5:if(!e.sent.data.isValid){e.next=8;break}throw"Group name already exists";case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,r.Z)(a().mark((function e(){var t,n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=r.length>0&&void 0!==r[0]?r[0]:"").length){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,(0,d.Qo)(t);case 5:if(!((n=e.sent).results.length>0&&n.results[0].name===t)){e.next=8;break}throw"Group name already exists";case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O={groupName:function(){return h}},w={groupName:function(){return y}},D={fields:[{component:l.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,autoFocus:!0,validate:[{type:"groupName"},{type:p.Z.REQUIRED},{type:p.Z.MAX_LENGTH,threshold:50},v.qg]}]},j=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,c=e.deviceIds,o=e.reloadData,u=(0,g.useDispatch)(),i=(0,m.Z)(!1),p=function(e){var t,n={onSuccess:{title:"Success",description:"".concat(e.name," has been created successfully")},onError:{title:"Error",description:"Failed to create group"}};return t=i?function(){return(0,d.D9)(e)}:function(){return(0,d.sS)(e)},(0,b.Z)(u,t,n)},l=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,o,s,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(t.name," successfully")},onError:{title:"Error",description:"Failed to add system to group"}},!i){e.next=9;break}return e.next=4,p(t);case 4:o=e.sent,s=o.id,r=function(){return(0,d.FP)(s,c)},e.next=14;break;case 9:return e.next=11,p(t);case 11:l=e.sent,f=l.ID,r=function(){return(0,d.e3)(parseInt(f),c)};case 14:(0,b.Z)(u,r,n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s().createElement(f.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Create group",submitLabel:"Create",schema:D,onSubmit:c?l:p,reloadData:o,validatorMapper:i?w:O})};const Z=j;j.propTypes={isModalOpen:i().bool,setIsModalOpen:i().func,reloadData:i().func,deviceIds:i().array}},87029:(e,t,n)=>{"use strict";n.d(t,{D9:()=>o,FP:()=>d,Ff:()=>h,OS:()=>p,Qo:()=>y,Tb:()=>m,VL:()=>i,_j:()=>g,e3:()=>f,jA:()=>s,sS:()=>a,tW:()=>v,ur:()=>b,xk:()=>u,yq:()=>l});var r=n(66702),c=n(93454),a=function(e){return c.instance.post("".concat(r.Ds,"/device-groups/"),{Name:e.name,Type:"static"})},o=function(e){return c.instance.post("".concat(r.$3,"/groups"),{name:e.name})},s=function(e){var t=e.query,n=(0,r.Vs)(t);return c.instance.get("".concat(r.Ds,"/device-groups?").concat(n))},u=function(e){var t=e.query,n=(0,r.Vs)(t);return c.instance.get("".concat(r.$3,"/groups?").concat(n))},i=function(e){var t=e.id,n=e.query,a=(0,r.Vs)(n);return c.instance.get("".concat(r.Ds,"/device-groups/").concat(t,"/view?").concat(a))},p=function(e,t){return c.instance.put("".concat(r.Ds,"/device-groups/").concat(e),{Name:t.name,Type:"static"})},l=function(e){return c.instance.delete("".concat(r.Ds,"/device-groups/").concat(e))},f=function(e,t){return c.instance.post("".concat(r.Ds,"/device-groups/").concat(e,"/devices"),{ID:e,Devices:t})},d=function(e,t){var n=[];return t.forEach((function(e){return n.push(e.UUID)})),c.instance.post("".concat(r.$3,"/groups/").concat(e,"/hosts"),n)},v=function(e,t){return c.instance.delete("".concat(r.Ds,"/device-groups/").concat(e,"/devices"),{data:{ID:e,Devices:t}})},b=function(e,t){return c.instance.delete("".concat(r.$3,"/groups/").concat(e,"/hosts/")+t.join(","))},g=function(e,t){return c.instance.delete("".concat(r.Ds,"/device-groups/").concat(e,"/devices/").concat(t))},m=function(e){return c.instance.get("".concat(r.Ds,"/device-groups/checkName/").concat(e))},h=function(){return c.instance.get("".concat(r.Ds,"/device-groups/enforce-edge-groups"))},y=function(e){return c.instance.get("".concat(r.$3,"/groups?name=").concat(e,"&order_by=name&order_how=ASC"))}},60722:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(15861),c=n(4942),a=n(87462),o=n(64687),s=n.n(o),u=n(92950),i=n.n(u),p=n(80236),l=n(79442),f=n(67850),d=n(41387),v=n(45697),b=n.n(v);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.isOpen,n=e.title,c=e.titleIconVariant,o=e.closeModal,u=e.submitLabel,v=e.schema,b=e.initialValues,g=e.variant,h=e.reloadData,y=e.size,O=e.onSubmit,w=e.additionalMappers,D=e.validatorMapper;return i().createElement(p.u,{variant:null!=y?y:"small",title:n,titleIconVariant:null!=c?c:null,isOpen:t,onClose:o},i().createElement(l.Z,{schema:v,validatorMapper:D,FormTemplate:function(e){return i().createElement(f.ZP,(0,a.Z)({},e,{submitLabel:u,disableSubmit:["invalid"],buttonsProps:{submit:{variant:g}}}))},initialValues:b,componentMapper:w?m(m({},w),d.ZP):d.ZP,onSubmit:function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:setTimeout((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),500),o();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onCancel:function(){return o()}}))};h.propTypes={isOpen:b().bool,title:b().string,closeModal:b().func,reloadData:b().func,submitLabel:b().string,schema:b().object,initialValues:b().object,variant:b().string,onSubmit:b().func,size:b().string,additionalMappers:b().object,titleIconVariant:b().any,validatorMapper:b().object};const y=h},96094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(4942),c=n(15861),a=n(29439),o=n(64687),s=n.n(o),u=n(83215),i=n(92950),p=n(77760);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=function(e){var t,n=e.api,r=e.id,o=void 0===r?null:r,l=e.statusMessages,d=e.tableReload,v=void 0!==d&&d,b=(0,p.useDispatch)(),g=(0,i.useState)([]),m=(0,a.Z)(g,2),h=m[0],y=m[1],O=(0,i.useState)(!0),w=(0,a.Z)(O,2),D=w[0],j=w[1],Z=(0,i.useState)(!1),S=(0,a.Z)(Z,2),x=S[0],E=S[1],P=(0,i.useState)((function(){return n})),k=(0,a.Z)(P,2),M=k[0],I=k[1],T=null===(t=l)||void 0===t?void 0:t.onSuccess;l||(l={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var V=function(){var e=(0,c.Z)(s().mark((function e(){var t,n,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",j(!0),e.prev=2,e.next=5,M({id:o,query:t});case 5:n=e.sent,y(n),T&&b(f({},(0,u.wN)(f({variant:"success"},l.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),E(!0),b(f({},(0,u.wN)(f({variant:"danger"},l.onError))));case 14:return e.prev=14,j(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){v||V()}),[]),[{data:h,isLoading:D,hasError:x},V,M,I]}},28118:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(15861),c=n(29439),a=n(64687),o=n.n(a),s=n(92950),u=n(48903),i=n(42559),p=n(87029);const l=function(e){var t=(0,s.useState)(e),n=(0,c.Z)(t,2),a=n[0],l=n[1],f=(0,u.gV)(i.h);return(0,s.useEffect)((function(){(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Ff)();case 2:t=e.sent,n=null==t?void 0:t.enforce_edge_groups,l(!n&&f);case 5:case"end":return e.stop()}}),e)})))()}),[]),a}},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},81754:()=>{},10497:()=>{},10108:()=>{},54476:()=>{},80897:()=>{},40837:()=>{},98379:()=>{},99624:()=>{},27479:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},40209:()=>{},38299:()=>{},72816:()=>{},45987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(63366);function c(e,t){if(null==e)return{};var n,c,a=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(c=0;c<o.length;c++)n=o[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}}}]);
//# sourceMappingURL=../sourcemaps/5114.292e9e0b2c14faaf60cb09dc9c73ffc0.js.map