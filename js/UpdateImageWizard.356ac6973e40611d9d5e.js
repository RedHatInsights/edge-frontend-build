"use strict";(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[46],{36621:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(70655),a=n(92950),r=n(49945),l=n(38296);const s=e=>{var{children:t,className:n,component:s="div",id:c,isLiveRegion:o=!1}=e,m=(0,i.__rest)(e,["children","className","component","id","isLiveRegion"]);const u=s;return a.createElement(u,Object.assign({id:c,className:(0,l.i)(r.Z.helperText,n)},o&&{"aria-live":"polite"},m),t)};s.displayName="HelperText"},65673:(e,t,n)=>{n.d(t,{u:()=>d});var i=n(70655),a=n(92950),r=n(49945),l=n(38296),s=n(80965),c=n(69957),o=n(68778),m=n(43047);const u={default:"",indeterminate:r.Z.modifiers.indeterminate,warning:r.Z.modifiers.warning,success:r.Z.modifiers.success,error:r.Z.modifiers.error},d=e=>{var{children:t,className:n,component:d="div",variant:p="default",icon:v,isDynamic:f=!1,hasIcon:g=f,id:h,screenReaderText:I=`${p} status`}=e,N=(0,i.__rest)(e,["children","className","component","variant","icon","isDynamic","hasIcon","id","screenReaderText"]);const b=d;return a.createElement(b,Object.assign({className:(0,l.i)(r.Z.helperTextItem,u[p],f&&r.Z.modifiers.dynamic,n),id:h},N),v&&a.createElement("span",{className:(0,l.i)(r.Z.helperTextItemIcon),"aria-hidden":!0},v),g&&!v&&a.createElement("span",{className:(0,l.i)(r.Z.helperTextItemIcon),"aria-hidden":!0},("default"===p||"indeterminate"===p)&&a.createElement(s.ZP,null),"warning"===p&&a.createElement(c.ZP,null),"success"===p&&a.createElement(o.ZP,null),"error"===p&&a.createElement(m.ZP,null)),a.createElement("span",{className:(0,l.i)(r.Z.helperTextItemText)},t,f&&a.createElement("span",{className:"pf-u-screen-reader"},": ",I,";")))};d.displayName="HelperTextItem"},78140:(e,t,n)=>{n.d(t,{T:()=>s,v:()=>i});var i,a=n(70655),r=n(92950),l=n(38296);!function(e){e.li="li",e.dt="dt",e.dd="dd"}(i||(i={}));const s=e=>{var{children:t=null,className:n="",component:s=i.li}=e,c=(0,a.__rest)(e,["children","className","component"]);const o=s;return r.createElement(o,Object.assign({},c,{className:(0,l.i)(n)}),t)};s.displayName="TextListItem"},49739:(e,t,n)=>{n.d(t,{K:()=>s});var i=n(70655),a=n(92950),r=n(73976),l=n(38296);const s=e=>{var{hasGutter:t=!1,className:n="",children:s=null,component:c="div"}=e,o=(0,i.__rest)(e,["hasGutter","className","children","component"]);const m=c;return a.createElement(m,Object.assign({},o,{className:(0,l.i)(r.Z.stack,t&&r.Z.modifiers.gutter,n)}),s)};s.displayName="Stack"},83826:(e,t,n)=>{n.d(t,{v:()=>s});var i=n(70655),a=n(92950),r=n(73976),l=n(38296);const s=e=>{var{isFilled:t=!1,className:n="",children:s=null}=e,c=(0,i.__rest)(e,["isFilled","className","children"]);return a.createElement("div",Object.assign({},c,{className:(0,l.i)(r.Z.stackItem,t&&r.Z.modifiers.fill,n)}),s)};s.displayName="StackItem"},80965:(e,t,n)=>{n.d(t,{V_:()=>r,ZP:()=>l,jm:()=>a});var i=n(40400);const a={name:"MinusIcon",height:512,width:448,svgPath:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",yOffset:0,xOffset:0},r=(0,i.IU)(a),l=r},49945:(e,t,n)=>{n.d(t,{Z:()=>i}),n(71338);const i={helperText:"pf-c-helper-text",helperTextItem:"pf-c-helper-text__item",helperTextItemIcon:"pf-c-helper-text__item-icon",helperTextItemText:"pf-c-helper-text__item-text",modifiers:{indeterminate:"pf-m-indeterminate",warning:"pf-m-warning",success:"pf-m-success",error:"pf-m-error",dynamic:"pf-m-dynamic"},themeDark:"pf-theme-dark"}},73976:(e,t,n)=>{n.d(t,{Z:()=>i}),n(53519);const i={modifiers:{fill:"pf-m-fill",gutter:"pf-m-gutter"},stack:"pf-l-stack",stackItem:"pf-l-stack__item"}},53010:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var i=n(93433),a=n(4942),r=n(15861),l=n(29439),s=n(64687),c=n.n(s),o=n(92950),m=n.n(o),u=n(61094),d=n(96354),p=n(25563),v=n(52643),f=n(29390),g=n(37619),h=n(45697),I=n.n(h),N=n(20873),b=n(94778),y=n(22058),_=n(59245),Z=n(5230),D=n(93597),x=n(83215),E=n(48903),w=n(98309);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n,a,s,h,I,O,k,j,P,S,R,U,C,B,V,L,G=e.navigateBack,M=e.updateImageID,A=e.reload,F=(0,o.useState)(),H=(0,l.Z)(F,2),z=H[0],K=H[1],$=(0,y.I0)(),q=function(){G(),A&&A()},J=(0,E.gV)("fleet-management.temporary-releases"),W=(0,E.gV)("edge-management.image_wizard_ui"),Y=(0,o.useContext)(_.g).getRegistry,Q=(0,y.v9)((function(e){var t=e.imageDetailReducer;return{data:(null==t?void 0:t.data)||null}}),y.wU).data;return(0,o.useEffect)((function(){var e=Y().register({imageDetailReducer:Z.OD});return M&&(0,b.J_)($,M),function(){return e()}}),[$]),(0,o.useEffect)((function(){(0,r.Z)(c().mark((function e(){var t,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(i=n.auth)||void 0===i||i.getUser().then((function(e){return K(null!=e?e:{})}));case 1:case"end":return e.stop()}}),e)})))()}),[]),z&&Q?m().createElement(u.Z,{onClose:q,customComponentMapper:{review:N.Z},onSubmit:function(e){var t,n,i,a,r,l=e.values;(0,e.setIsSaving)((function(){return!0}));var s=T(T({},l),{},{Id:null==Q||null===(t=Q.image)||void 0===t?void 0:t.ID,name:null==Q||null===(n=Q.image)||void 0===n?void 0:n.Name,version:(null==Q||null===(i=Q.image)||void 0===i?void 0:i.Version)+1,architecture:"x86_64",credentials:l.credentials?l.credentials:null==Q||null===(a=Q.image)||void 0===a?void 0:a.Installer.SshKey,username:l.username?l.username:null==Q||null===(r=Q.image)||void 0===r?void 0:r.Installer.Username});(0,b.Es)($,s,(function(e){$(T(T({},(0,x.wN)({variant:"info",title:"Updating image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,D.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,x.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,x.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))}]}}}})),q(),$((0,b.Fj)({name:Q.value.Name,id:Q.value.ID}))}))},defaultArch:"x86_64",initialValues:{imageID:null==Q?void 0:Q.image.ID,name:null==Q||null===(t=Q.image)||void 0===t?void 0:t.Name,isUpdate:!0,description:null==Q||null===(n=Q.image)||void 0===n?void 0:n.Description,credentials:null==Q||null===(a=Q.image)||void 0===a?void 0:a.Installer.SshKey,username:null==Q||null===(s=Q.image)||void 0===s?void 0:s.Installer.Username,version:null==Q||null===(h=Q.image)||void 0===h?void 0:h.Version,release:null==Q||null===(I=Q.image)||void 0===I?void 0:I.Distribution,release_options:J?(0,E.pS)(null==Q||null===(O=Q.image)||void 0===O?void 0:O.Distribution,[].concat((0,i.Z)(w.vk),(0,i.Z)(w.R8))):(0,E.pS)(null==Q||null===(k=Q.image)||void 0===k?void 0:k.Distribution),imageType:["rhel-edge-commit"],"selected-packages":null==Q||null===(j=Q.image)||void 0===j||null===(P=j.Packages)||void 0===P?void 0:P.map((function(e){return T(T({},e),{},{name:e.Name})})),"third-party-repositories":null==Q||null===(S=Q.image)||void 0===S||null===(R=S.ThirdPartyRepositories)||void 0===R?void 0:R.map((function(e){return T({id:e.ID,name:e.Name},e)})),"initial-custom-repositories":null==Q||null===(U=Q.image)||void 0===U||null===(C=U.ThirdPartyRepositories)||void 0===C?void 0:C.map((function(e){return T({id:e.ID,name:e.Name},e)})),"custom-packages":null==Q||null===(B=Q.image)||void 0===B||null===(V=B.CustomPackages)||void 0===V?void 0:V.map((function(e){return T(T({},e),{},{name:e.Name})}))},test:"",schema:{fields:[{component:d.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Update image"},showTitles:!0,title:"Update image: ".concat(null==Q||null===(L=Q.image)||void 0===L?void 0:L.Name),crossroads:["target-environment","release","imageType","third-party-repositories"],fields:[p.bR,p.Ud,p.l9,(0,p.jS)(W),p.B9,p.$B,p.j7,p.Sp]}]}}):m().createElement(f.Y,null,m().createElement(v.b,null,m().createElement(g.$,{isSVG:!0,diameter:"100px"})))};k.propTypes={navigateBack:I().func,updateImageID:I().number,reload:I().func},k.defaultProps={navigateBack:function(){}};const j=k}}]);
//# sourceMappingURL=../sourcemaps/UpdateImageWizard.e8fe2d6abd1b0780e9c4166c35314441.js.map