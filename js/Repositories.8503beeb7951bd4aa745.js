/*! For license information please see Repositories.8503beeb7951bd4aa745.js.LICENSE.txt */
(self.webpackChunkedge=self.webpackChunkedge||[]).push([[2363,1575],{74769:(e,t,a)=>{"use strict";t.w=void 0;const n=a(8674),r=n.__importStar(a(93345));let o=0;t.w=function({name:e,xOffset:t=0,yOffset:a=0,width:s,height:i,svgPath:l}){var c;return(c=class extends r.Component{constructor(){super(...arguments),this.id="icon-title-"+o++}render(){const e=this.props,{title:o,className:c}=e,d=n.__rest(e,["title","className"]),m=c?`pf-v5-svg ${c}`:"pf-v5-svg",p=Boolean(o),u=[t,a,s,i].join(" ");return r.createElement("svg",Object.assign({className:m,viewBox:u,fill:"currentColor","aria-labelledby":p?this.id:null,"aria-hidden":!p||null,role:"img",width:"1em",height:"1em"},d),p&&r.createElement("title",{id:this.id},o),r.createElement("path",{d:l}))}}).displayName=e,c}},98457:(e,t,a)=>{"use strict";t.Vw={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.Pi=a(74769).w(t.Vw),t.Ay=t.Pi},16594:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(74848),r=a(46942),o=a.n(r),s=a(93345);const i=a.n(s)().createContext("light");var l=a(69),c=function(){return c=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)};const d=function(e){var t=e.className,a=e.children,r=e.ouiaId,s=e.ouiaSafe,d=void 0===s||s,m=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["className","children","ouiaId","ouiaSafe"]),p=o()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),u="RHI/Header",h=(0,l.useOUIAId)(u,r,d);return(0,n.jsx)(i.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var s=o()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,n.jsx)("section",c({"data-ouia-component-type":u,"data-ouia-component-id":h,"data-ouia-safe":d},m,{className:"".concat(p," ").concat(s),"widget-type":"InsightsPageHeader",children:a}))}})}},16401:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(74848),r=a(46942),o=a.n(r),s=a(63068),i=a(69),l=a(86228),c=function(){return c=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)};const d=function(e){var t=e.className,a=e.title,r=e.actionsContent,d=e.ouiaId,m=e.ouiaSafe,p=void 0===m||m,u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),h=o()(t),f="RHI/Header",y=(0,i.useOUIAId)(f,d,p);return(0,n.jsxs)(l.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,n.jsx)(l.FlexItem,{className:"pf-v5-u-flex-grow-1",children:(0,n.jsx)(s.Title,c({headingLevel:"h1",size:"2xl",className:h,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":f,"data-ouia-component-id":y,"data-ouia-safe":p},u,{children:a}))}),r?(0,n.jsx)(l.FlexItem,{children:r}):null]})}},83120:(e,t,a)=>{var n=a(14528),r=a(45891);e.exports=function e(t,a,o,s,i){var l=-1,c=t.length;for(o||(o=r),i||(i=[]);++l<c;){var d=t[l];a>0&&o(d)?a>1?e(d,a-1,o,s,i):n(i,d):s||(i[i.length]=d)}return i}},45891:(e,t,a)=>{var n=a(51873),r=a(72428),o=a(56449),s=n?n.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(s&&e&&e[s])}},49246:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var n=a(93345),r=a.n(n),o=a(59409),s=a(18741),i=a(5556),l=a.n(i),c=a(95658),d=a(55833),m=a(55270),p=a(36870);const u=async(e="")=>{if(0!==e.length&&(await(0,s.qe)(e)).data.isValid)throw"Repository name already exists"},h={repoName:()=>u},f=({isOpen:e,closeModal:t,reloadData:a})=>{const n=(0,p.wA)(),i={fields:[{component:"plain-text",name:"title",label:"Link to a custom repository to add packages to RHEL for Edge images."},{component:"text-field",name:"name",label:"Name",placeholder:"Repository name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:"repoName"},{type:c.A.REQUIRED},{type:c.A.MAX_LENGTH,threshold:50},d.m0]},{component:"textarea",name:"baseURL",label:"BaseURL",placeholder:"https://",helperText:"Enter the baseURL for the custom repository.",isRequired:!0,validate:[{type:c.A.REQUIRED},{type:c.A.URL,message:"Must be a valid url"}]}]};return r().createElement(o.A,{title:"Add repository",isOpen:e,closeModal:()=>t({type:"add"}),submitLabel:"Add",schema:i,onSubmit:e=>{const t={onSuccess:{title:"Success",description:`${e.name} has been created successfully`},onError:{title:"Error",description:"Failed to create a repo"}};(0,m.A)(n,(()=>(0,s.kS)(e)),t)},reloadData:a,validatorMapper:h})};f.propTypes={closeModal:l().func,reloadData:l().func,isOpen:l().bool};const y=f;var b=a(8297);const g=({closeModal:e,isOpen:t,id:a,name:n,baseURL:i,reloadData:l})=>{const d=(0,p.wA)(),u={fields:[{component:"plain-text",name:"title",label:"Update information about this custom repository."},{component:"text-field",name:"name",label:"Name",placeholder:"Repository name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:c.A.REQUIRED}]},{component:"textarea",name:"baseURL",label:"BaseURL",placeholder:"https://",helperText:r().createElement(b.HelperText,null,r().createElement(b.HelperTextItem,{className:"pf-u-pb-md",variant:"warning",hasIcon:!0},"If you change the repo URL, you may not have access to the packages that were used to build images that reference this repository.")),isRequired:!0,validate:[{type:c.A.REQUIRED},{type:c.A.URL,message:"Must be a valid url"}]}]};return r().createElement(o.A,{title:"Edit repository",isOpen:t,closeModal:()=>e({type:"edit"}),submitLabel:"Update",schema:u,initialValues:{id:a,name:n,baseURL:i},onSubmit:e=>{const t={onSuccess:{title:"Success",description:`${e.name} has been edited successfully`},onError:{title:"Error",description:"Failed to edit a repository"}};(0,m.A)(d,(()=>(0,s._3)(e)),t)},reloadData:l})};g.propTypes={closeModal:l().func,reloadData:l().func,isOpen:l().bool,id:l().number,name:l().string,baseURL:l().string,setData:l().func};const v=g;var E=a(55729),R=a(98457),S=a(78126);const x=({label:e,text:t})=>r().createElement(E.TextContent,null,r().createElement(E.Text,{component:"b"},e),r().createElement(E.Text,null,t));x.propTypes={label:l().string,text:l().string};const A=()=>r().createElement(R.Ay,{color:S.Ay.value}),O=({closeModal:e,id:t,isOpen:a,name:n,baseURL:i,reloadData:l})=>{const c=(0,p.wA)(),d={fields:[{component:"plain-text",name:"description",label:"Removing a repository could affect your ability to update images."},{component:"plain-text",name:"name",label:r().createElement(x,{label:"Name",text:n})},{component:"plain-text",name:"baseURL",label:r().createElement(x,{label:"BaseURL",text:i})}]};return r().createElement(o.A,{title:"Remove repository",titleIconVariant:A,isOpen:a,closeModal:()=>e({type:"remove"}),submitLabel:"Remove",schema:d,initialValues:{id:t},variant:"danger",onSubmit:({id:e})=>{const t={onSuccess:{title:"Success",description:`${n} has been removed successfully`},onError:{title:"Error",description:"Failed to remove a repository"}};(0,m.A)(c,(()=>(0,s.Ms)(e)),t)},reloadData:l})};O.propTypes={closeModal:l().func,reloadData:l().func,isOpen:l().bool,id:l().number,name:l().string,baseURL:l().string,setData:l().func};const L=O;var w=a(50861),I=a(62316),M=a.n(I),U=a(7475);const T=[{label:"Name",type:"text"}],_=({data:e,count:t,isLoading:a,hasError:n,fetchRepos:o,closeModal:s,hasModalSubmitted:i,setHasModalSubmitted:l})=>{const c=e.map((({ID:e,Name:t,URL:a})=>({rowInfo:{id:e,repoName:t,repoBaseURL:a},cells:[{title:r().createElement(r().Fragment,null,r().createElement(E.Text,{className:"pf-u-mb-xs",component:E.TextVariants.p},r().createElement(U.Tooltip,{content:r().createElement("div",null,t)},r().createElement("span",null,(0,d.W5)(t,20)))),r().createElement(E.Text,{component:E.TextVariants.a,href:a,target:"_blank",rel:"noopener noreferrer"},a," ",r().createElement(M(),{className:"pf-u-ml-sm"})))}]})));return r().createElement(r().Fragment,null,r().createElement(w.A,{apiFilterSort:!0,isUseApi:!0,loadTableData:o,filters:T,tableData:{count:t,data:e,isLoading:a,hasError:n},columnNames:[{title:"Name",type:"name",sort:!0}],rows:c,actionResolver:e=>{if(!e.rowInfo)return[];const{id:t,repoName:a,repoBaseURL:n}=e.rowInfo;return[{title:"Edit",onClick:()=>s({type:"edit",id:t,name:a,baseURL:n})},{title:"Remove",onClick:()=>s({type:"remove",id:t,name:a,baseURL:n})}]},areActionsDisabled:()=>!1,defaultSort:{index:0,direction:"asc"},toolbarButtons:[{title:"Add repository",click:()=>s({type:"add"})}],hasModalSubmitted:i,setHasModalSubmitted:l}))};_.propTypes={data:l().array,count:l().number,isLoading:l().bool,hasError:l().bool,fetchRepos:l().func,closeModal:l().func,hasModalSubmitted:l().bool,setHasModalSubmitted:l().func};const N=_;var j=a(16594),D=a(16401);const k=()=>r().createElement(j.A,null,r().createElement(r().Fragment,null,r().createElement(D.A,{title:"Custom repositories"}),r().createElement("p",{className:"pf-u-mt-sm"},"Add custom repositories to build RHEL for Edge images with additional packages.")));var C=a(78259),H=a(61574),$=a(78185),F=a(90555),P=a(2703),z=a(22357);const q=()=>r().createElement(r().Fragment,null,r().createElement(j.A,null,r().createElement(E.TextContent,null,r().createElement(E.Text,{component:"h1",id:"custom-repos-title"},"Custom repositories"))),r().createElement(P.EmptyState,{id:"moved-state"},r().createElement(P.EmptyStateHeader,{titleText:"Custom repositories have moved",icon:r().createElement(P.EmptyStateIcon,{id:"external-link-icon",icon:M()}),headingLevel:"h4"}),r().createElement(P.EmptyStateBody,{id:"moved-state-body"},"You can now use your custom repositories across the console. Access them on the Repositories page."),r().createElement(P.EmptyStateFooter,null,r().createElement(F.Button,{id:"moved-state-button",variant:"primary",component:"a",target:"_blank",href:`https://${window.location.host}/preview/insights/content`},"Go to Repositories"),r().createElement(P.EmptyStateActions,null,r().createElement(F.Button,{id:"moved-state-link",variant:"link",component:"a",target:"_blank",href:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/create_rhel_for_edge_images_and_configure_automated_management/index#proc_rhem-create-custom-repos"},"Learn more about custom repositories",r().createElement(z.Icon,{style:{paddingLeft:"1rem"},iconSize:"md",size:"lg",isInline:!0},r().createElement(M(),null)))))));var V=a(20881);const B=()=>{const e=(0,V.A)(),t=(0,d.h)("edge-management.custom_repos_ui");(0,n.useEffect)((()=>{e?.updateDocumentTitle?.("Custom Repositories - Manage Images | Edge management")}),[e]);const{search:a}=(0,H.zy)(),[o,i]=(0,C.A)({api:({query:e})=>(0,s.iQ)({imageID:"",query:e}),tableReload:!0}),{data:l,isLoading:c,hasError:m}=o,[p,u]=(0,n.useState)({isOpen:{add:!1,edit:!1,remove:!1},id:null,name:"",baseURL:""}),[h,f]=(0,n.useState)(!1),b=({type:e,id:t=null,name:a="",baseURL:n=""})=>{u((r=>({...r,id:t,name:a,baseURL:n,isOpen:{...r.isOpen,[e]:!r.isOpen[e]}})))},g=async()=>{await i(),f(!0)};return r().createElement(r().Fragment,null,t?r().createElement(q,null):r().createElement(r().Fragment,null,r().createElement(k,null),r().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},r().createElement(r().Fragment,null,(0,d.Rj)(c,l?.count,a)?r().createElement($.A,{icon:"repository",title:"Add a custom repository",body:"Add custom repositories to build RHEL for Edge images with additional packages.",primaryAction:{text:"Add repository",click:()=>b({type:"add"})}}):r().createElement(N,{data:l?.data||[],count:l?.count,closeModal:b,isLoading:c,hasError:m,fetchRepos:i,hasModalSubmitted:h,setHasModalSubmitted:f})),r().createElement(y,{isOpen:p.isOpen.add,closeModal:b,reloadData:g}),r().createElement(v,{isOpen:p.isOpen.edit,id:p.id,name:p.name,baseURL:p.baseURL,closeModal:b,reloadData:g}),r().createElement(L,{isOpen:p.isOpen.remove,id:p.id,name:p.name,baseURL:p.baseURL,closeModal:b,reloadData:g}))))}},18741:(e,t,a)=>{"use strict";a.d(t,{Ms:()=>l,_3:()=>i,iQ:()=>o,kS:()=>s,qe:()=>c});var n=a(11268),r=a(56830);const o=({imageID:e="",query:t})=>{const a=(0,n.Lm)(t);return r.instance.get(`${n.rm}/thirdpartyrepo?${e?`imageID=${e}&`:""}${a}`)},s=e=>r.instance.post(`${n.rm}/thirdpartyrepo`,{Name:e.name,URL:e.baseURL}),i=e=>r.instance.put(`${n.rm}/thirdpartyrepo/${e.id}`,{Name:e.name,URL:e.baseURL}),l=e=>r.instance.delete(`${n.rm}/thirdpartyrepo/${e}`),c=e=>r.instance.get(`${n.rm}/thirdpartyrepo/checkName/${e}`)},59409:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var n=a(93345),r=a.n(n),o=a(48263),s=a(97744),i=a(63537),l=a(24408),c=a(5556),d=a.n(c);const m=({isOpen:e,title:t,titleIconVariant:a,closeModal:n,submitLabel:c,schema:d,initialValues:m,variant:p,reloadData:u,size:h,onSubmit:f,additionalMappers:y,validatorMapper:b})=>r().createElement(o.Modal,{variant:h??"small",title:t,titleIconVariant:a??null,isOpen:e,onClose:n},r().createElement(s.A,{schema:d,validatorMapper:b,FormTemplate:e=>r().createElement(i.Ay,{...e,submitLabel:c,disableSubmit:["invalid"],buttonsProps:{submit:{variant:p}}}),initialValues:m,componentMapper:y?{...y,...l.Ay}:l.Ay,onSubmit:async e=>{await f(e),setTimeout((async()=>await u()),500),n()},onCancel:()=>n()}));m.propTypes={isOpen:d().bool,title:d().string,closeModal:d().func,reloadData:d().func,submitLabel:d().string,schema:d().object,initialValues:d().object,variant:d().string,onSubmit:d().func,size:d().string,additionalMappers:d().object,titleIconVariant:d().any,validatorMapper:d().object};const p=m},78259:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(11830),r=a(93345),o=a(36870);const s=({api:e,id:t=null,statusMessages:a,tableReload:s=!1})=>{const i=(0,o.wA)(),[l,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!0),[p,u]=(0,r.useState)(!1),[h,f]=(0,r.useState)((()=>e)),y=a?.onSuccess;a||(a={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});const b=async(e="")=>{m(!0);try{const r=await h({id:t,query:e});c(r),y&&i({...(0,n.z8)({variant:"success",...a.onSuccess})})}catch(e){u(!0),i({...(0,n.z8)({variant:"danger",...a.onError})})}finally{m(!1)}};return(0,r.useEffect)((()=>{s||b()}),[]),[{data:l,isLoading:d,hasError:p},b,h,f]}},55270:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(11830);const r=(e,t,a,r)=>{const o=a?.onSuccess,s=a?.onInfo,i=a?.onWarning;return a||(a={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}}),(async()=>{try{const l=await t();return s&&(r?r.hasInfo(a.onInfo):e({...(0,n.z8)({variant:"info",...a.onInfo})})),o&&(r?r.hasSuccess(a.onSuccess):e({...(0,n.z8)({variant:"success",...a.onSuccess})})),i&&(r?r.hasWarning(a.onWarning):e({...(0,n.z8)({variant:"warning",...a.onWarning})})),l}catch(t){return r?r.err(a.onError,t):e({...(0,n.z8)({variant:"danger",...a.onError,description:t?.Title?`${a.onError.description}: ${t.Title}`:a.onError.description})}),t}})()}},25823:()=>{},16369:()=>{},62275:()=>{},89205:()=>{},20681:()=>{},46942:(e,t)=>{var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=s(e,o(a)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)n.call(e,a)&&e[a]&&(t=s(t,a));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()}}]);