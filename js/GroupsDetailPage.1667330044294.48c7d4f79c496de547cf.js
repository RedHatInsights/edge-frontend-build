(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[673],{40149:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ue});var a=n(4942),r=n(15861),o=n(29439),i=n(87757),l=n.n(i),c=n(93264),s=n.n(c),u=n(75662),d=n(50693),m=n(16475),p=n(64029),f=n(32835),v=n(52643),g=n(37619),b=n(56455),y=n(48716),h=n(38775),E=n(53895),O=n(28216),I=n(87462),S=n(91290),D=n(75824),w=n(6636),Z=n(47173),k=n(45697),j=n.n(k),M=function(e){var t=e.title,n=e.content;return s().createElement(s().Fragment,null,s().createElement("span",null,t),s().createElement(w.J,{headerContent:s().createElement("div",null,t),bodyContent:s().createElement("div",null,n)},s().createElement(Z.zx,{variant:"plain","aria-label":"Action for ".concat(t),className:"ins-active-general_information__popover-icon"},s().createElement(S.ZP,null))))};M.propTypes={title:j().string,content:j().string};const P=M;var C=n(35451),T=n(84564),N=n(18802),R=function(e){var t=e.status;return"green"===t?s().createElement(s().Fragment,null,s().createElement(C.ZP,{color:"green",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-success-color-200"},"Passed")):"red"===t?s().createElement(s().Fragment,null,s().createElement(T.ZP,{color:"red",className:"pf-u-mr-sm"}),s().createElement("span",{className:"pf-u-danger-color-200"},"Failed and reverted")):s().createElement(s().Fragment,null,s().createElement(N.ZP,{className:"pf-u-mr-sm"}),s().createElement("span",null,"Waiting for update"))};R.propTypes={status:j().string};const U=R;var x=n(22663),_=n(54025),A=n(50383),L=function(e){for(var t=e.numberOfRows,n=[],a=0;a<t;a++)n.push(s().createElement(s().Fragment,{key:a},s().createElement(A.O,null),s().createElement("br",null)));return s().createElement(s().Fragment,null,n)};const G=L;L.propTypes={numberOfRows:k.PropTypes.number};var F=function(e){return s().createElement(x.Z,(0,I.Z)({appName:"inventory",module:"./GeneralInformation",fallback:s().createElement(G,{numberOfRows:3})},e))},V=function(e){return s().createElement(x.Z,(0,I.Z)({appName:"inventory",module:"./SystemCard",fallback:s().createElement(G,{numberOfRows:5})},e))},z=function(e){return s().createElement(x.Z,(0,I.Z)({appName:"inventory",module:"./OperatingSystemCard",fallback:s().createElement(G,{numberOfRows:6})},e))},H=function(e){return s().createElement(x.Z,(0,I.Z)({appName:"inventory",module:"./BiosCard",fallback:s().createElement(G,{numberOfRows:4})},e))},B=function(e){return s().createElement(x.Z,(0,I.Z)({appName:"inventory",module:"./CollectionCard",fallback:s().createElement(G,{numberOfRows:7})},e))},W=function(e){return s().createElement(x.Z,(0,I.Z)({appName:"inventory",module:"./InfrastructureCard",fallback:s().createElement(G,{numberOfRows:6})},e))},q=(0,c.lazy)((function(){return n.e(66).then(n.bind(n,39066))}));const $=function(){var e=(0,_.useLoadModule)({appName:"inventory",scope:"inventory",module:"./dataMapper"},{}),t=(0,o.Z)(e,1)[0].statusHelper,n=(0,O.v9)((function(e){var t=e.permissionsReducer;return null==t?void 0:t.writePermissions})),a=(0,O.v9)((function(e){var t,n=e.systemProfileStore;return{greenbootStatus:null==n||null===(t=n.systemProfile)||void 0===t?void 0:t.greenboot_status,rhcHealth:null}})),r=a.greenbootStatus,i=a.rhcHealth,l=(0,O.oR)();return s().createElement(c.Suspense,{fallback:""},s().createElement(F,{store:l,writePermissions:n,SystemCardWrapper:function(e){return s().createElement(c.Suspense,{fallback:""},s().createElement(V,(0,I.Z)({},e,{store:l,hasCPUs:!1,hasSockets:!1,hasCores:!1,hasCPUFlags:!1,hasRAM:!1,hasSAP:!1,extra:[{title:s().createElement(P,{title:"GreenBoot Status",content:"This is a description about greenboot status"}),value:s().createElement(U,{status:r})}]})))},OperatingSystemCardWrapper:function(e){return s().createElement(c.Suspense,{fallback:""}," ",s().createElement(W,(0,I.Z)({},e,{store:l})))},BiosCardWrapper:function(e){return s().createElement(c.Suspense,{fallback:""}," ",s().createElement(q,(0,I.Z)({},e,{store:l})))},InfrastructureCardWrapper:function(e){return s().createElement(c.Suspense,{fallback:""},s().createElement(H,(0,I.Z)({},e,{store:l})))},ConfigurationCardWrapper:function(e){return s().createElement(c.Suspense,{fallback:""},s().createElement(z,(0,I.Z)({},e,{hasKernelModules:!0,store:l})))},CollectionCardWrapper:function(e){return s().createElement(c.Suspense,{fallback:""},s().createElement(B,(0,I.Z)({},e,{extra:[{title:"RHC Health (broker functioning)",value:(null==t?void 0:t[null==i?void 0:i.toUpperCase()])||s().createElement(D.u,{content:"Unknown service status"},s().createElement(S.ZP,{className:"ins-c-inventory__detail--unknown"}))}],store:l})))}}))};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=(0,n(9036).Gg)({LOAD_ENTITY_FULFILLED:function(e){return X(X({},e),{},{loaded:!0,activeApps:[{title:"General information",name:"general_information",component:$}]})}}),Y=n(59245),J=n(68259),ee=n(14638),te=n(28883),ne=n(29873),ae=n(33902),re=n(41448),oe=n(86350),ie=n(94768),le=n(80236),ce=n(68340),se=n(68774),ue=n(78140),de=n(25834),me=n(29390),pe=n(98309),fe=n(5230),ve=n(94778),ge=n(83215),be=n(93597);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=function(e){var t,n,a,r,o,i,l=e.updateCveModal,u=e.setUpdateCveModal,d=e.setReload,m=(0,O.I0)(),p=(0,c.useContext)(Y.g).getRegistry,f=(0,O.v9)((function(e){var t=e.imageDetailReducer;return{data:(null==t?void 0:t.data)||null}}),O.wU).data;(0,c.useEffect)((function(){var e=p().register({imageDetailReducer:fe.OD});return(null==l?void 0:l.imageId)&&(0,ve.J_)(m,null==l?void 0:l.imageId),function(){return e()}}),[m]);var b=function(){u((function(e){return he(he({},e),{},{isOpen:!1})}))};return f?s().createElement(le.u,{variant:"medium",title:"Update image: ".concat(null==f||null===(t=f.image)||void 0===t?void 0:t.Name),description:"Review the information and click Update image to start the build process",isOpen:l.isOpen,onClose:b,actions:[s().createElement(Z.zx,{key:"confirm",variant:"primary",onClick:function(){var e,t,n,a,r,o,i,l,c,s,u={Id:null==f||null===(e=f.image)||void 0===e?void 0:e.ID,description:null==f||null===(t=f.image)||void 0===t?void 0:t.Description,name:null==f||null===(n=f.image)||void 0===n?void 0:n.Name,version:(null==f||null===(a=f.image)||void 0===a?void 0:a.Version)+1,architecture:"x86_64",credentials:null==f||null===(r=f.image)||void 0===r?void 0:r.Installer.SshKey,username:null==f||null===(o=f.image)||void 0===o?void 0:o.Installer.Username,imageType:null==f||null===(i=f.image)||void 0===i?void 0:i.OutputTypes,"selected-packages":null==f||null===(l=f.image)||void 0===l||null===(c=l.Packages)||void 0===c?void 0:c.map((function(e){return{name:e.Name}})),release:null==f||null===(s=f.image)||void 0===s?void 0:s.Distribution};b(),d(!0),(0,ve.Es)(m,u,(function(e){var t,n;m(he(he({},(0,ge.wN)({variant:"info",title:"Update image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,be.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,ge.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,ge.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))},function(e){return(0,ve.n9)(e)}]}}}})),(0,ve.n9)(m),m((0,ve.Fj)({name:null==f||null===(t=f.image)||void 0===t?void 0:t.Name,id:null==f||null===(n=f.image)||void 0===n?void 0:n.ID}))}))}},"Update Image"),s().createElement(Z.zx,{key:"cancel",variant:"link",onClick:b},"Cancel")]},s().createElement(se.D,null,s().createElement(ue.T,{component:ce.q.h3},s().createElement(ce.x,{component:"b"},"Details")),s().createElement(de.G,{component:de.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Name"),s().createElement(ue.T,{component:ue.v.dd},null==f||null===(n=f.image)||void 0===n?void 0:n.Name),s().createElement(ue.T,{component:ue.v.dt},"Version"),s().createElement(ue.T,{component:ue.v.dd},(null==f||null===(a=f.image)||void 0===a?void 0:a.Version)+1),s().createElement(ue.T,{component:ue.v.dt},"Description"),s().createElement(ue.T,{component:ue.v.dd},null==f||null===(r=f.image)||void 0===r?void 0:r.Description)),s().createElement(ue.T,{component:ce.q.h3},s().createElement(ce.x,{component:"b"},"Output")),s().createElement(de.G,{component:de.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Release"),s().createElement(ue.T,{component:ue.v.dd},pe.Ei[null==f||null===(o=f.image)||void 0===o?void 0:o.Distribution]),s().createElement(ue.T,{component:ue.v.dt},"Output type"),s().createElement(ue.T,{component:ue.v.dd},pe.bd[null==f||null===(i=f.image)||void 0===i?void 0:i.ImageType])),s().createElement(ue.T,{component:ce.q.h3},s().createElement(ce.x,{component:"b"},"Packages")),s().createElement(de.G,{component:de.F.dl},s().createElement(ue.T,{component:ue.v.dt},"Updated"),s().createElement(ue.T,{className:"pf-u-pl-lg",component:ue.v.dd},null==l?void 0:l.cveCount)))):s().createElement(me.Y,null,s().createElement(v.b,null,s().createElement(g.$,{isSVG:!0,diameter:"100px"})))};Ee.propTypes={updateCveModal:j().shape({isOpen:j().bool.isRequired,imageId:j().string,cveCount:j().number}).isRequired,setUpdateCveModal:j().func.isRequired,setReload:j().bool};const Oe=Ee;function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(e){var t=e.deviceData,n=e.setUpdateModal,a=e.imageId,i=e.setReload,d=(0,u.useRouteMatch)("/inventory/:deviceId").params,m=(0,c.useContext)(Y.g).getRegistry,p=(0,c.useState)({isOpen:!1,imageId:null,cveCount:0}),f=(0,o.Z)(p,2),v=f[0],g=f[1],b=(0,c.useState)(null),y=(0,o.Z)(b,2),h=y[0],E=y[1],O=(0,c.useState)(null),I=(0,o.Z)(O,2),S=I[0],D=I[1],w=(0,c.useState)("noAlert"),k=(0,o.Z)(w,2),j=k[0],M=k[1];(0,c.useEffect)((function(){g((function(e){return Se(Se({},e),{},{imageId:a})}))}),[a]),(0,c.useEffect)((function(){(0,r.Z)(l().mark((function e(){var n,a,r,o,i,c,s,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return s={id:null==t||null===(n=t.ImageInfo)||void 0===n||null===(a=n.Image)||void 0===a?void 0:a.ImageSetID},e.next=5,(0,be.dt)(s);case 5:u=e.sent,D(null==u||null===(r=u.Data)||void 0===r||null===(o=r.images)||void 0===o||null===(i=o[0])||void 0===i||null===(c=i.image)||void 0===c?void 0:c.Status);case 7:case"end":return e.stop()}}),e)})))()}),[t]),(0,c.useEffect)((function(){var e;(null==h||!h.isLoading)&&(null==h||null===(e=h.meta)||void 0===e||!e.filter)&&g((function(e){var t;return Se(Se({},e),{},{cveCount:null==h||null===(t=h.data)||void 0===t?void 0:t.length})})),M((function(e){return function(e,t,n,a,r){var o,i,l,c,s;return null!=e&&e.isLoading||null!=e&&null!==(o=e.meta)&&void 0!==o&&o.filter||!t?r:!(null!=e&&null!==(i=e.data)&&void 0!==i&&i.length)>0||!a?"noAlert":"BUILDING"===(null==t||null===(l=t.UpdateTransactions[0])||void 0===l?void 0:l.Status)||"CREATED"===(null==t||null===(c=t.UpdateTransactions[0])||void 0===c?void 0:c.Status)?"systemUpdating":null!=t&&null!==(s=t.Device)&&void 0!==s&&s.UpdateAvailable?"updateDevice":"BUILDING"===n||"CREATED"===n?"imageBuilding":"updateImage"}(h,t,S,a,e)}))}),[h,t,S,a]);var P={updateImage:s().createElement(re.b,{className:"pf-u-mb-md",variant:"info",isInline:!0,title:"To remediate CVEs, update the image.",actionLinks:s().createElement(Z.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){g((function(e){return Se(Se({},e),{},{isOpen:!0})}))}},"Update Image")}),imageBuilding:s().createElement(re.b,{className:"pf-u-mb-md",customIcon:s().createElement(ie.ZP,null),variant:"info",isInline:!0,title:"Image build in progress. Once completed, you'll need to update your system."}),updateDevice:s().createElement(re.b,{className:"pf-u-mb-md",variant:"warning",isInline:!0,title:" Image build completed. Update system to the newest image version to remediate CVEs.",actionLinks:s().createElement(Z.zx,{className:"pf-u-mt-sm",isSmall:!0,onClick:function(){n((function(e){return Se(Se({},e),{},{isOpen:!0})}))}},"Update system")}),systemUpdating:s().createElement(re.b,{className:"pf-u-mb-md",customIcon:s().createElement(ie.ZP,null),variant:"info",isInline:!0,title:"System updating. No additional actions required."}),noAlert:s().createElement(s().Fragment,null)};return s().createElement(s().Fragment,null,s().createElement(oe.Z,{className:"add-100vh"},P[j],s().createElement(x.Z,{appName:"vulnerability",module:"./SystemDetail",getRegistry:m,customIntlProvider:!0,entity:{id:d.deviceId},canSelect:!1,canEditPairStatus:!1,canManageColumns:!1,linkToCustomerPortal:!0,defaultColumns:["synopsis","public_date","impact","cvss_score","advisory"],filters:["filter","security_rule","known_exploit","impact","cvss_score","advisory"],customAction:function(e){E(e)}})),v.isOpen&&s().createElement(Oe,{updateCveModal:v,setUpdateCveModal:g,setReload:i}))};De.propTypes={imageId:j().number,deviceData:j().object,setUpdateModal:j().func,setReload:j().func};const we=De;var Ze=function(e){var t=e.systemProfile,n=e.imageId,a=e.setUpdateModal,r=e.setReload,i=(0,c.useState)(0),l=(0,o.Z)(i,2),u=l[0],d=l[1];return s().createElement("div",{className:"edge-c-device--detail add-100vh"},s().createElement(ee.m,{className:"pf-u-ml-md",activeKey:u,onSelect:function(e,t){return d(t)}},s().createElement(te.O,{eventKey:0,title:s().createElement(ne.T,null,"Details")},s().createElement(ae.Z,{showTags:!0,fallback:""})),s().createElement(te.O,{eventKey:1,title:s().createElement(ne.T,null,"Vulnerability")},s().createElement(we,{deviceData:t,setUpdateModal:a,imageId:n,setReload:r}))))};Ze.propTypes={imageId:j().number,systemProfile:j().object,setUpdateModal:j().func,setReload:j().func};const ke=Ze;var je=n(8027),Me=n(35681),Pe=n(96094),Ce=n(18098);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=s().lazy((function(){return Promise.all([n.e(874),n.e(344)]).then(n.bind(n,68940))}));const Ue=function(){var e,t,n,a,i,I,S,D,w=(0,c.useState)(null),Z=(0,o.Z)(w,2),k=Z[0],j=Z[1],M=(0,c.useContext)(Y.g).getRegistry,P=(0,u.useParams)().deviceId,C=(0,O.v9)((function(e){var t=e.entityDetails;return null==t?void 0:t.entity})),T=(0,c.useState)(),N=(0,o.Z)(T,2),R=N[0],U=N[1],x=(0,c.useState)({isOpen:!1,deviceData:null}),_=(0,o.Z)(x,2),A=_[0],L=_[1],G=(0,c.useState)(!0),F=(0,o.Z)(G,2),V=F[0],z=F[1],H=(0,c.useState)(!1),B=(0,o.Z)(H,2),W=B[0],q=B[1];(0,c.useEffect)((function(){var e,t;insights.chrome.registerModule("inventory"),null===(e=insights.chrome)||void 0===e||null===(t=e.hideGlobalFilter)||void 0===t||t.call(e,!0),insights.chrome.appAction("system-detail")}),[]);var $=(0,Pe.Z)({api:function(){return(0,je.$v)({query:{uuid:P}})}}),Q=(0,o.Z)($,2),X=Q[0],ee=Q[1],te=(null===(e=X.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.devices)||[],ne=(0,o.Z)(te,1)[0],ae=ne||{},re=ae.Status,oe=ae.UpdateAvailable,ie=ae.DispatcherStatus,le=ae.LastSeen,ce=(0,Me.u)(re,oe,ie);return(0,c.useEffect)((function(){(0,r.Z)(l().mark((function e(){var t,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.display_name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,je.Z4)(P);case 4:a=e.sent,U(a),z(!1),L((function(e){var t,n;return Ne(Ne({},e),{},{deviceData:[{display_name:C.display_name,id:C.id,deviceStatus:ce}],imageSetId:null==a||null===(t=a.ImageInfo)||void 0===t||null===(n=t.Image)||void 0===n?void 0:n.ImageSetID})})),j(null==a||null===(t=a.ImageInfo)||void 0===t||null===(n=t.Image)||void 0===n?void 0:n.ID);case 9:case"end":return e.stop()}}),e)})))()}),[C,W]),s().createElement(s().Fragment,null,s().createElement(h.Z,{hideInvLink:!0,showTags:!0,onLoad:function(e){var t=e.mergeWithDetail;M().register(Ne({systemProfileStore:J.ZP},t(K)))}},s().createElement(y.Z,null,s().createElement(p.a,{ouiaId:"systems-list"},s().createElement(f.g,null,s().createElement(u.Link,{to:"/inventory"},"Systems")),s().createElement(f.g,{isActive:!0},s().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},(null==C?void 0:C.display_name)||s().createElement(b.Z,{size:b.i.xs})))),s().createElement(E.Z,{fallback:"",actions:[{title:"Update",isDisabled:"BUILDING"===(null==R||null===(n=R.UpdateTransactions)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.Status)||"CREATED"===(null==R||null===(i=R.UpdateTransactions)||void 0===i||null===(I=i[0])||void 0===I?void 0:I.Status)||!(null!=R&&null!==(S=R.ImageInfo)&&void 0!==S&&null!==(D=S.UpdatesAvailable)&&void 0!==D&&D.length)>0||!A.imageSetId,onClick:function(){L((function(e){return Ne(Ne({},e),{},{isOpen:!0})}))}}],hideBack:!0,hideInvDrawer:!0}),V?s().createElement(b.Z,{size:b.i.xs}):"error"===ce||"unresponsive"===ce?s().createElement(Ce.Z,{lastSeen:le,device:ne,position:"right",fetchDevices:ee},s().createElement(Me.Z,{type:"error"===ce?"errorWithExclamationCircle":ce,isLink:!0,isLabel:!0,className:"pf-u-mt-sm cursor-pointer"})):s().createElement(Me.Z,{type:ce,isLabel:!0,className:"pf-u-mt-sm"})),s().createElement(d.r,{gutter:"md"},s().createElement(m.P,{span:12},s().createElement(ke,{systemProfile:R,imageId:k,setUpdateModal:L,setReload:q}))),A.isOpen&&s().createElement(c.Suspense,{fallback:s().createElement(v.b,null,s().createElement(g.$,null))},s().createElement(Re,{navigateBack:function(){history.push({pathname:history.location.pathname}),L((function(e){return Ne(Ne({},e),{},{isOpen:!1})}))},setUpdateModal:L,updateModal:A,refreshTable:function(){return q(!0)}}))))}},15656:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var a=n(4942),r=n(93264),o=n.n(r),i=n(73448),l=n(45697),c=n.n(l),s=n(9192),u=n(75662),d=n(62410),m=n(27577),p=n(75824),f=n(3035),v=n(48903),g=n(35681),b=n(18098);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=[{label:"Name",type:"text"},{label:"Status",type:"checkbox",options:[{option:"Update available",value:"updateAvailable"}]}],O=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,m.cellWidth)(30)]},{title:"Image",type:"image",sort:!1,columnTransforms:[(0,m.cellWidth)(20)]},{title:"Groups",type:"groups",sort:!1,columnTransforms:[(0,m.cellWidth)(15)]},{title:"Last seen",type:"last_seen",sort:!0,columnTransforms:[(0,m.cellWidth)(15)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,m.cellWidth)(25)]}],I=function(e,t,n){return null==e?void 0:e.map((function(e){var a=e.DeviceName,r=e.DeviceGroups,i=e.DeviceID,l=e.DeviceUUID,c=e.UpdateAvailable,m=e.LastSeen,f=e.ImageName,v=e.ImageSetID,y=e.Status,h=e.DispatcherStatus,E=(0,g.u)(y,c,h);""===a&&(a="localhost"),null===r&&(r=[]);var O=o().createElement("div",null,o().createElement(p.u,{content:o().createElement("div",null,r.map((function(e,t){return o().createElement("p",{key:t},e.Name)})))},o().createElement("span",null,"Multiple groups")));return{rowInfo:{deviceID:i,id:l,display_name:a,updateImageData:c,deviceStatus:(0,g.u)(y,c,h),imageSetId:v,imageName:f,deviceGroups:r},noApiSortFilter:[a||"",f||"","",m||"",(0,g.u)(y,c)],cells:[{title:t?o().createElement(u.Link,{to:"".concat(s._.inventory,"/").concat(l)},a):a},{title:f?t?o().createElement(u.Link,{to:"".concat(s._["manage-images"],"/").concat(v,"/")},f):f:"unavailable"},{title:0===r.length?"-":1===r.length?r[0].Name:O},{title:m?o().createElement(d.Z,{date:m}):"Unknown"},{title:"error"===E||"unresponsive"===E?o().createElement(b.Z,{lastSeen:m,fetchDevices:n,device:e},o().createElement(g.Z,{type:"error"===E?"errorWithExclamationCircle":E,isLink:!0})):o().createElement(g.Z,{type:"error"===E?"errorWithExclamationCircle":E})}]}}))},S=function(e){var t=e.hasCheckbox,n=void 0!==t&&t,a=e.selectedItems,r=e.selectedItemsUpdateable,l=e.skeletonRowQuantity,c=e.data,s=e.count,d=e.isLoading,m=e.hasError,p=e.setUpdateModal,g=e.kebabItems,b=e.setRemoveModal,y=(e.setIsAddModalOpen,e.handleAddDevicesToGroup),S=e.handleRemoveDevicesFromGroup,D=e.handleUpdateSelected,w=e.hasModalSubmitted,Z=e.setHasModalSubmitted,k=e.fetchDevices,j=e.isSystemsView,M=void 0!==j&&j,P=e.isAddSystemsView,C=void 0!==P&&P,T=b,N=M,R=(0,u.useHistory)();return o().createElement(o().Fragment,null,M&&(0,v.A8)(d,s,R)?o().createElement(f.Z,{"data-testid":"general-table-empty-state-no-data",icon:"plus",title:"Connect edge systems",body:"Connect and manage edge systems here after registering them via the console. To start, create a RHEL for Edge image and install it to your target system.",secondaryActions:[{title:"Create RHEL for Edge images and configure automated management",link:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/create_rhel_for_edge_images_and_configure_automated_management/index",type:"link"}]}):o().createElement(i.Z,{apiFilterSort:!0,isUseApi:!0,filters:E,loadTableData:k,tableData:{count:s,isLoading:d,hasError:m},columnNames:O,rows:I(c||[],C||M,k),actionResolver:function(e){var t,n,a=[];return d?a:null!=e&&null!==(t=e.rowInfo)&&void 0!==t&&t.id?(y&&a.push({title:"Add to group",onClick:function(){return y([{ID:e.rowInfo.deviceID,name:e.rowInfo.display_name}],!0)}}),S&&a.push({title:"Remove from group",isDisabled:0===(null==e||null===(n=e.rowInfo)||void 0===n?void 0:n.deviceGroups.length),onClick:function(){return S([{ID:e.rowInfo.deviceID,name:e.rowInfo.display_name,deviceGroups:e.rowInfo.deviceGroups}],!0)}}),function(e){var t,n,a;return!(null!==(t=e.rowInfo)&&void 0!==t&&t.UpdateAvailable||"updating"!==(null===(n=e.rowInfo)||void 0===n?void 0:n.deviceStatus)&&"upToDate"!==(null===(a=e.rowInfo)||void 0===a?void 0:a.deviceStatus))}(e)||a.push({title:"Update",onClick:function(e,t,n){p((function(e){return h(h({},e),{},{isOpen:!0,deviceData:[{id:n.rowInfo.id,display_name:n.rowInfo.display_name,deviceStatus:n.rowInfo.deviceStatus}],imageSetId:n.rowInfo.imageSetId})}))}}),T&&a.push({title:"Remove from group",onClick:function(){return b({name:e.rowInfo.display_name,isOpen:!0,deviceId:e.rowInfo.deviceID})}}),a):a},defaultSort:{index:3,direction:"desc"},toolbarButtons:N?[{isDisabled:!r,title:"Update",id:"toolbar-update-button",click:function(){return D()}}]:[],hasCheckbox:n,selectedItems:a,skeletonRowQuantity:l,kebabItems:g,hasModalSubmitted:w,setHasModalSubmitted:Z}))};S.propTypes={imageData:c().object,urlParam:c().string,openUpdateWizard:c().func,skeletonRowQuantity:c().number,temp:c().func,hasCheckbox:c().bool,setIsModalOpen:c().func,selectedItems:c().func,selectedItemsUpdateable:c().bool,reload:c().bool,setReload:c().func,data:c().array,count:c().number,isLoading:c().bool,hasError:c().bool,setUpdateModal:c().func,handleSingleDeviceRemoval:c().func,kebabItems:c().array,setRemoveModal:c().func,setIsAddModalOpen:c().func,hasModalSubmitted:c().bool,setHasModalSubmitted:c().func,handleAddDevicesToGroup:c().func,handleRemoveDevicesFromGroup:c().func,handleUpdateSelected:c().func,fetchDevices:c().func,isSystemsView:c().bool,isAddSystemsView:c().bool};const D=S},80292:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>re});var a=n(15861),r=n(4942),o=n(29439),i=n(87757),l=n.n(i),c=n(93264),s=n.n(c),u=n(48716),d=n(39173),m=n(86350),p=n(75662),f=n(15656),v=n(45697),g=n.n(v),b=n(64124),y=n(96354),h=n(60722),E=n(87462),O=n(23279),I=n.n(O),S=n(36621),D=n(65673),w=n(54680),Z=n(92694),k=n(41693),j=n(48880),M=n(96094),P=n(87029);const C=function(e){(0,k.Z)(e);var t=(0,j.default)().change,n=(0,c.useState)(!1),a=(0,o.Z)(n,2),r=a[0],i=a[1],l=(0,c.useState)(null),u=(0,o.Z)(l,2),d=u[0],m=u[1],p=(0,M.Z)({api:P.jA}),f=(0,o.Z)(p,2),v=f[0],g=v.data,b=v.isLoading,y=f[1],h=(0,c.useState)(""),O=(0,o.Z)(h,2),C=O[0],T=O[1],N=function(e){m(e),i(!1),t("group",e)},R=(null==g?void 0:g.data)||[],U=(null==g?void 0:g.count)||0;return s().createElement(s().Fragment,null,s().createElement(S.p,null,!b&&!d&&r&&U>R.length?s().createElement(D.u,{variant:"warning",className:"pf-u-font-weight-bold"},"Over ",R.length," results found. Refine your search."):s().createElement(D.u,{className:"pf-u-font-weight-bold"},"Select a group")),s().createElement(w.P,{variant:"typeahead",typeAheadAriaLabel:"Select a group",onToggle:function(e){i(e)},onSelect:function(e,t){e&&N(t)},onClear:function(){T(""),y(),N(null)},selections:d||C,isOpen:r,onFilter:I()((function(e,t){e&&t!=C&&(T(t),y({name:encodeURIComponent(t)}))}),300),"aria-labelledby":"typeahead-select-id-1",placeholderText:"Type or click to select a group",noResultsFoundText:b?"Loading...":"No results found",isInputValuePersisted:!0,maxHeight:"180px"},b?[]:null==R?void 0:R.map((function(e){var t=e.DeviceGroup;return s().createElement(Z.$,(0,E.Z)({key:t.ID,value:{toString:function(){return t.Name},groupId:t.ID}},t.description&&{description:t.description}))}))))};var T=n(32349),N=n(28216),R=n(47173),U=n(68340),x=function(e){var t=e.closeModal;return s().createElement(s().Fragment,null,s().createElement(U.x,null,"Or"),s().createElement(R.zx,{variant:"secondary",className:"pf-u-w-50",onClick:t},"Create Group"))};x.propTypes={closeModal:g().func};var _=function(e){var t=e.length>1?"".concat(e.length," systems"):e[0].name;return s().createElement(U.x,null,"Select a group to add ",s().createElement("strong",null,t," ")," or create a new one.")},A=function(e){return{fields:[{component:y.Z.PLAIN_TEXT,name:"description",label:_(e)},{component:"search-input",name:"group",label:"Select a group",isRequired:!0,validate:[{type:b.Z.REQUIRED}]},{component:"create-group-btn",name:"create-group-btn"}]}},L=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.setIsCreateGroupModalOpen,r=e.reloadData,o=e.deviceIds,i=(0,N.I0)();return s().createElement(h.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Add to group",submitLabel:"Add",additionalMappers:{"search-input":{component:C},"create-group-btn":{component:x,closeModal:function(){a(!0),n(!1)}}},schema:A(o),onSubmit:function(e){var t=e.group,n={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(t.toString()," successfully")},onError:{title:"Error",description:"Failed to add system to group"}};(0,T.Z)(i,(function(){return(0,P.e3)(parseInt(t.groupId),o)}),n)},reloadData:r})};const G=L;L.propTypes={isModalOpen:g().bool,setIsModalOpen:g().func,setIsCreateGroupModalOpen:g().func,reloadData:g().func,deviceIds:g().array};var F=function(e){(0,k.Z)(e);var t=(0,j.default)().change,n=(0,c.useState)(!1),a=(0,o.Z)(n,2),r=a[0],i=a[1],l=(0,c.useState)(null),u=(0,o.Z)(l,2),d=u[0],m=u[1],p=function(){m(null),t("group",null),i(!1)};return s().createElement(s().Fragment,null,s().createElement(w.P,{variant:"typeahead",typeAheadAriaLabel:"Select a state",onToggle:function(e){return i(e)},onSelect:function(e,n,a){a?p():(m(n),i(!1)),t("group",n)},onClear:p,selections:d,isOpen:r,"aria-labelledby":"typeahead-select-id-1",placeholderText:"Type or click select group"},e.defaultOptions.map((function(e,t){var n=e.DeviceGroup;return s().createElement(Z.$,(0,E.Z)({key:t,value:{toString:function(){return n.Name},groupId:n.ID}},n.description&&{description:n.description}))}))))};F.propTypes={defaultOptions:g().array};const V=F;var z=n(69957),H=n(37655),B=function(e){var t=e[0].deviceGroups,n=e.length>1?"".concat(e.length," systems"):e[0].name,a=1===t.length?t[0].Name:"".concat(t.length," groups");return t.length>1?s().createElement(U.x,null,"Select the group you want to remove ",s().createElement("strong",null,n)," from."):s().createElement(U.x,null,"Do you want to remove ",s().createElement("strong",null,n," ")," from"," ",s().createElement("strong",null,a),"?")},W=function(){return s().createElement(z.ZP,{color:H.Z.value})},q=function(e){var t={fields:[{component:y.Z.PLAIN_TEXT,name:"description",label:B(e)}]};return e[0].deviceGroups.length>1&&t.fields.push({component:"search-input",name:"group",label:"Select a group",isRequired:!0,validate:[{type:b.Z.REQUIRED}]}),t},$=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.reloadData,r=e.deviceInfo,o=(0,N.I0)(),i=r[0].deviceGroups;return s().createElement(h.Z,{isOpen:t,variant:"danger",closeModal:function(){return n(!1)},title:"Remove from group",submitLabel:"Remove",titleIconVariant:W,additionalMappers:{"search-input":{component:V,defaultOptions:i.map((function(e){return{DeviceGroup:e}}))||[]}},schema:q(r),onSubmit:function(e){var t=i.length>1,n=t?e.group.toString():i[0].Name,a=t?e.group.groupId:i[0].ID,l={onSuccess:{title:"Success",description:"".concat(r[0].name," has been removed from ").concat(n," successfully")},onError:{title:"Error",description:"Failed to remove system from group"}};(0,T.Z)(o,(function(){return(0,P._j)(a,r[0].ID)}),l)},reloadData:a})};const Q=$;$.propTypes={isModalOpen:g().bool,setIsModalOpen:g().func,reloadData:g().func,deviceInfo:g().array};var X=n(41825),K=n(8027),Y=n(52643),J=n(37619);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ae=s().lazy((function(){return Promise.all([n.e(874),n.e(344)]).then(n.bind(n,68940))}));const re=function(){var e,t=(0,M.Z)({api:K.$v,tableReload:!0}),n=(0,o.Z)(t,2),r=n[0],i=n[1],v=r.data,g=r.isLoading,b=r.hasError,y=(0,c.useState)(!1),h=(0,o.Z)(y,2),E=h[0],O=h[1],I=(0,c.useState)(!1),S=(0,o.Z)(I,2),D=S[0],w=S[1],Z=(0,c.useState)([]),k=(0,o.Z)(Z,2),j=k[0],P=k[1],C=(0,c.useState)([]),T=(0,o.Z)(C,2),N=T[0],R=T[1],U=(0,c.useState)(!1),x=(0,o.Z)(U,2),_=x[0],A=x[1],L=(0,c.useState)(!1),F=(0,o.Z)(L,2),V=F[0],z=F[1],H=(0,c.useState)(!1),B=(0,o.Z)(H,2),W=B[0],q=B[1],$=(0,c.useState)({isOpen:!1,deviceData:null,imageData:null}),ee=(0,o.Z)($,2),re=ee[0],oe=ee[1],ie=(0,p.useHistory)(),le=function(e,t){O(!0),t?P(e):R(e),A(t)},ce=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:z(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s().createElement(c.Fragment,null,s().createElement(u.Z,{className:"pf-m-light"},s().createElement(d.Z,{title:"Systems"})),s().createElement(m.Z,{className:"edge-devices"},s().createElement(f.Z,{isSystemsView:!0,data:null==v||null===(e=v.data)||void 0===e?void 0:e.devices,count:null==v?void 0:v.count,isLoading:g,hasError:b,setUpdateModal:oe,handleAddDevicesToGroup:le,handleRemoveDevicesFromGroup:function(e,t){w(!0),t?P(e):R(e),A(t)},handleUpdateSelected:function(){oe((function(e){return te(te({},e),{},{deviceData:N.map((function(e){return{id:e.id,display_name:e.display_name,deviceStatus:e.deviceStatus}})),imageSetId:N[0].imageSetId,isOpen:!0})}))},hasCheckbox:!0,selectedItems:R,selectedItemsUpdateable:function(){var e=!1;if(N.length>0){var t,n=N[0].imageSetId,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}(N);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.imageSetId!==n){e=!1;break}(!e&&r.updateImageData&&"updateAvailable"===r.deviceStatus||"unresponsive"===r.deviceStatus||"error"===r.deviceStatus)&&(e=!0)}}catch(e){a.e(e)}finally{a.f()}}return e}(),kebabItems:[{isDisabled:!(N.length>0),title:"Add to group",onClick:function(){return le(N.map((function(e){return{ID:e.deviceID,name:e.display_name}})),!1)}}],hasModalSubmitted:V,setHasModalSubmitted:z,fetchDevices:i})),re.isOpen&&s().createElement(c.Suspense,{fallback:s().createElement(Y.b,null,s().createElement(J.$,null))},s().createElement(ae,{navigateBack:function(){ie.push({pathname:ie.location.pathname}),oe((function(e){return te(te({},e),{},{isOpen:!1})}))},setUpdateModal:oe,updateModal:re,refreshTable:ce})),E&&s().createElement(G,{isModalOpen:E,setIsModalOpen:O,setIsCreateGroupModalOpen:q,reloadData:ce,deviceIds:_?j:N}),W&&s().createElement(X.Z,{isModalOpen:W,setIsModalOpen:q,reloadData:ce,deviceIds:_?j:N}),D&&s().createElement(Q,{isModalOpen:D,setIsModalOpen:w,reloadData:ce,deviceInfo:_?j:N}))}},18098:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var a=n(15861),r=n(29439),o=n(87757),i=n.n(o),l=n(93264),c=n.n(l),s=n(6636),u=n(47173),d=n(58844),m=n(3025),p=n(49739),f=n(83826),v=n(48761),g=n(43047),b=n(62410),y=n(32349),h=n(8027),E=n(28216),O=n(45697),I=n.n(O),S="The playbook failed to run.",D="The service timed out during the last update.",w="UNRESPONSIVE",Z=function(e,t,n){return c().createElement("div",null,e===S?"The playbook failed to run. You can retry the update or build a new one.":e===D?"The service timed out during the last update. You can retry the update":t===w?"The service could not be reached via RHC. The system may communicate at a later time if this is a network issue or could be an indication of a more significant problem.":"Unknown",c().createElement(p.K,{className:"pf-u-mt-sm"},c().createElement(f.v,{className:"pf-u-font-weight-bold"},"Last seen"),c().createElement(f.v,null," ",c().createElement(b.Z,{date:n}))))},k=function(e){var t,n,o=e.device,p=e.position,f=e.fetchDevices,b=e.lastSeen,O=e.children,I=(0,l.useState)(!1),k=(0,r.Z)(I,2),j=k[0],M=k[1],P=(0,E.I0)(),C={onSuccess:{variant:"info",title:"Updating system",description:"".concat(o.DeviceName," was added to the queue.")}};return c().createElement(d.g,null,c().createElement(v.H,null,c().createElement(s.J,{isVisible:j,shouldOpen:function(){return M(!0)},shouldClose:function(){return M(!1)},"aria-label":"Alert popover",alertseverityvariant:"danger",headerContent:c().createElement("div",{style:{color:"#c9190b"}}," ",c().createElement(g.ZP,{size:"sm"}),(t=o.DispatcherReason,n=o.DispatcherStatus,c().createElement("span",{className:"pf-u-ml-xs"},t===S?"Playbook error":t===D?"Service timed out":n===w?"Unresponsive":"Unknown"))),icon:"true",variant:"icon",color:"red",position:p,headerComponent:"h6",bodyContent:Z(o.DispatcherReason,o.DispatcherStatus,b),footerContent:o.DispatcherStatus!==w?c().createElement(u.zx,{variant:"link",isInline:!0,onClick:function(){(0,y.Z)(P,(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.g5)({DevicesUUID:[o.DeviceUUID]});case 2:M(!1),f();case 4:case"end":return e.stop()}}),e)}))),C)}}," ","Retry"," "):""},O)),c().createElement(m.b,null," "))};k.propTypes={lastSeen:I().string,children:I().element,device:I().object,position:I().string,fetchDevices:I().func},k.defaultProps={position:"left"};const j=k},41825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var a=n(15861),r=n(87757),o=n.n(r),i=n(93264),l=n.n(i),c=n(45697),s=n.n(c),u=n(64124),d=n(96354),m=n(60722),p=n(87029),f=n(48903),v=n(32349),g=n(28216),b=function(){var e=(0,a.Z)(o().mark((function e(){var t,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=n.length>0&&void 0!==n[0]?n[0]:"").length){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,(0,p.Tb)(t);case 5:if(!e.sent.data.isValid){e.next=8;break}throw"Group name already exists";case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y={groupName:function(){return b}},h={fields:[{component:d.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,autoFocus:!0,validate:[{type:"groupName"},{type:u.Z.REQUIRED},{type:u.Z.MAX_LENGTH,threshold:50},f.qg]}]},E=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,r=e.deviceIds,i=e.reloadData,c=(0,g.I0)(),s=function(e){var t={onSuccess:{title:"Success",description:"".concat(e.name," has been created successfully")},onError:{title:"Error",description:"Failed to create group"}};return(0,v.Z)(c,(function(){return(0,p.sS)(e)}),t)},u=function(){var e=(0,a.Z)(o().mark((function e(t){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:n=e.sent,a=n.ID,i={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(t.name," successfully")},onError:{title:"Error",description:"Failed to add system to group"}},(0,v.Z)(c,(function(){return(0,p.e3)(parseInt(a),r)}),i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l().createElement(m.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Create group",submitLabel:"Create",schema:h,onSubmit:r?u:s,reloadData:i,validatorMapper:y})};const O=E;E.propTypes={isModalOpen:s().bool,setIsModalOpen:s().func,reloadData:s().func,deviceIds:s().array}},47906:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var a=n(93264),r=n.n(a),o=n(45697),i=n.n(o),l=n(64124),c=n(96354),s=n(60722),u=n(87029),d=n(69957),m=n(37655),p=n(68340),f=n(32349),v=n(28216),g=function(e){return r().createElement(p.x,null,r().createElement("strong",null,e," "),"and all its data will be permanently deleted. Associated systems will be removed from the group but will not be deleted.")},b=function(e){return{fields:[{component:c.Z.PLAIN_TEXT,name:"warning-message",label:g(e)},{component:c.Z.CHECKBOX,name:"confirmation",label:"I understand that this action cannot be undone.",validate:[{type:l.Z.REQUIRED}]}]}},y=function(){return r().createElement(d.ZP,{color:m.Z.value})},h=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.reloadData,o=e.modalState,i=o.id,l=o.name,c=(0,v.I0)();return r().createElement(s.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Delete group",titleIconVariant:y,variant:"danger",submitLabel:"Delete",schema:b(l),onSubmit:function(){var e={onSuccess:{title:"Success",description:"".concat(l," has been removed successfully")},onError:{title:"Error",description:"Failed to delete group"}};(0,f.Z)(c,(function(){return(0,u.yq)(i)}),e)},reloadData:a})};h.propTypes={id:i().number,name:i().string,modalState:i().object,isModalOpen:i().bool,setIsModalOpen:i().func,reloadData:i().func};const E=h},23537:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var a=n(15861),r=n(29439),o=n(87757),i=n.n(o),l=n(93264),c=n.n(l),s=n(28191),u=n(48716),d=n(39173),m=n(86350),p=n(4942),f=n(45697),v=n.n(f),g=n(73448),b=n(75662),y=n(9192),h=n(52643),E=n(37619),O=n(75824);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=c().lazy((function(){return n.e(940).then(n.bind(n,68940))})),w=[{label:"Name",type:"text"}],Z=[{title:"Name",type:"name",sort:!0},{title:"Systems",type:"name",sort:!1},{title:"Image",type:"name",sort:!1}],k=function(e){var t=e.data,n=e.count,o=e.isLoading,s=e.hasError,u=e.handleCreateModal,d=e.handleRenameModal,m=e.handleDeleteModal,p=e.hasModalSubmitted,f=e.setHasModalSubmitted,v=e.fetchGroups,I=(0,l.useState)({isOpen:!1,deviceData:null,imageData:null}),k=(0,r.Z)(I,2),j=k[0],M=k[1],P=null==t?void 0:t.map((function(e){var t,n,a,r=null==e?void 0:e.DeviceGroup,o=r.ID,i=r.Name,l=r.Devices,s=e.DevicesImageInfo;s||(s=[]);var u=null!=l?l:[],d=c().createElement("div",null,c().createElement(O.u,{content:c().createElement("div",null,s.map((function(e,t){return c().createElement("p",{key:t},e.Name)})))},c().createElement("span",null,"Multiple images")));return{rowInfo:{id:o,title:i,image:0===s.length?"-":s.length>1?"Multiple images":null===(t=s[0])||void 0===t?void 0:t.Name,devicesImageInfo:e.DevicesImageInfo,devices:l,hasValidUpdate:null==e||null===(n=e.DeviceGroup)||void 0===n?void 0:n.ValidUpdate},cells:[{title:c().createElement(b.Link,{to:"".concat(y._["fleet-management"],"/").concat(o)},i)},{title:u.length},{title:0===s.length?"-":s.length>1?d:null===(a=s[0])||void 0===a?void 0:a.Name}]}}));return c().createElement(c().Fragment,null,c().createElement(g.Z,{apiFilterSort:!0,isUseApi:!0,loadTableData:v,filters:w,tableData:{count:n,data:t,isLoading:o,hasError:s},columnNames:Z,rows:P,actionResolver:function(e){var t;if(null==e||!e.rowInfo)return[];var n=null==e?void 0:e.rowInfo,a=n.id,r=n.title,o=n.devices,i=n.devicesImageInfo,l=null==i?void 0:i.some((function(e){return e.UpdateAvailable}));return a&&[{title:"Rename",onClick:function(){return d(a,r)}},{title:"Delete",onClick:function(){return m(a,r)}},{title:"Update",onClick:function(){return M((function(e){return S(S({},e),{},{deviceData:o.map((function(e){return{id:e.UUID,display_name:e.Name}})),imageId:o.find((function(e){return null==e?void 0:e.ImageID})).ImageID,isOpen:!0})}))},isDisabled:!(o.length>0&&null!=e&&null!==(t=e.rowInfo)&&void 0!==t&&t.hasValidUpdate&&l)}]},areActionsDisabled:function(){return!1},defaultSort:{index:0,direction:"asc"},emptyFilterState:{title:"No matching groups found",body:"To continue, edit your filter settings and try again"},toolbarButtons:[{title:"Create group",click:u}],hasModalSubmitted:p,setHasModalSubmitted:f}),j.isOpen&&c().createElement(l.Suspense,{fallback:c().createElement(h.b,null,c().createElement(E.$,null))},c().createElement(D,{navigateBack:function(){history.push({pathname:history.location.pathname}),M((function(e){return S(S({},e),{},{isOpen:!1})}))},setUpdateModal:M,updateModal:j,refreshTable:(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:f(!0);case 3:case"end":return e.stop()}}),e)})))})))};k.propTypes={data:v().array,count:v().number,closeModal:v().func,isLoading:v().bool,hasError:v().bool,handleRenameModal:v().func,handleDeleteModal:v().func,handleCreateModal:v().func,hasModalSubmitted:v().bool,setHasModalSubmitted:v().func,fetchGroups:v().func};const j=k;var M=n(3035),P=n(87029),C=n(41825),T=n(61381),N=n(47906),R=n(96094),U=n(48903);const x=function(){var e=(0,b.useHistory)(),t=(0,R.Z)({api:P.jA,tableReload:!0}),n=(0,r.Z)(t,2),o=n[0],p=n[1],f=o.data,v=o.isLoading,g=o.hasError,y=(0,l.useState)({id:null,name:""}),h=(0,r.Z)(y,2),E=h[0],O=h[1],I=(0,l.useState)(!1),S=(0,r.Z)(I,2),D=S[0],w=S[1],Z=(0,l.useState)(!1),k=(0,r.Z)(Z,2),x=k[0],_=k[1],A=(0,l.useState)(!1),L=(0,r.Z)(A,2),G=L[0],F=L[1],V=(0,l.useState)(!1),z=(0,r.Z)(V,2),H=z[0],B=z[1],W=function(){var e=(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:B(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c().createElement(c().Fragment,null,c().createElement(u.Z,{className:"pf-m-light"},c().createElement(d.Z,{title:"Groups"})),c().createElement(m.Z,{className:"edge-devices"},(0,U.A8)(v,null==f?void 0:f.count,e)?c().createElement(s.k,{justifyContent:{default:"justifyContentCenter"}},c().createElement(M.Z,{icon:"plus",title:"Create a system group",body:"Create system groups to help manage your systems more effectively.",primaryAction:{text:"Create group",click:function(){return w(!0)}},secondaryActions:[{type:"link",title:"Learn more about system groups",link:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/working_with_systems_in_the_edge_management_application/index"}]})):c().createElement(j,{data:(null==f?void 0:f.data)||[],count:null==f?void 0:f.count,isLoading:v,hasError:g,handleRenameModal:function(e,t){O({id:e,name:t}),_(!0)},handleDeleteModal:function(e,t){O({id:e,name:t}),F(!0)},handleCreateModal:function(){return w(!0)},hasModalSubmitted:H,setHasModalSubmitted:B,fetchGroups:p})),D&&c().createElement(C.Z,{isModalOpen:D,setIsModalOpen:w,reloadData:W}),x&&c().createElement(T.Z,{isModalOpen:x,setIsModalOpen:_,reloadData:W,modalState:E}),G&&c().createElement(N.Z,{isModalOpen:G,setIsModalOpen:F,reloadData:W,modalState:E}))}},61381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var a=n(15861),r=n(87757),o=n.n(r),i=n(93264),l=n.n(i),c=n(45697),s=n.n(c),u=n(64124),d=n(96354),m=n(60722),p=n(87029),f=n(48903),v=n(32349),g=n(28216),b=function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Tb)(t);case 2:if(!e.sent.data.isValid){e.next=5;break}return e.abrupt("return","Group name already exists");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={fields:[{component:d.Z.TEXT_FIELD,name:"name",label:"Group name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:u.Z.REQUIRED},{type:u.Z.MAX_LENGTH,threshold:50},f.qg,b]}]},h=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,a=e.reloadData,r=e.modalState,o=r.id,i=r.name,c=(0,g.I0)();return l().createElement(m.Z,{isOpen:t,closeModal:function(){return n(!1)},title:"Rename group",submitLabel:"Save",schema:y,initialValues:r,onSubmit:function(e){var t={onSuccess:{title:"Success",description:"".concat(i," has been renamed to ").concat(e.name," successfully")},onError:{title:"Error",description:"Failed to rename group"}};(0,v.Z)(c,(function(){return(0,p.OS)(o,e)}),t)},reloadData:a})};h.propTypes={id:s().number,modalState:s().object,isModalOpen:s().bool,setIsModalOpen:s().func,reloadData:s().func};const E=h},30991:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var a=n(93433),r=n(4942),o=n(29439),i=n(93264),l=n.n(i),c=n(64029),s=n(32835),u=n(56787),d=n(84457),m=n(75728),p=n(99355),f=n(28191),v=n(92298),g=n(50383),b=n(75824),y=n(48716),h=n(39173),E=n(86350),O=n(3035),I=n(75662),S=n(9192),D=n(5964),w=n(15656),Z=n(87029),k=n(15861),j=n(87757),M=n.n(j),P=n(47173),C=n(80236),T=n(45697),N=n.n(T),R=n(8027),U=n(96094),x=n(32349),_=n(28216),A=function(e){var t,n=e.groupId,a=e.closeModal,r=e.isOpen,c=e.reloadData,s=e.groupName,u=(0,U.Z)({api:R.$v,tableReload:!0}),d=(0,o.Z)(u,2),m=d[0],p=d[1],f=m.data,v=m.isLoading,g=m.hasError,b=(0,i.useState)([]),y=(0,o.Z)(b,2),h=y[0],E=y[1],O=(0,_.I0)();return l().createElement(C.u,{id:"add-systems-modal",title:"Add systems",position:"top",isOpen:r,onClose:a,variant:"large",actions:[l().createElement(P.zx,{isDisabled:0===h.length,key:"confirm",variant:"primary",onClick:function(){var e={onSuccess:{title:"Success",description:"System(s) have been added to ".concat(s," successfully")},onError:{title:"Error",description:"An error occurred making the request"}};(0,x.Z)(O,(function(){return(0,Z.e3)(parseInt(n),h.map((function(e){return{ID:e.deviceID}})))}),e),setTimeout((0,k.Z)(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),500),a()}},"Add systems"),l().createElement(P.zx,{key:"cancel",variant:"link",onClick:a},"Cancel")]},l().createElement(w.Z,{selectedItems:E,skeletonRowQuantity:15,hasCheckbox:!0,isLoading:v,hasError:g,count:null==f?void 0:f.count,data:(null==f||null===(t=f.data)||void 0===t?void 0:t.devices)||[],fetchDevices:p}))};A.propTypes={groupId:N().string,closeModal:N().func,isOpen:N().bool,reloadData:N().func,groupName:N().string};const L=A;var G=n(48903),F=n(96354),V=n(52643),z=n(37619),H=n(60722),B=n(47906),W=n(61381);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=l().lazy((function(){return n.e(940).then(n.bind(n,68940))}));const X=function(){var e,t,n,r,k,j,M,P,C,T,N=(0,_.I0)(),R=(0,I.useParams)(),A=(0,I.useHistory)(),q=R.groupId,X=(0,i.useState)(!1),K=(0,o.Z)(X,2),Y=K[0],J=K[1],ee=(0,i.useState)(!1),te=(0,o.Z)(ee,2),ne=te[0],ae=te[1],re=(0,i.useState)({isOpen:!1,name:"",deviceId:null}),oe=(0,o.Z)(re,2),ie=oe[0],le=oe[1],ce=(0,i.useState)({isOpen:!1,deviceData:null,imageData:null}),se=(0,o.Z)(ce,2),ue=se[0],de=se[1],me=(0,U.Z)({api:Z.VL,id:q,tableReload:!0}),pe=(0,o.Z)(me,2),fe=pe[0],ve=pe[1],ge=fe.data,be=fe.isLoading,ye=fe.hasError,he=null==ge||null===(e=ge.DeviceGroup)||void 0===e?void 0:e.Name,Ee=(0,i.useState)([]),Oe=(0,o.Z)(Ee,2),Ie=Oe[0],Se=Oe[1],De=(0,i.useState)(!1),we=(0,o.Z)(De,2),Ze=we[0],ke=we[1],je=(0,i.useState)({id:null,name:""}),Me=(0,o.Z)(je,2),Pe=Me[0],Ce=Me[1],Te=(0,i.useState)(!1),Ne=(0,o.Z)(Te,2),Re=Ne[0],Ue=Ne[1],xe=(0,i.useState)(!1),_e=(0,o.Z)(xe,2),Ae=_e[0],Le=_e[1];(0,i.useEffect)((function(){A.push({pathname:A.location.pathname,search:(0,G.fz)("add_system_modal=true",ne)})}),[ne]);var Ge=function(){var e={onSuccess:{title:"Success",description:"".concat(ie.name," has been removed successfully")},onError:{title:"Error",description:"Failed to remove system"}};(0,x.Z)(N,(function(){return(0,Z._j)(q,ie.deviceId)}),e),setTimeout((function(){return ke(!0)}),800)},Fe="Actions for group details view",Ve="group-details-dropdown";return l().createElement(l().Fragment,null,l().createElement(y.Z,{className:"pf-m-light"},he?l().createElement(c.a,null,l().createElement(s.g,null,l().createElement(I.Link,{to:"".concat(S._["fleet-management"])},"Groups")),l().createElement(s.g,null,he)):l().createElement(c.a,null,l().createElement(s.g,{isActive:!0},l().createElement(g.O,{width:"100px"}))),l().createElement(f.k,{justifyContent:{default:"justifyContentSpaceBetween"}},l().createElement(v.B,null,he?l().createElement(h.Z,{title:he}):l().createElement(g.O,{width:"150px"})),l().createElement(v.B,null,l().createElement(u.L,{position:p.ir.right,toggle:l().createElement(m.Z,{id:Ve,toggleIndicator:D.ZP,onToggle:function(e){return J(e)},isDisabled:!1,"aria-label":Fe},l().createElement(b.u,{content:Fe,reference:function(){return document.getElementById(Ve)}}),"Actions"),isOpen:Y,dropdownItems:[l().createElement(d.h,{key:"delete-device-group",onClick:function(){return Ce({id:q,name:he}),void Ue(!0)}},"Delete group"),l().createElement(d.h,{key:"rename-device-group",onClick:function(){return Ce({id:q,name:he}),void Le(!0)}},"Rename group"),l().createElement(d.h,{key:"update-all-devices",isDisabled:(0,G.yb)({deviceData:null==ge||null===(t=ge.DevicesView)||void 0===t||null===(n=t.devices)||void 0===n?void 0:n.map((function(e){return{imageSetId:null==e?void 0:e.ImageSetID}})),imageData:null==ge||null===(r=ge.DevicesView)||void 0===r||null===(k=r.devices)||void 0===k?void 0:k.some((function(e){return e.ImageID}))}),onClick:function(){J(!1),de((function(e){var t,n,a,r;return $($({},e),{},{isOpen:!0,deviceData:null==ge||null===(t=ge.DevicesView)||void 0===t||null===(n=t.devices)||void 0===n?void 0:n.map((function(e){return{id:null==e?void 0:e.DeviceUUID,display_name:""===(null==e?void 0:e.DeviceName)?"localhost":null==e?void 0:e.DeviceName}})),imageSetId:null==ge||null===(a=ge.DevicesView)||void 0===a||null===(r=a.devices.find((function(e){return e.ImageSetID})))||void 0===r?void 0:r.ImageSetID})}))}},"Update")]})))),l().createElement(E.Z,{className:"edge-devices"},(0,G.A8)(be,null==ge||null===(j=ge.DeviceGroup)||void 0===j?void 0:j.Devices.length,A)?l().createElement(f.k,{justifyContent:{default:"justifyContentCenter"}},l().createElement(O.Z,{icon:"plus",title:"Add systems to the group",body:"Create groups to help manage your systems more effectively.",primaryAction:{text:"Add systems",click:function(){return ae(!0)}},secondaryActions:[{type:"link",title:"Learn more about system groups",link:"https://access.redhat.com/documentation/en-us/edge_management/2022/html-single/working_with_systems_in_the_edge_management_application/index"}]})):l().createElement(w.Z,{data:(null==ge||null===(M=ge.DevicesView)||void 0===M?void 0:M.devices)||[],count:null==ge||null===(P=ge.DevicesView)||void 0===P?void 0:P.total,isLoading:be,hasError:ye,hasCheckbox:!0,handleSingleDeviceRemoval:Ge,kebabItems:[{isDisabled:!(Ie.length>0),title:"Remove from group",onClick:function(){return le({name:"",deviceId:null,isOpen:!0})}},{isDisabled:(0,G.yb)({deviceData:Ie,imageData:null===(C=Ie[0])||void 0===C?void 0:C.updateImageData}),title:"Update selected",onClick:function(){return de((function(e){return $($({},e),{},{isOpen:!0,deviceData:(0,a.Z)(Ie),imageSetId:Ie.find((function(e){return null==e?void 0:e.imageSetId})).imageSetId})}))}}],selectedItems:Se,setRemoveModal:le,setIsAddModalOpen:ae,setUpdateModal:de,hasModalSubmitted:Ze,setHasModalSubmitted:ke,fetchDevices:ve,isAddSystemsView:!0})),ne&&l().createElement(L,{groupId:q,closeModal:function(){return ae(!1)},isOpen:ne,reloadData:ve,groupName:null==ge||null===(T=ge.DeviceGroup)||void 0===T?void 0:T.Name}),ie.isOpen&&l().createElement(H.Z,{isOpen:ie.isOpen,closeModal:function(){return le(!1)},title:"Remove from group",submitLabel:"Remove",variant:"danger",schema:{fields:[{component:F.Z.PLAIN_TEXT,name:"warning-text",label:"Do you want to remove ".concat(Ie.length>0?"".concat(Ie.length," system").concat(1===Ie.length?"":"s"):"".concat(ie.name)," from ").concat(he,"?")}]},onSubmit:ie.deviceId?Ge:function(){var e={onSuccess:{title:"Success",description:"".concat(Ie.length," systems have been removed successfully")},onError:{title:"Error",description:"failed to remove systems"}};(0,x.Z)(N,(function(){return(0,Z.tW)(parseInt(q),Ie.map((function(e){return{ID:e.deviceID}})))}),e),setTimeout((function(){return ke(!0)}),800)},reloadData:ve}),ue.isOpen&&l().createElement(i.Suspense,{fallback:l().createElement(V.b,null,l().createElement(z.$,null))},l().createElement(Q,{navigateBack:function(){A.push({pathname:A.location.pathname}),de((function(e){return $($({},e),{},{isOpen:!1})}))},setUpdateModal:de,updateModal:ue,refreshTable:ve})),Re&&l().createElement(B.Z,{isModalOpen:Re,setIsModalOpen:Ue,reloadData:function(){return A.push(S._["fleet-management"])},modalState:Pe}),Ae&&l().createElement(W.Z,{isModalOpen:Ae,setIsModalOpen:Le,reloadData:function(){return ve()},modalState:Pe}))}},14511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var a=n(4942),r=n(15861),o=n(29439),i=n(87757),l=n.n(i),c=n(93264),s=n.n(c),u=n(48716),d=n(39173),m=n(86350),p=n(37619),f=n(52643),v=n(75662),g=n(73448),b=n(45697),y=n.n(b),h=n(9192),E=n(68340),O=n(75824),I=n(62410),S=n(27577),D=n(3035),w=n(48903),Z=n(35681),k=function(e){var t=e.index;return s().createElement("div",null,s().createElement(O.u,{content:s().createElement("div",null,"More options"),reference:function(){return document.getElementById("pf-dropdown-toggle-id-".concat(t))}}))};k.propTypes={index:y().number};var j=[{label:"Name",type:"text"},{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],M=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,S.cellWidth)(35)]},{title:"Current version",type:"version",sort:!1,columnTransforms:[(0,S.cellWidth)(15)]},{title:"Last updated",type:"updated_at",sort:!0,columnTransforms:[(0,S.cellWidth)(25)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,S.cellWidth)(30)]}],P=function(e){return e.map((function(e,t){return{rowInfo:{id:null==e?void 0:e.ID,imageStatus:null==e?void 0:e.Status,isoURL:(null==e?void 0:e.ImageBuildIsoURL)||null,latestImageID:null==e?void 0:e.ImageID},cells:[{title:s().createElement(v.Link,{to:"".concat(h._["manage-images"],"/").concat(null==e?void 0:e.ID)},null==e?void 0:e.Name)},null==e?void 0:e.Version,{title:null!=e&&e.UpdatedAt?s().createElement(I.Z,{date:null==e?void 0:e.UpdatedAt}):"Unknown"},{title:s().createElement(s().Fragment,null,s().createElement(k,{index:t}),s().createElement(Z.Z,{type:null==e?void 0:e.Status.toLowerCase()}))}]}}))},C=function(e){var t=e.data,n=e.count,a=e.isLoading,r=e.hasError,o=e.fetchImageSets,i=e.openCreateWizard,l=e.openUpdateWizard,c=e.hasModalSubmitted,u=e.setHasModalSubmitted,d=(0,v.useHistory)();return s().createElement(s().Fragment,null,(0,w.A8)(a,n,d)?s().createElement(D.Z,{"data-testid":"general-table-empty-state-no-data",icon:"plus",title:"No images found",body:"",primaryAction:{click:i,text:"Create new image"},secondaryActions:[]}):s().createElement(g.Z,{apiFilterSort:!0,isUseApi:!0,filters:j,loadTableData:o,tableData:{count:n,data:t,isLoading:a,hasError:r},columnNames:M,rows:t?P(t):[],actionResolver:function(e){var t,n,a,r,o,i,c=[];return null!==(t=e.rowInfo)&&void 0!==t&&t.isoURL&&c.push({title:s().createElement(E.x,{className:"force-text-black remove-underline",component:"a",href:null===(i=e.rowInfo)||void 0===i?void 0:i.isoURL,rel:"noopener noreferrer",target:"_blank"},"Download")}),"SUCCESS"!==(null===(n=e.rowInfo)||void 0===n?void 0:n.imageStatus)&&"ERROR"!==(null===(a=e.rowInfo)||void 0===a?void 0:a.imageStatus)||c.push({title:"Update Image",onClick:function(e,t,n){var a;l(null===(a=n.rowInfo)||void 0===a?void 0:a.latestImageID)}}),"BUILDING"===(null===(r=e.rowInfo)||void 0===r?void 0:r.imageStatus)&&null!==(o=e.rowInfo)&&void 0!==o&&o.id&&c.push({title:""}),c},areActionsDisabled:function(e){var t;return"BUILDING"===(null===(t=e.rowInfo)||void 0===t?void 0:t.imageStatus)},defaultSort:{index:2,direction:"desc"},toolbarButtons:[{title:"Create new image",click:function(){return i()}}],hasModalSubmitted:c,setHasModalSubmitted:u}))};C.propTypes={data:y().array,count:y().number,isLoading:y().bool,hasError:y().bool,fetchImageSets:y().func,clearFilters:y().func,openCreateWizard:y().func,openUpdateWizard:y().func,filters:y().array,pagination:y().shape({page:y().number,perPage:y().number}),hasModalSubmitted:y().bool,setHasModalSubmitted:y().func};const T=C;var N=n(93597),R=n(96094);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=s().lazy((function(){return Promise.all([n.e(874),n.e(344)]).then(n.bind(n,49477))})),A=s().lazy((function(){return Promise.all([n.e(874),n.e(46)]).then(n.bind(n,53010))}));const L=function(){var e=(0,v.useHistory)(),t=(0,R.Z)({api:N.$c,tableReload:!0}),n=(0,o.Z)(t,2),a=n[0],i=n[1],g=a.data,b=a.isLoading,y=a.hasError,h=(0,c.useState)(!1),E=(0,o.Z)(h,2),O=E[0],I=E[1],S=(0,c.useState)({isOpen:!1,imageId:null}),D=(0,o.Z)(S,2),Z=D[0],k=D[1],j=(0,c.useState)(!1),M=(0,o.Z)(j,2),P=M[0],C=M[1],U=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:C(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s().createElement(c.Fragment,null,s().createElement(u.Z,{className:"pf-m-light"},s().createElement(d.Z,{title:"Images"})),s().createElement(m.Z,{className:"edge-devices"},s().createElement(T,{data:(null==g?void 0:g.data)||[],count:null==g?void 0:g.count,isLoading:b,hasError:y,fetchImageSets:i,openCreateWizard:function(){e.push({pathname:e.location.pathname,search:(0,w.fz)("create_image=true",!0)}),I(!0)},openUpdateWizard:function(t){e.push({pathname:e.location.pathname,search:(0,w.fz)("update_image=true",!0)}),k({isOpen:!0,imageId:t})},hasModalSubmitted:P,setHasModalSubmitted:C})),O&&s().createElement(c.Suspense,{fallback:s().createElement(f.b,null,s().createElement(p.$,null))},s().createElement(_,{navigateBack:function(){e.push({pathname:e.location.pathname,search:(0,w.fz)("create_image=true",!1)}),I(!1)},reload:U})),Z.isOpen&&s().createElement(c.Suspense,{fallback:s().createElement(f.b,null,s().createElement(p.$,null))},s().createElement(A,{navigateBack:function(){e.push({pathname:e.location.pathname,search:(0,w.fz)("update_image=true",!1)}),k((function(e){return x(x({},e),{},{isOpen:!1})}))},reload:U,updateImageID:Z.imageId})))}},87029:(e,t,n)=>{"use strict";n.d(t,{sS:()=>o,jA:()=>i,VL:()=>l,OS:()=>c,yq:()=>s,e3:()=>u,tW:()=>d,_j:()=>m,Tb:()=>p});var a=n(66702),r=n(93454),o=function(e){return r.eE.post("".concat(a.Ds,"/device-groups/"),{Name:e.name,Type:"static"})},i=function(e){var t=e.query,n=(0,a.Vs)(t);return r.eE.get("".concat(a.Ds,"/device-groups?").concat(n))},l=function(e){var t=e.id,n=e.query,o=(0,a.Vs)(n);return r.eE.get("".concat(a.Ds,"/device-groups/").concat(t,"/view?").concat(o))},c=function(e,t){return r.eE.put("".concat(a.Ds,"/device-groups/").concat(e),{Name:t.name,Type:"static"})},s=function(e){return r.eE.delete("".concat(a.Ds,"/device-groups/").concat(e))},u=function(e,t){return r.eE.post("".concat(a.Ds,"/device-groups/").concat(e,"/devices"),{ID:e,Devices:t})},d=function(e,t){return r.eE.delete("".concat(a.Ds,"/device-groups/").concat(e,"/devices"),{data:{ID:e,Devices:t}})},m=function(e,t){return r.eE.delete("".concat(a.Ds,"/device-groups/").concat(e,"/devices/").concat(t))},p=function(e){return r.eE.get("".concat(a.Ds,"/device-groups/checkName/").concat(e))}},60722:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var a=n(15861),r=n(4942),o=n(87462),i=n(87757),l=n.n(i),c=n(93264),s=n.n(c),u=n(80236),d=n(79442),m=n(67850),p=n(41387),f=n(45697),v=n.n(f);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.isOpen,n=e.title,r=e.titleIconVariant,i=e.closeModal,c=e.submitLabel,f=e.schema,v=e.initialValues,g=e.variant,y=e.reloadData,h=e.size,E=e.onSubmit,O=e.additionalMappers,I=e.validatorMapper;return s().createElement(u.u,{variant:null!=h?h:"small",title:n,titleIconVariant:null!=r?r:null,isOpen:t,onClose:i},s().createElement(d.Z,{schema:f,validatorMapper:I,FormTemplate:function(e){return s().createElement(m.ZP,(0,o.Z)({},e,{submitLabel:c,disableSubmit:["invalid"],buttonsProps:{submit:{variant:g}}}))},initialValues:v,componentMapper:O?b(b({},O),p.ZP):p.ZP,onSubmit:function(){var e=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:setTimeout((0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),500),i();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onCancel:function(){return i()}}))};y.propTypes={isOpen:v().bool,title:v().string,closeModal:v().func,reloadData:v().func,submitLabel:v().string,schema:v().object,initialValues:v().object,variant:v().string,onSubmit:v().func,size:v().string,additionalMappers:v().object,titleIconVariant:v().any,validatorMapper:v().object};const h=y},32349:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(4942),r=n(15861),o=n(87757),i=n.n(o),l=n(83215);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(e,t,n){var a,o=null===(a=n)||void 0===a?void 0:a.onSuccess;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var c=function(){var a=(0,r.Z)(i().mark((function a(){var r;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t();case 3:return r=a.sent,o&&e(s({},(0,l.wN)(s({variant:"success"},n.onSuccess)))),a.abrupt("return",r);case 8:return a.prev=8,a.t0=a.catch(0),e(s({},(0,l.wN)(s(s({variant:"danger"},n.onError),{},{description:null!==a.t0&&void 0!==a.t0&&a.t0.Title?"".concat(n.onError.description,": ").concat(a.t0.Title):n.onError.description})))),a.abrupt("return",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return c()}},27567:()=>{}}]);
//# sourceMappingURL=../sourcemaps/GroupsDetailPage.18dfac81f0457e868b8ccc90442f3896.js.map