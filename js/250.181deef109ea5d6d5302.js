"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[250],{4250:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var a=n(15861),r=n(4942),o=n(29439),i=n(87757),l=n.n(i),s=n(93264),c=n.n(s),p=n(3035),m=n(60722),d=n(66702),u=n(45697),b=n.n(u),f=n(64124),y=n(58061),E=function(e){var t=e.isOpen,n=e.openModal,a=e.reloadData,r={fields:[{component:"plain-text",name:"title",label:"Link to a custom repository to add packages to RHEL for Edge images."},{component:"text-field",name:"name",label:"Name",placeholder:"Repository name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:f.Z.REQUIRED},y.qg]},{component:"textarea",name:"baseURL",label:"BaseURL",placeholder:"https://",helperText:"Enter the baseURL for the custom repository.",isRequired:!0,validate:[{type:f.Z.REQUIRED},{type:f.Z.URL,message:"Must be a valid url"}]}]};return c().createElement(m.Z,{title:"Add Repository",isOpen:t,openModal:function(){return n({type:"add"})},submitLabel:"Add",schema:r,onSubmit:function(e){return(0,d.eS)(e)},reloadData:a})};E.propTypes={openModal:b().func,reloadData:b().func,isOpen:b().boo};const g=E;var R=n(36621),v=n(65673),h=function(e){var t=e.openModal,n=e.isOpen,a=e.id,r=e.name,o=e.baseURL,i=e.reloadData,l={fields:[{component:"plain-text",name:"title",label:"Update information about this custom repository."},{component:"text-field",name:"name",label:"Name",placeholder:"Repository name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",isRequired:!0,validate:[{type:f.Z.REQUIRED}]},{component:"textarea",name:"baseURL",label:"BaseURL",placeholder:"https://",helperText:c().createElement(R.p,{hasIcon:!0},c().createElement(v.u,{className:"pf-u-pb-md",variant:"warning",hasIcon:!0},"If you change the repo URL, you may not have access to the packages that were used to build images that reference this repository.")),isRequired:!0,validate:[{type:f.Z.REQUIRED},{type:f.Z.URL,message:"Must be a valid url"}]}]};return c().createElement(m.Z,{title:"Edit Repository",isOpen:n,openModal:function(){return t({type:"edit"})},submitLabel:"Update",schema:l,initialValues:{id:a,name:r,baseURL:o},onSubmit:function(e){return(0,d.Es)(e)},reloadData:i})};h.propTypes={openModal:b().func,reloadData:b().func,isOpen:b().boo,id:b().number,name:b().string,baseURL:b().string,setData:b().func};const L=h;var O=n(68774),U=n(68340),x=n(19694),D=n(37655),Z=function(e){var t=e.label,n=e.text;return c().createElement(O.D,null,c().createElement(U.x,{component:"b"},t),c().createElement(U.x,null,n))};Z.propTypes={label:b().string,text:b().string};var M=function(e){var t=e.openModal,n=e.id,a=e.isOpen,r=e.name,o=e.baseURL,i=e.reloadData,l={fields:[{component:"plain-text",name:"description",label:"Removing a repository could affect your ability to update images."},{component:"plain-text",name:"name",label:c().createElement(Z,{label:"Name",text:r})},{component:"plain-text",name:"baseURL",label:c().createElement(Z,{label:"baseURL",text:o})}]};return c().createElement(m.Z,{title:c().createElement(c().Fragment,null,c().createElement(x.ZP,{color:D.Z.value,className:"pf-u-mr-md"}),"Remove Repository"),isOpen:a,openModal:function(){return t({type:"remove"})},submitLabel:"Remove",schema:l,initialValues:{id:n},variant:"danger",onSubmit:function(e){var t=e.id;return(0,d.gK)(t)},reloadData:i})};M.propTypes={openModal:b().func,reloadData:b().func,isOpen:b().boo,id:b().number,name:b().string,baseURL:b().string,setData:b().func};const w=M,k=function(){return c().createElement(O.D,{style:{padding:"15px",backgroundColor:"white"}},c().createElement(U.x,{component:U.q.h1},"Custom repositories"),c().createElement(U.x,{component:U.q.p},"Add custom repositories to build RHEL for Edge images with additional packages."," "))};var N=n(5604),A=n(15265),S=[{label:"Name",type:"text"}],j=function(e){var t=e.data,n=e.openModal,a=t.map((function(e){var t=e.id,n=e.name,a=e.baseURL;return{rowInfo:{id:t,repoName:n,repoBaseURL:a},noApiSortFilter:[n,a],cells:[{title:c().createElement(c().Fragment,null,c().createElement(U.x,{className:"pf-u-mb-xs",component:U.q.p},n),c().createElement(U.x,{component:U.q.a,href:a,target:"_blank",rel:"noopener noreferrer"},a," ",c().createElement(A.ZP,{className:"pf-u-ml-sm"})))}]}}));return c().createElement(N.Z,{apiFilterSort:!1,filters:S,tableData:{count:t.length,data:t,isLoading:!1,hasError:!1},columnNames:[{title:"Name",type:"name",sort:!0}],rows:a,actionResolver:function(e){var t=e.rowInfo,a=t.id,r=t.repoName,o=t.repoBaseURL;return[{title:"Edit",onClick:function(){return n({type:"edit",id:a,name:r,baseURL:o})}},{title:"Remove",onClick:function(){return n({type:"remove",id:a,name:r,baseURL:o})}}]},areActionsDisabled:function(){return!1},defaultSort:{index:0,direction:"desc"},toolbarButtons:[{title:"Add repository",click:function(){return n({type:"add"})}}]})};j.propTypes={data:b().array,openModal:b().func};const P=j;var C=n(86350),I=n(48716),q=n(39173),T=n(79706),_=n(55795);const F=function(){return c().createElement(I.Z,null,c().createElement(c().Fragment,null,c().createElement(q.Z,{title:"Applications settings"}),c().createElement("p",{className:"pf-u-mt-sm"},"Settings for Edge Management",c().createElement(T.J,{"aria-label":"Basic popover",headerContent:c().createElement("div",null,"About Edge Management"),bodyContent:c().createElement("div",null,"Edge Management is a service that allows you to provision, update and maintain edge systems.")},c().createElement(_.ZP,{style:{cursor:"pointer"},className:"pf-u-ml-xs","data-testid":"test-pop-over"})))))};var B=n(15209);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const V=function(){var e=(0,s.useState)([]),t=(0,o.Z)(e,2),n=t[0],i=t[1],m=(0,s.useState)(!1),u=(0,o.Z)(m,2),b=u[0],f=u[1],y=(0,s.useState)({isOpen:{add:!1,edit:!1,remove:!1},id:null,name:"",baseURL:""}),E=(0,o.Z)(y,2),R=E[0],v=E[1],h=function(e){var t=e.type,n=e.id,a=void 0===n?null:n,o=e.name,i=void 0===o?"":o,l=e.baseURL,s=void 0===l?"":l;v((function(e){return H(H({},e),{},{id:a,name:i,baseURL:s,isOpen:H(H({},e.isOpen),{},(0,r.Z)({},t,!e.isOpen[t]))})}))},O=function(){var e=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.dd)();case 2:t=e.sent,i(t.data.map((function(e){return H({id:e.ID,name:e.Name,baseURL:e.URL},e)}))),f(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){return O()}),[]),c().createElement(c().Fragment,null,c().createElement(F,null),c().createElement(C.Z,null,b?n.length>0?c().createElement(c().Fragment,null,c().createElement(k,null),c().createElement(P,{data:n,openModal:h})):c().createElement(p.Z,{icon:"repository",title:"Add a custom repository",body:"Add custom repositories to build RHEL for Edge images with additional packages.",primaryAction:{text:"Add repository",click:function(){return h({type:"add"})}},secondaryActions:[]}):c().createElement(B.O,null),c().createElement(g,{isOpen:R.isOpen.add,openModal:h,reloadData:O}),c().createElement(L,{isOpen:R.isOpen.edit,id:R.id,name:R.name,baseURL:R.baseURL,openModal:h,reloadData:O}),c().createElement(w,{isOpen:R.isOpen.remove,id:R.id,name:R.name,baseURL:R.baseURL,openModal:h,reloadData:O})))}}}]);