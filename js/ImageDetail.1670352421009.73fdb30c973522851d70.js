(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[704,46],{64029:(e,t,n)=>{"use strict";n.d(t,{a:()=>c});var a=n(70655),i=n(92950),l=n(44303),r=n(38296),o=n(62472);const c=e=>{var{children:t=null,className:n="","aria-label":u="Breadcrumb",ouiaId:s,ouiaSafe:d=!0}=e,m=(0,a.__rest)(e,["children","className","aria-label","ouiaId","ouiaSafe"]);const p=(0,o.S$)(c.displayName,s,d);return i.createElement("nav",Object.assign({},m,{"aria-label":u,className:(0,r.i)(l.Z.breadcrumb,n)},p),i.createElement("ol",{className:l.Z.breadcrumbList},i.Children.map(t,((e,t)=>{const n=t>0;return i.isValidElement(e)?i.cloneElement(e,{showDivider:n}):e}))))};c.displayName="Breadcrumb"},32835:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var a=n(70655),i=n(92950),l=n(93174),r=n(44303),o=n(38296);const c=e=>{var{children:t=null,className:n="",to:c,isActive:u=!1,isDropdown:s=!1,showDivider:d,target:m,component:p="a",render:v}=e,g=(0,a.__rest)(e,["children","className","to","isActive","isDropdown","showDivider","target","component","render"]);const f=p,b=u?"page":void 0,h=(0,o.i)(r.Z.breadcrumbLink,u&&r.Z.modifiers.current);return i.createElement("li",Object.assign({},g,{className:(0,o.i)(r.Z.breadcrumbItem,n)}),d&&i.createElement("span",{className:r.Z.breadcrumbItemDivider},i.createElement(l.ZP,null)),"button"===p&&i.createElement("button",{className:h,"aria-current":b,type:"button"},t),s&&i.createElement("span",{className:(0,o.i)(r.Z.breadcrumbDropdown)},t),v&&v({className:h,ariaCurrent:b}),c&&!v&&i.createElement(f,{href:c,target:m,className:h,"aria-current":b},t),!c&&"button"!==p&&!s&&t)};c.displayName="BreadcrumbItem"},44008:(e,t,n)=>{"use strict";n.d(t,{Fg:()=>i,TI:()=>l,ZP:()=>r});var a=n(40400);const i={name:"CopyIcon",height:512,width:448,svgPath:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z",yOffset:0,xOffset:0},l=(0,a.IU)(i),r=l},44303:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a}),n(58392);const a={breadcrumb:"pf-c-breadcrumb",breadcrumbDropdown:"pf-c-breadcrumb__dropdown",breadcrumbHeading:"pf-c-breadcrumb__heading",breadcrumbItem:"pf-c-breadcrumb__item",breadcrumbItemDivider:"pf-c-breadcrumb__item-divider",breadcrumbLink:"pf-c-breadcrumb__link",breadcrumbList:"pf-c-breadcrumb__list",dropdownToggle:"pf-c-dropdown__toggle",modifiers:{current:"pf-m-current",overpassFont:"pf-m-overpass-font"},themeDark:"pf-theme-dark"}},2466:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a}),n(37625);const a={button:"pf-c-button",clipboardCopy:"pf-c-clipboard-copy",clipboardCopyActions:"pf-c-clipboard-copy__actions",clipboardCopyActionsItem:"pf-c-clipboard-copy__actions-item",clipboardCopyExpandableContent:"pf-c-clipboard-copy__expandable-content",clipboardCopyGroup:"pf-c-clipboard-copy__group",clipboardCopyText:"pf-c-clipboard-copy__text",clipboardCopyToggleIcon:"pf-c-clipboard-copy__toggle-icon",modifiers:{expanded:"pf-m-expanded",inline:"pf-m-inline",block:"pf-m-block",code:"pf-m-code"},themeDark:"pf-theme-dark"}},83063:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a}),n(82014);const a={button:"pf-c-button",label:"pf-c-label",labelContent:"pf-c-label__content",labelIcon:"pf-c-label__icon",labelText:"pf-c-label__text",modifiers:{compact:"pf-m-compact",blue:"pf-m-blue",green:"pf-m-green",orange:"pf-m-orange",red:"pf-m-red",purple:"pf-m-purple",cyan:"pf-m-cyan",gold:"pf-m-gold",outline:"pf-m-outline",overflow:"pf-m-overflow",add:"pf-m-add",editable:"pf-m-editable",editableActive:"pf-m-editable-active"},themeDark:"pf-theme-dark"}},72002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a}),n(21064);const a={button:"pf-c-button",labelGroup:"pf-c-label-group",labelGroupClose:"pf-c-label-group__close",labelGroupLabel:"pf-c-label-group__label",labelGroupList:"pf-c-label-group__list",labelGroupListItem:"pf-c-label-group__list-item",labelGroupMain:"pf-c-label-group__main",labelGroupTextarea:"pf-c-label-group__textarea",modifiers:{category:"pf-m-category",vertical:"pf-m-vertical",editable:"pf-m-editable",textarea:"pf-m-textarea"}}},89059:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a}),n(16166);const a={modifiers:{wrap:"pf-m-wrap",fill:"pf-m-fill",gutter:"pf-m-gutter"},split:"pf-l-split",splitItem:"pf-l-split__item"}},62410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var a=n(85893),i=n(92950),l=n.n(i),r=n(76857),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},c=36e5,u=24*c,s=30*u,d=365*u,m=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},p=[{rightBound:1/0,description:function(e){return m(Math.round(e/d),"year")}},{rightBound:d,description:function(e){return m(Math.round(e/s),"month")}},{rightBound:s,description:function(e){return m(Math.round(e/u),"day")}},{rightBound:u,description:function(e){return m(Math.round(e/c),"hour")}},{rightBound:c,description:function(e){return m(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],v=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},g=function(e){return{exact:function(e){return v(e)+" UTC"},onlyDate:function(e){return v(e).slice(0,-6)},relative:function(e){return p.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),v(e))},invalid:function(){return"Invalid date"}}[e]},f=function(e,t,n){return{exact:function(t){return g(e)(t)},onlyDate:function(t){return g(e)(t)},relative:function(i){return function(e,t,n,i){return void 0===i&&(i=""),(0,a.jsx)(r.Tooltip,o({},n,{content:(0,a.jsxs)("div",{children:[i,e]})},{children:t}))}(g("exact")(i),(0,a.jsx)("span",{children:g(e)(i)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const b=function(e){var t=e.date,n=e.type,i=void 0===n?"relative":n,r=e.extraTitle,o=e.tooltipProps,c=t instanceof Date?t:new Date(t),u=null==t||"Invalid Date"===c.toString()?"invalid":i;return(0,a.jsx)(l().Fragment,{children:f(u,o,r)(c)})}},53010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var a=n(93433),i=n(4942),l=n(15861),r=n(29439),o=n(64687),c=n.n(o),u=n(92950),s=n.n(u),d=n(4239),m=n(96354),p=n(76362),v=n(52643),g=n(29390),f=n(2372),b=n(45697),h=n.n(b),E=n(20873),y=n(94778),I=n(86706),D=n(59245),k=n(5230),S=n(93597),w=n(83215),_=n(48903),C=n(98309);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t,n,i,o,b,h,O,N,x,U,L,P,Z,j,V,A,R,B=e.navigateBack,F=e.updateImageID,G=e.reload,W=(0,u.useState)(),M=(0,r.Z)(W,2),z=M[0],H=M[1],Q=(0,I.I0)(),q=function(){B(),G&&G()},K=(0,_.gV)("fleet-management.temporary-releases"),J=(0,u.useContext)(D.g).getRegistry,$=(0,I.v9)((function(e){var t=e.imageDetailReducer;return{data:(null==t?void 0:t.data)||null}}),I.wU).data;return(0,u.useEffect)((function(){var e=J().register({imageDetailReducer:k.OD});return F&&(0,y.J_)(Q,F),function(){return e()}}),[Q]),(0,u.useEffect)((function(){(0,l.Z)(c().mark((function e(){var t,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a||a.getUser().then((function(e){return H(null!=e?e:{})}));case 1:case"end":return e.stop()}}),e)})))()}),[]),z&&$?s().createElement(d.Z,{onClose:q,customComponentMapper:{review:E.Z},onSubmit:function(e){var t,n,a,i,l,r=e.values;(0,e.setIsSaving)((function(){return!0}));var o=T(T({},r),{},{Id:null==$||null===(t=$.image)||void 0===t?void 0:t.ID,name:null==$||null===(n=$.image)||void 0===n?void 0:n.Name,version:(null==$||null===(a=$.image)||void 0===a?void 0:a.Version)+1,architecture:"x86_64",credentials:r.credentials?r.credentials:null==$||null===(i=$.image)||void 0===i?void 0:i.Installer.SshKey,username:r.username?r.username:null==$||null===(l=$.image)||void 0===l?void 0:l.Installer.Username});(0,y.Es)(Q,o,(function(e){Q(T(T({},(0,w.wN)({variant:"info",title:"Update image",description:"".concat(e.value.Name," image was added to the queue.")})),{},{meta:{polling:{id:"FETCH_IMAGE_".concat(e.value.ID,"_BUILD_STATUS"),fetcher:function(){return(0,S.EC)(e.value.ID)},condition:function(e){switch(e.Status){case"BUILDING":return[!0,""];case"ERROR":return[!1,"failure"];default:return[!1,"success"]}},onEvent:{failure:[function(t){return t((0,w.wN)({variant:"danger",title:"Image build failed",description:"".concat(e.value.Name," image build is completed unsuccessfully")}))}],success:[function(t){return t((0,w.wN)({variant:"success",title:"Image is ready",description:"".concat(e.value.Name," image build is completed")}))}]}}}})),q(),Q((0,y.Fj)({name:$.value.Name,id:$.value.ID}))}))},defaultArch:"x86_64",initialValues:{imageID:null==$?void 0:$.image.ID,name:null==$||null===(t=$.image)||void 0===t?void 0:t.Name,isUpdate:!0,description:null==$||null===(n=$.image)||void 0===n?void 0:n.Description,credentials:null==$||null===(i=$.image)||void 0===i?void 0:i.Installer.SshKey,username:null==$||null===(o=$.image)||void 0===o?void 0:o.Installer.Username,version:null==$||null===(b=$.image)||void 0===b?void 0:b.Version,release:null==$||null===(h=$.image)||void 0===h?void 0:h.Distribution,release_options:K?(0,_.pS)(null==$||null===(O=$.image)||void 0===O?void 0:O.Distribution,[].concat((0,a.Z)(C.vk),(0,a.Z)(C.R8))):(0,_.pS)(null==$||null===(N=$.image)||void 0===N?void 0:N.Distribution),imageType:["rhel-edge-commit"],"selected-packages":null==$||null===(x=$.image)||void 0===x||null===(U=x.Packages)||void 0===U?void 0:U.map((function(e){return T(T({},e),{},{name:e.Name})})),"third-party-repositories":null==$||null===(L=$.image)||void 0===L||null===(P=L.ThirdPartyRepositories)||void 0===P?void 0:P.map((function(e){return T({id:e.ID,name:e.Name},e)})),"initial-custom-repositories":null==$||null===(Z=$.image)||void 0===Z||null===(j=Z.ThirdPartyRepositories)||void 0===j?void 0:j.map((function(e){return T({id:e.ID,name:e.Name},e)})),"custom-packages":null==$||null===(V=$.image)||void 0===V||null===(A=V.CustomPackages)||void 0===A?void 0:A.map((function(e){return T(T({},e),{},{name:e.Name})}))},test:"",schema:{fields:[{component:m.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Update image"},showTitles:!0,title:"Update image: ".concat(null==$||null===(R=$.image)||void 0===R?void 0:R.Name),crossroads:["target-environment","release","imageType","third-party-repositories"],fields:[p.bR,p.Ud,p.l9,p.jS,p.B9,p.jS,p.j7,p.Sp]}]}}):s().createElement(g.Y,null,s().createElement(v.b,null,s().createElement(f.$,{isSVG:!0,diameter:"100px"})))};N.propTypes={navigateBack:h().func,updateImageID:h().number,reload:h().func},N.defaultProps={navigateBack:function(){}};const x=N},12877:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ee});var a=n(4942),i=n(29439),l=n(92950),r=n.n(l),o=n(80123),c=n(49739),u=n(83826),s=n(2372),d=n(52643),m=n(96620),p=n(45697),v=n.n(p),g=n(68340),f=n(25834),b=n(78140),h=n(68774),E=n(15209),y=n(64029),I=n(32835),D=n(79851),k=n(34512),S=n(56787),w=n(84457),_=n(75728),C=n(99355),O=n(16545),T=n(35681),N=n(9192),x=n(5964),U=n(62410),L=function(e,t,n,a){var i,l=t||(null==e?void 0:e.LastImageDetails),o=[];return(null==l||null===(i=l.image)||void 0===i?void 0:i.ID)&&o.push(r().createElement(w.h,{key:"create-new-version-button",component:"button",onClick:function(){var e;return a(null==l||null===(e=l.image)||void 0===e?void 0:e.ID)}},"Create new version")),n&&o.push(r().createElement(w.h,{key:"download-button",component:"button"},r().createElement(g.x,{className:"force-text-black remove-underline",component:"a",href:n,rel:"noopener noreferrer",target:"_blank"},"Download installable .iso for newest image"))),o},P=function(e){var t,n,a,o,c,u,s,d,p,v,g,w,P,Z,j,V,A,R,B,F=e.imageData,G=e.imageVersion,W=e.openUpdateWizard,M=(0,l.useState)(!1),z=(0,i.Z)(M,2),H=z[0],Q=z[1],q=(0,l.useState)({}),K=(0,i.Z)(q,2),J=K[0],$=K[1];(0,l.useEffect)((function(){$(null==F?void 0:F.data)}),[F]);var Y="Actions for image set details view",X="image-set-details-dropdown";return r().createElement(r().Fragment,null,!F.isLoading&&F.hasError?r().createElement(y.a,null,r().createElement(I.g,null,r().createElement(m.Link,{to:N._["manage-images"]},"Back to Manage Images"))):r().createElement(r().Fragment,null,r().createElement(y.a,null,r().createElement(I.g,null,r().createElement(m.Link,{to:N._["manage-images"]},"Manage Images")),G?r().createElement(I.g,null,r().createElement(m.Link,{to:"".concat(N._["manage-images"],"/").concat(null==J||null===(t=J.ImageSet)||void 0===t?void 0:t.ID)},null==J||null===(n=J.ImageSet)||void 0===n?void 0:n.Name)):r().createElement(I.g,{isActive:!0},(null==J||null===(a=J.ImageSet)||void 0===a?void 0:a.Name)||r().createElement(E.O,{width:"100px"})),G&&r().createElement(I.g,{isActive:!0},null==G||null===(o=G.image)||void 0===o?void 0:o.Version)),r().createElement(h.D,null,r().createElement(D.P,null,r().createElement(k.J,null,r().createElement(f.G,{component:"dl"},r().createElement(b.T,{component:"h1",className:"grid-align-center pf-u-mb-0"},(null==J||null===(c=J.ImageSet)||void 0===c?void 0:c.Name)||r().createElement(E.O,{width:"150px"})),r().createElement(b.T,{className:"pf-u-pt-sm",component:"dd"},null!=G&&null!==(u=G.image)&&void 0!==u&&u.Status||null!=J&&null!==(s=J.LastImageDetails)&&void 0!==s&&null!==(d=s.image)&&void 0!==d&&d.Status?r().createElement(T.Z,{type:G?null==G||null===(p=G.image)||void 0===p?void 0:p.Status.toLowerCase():null==J||null===(v=J.LastImageDetails)||void 0===v||null===(g=v.image)||void 0===g?void 0:g.Status.toLowerCase()}):r().createElement(E.O,{width:"100px"})),null!=G&&null!==(w=G.image)&&void 0!==w&&w.UpdatedAt||null!=J&&null!==(P=J.LastImageDetails)&&void 0!==P&&null!==(Z=P.image)&&void 0!==Z&&Z.UpdatedAt?r().createElement(b.T,{component:"p"},"Last updated ",r().createElement(U.Z,{date:G?null==G||null===(j=G.image)||void 0===j?void 0:j.UpdatedAt:null==J||null===(V=J.LastImageDetails)||void 0===V||null===(A=V.image)||void 0===A?void 0:A.UpdatedAt})):r().createElement(E.O,{width:"200px"}))),r().createElement(k.J,{isFilled:!0}),r().createElement(k.J,null,r().createElement(S.L,{position:C.ir.right,toggle:r().createElement(_.Z,{id:X,toggleIndicator:x.ZP,onToggle:function(e){return Q(e)},isDisabled:"BUILDING"===(G?null==G||null===(R=G.image)||void 0===R?void 0:R.Status:null==J||null===(B=J.LastImageDetails)||void 0===B?void 0:B.image.Status)||!1,"aria-label":Y},r().createElement(O.u,{content:Y,reference:function(){return document.getElementById(X)}}),"Actions"),isOpen:H,dropdownItems:L(J,G,null==J?void 0:J.ImageBuildIsoURL,W)}))))))};P.propTypes={imageData:v().object,imageVersion:v().object,openUpdateWizard:v().func};const Z=P;var j=n(35262),V=n(28883),A=n(29873),R=n(93433),B=n(50693),F=n(16475),G=n(66435),W=n(98309),M=function(e){var t,n,a,o,c=e.imageData,u=e.imageVersion,s=(0,l.useState)({}),d=(0,i.Z)(s,2),p=d[0],v=d[1];(0,l.useEffect)((function(){var e;v(u||(null==c||null===(e=c.data)||void 0===e?void 0:e.LastImageDetails))}),[c,u]);var y=function(e){return(0,R.Z)(Array(2*e)).map((function(e,t){return r().createElement(E.O,{width:"180px",key:t})}))},I={Version:"Version",Created:function(){return r().createElement(U.Z,{date:null==p||null===(e=p.image)||void 0===e?void 0:e.CreatedAt});var e},"Type(s)":function(){var e,t;return null==p||null===(e=p.image)||void 0===e||null===(t=e.OutputTypes)||void 0===t?void 0:t.map((function(e,t){return r().createElement("div",{key:t},e)}))},Release:function(){var e;return null===W.aN||void 0===W.aN?void 0:W.aN[null==p||null===(e=p.image)||void 0===e?void 0:e.Distribution]},Description:"Description"},D={Username:function(){var e,t;return null==p||null===(e=p.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Username},"SSH key":function(){var e,t;return null==p||null===(e=p.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.SshKey}},k={"Total additional packages":function(){var e,t;return r().createElement(m.Link,{to:"".concat(N._["manage-images"],"/").concat(null==p||null===(e=p.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==p||null===(t=p.image)||void 0===t?void 0:t.ID,"/packages/additional")},null==p?void 0:p.additional_packages)},"Total packages":function(){var e,t;return r().createElement(m.Link,{to:"".concat(N._["manage-images"],"/").concat(null==p||null===(e=p.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==p||null===(t=p.image)||void 0===t?void 0:t.ID,"/packages/all")},null==p?void 0:p.packages)}},S={Added:function(){return null==p?void 0:p.update_added},Removed:function(){return null==p?void 0:p.update_removed},Updated:function(){return null==p?void 0:p.update_updated}};null!=p&&null!==(t=p.image)&&void 0!==t&&null!==(n=t.Installer)&&void 0!==n&&n.Checksum&&(I["SHA-256 checksum"]=function(){var e,t;return null==p||null===(e=p.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Checksum}),null!=p&&null!==(a=p.image)&&void 0!==a&&null!==(o=a.Commit)&&void 0!==o&&o.OSTreeCommit&&(I["Ostree commit hash"]=function(){var e,t;return null==p||null===(e=p.image)||void 0===e||null===(t=e.Commit)||void 0===t?void 0:t.OSTreeCommit});var w=function(e){return p?Object.entries(e).map((function(e,t){var n,a,o=(0,i.Z)(e,2),c=o[0],u=o[1];return r().createElement(l.Fragment,{key:t},r().createElement(b.T,{className:"details-label",component:b.v.dt},c),"SHA-256 checksum"===c||"Ostree commit hash"===c||"SSH key"===c&&u()?r().createElement(b.T,{component:b.v.dd},r().createElement(G.M5,{hoverTip:"Copy",clickTip:"Copied",variant:"expansion",className:"pf-u-text-break-word",id:"".concat(c.replace(/\s+/g,"-").toLowerCase(),"-clipboard-copy")},"function"==typeof u?u()||"Unavailable":(null==p||null===(n=p.image)||void 0===n?void 0:n[u])||"Unavailable")):r().createElement(b.T,{className:"pf-u-text-break-word",component:b.v.dd},"function"==typeof u?0===u()?0:u()||"Unavailable":(null==p||null===(a=p.image)||void 0===a?void 0:a[u])||"Unavailable"))})):null};return r().createElement(h.D,{className:"pf-u-ml-lg pf-u-mt-md"},r().createElement(B.r,{span:12},r().createElement(F.P,{span:5},r().createElement(g.x,{component:g.q.h2},u?"Details":"Most recent image"),r().createElement(f.G,{component:f.F.dl},w(I)||y(6)),r().createElement(g.x,{component:g.q.h2},"User information "),r().createElement(f.G,{component:f.F.dl},w(D)||y(2))),r().createElement(F.P,{span:1}),r().createElement(F.P,{span:6},r().createElement(g.x,{component:g.q.h2},"Packages "),r().createElement(f.G,{component:f.F.dl},w(k)||y(3)),r().createElement(g.x,{component:g.q.h2},"Changes from previous version"),r().createElement(f.G,{component:f.F.dl},w(S)||y(3)))))};M.propTypes={imageData:v().object,imageVersion:v().object};const z=M;var H=n(73448),Q=n(93597),q=n(94973),K=n(14748),J=n(48903),$=n(96094),Y=[{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],X=[{title:"Version",type:"version",sort:!0,columnTransforms:[(0,q.cellWidth)(15)]},{title:"Output",type:"image_type",sort:!1,columnTransforms:[(0,q.cellWidth)(25)]},{title:"Ostree commit hash",type:"ostree_commit_hash",sort:!1,columnTransforms:[(0,q.cellWidth)(20)]},{title:"Created",type:"created_at",sort:!0,columnTransforms:[(0,q.cellWidth)(15)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,q.cellWidth)(35)]}],ee=function(e,t,n){return null==e?void 0:e.map((function(e){return{rowInfo:{id:null==e?void 0:e.ID,imageStatus:null==e?void 0:e.Status,isoURL:null==e?void 0:e.ImageBuildIsoURL,latestImageVersion:n,currentImageVersion:e.Version},noApiSortFilter:[null==e?void 0:e.Version,W.bd[null==e?void 0:e.ImageType],null==e?void 0:e.CreatedAt,null==e?void 0:e.Status],cells:[{title:r().createElement(m.Link,{to:"".concat(N._["manage-images"],"/").concat(t,"/versions/").concat(e.ID,"/details")},null==e?void 0:e.Version)},{title:W.bd[null==e?void 0:e.ImageType]},{title:null!=e&&e.CommitCheckSum?r().createElement(O.u,{content:r().createElement("div",null,e.CommitCheckSum)},r().createElement("span",null,(0,J.aS)(e.CommitCheckSum,5,5))):r().createElement(g.x,null,"Unavailable")},{title:r().createElement(U.Z,{date:null==e?void 0:e.CreatedAt})},{title:r().createElement(T.Z,{type:null==e?void 0:e.Status.toLowerCase()})}]}}))},te=function(e){var t,n,a,l,o=e.imageData,c=e.openUpdateWizard,u=null==o||null===(t=o.data)||void 0===t||null===(n=t.ImageSet)||void 0===n?void 0:n.ID,s=null==o||null===(a=o.data)||void 0===a||null===(l=a.ImageSet)||void 0===l?void 0:l.Version,d=(0,$.Z)({api:function(e){var t=e.query;return(0,Q.dj)({imageSetID:u,query:t})},tableReload:!0}),m=(0,i.Z)(d,2),p=m[0],v=m[1],f=p.data,b=p.isLoading,h=p.hasError;return r().createElement(K.Z,{className:"add-100vh"},r().createElement(H.Z,{apiFilterSort:!0,isUseApi:!0,filters:Y,loadTableData:v,tableData:{count:null==f?void 0:f.count,data:null==f?void 0:f.data,isLoading:b,hasError:h},columnNames:X,rows:ee(null==f?void 0:f.data,u,s),actionResolver:function(e){var t,n,a,i,l,o,u,s=[];return null!==(t=e.rowInfo)&&void 0!==t&&t.isoURL&&s.push({title:r().createElement(g.x,{className:"force-text-black remove-underline",component:"a",href:e.rowInfo.isoURL,rel:"noopener noreferrer",target:"_blank"},"Download")}),("SUCCESS"===(null===(n=e.rowInfo)||void 0===n?void 0:n.imageStatus)||"ERROR"===(null===(a=e.rowInfo)||void 0===a?void 0:a.imageStatus))&&s.push({title:"Update Image",onClick:function(e,t,n){c(n.rowInfo.id)},isDisabled:(null==e||null===(o=e.rowInfo)||void 0===o?void 0:o.latestImageVersion)!==(null==e||null===(u=e.rowInfo)||void 0===u?void 0:u.currentImageVersion)}),"BUILDING"===(null===(i=e.rowInfo)||void 0===i?void 0:i.imageStatus)&&null!==(l=e.rowInfo)&&void 0!==l&&l.id&&s.push({title:""}),s},areActionsDisabled:function(e){var t;return"BUILDING"===(null===(t=e.rowInfo)||void 0===t?void 0:t.imageStatus)},defaultSort:{index:3,direction:"desc"}}))};te.propTypes={imageData:v().object,urlParam:v().string,imageSetID:v().number,createRows:v().func,openUpdateWizard:v().func};const ne=te;var ae=n(47173),ie=n(15265),le=n(3035),re=[{label:"Name",type:"text"}],oe=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,q.cellWidth)(35)]},{title:"Version",type:"version",sort:!1,columnTransforms:[(0,q.cellWidth)(25)]},{title:"Release",type:"release",sort:!1,columnTransforms:[(0,q.cellWidth)(35)]}],ce=function(e){var t=e.distribution,n=e.installedPackages,a=e.addedPackages;return(0===e.showAll?n.filter((function(e){return(null==a?void 0:a.filter((function(t){return e.name===t.Name})).length)>0})):n).map((function(e){return{noApiSortFilter:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release],cells:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release,{title:r().createElement("a",{href:"https://access.redhat.com/downloads/content/rhel---".concat(t,"/x86_64/7416/").concat(null==e?void 0:e.name,"/").concat(null==e?void 0:e.version,"-").concat(null==e?void 0:e.release,"/").concat(null==e?void 0:e.arch,"/fd431d51/package"),target:"_blank",rel:"noopener noreferrer"},r().createElement(ae.zx,{variant:"link",isSmall:!0,icon:r().createElement(ie.ZP,null),iconPosition:"right"},"More information"))}]}}))},ue={0:"additional",1:"all"},se={additional:0,all:1},de=function(e){var t,n,a,o,c,u,s,d,p,v=e.imageVersion,g=(0,m.useLocation)(),f=(0,m.useHistory)(),b=g.pathname.split("/"),h=7===b.length?se[b[6]]:1,E=null==v||null===(t=v.image)||void 0===t||null===(n=t.Distribution)||void 0===n?void 0:n.split("-")[1].slice(0,-1),y=(0,l.useState)({}),I=(0,i.Z)(y,2),D=I[0],k=I[1],S=(0,l.useState)(h),w=(0,i.Z)(S,2),_=w[0],C=w[1];return(0,l.useEffect)((function(){k(v)}),[v]),(0,l.useEffect)((function(){b[5]!==ue[_]&&C(h)}),[b]),"SUCCESS"===(null==v||null===(a=v.image)||void 0===a||null===(o=a.Commit)||void 0===o?void 0:o.Status)?r().createElement(K.Z,{className:"add-100vh"},r().createElement(H.Z,{apiFilterSort:!1,filters:re,tableData:{count:0===_?null==D?void 0:D.additional_packages:null==D?void 0:D.packages,isLoading:!1,hasError:!1},columnNames:oe,rows:null!=D&&null!==(c=D.image)&&void 0!==c&&null!==(u=c.Commit)&&void 0!==u&&u.InstalledPackages?ce({distribution:E,installedPackages:null==D||null===(s=D.image)||void 0===s||null===(d=s.Commit)||void 0===d?void 0:d.InstalledPackages,addedPackages:null==D||null===(p=D.image)||void 0===p?void 0:p.Packages,showAll:_}):[],actionResolver:function(){return[]},areActionsDisabled:function(){return!0},defaultSort:{index:0,direction:"asc"},toggleButton:[{title:"Additional",key:0},{title:"All",key:1}],toggleAction:function(e){var t,n=null===(t=b[5])||void 0===t?void 0:t.toLowerCase();C(e),"packages"===n&&(7===b.length?b[6]=ue[e]:b.push(ue[e]),f.push(b.join("/")))},toggleState:_,emptyFilterState:{icon:"search",title:"No packages to display"}})):r().createElement(K.Z,{className:"add-100vh"},r().createElement(le.Z,{bgColor:"white",title:"Package data currently unavailable",body:"Packages will be displayed as soon as the image is finished being built.",primaryAction:null,secondaryActions:[]}))};de.propTypes={imageVersion:v().object};const me=de;var pe={details:0,packages:1,versions:1},ve=function(e){var t=e.imageData,n=e.openUpdateWizard,a=e.imageVersion,o=e.isLoading,c=(0,m.useLocation)(),u=(0,m.useHistory)(),s=(0,l.useState)(pe.details),d=(0,i.Z)(s,2),p=d[0],v=d[1],g=a?"imageTab":"imageSetTab",f=(0,J.Ff)(c.pathname,["baseURL","imageSetVersion","imageSetTab","imageVersion","imageTab","packagesToggle"]);return(0,l.useEffect)((function(){f.imageTab?v(pe[f.imageTab]):v(pe[f.imageSetTab])}),[c.pathname]),r().createElement(r().Fragment,null,!t.isLoading&&t.hasError?r().createElement(le.Z,{icon:"question",title:"Image not found",body:"Please check you have the correct link with the correct image Id.",primaryAction:{text:"Back to Manage Images",href:N._["manage-images"]},secondaryActions:[]}):r().createElement("div",{className:"edge-c-device--detail add-100vh"},r().createElement(j.m,{className:"pf-u-ml-md",activeKey:p,onSelect:function(e,t){var n=0===t?"details":a?"packages":"versions";f[g]=n,u.push(f.buildUrl()),v(t)}},r().createElement(V.O,{eventKey:pe.details,title:r().createElement(A.T,null,"Details")},r().createElement(z,{imageData:t,imageVersion:a})),o?r().createElement(V.O,{title:r().createElement(A.T,null,r().createElement(E.O,{width:"75px"}))}):a?r().createElement(V.O,{eventKey:pe.packages,title:r().createElement(A.T,null,"Packages")},r().createElement(me,{imageVersion:a})):r().createElement(V.O,{eventKey:pe.versions,title:r().createElement(A.T,null,"Versions")},r().createElement(ne,{imageData:t,openUpdateWizard:n})))))};ve.propTypes={imageData:v().object,imageVersion:v().object,openUpdateWizard:v().func,isLoading:v().bool};const ge=ve;var fe=n(53010);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ee=function(){var e=(0,m.useParams)(),t=e.imageId,n=e.imageVersionId,a=(0,m.useHistory)(),p=(0,l.useState)({isOpen:!1,updateId:null}),v=(0,i.Z)(p,2),g=v[0],f=v[1],b=(0,l.useState)(null),h=(0,i.Z)(b,2),E=h[0],y=h[1],I=(0,$.Z)({api:Q.L0,id:n?"".concat(t,"/versions/").concat(n):"".concat(t),tableReload:!0}),D=(0,i.Z)(I,2),k=D[0],S=D[1],w=k.data,_=k.isLoading,C=function(e){a.push({pathname:a.location.pathname,search:new URLSearchParams({update_image:!0}).toString()}),f((function(t){return he(he({},t),{},{isOpen:!t.isLoading,updateId:e})}))};return(0,l.useEffect)((function(){y(n?null==w?void 0:w.ImageDetails:null)}),[k,n]),(0,l.useEffect)((function(){S()}),[t,n]),r().createElement(l.Fragment,null,r().createElement(o.Z,{className:"pf-m-light"},r().createElement(c.K,{hasGutter:!0},r().createElement(u.v,null,r().createElement(Z,{imageData:k,imageVersion:E,openUpdateWizard:C})))),r().createElement(ge,{imageData:k,urlParam:t,imageVersion:E,openUpdateWizard:C,isLoading:_}),g.isOpen&&r().createElement(l.Suspense,{fallback:r().createElement(d.b,null,r().createElement(s.$,null))},r().createElement(fe.default,{navigateBack:function(){a.push({pathname:a.location.pathname}),f((function(e){return he(he({},e),{},{isOpen:!1})}))},updateImageID:g.updateId})))}},93597:(e,t,n)=>{"use strict";n.d(t,{$c:()=>E,Bi:()=>s,Dk:()=>f,EC:()=>g,EV:()=>b,H1:()=>u,Kz:()=>h,L0:()=>p,QY:()=>v,dj:()=>m,dt:()=>d});var a=n(15861),i=n(29439),l=n(64687),r=n.n(l),o=n(66702),c=n(93454),u=function(e){var t={name:e};return c.instance.post("".concat(o.Ds,"/images/checkImageName"),t)},s=function(e){var t=e.Id,n=e.name,a=e.version,l=e.description,r=e.release,u=e.architecture,s=e.username,d=e.credentials,m=e.imageType,p=e["selected-packages"],v=e["third-party-repositories"],g=e["custom-packages"],f=m||[],b=(0,i.Z)(f,1)[0];m.length>1&&(b="rhel-edge-installer");var h={name:n,version:a,description:l,distribution:r,imageType:b,packages:p.map((function(e){return{name:e.name}})),outputTypes:m,commit:{arch:u},installer:{username:s,sshkey:d},thirdPartyRepositories:null==v?void 0:v.map((function(e){return{ID:e.id,Name:e.name,URL:e.URL}})),customPackages:null==g?void 0:g.map((function(e){return{Name:e.name}}))},E="".concat(o.Ds,"/images");return a>1&&(E+="/".concat(t,"/update")),c.instance.post(E,h)},d=function(e){var t=e.id,n=e.q,a=void 0===n?{limit:10,offset:0,sort_by:"-created_at"}:n,i=(0,o.Vs)(a);return c.instance.get("".concat(o.Ds,"/image-sets/").concat(t,"?").concat(i))},m=function(e){var t=e.imageSetID,n=e.query,a=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,i=(0,o.Vs)(a);return c.instance.get("".concat(o.Ds,"/image-sets/view/").concat(t,"/versions?").concat(i))},p=function(e){var t=e.id,n=e.q,a=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,i=(0,o.Vs)(a);return c.instance.get("".concat(o.Ds,"/image-sets/view/").concat(t,"?").concat(i))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0,sort_by:"-created_at"},t=(0,o.Vs)(e);return c.instance.get("".concat(o.Ds,"/image-sets?").concat(t))},g=function(e){return c.instance.get("".concat(o.Ds,"/images/").concat(e,"/status"))},f=function(e){return c.instance.get("".concat(o.Ds,"/updates/device/").concat(e,"/image"))},b=function(){var e=(0,a.Z)(r().mark((function e(t,n,a){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new URLSearchParams({distribution:t,architecture:n,search:a}),e.abrupt("return",(0,c.instance)("".concat(o.DO,"/packages?").concat(i.toString())));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(e){var t=e.id;return c.instance.get("".concat(o.Ds,"/images/").concat(t,"/details"))},E=function(e){var t=e.query;""===t&&(t={limit:20,offset:0,sort_by:"-updated_at"});var n=(0,o.Vs)(t);return c.instance.get("".concat(o.Ds,"/image-sets/view?").concat(n))}},35681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,u:()=>p});var a=n(92950),i=n.n(a),l=n(45697),r=n.n(l),o=n(69174),c=n(16545),u=n(79851),s=n(34512),d=n(98309),m={booting:{text:"Booting",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},building:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},created:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},upToDate:{text:"Up to date",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},success:{text:"Ready",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},passed:{text:"Passed",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},updateAvailable:{text:"Update available",Icon:d.iQ.exclamationTriangle,color:d.OE.yellow,labelColor:"orange"},updating:{text:"Updating",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},error:{text:"Error",Icon:d.iQ.timesCircle,color:d.OE.red,labelColor:"red"},default:{text:"Unknown",Icon:d.iQ.unknown},interrupted:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},unresponsive:{text:"Unresponsive",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"},errorWithExclamationCircle:{text:"Error",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"}},p=function(e,t,n){return"ERROR"===n?"error":"UNRESPONSIVE"===n?"unresponsive":"UPDATING"===e?"updating":t?"updateAvailable":"upToDate"},v=function(e){var t=e.id,n=e.type,a=e.isLabel,l=void 0!==a&&a,r=e.toolTipContent,d=void 0===r?"":r,p=e.className,v=void 0===p?"":p,g=e.isLink,f=Object.prototype.hasOwnProperty.call(m,n)?m[n]:m.default,b=f.text,h=f.Icon,E=f.color,y=f.labelColor;return i().createElement(i().Fragment,null,l?i().createElement(o._,{id:t,color:y,icon:i().createElement(h,null),className:v},b):i().createElement(u.P,{id:t,style:{color:E},className:v},i().createElement(s.J,{className:"pf-u-mr-sm"},d?i().createElement(c.u,{content:"blargh"},i().createElement(h,null)):i().createElement(h,null)),i().createElement(s.J,null,i().createElement("p",{style:g?{textDecoration:" grey dotted underline",cursor:"pointer"}:{}},b))))};const g=v;v.propTypes={id:r().string,type:r().string,isLabel:r().bool,toolTipContent:r().string,className:r().string,isLink:r().bool},v.defaultProps={id:"status"}},58392:()=>{},37625:()=>{},21064:()=>{},82014:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/ImageDetail.075175a3e15b9f751bbbfa2e8686bc0e.js.map