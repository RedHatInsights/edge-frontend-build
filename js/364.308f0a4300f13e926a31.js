(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[364],{53010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var a=n(93433),i=n(4942),o=n(15861),r=n(29439),l=n(64687),s=n.n(l),c=n(92950),u=n.n(c),d=n(61094),m=n(96354),p=n(25563),v=n(52643),g=n(29390),f=n(37619),h=n(45697),b=n.n(h),E=n(20873),y=n(77760),P=n(93597),I=n(48903),S=n(32349),k=n(98309),D=n(96094);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t,n,i,l,h,b,O,N,x,T,C,U,j,L,Z,_,V,R=e.navigateBack,A=e.updateImageID,W=e.reload,B=e.notificationProp,F=e.locationProp,H=(0,c.useState)(),z=(0,r.Z)(H,2),Q=z[0],q=z[1],G=(0,y.useDispatch)(),K=function(){R(),W&&W()};(0,c.useEffect)((function(){(0,o.Z)(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a||a.getUser().then((function(e){return q(null!=e?e:{})}));case 1:case"end":return e.stop()}}),e)})))()}),[]);var M=(0,D.Z)({api:P.Kz,id:A}),J=(0,r.Z)(M,1)[0],$=J.data,Y=J.isLoading,X=(0,I.gV)("fleet-management.temporary-releases"),ee=(0,I.gV)("edge-management.image_wizard_ui"),te={onSuccess:{title:"Success",description:"Successfully started image update"},onError:{title:"Error",description:"Failed to create image"}};return Q&&$&&!Y?u().createElement(d.Z,{onClose:K,customComponentMapper:{review:E.Z},onSubmit:function(e){var t,n,a,i,o,r=e.values;(0,e.setIsSaving)((function(){return!0}));var l=w(w({},r),{},{Id:null==$||null===(t=$.image)||void 0===t?void 0:t.ID,name:null==$||null===(n=$.image)||void 0===n?void 0:n.Name,version:(null==$||null===(a=$.image)||void 0===a?void 0:a.Version)+1,architecture:"x86_64",credentials:r.credentials?r.credentials:null==$||null===(i=$.image)||void 0===i?void 0:i.Installer.SshKey,username:r.username?r.username:null==$||null===(o=$.image)||void 0===o?void 0:o.Installer.Username});(0,S.Z)(G,(function(){return(0,P.Bi)(l)}),te,B),K()},defaultArch:"x86_64",initialValues:{imageID:null==$?void 0:$.image.ID,name:null==$||null===(t=$.image)||void 0===t?void 0:t.Name,isUpdate:!0,description:null==$||null===(n=$.image)||void 0===n?void 0:n.Description,credentials:null==$||null===(i=$.image)||void 0===i?void 0:i.Installer.SshKey,username:null==$||null===(l=$.image)||void 0===l?void 0:l.Installer.Username,version:null==$||null===(h=$.image)||void 0===h?void 0:h.Version,release:null==$||null===(b=$.image)||void 0===b?void 0:b.Distribution,release_options:X?(0,I.pS)(null==$||null===(O=$.image)||void 0===O?void 0:O.Distribution,[].concat((0,a.Z)(k.vk),(0,a.Z)(k.R8))):(0,I.pS)(null==$||null===(N=$.image)||void 0===N?void 0:N.Distribution),imageType:["rhel-edge-commit"],"selected-packages":null==$||null===(x=$.image)||void 0===x||null===(T=x.Packages)||void 0===T?void 0:T.map((function(e){return w(w({},e),{},{name:e.Name})})),"third-party-repositories":null==$||null===(C=$.image)||void 0===C||null===(U=C.ThirdPartyRepositories)||void 0===U?void 0:U.map((function(e){return w({id:e.ID,name:e.Name},e)})),"initial-custom-repositories":null==$||null===(j=$.image)||void 0===j||null===(L=j.ThirdPartyRepositories)||void 0===L?void 0:L.map((function(e){return w({id:e.ID,name:e.Name},e)})),"custom-packages":null==$||null===(Z=$.image)||void 0===Z||null===(_=Z.CustomPackages)||void 0===_?void 0:_.map((function(e){return w(w({},e),{},{name:e.Name})}))},test:"",schema:{fields:[{component:m.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Update image"},showTitles:!0,title:"Update image: ".concat(null==$||null===(V=$.image)||void 0===V?void 0:V.Name),crossroads:["target-environment","release","imageType","third-party-repositories"],fields:[p.bR,p.Ud,p.l9,(0,p.jS)(ee,F),p.B9,p.$B,p.j7,p.Sp]}]}}):u().createElement(g.Y,null,u().createElement(v.b,null,u().createElement(f.$,{isSVG:!0,diameter:"100px"})))};N.propTypes={navigateBack:b().func,updateImageID:b().number,reload:b().func,notificationProp:b().object,locationProp:b().object},N.defaultProps={navigateBack:function(){}};const x=N},12877:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Se});var a=n(15861),i=n(4942),o=n(29439),r=n(64687),l=n.n(r),s=n(92950),c=n.n(s),u=n(89376),d=n(49739),m=n(83826),p=n(37619),v=n(52643),g=n(96620),f=n(45697),h=n.n(f),b=n(48903),E=n(68340),y=n(25834),P=n(78140),I=n(68774),S=n(50383),k=n(64029),D=n(32835),O=n(79851),w=n(34512),N=n(56787),x=n(84457),T=n(75728),C=n(99355),U=n(75824),j=n(35681),L=n(9192),Z=n(5964),_=n(62410),V=n(14627),R=function(e,t,n,a){var i,o=t||(null==e?void 0:e.LastImageDetails),r=[];return(null==o||null===(i=o.image)||void 0===i?void 0:i.ID)&&r.push(c().createElement(x.h,{key:"create-new-version-button",component:"button",onClick:function(){var e;return a(null==o||null===(e=o.image)||void 0===e?void 0:e.ID)}},"Create new version")),n&&r.push(c().createElement(x.h,{key:"download-button",component:"button"},c().createElement(E.x,{className:"force-text-black remove-underline",component:"a",href:n,rel:"noopener noreferrer",target:"_blank"},"Download installable .iso for newest image"))),r},A=function(e){var t,n,a,i,r,l,u,d,m,p,v,f,h,E,x,A,W,B,F,H=e.pathPrefix,z=e.urlName,Q=e.historyProp,q=e.navigateProp,G=e.imageData,K=e.imageVersion,M=e.openUpdateWizard,J=(0,s.useState)(!1),$=(0,o.Z)(J,2),Y=$[0],X=$[1],ee=(0,s.useState)({}),te=(0,o.Z)(ee,2),ne=te[0],ae=te[1],ie=Q?Q():g.useHistory?(0,g.useHistory)():null,oe=q?q():g.useNavigate?(0,g.useNavigate)():null;(0,s.useEffect)((function(){ae(null==G?void 0:G.data)}),[G]);var re="Actions for image set details view",le="image-set-details-dropdown",se=(0,V.S)(L._.manageImages,H,z);return c().createElement(c().Fragment,null,!G.isLoading&&G.hasError?c().createElement(k.a,null,c().createElement(D.g,null,(0,b.EW)({pathname:se,linkText:"Back to Manage Images",history:ie,navigate:oe}))):c().createElement(c().Fragment,null,c().createElement(k.a,null,c().createElement(D.g,null,(0,b.EW)({pathname:se,linkText:"Manage Images",history:ie,navigate:oe})),K?c().createElement(D.g,null,(0,b.EW)({pathname:"".concat(se,"/").concat(null==ne||null===(t=ne.ImageSet)||void 0===t?void 0:t.ID),linkText:null==ne||null===(n=ne.ImageSet)||void 0===n?void 0:n.Name,history:ie,navigate:oe})):c().createElement(D.g,{isActive:!0},(null==ne||null===(a=ne.ImageSet)||void 0===a?void 0:a.Name)||c().createElement(S.O,{width:"100px"})),K&&c().createElement(D.g,{isActive:!0},null==K||null===(i=K.image)||void 0===i?void 0:i.Version)),c().createElement(I.D,null,c().createElement(O.P,null,c().createElement(w.J,null,c().createElement(y.G,{component:"dl"},c().createElement(P.T,{component:"h1",className:"grid-align-center pf-u-mb-0"},(null==ne||null===(r=ne.ImageSet)||void 0===r?void 0:r.Name)||c().createElement(S.O,{width:"150px"})),c().createElement(P.T,{className:"pf-u-pt-sm",component:"dd"},null!=K&&null!==(l=K.image)&&void 0!==l&&l.Status||null!=ne&&null!==(u=ne.LastImageDetails)&&void 0!==u&&null!==(d=u.image)&&void 0!==d&&d.Status?c().createElement(j.Z,{type:K?null==K||null===(m=K.image)||void 0===m?void 0:m.Status.toLowerCase():null==ne||null===(p=ne.LastImageDetails)||void 0===p||null===(v=p.image)||void 0===v?void 0:v.Status.toLowerCase()}):c().createElement(S.O,{width:"100px"})),null!=K&&null!==(f=K.image)&&void 0!==f&&f.UpdatedAt||null!=ne&&null!==(h=ne.LastImageDetails)&&void 0!==h&&null!==(E=h.image)&&void 0!==E&&E.UpdatedAt?c().createElement(P.T,{component:"p"},"Last updated ",c().createElement(_.Z,{date:K?null==K||null===(x=K.image)||void 0===x?void 0:x.UpdatedAt:null==ne||null===(A=ne.LastImageDetails)||void 0===A||null===(W=A.image)||void 0===W?void 0:W.UpdatedAt})):c().createElement(S.O,{width:"200px"}))),c().createElement(w.J,{isFilled:!0}),c().createElement(w.J,null,c().createElement(N.L,{position:C.ir.right,toggle:c().createElement(T.Z,{id:le,toggleIndicator:Z.ZP,onToggle:function(e){return X(e)},isDisabled:"BUILDING"===(K?null==K||null===(B=K.image)||void 0===B?void 0:B.Status:null==ne||null===(F=ne.LastImageDetails)||void 0===F?void 0:F.image.Status)||!1,"aria-label":re},c().createElement(U.u,{content:re,reference:function(){return document.getElementById(le)}}),"Actions"),isOpen:Y,dropdownItems:R(ne,K,null==ne?void 0:ne.ImageBuildIsoURL,M)}))))))};A.propTypes={pathPrefix:h().string,urlName:h().string,historyProp:h().func,navigateProp:h().func,imageData:h().object,imageVersion:h().object,openUpdateWizard:h().func};const W=A;var B=n(35262),F=n(28883),H=n(29873),z=n(93433),Q=n(50693),q=n(16475),G=n(66435),K=n(98309),M=function(e){var t,n,a,i,r=e.pathPrefix,l=e.urlName,u=e.historyProp,d=e.navigateProp,m=e.imageData,p=e.imageVersion,v=(0,s.useState)({}),f=(0,o.Z)(v,2),h=f[0],k=f[1],D=(0,V.S)(L._.manageImages,r,l),O=u?u():g.useHistory?(0,g.useHistory)():null,w=d?d():g.useNavigate?(0,g.useNavigate)():null;(0,s.useEffect)((function(){var e;k(p||(null==m||null===(e=m.data)||void 0===e?void 0:e.LastImageDetails))}),[m,p]);var N=function(e){return(0,z.Z)(Array(2*e)).map((function(e,t){return c().createElement(S.O,{width:"180px",key:t})}))},x={Version:"Version",Created:function(){return c().createElement(_.Z,{date:null==h||null===(e=h.image)||void 0===e?void 0:e.CreatedAt});var e},"Type(s)":function(){var e,t;return null==h||null===(e=h.image)||void 0===e||null===(t=e.OutputTypes)||void 0===t?void 0:t.map((function(e,t){return c().createElement("div",{key:t},e)}))},Release:function(){var e;return null===K.aN||void 0===K.aN?void 0:K.aN[null==h||null===(e=h.image)||void 0===e?void 0:e.Distribution]},Description:"Description"},T={Username:function(){var e,t;return null==h||null===(e=h.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Username},"SSH key":function(){var e,t;return null==h||null===(e=h.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.SshKey}},C={"Total additional packages":function(){var e,t;return(0,b.EW)({pathname:"".concat(D,"/").concat(null==h||null===(e=h.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==h||null===(t=h.image)||void 0===t?void 0:t.ID,"/packages/additional"),linkText:null==h?void 0:h.additional_packages,history:O,navigate:w})},"Total packages":function(){var e,t;return(0,b.EW)({pathname:"".concat(D,"/").concat(null==h||null===(e=h.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==h||null===(t=h.image)||void 0===t?void 0:t.ID,"/packages/all"),linkText:null==h?void 0:h.packages,history:O,navigate:w})}},U={Added:function(){return null==h?void 0:h.update_added},Removed:function(){return null==h?void 0:h.update_removed},Updated:function(){return null==h?void 0:h.update_updated}};null!=h&&null!==(t=h.image)&&void 0!==t&&null!==(n=t.Installer)&&void 0!==n&&n.Checksum&&(x["SHA-256 checksum"]=function(){var e,t;return null==h||null===(e=h.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Checksum}),null!=h&&null!==(a=h.image)&&void 0!==a&&null!==(i=a.Commit)&&void 0!==i&&i.OSTreeCommit&&(x["Ostree commit hash"]=function(){var e,t;return null==h||null===(e=h.image)||void 0===e||null===(t=e.Commit)||void 0===t?void 0:t.OSTreeCommit});var j=function(e){return h?Object.entries(e).map((function(e,t){var n,a,i=(0,o.Z)(e,2),r=i[0],l=i[1];return c().createElement(s.Fragment,{key:t},c().createElement(P.T,{className:"details-label",component:P.v.dt},r),"SHA-256 checksum"===r||"Ostree commit hash"===r||"SSH key"===r&&l()?c().createElement(P.T,{component:P.v.dd},c().createElement(G.M5,{hoverTip:"Copy",clickTip:"Copied",variant:"expansion",className:"pf-u-text-break-word",id:"".concat(r.replace(/\s+/g,"-").toLowerCase(),"-clipboard-copy")},"function"==typeof l?l()||"Unavailable":(null==h||null===(n=h.image)||void 0===n?void 0:n[l])||"Unavailable")):c().createElement(P.T,{className:"pf-u-text-break-word",component:P.v.dd},"function"==typeof l?0===l()?0:l()||"Unavailable":(null==h||null===(a=h.image)||void 0===a?void 0:a[l])||"Unavailable"))})):null};return c().createElement(I.D,{className:"pf-u-ml-lg pf-u-mt-md"},c().createElement(Q.r,{span:12},c().createElement(q.P,{span:5},c().createElement(E.x,{component:E.q.h2},p?"Details":"Most recent image"),c().createElement(y.G,{component:y.F.dl},j(x)||N(6)),c().createElement(E.x,{component:E.q.h2},"User information "),c().createElement(y.G,{component:y.F.dl},j(T)||N(2))),c().createElement(q.P,{span:1}),c().createElement(q.P,{span:6},c().createElement(E.x,{component:E.q.h2},"Packages "),c().createElement(y.G,{component:y.F.dl},j(C)||N(3)),c().createElement(E.x,{component:E.q.h2},"Changes from previous version"),c().createElement(y.G,{component:y.F.dl},j(U)||N(3)))))};M.propTypes={pathPrefix:h().string,urlName:h().string,historyProp:h().func,navigateProp:h().func,imageData:h().object,imageVersion:h().object};const J=M;var $=n(73448),Y=n(93597),X=n(34766),ee=n(96094),te=[{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],ne=[{title:"Version",type:"version",sort:!0,columnTransforms:[(0,X.cellWidth)(15)]},{title:"Output",type:"image_type",sort:!1,columnTransforms:[(0,X.cellWidth)(25)]},{title:"Ostree commit hash",type:"ostree_commit_hash",sort:!1,columnTransforms:[(0,X.cellWidth)(20)]},{title:"Created",type:"created_at",sort:!0,columnTransforms:[(0,X.cellWidth)(15)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,X.cellWidth)(35)]}],ae=function(e,t,n,a,i,o,r){var l=(0,V.S)(L._.manageImages,a,i);return null==e?void 0:e.map((function(e){return{rowInfo:{id:null==e?void 0:e.ID,imageStatus:null==e?void 0:e.Status,isoURL:null==e?void 0:e.ImageBuildIsoURL,latestImageVersion:n,currentImageVersion:e.Version},noApiSortFilter:[null==e?void 0:e.Version,K.bd[null==e?void 0:e.ImageType],null==e?void 0:e.CreatedAt,null==e?void 0:e.Status],cells:[{title:(0,b.EW)({pathname:"".concat(l,"/").concat(t,"/versions/").concat(e.ID,"/details"),linkText:null==e?void 0:e.Version,history:o,navigate:r})},{title:K.bd[null==e?void 0:e.ImageType]},{title:null!=e&&e.CommitCheckSum?c().createElement(U.u,{content:c().createElement("div",null,e.CommitCheckSum)},c().createElement("span",null,(0,b.aS)(e.CommitCheckSum,5,5))):c().createElement(E.x,null,"Unavailable")},{title:c().createElement(_.Z,{date:null==e?void 0:e.CreatedAt})},{title:c().createElement(j.Z,{type:null==e?void 0:e.Status.toLowerCase()})}]}}))},ie=function(e){var t,n,a,i,r=e.pathPrefix,l=e.urlName,s=e.navigateProp,u=e.historyProp,d=e.locationProp,m=e.imageData,p=e.openUpdateWizard,v=null==m||null===(t=m.data)||void 0===t||null===(n=t.ImageSet)||void 0===n?void 0:n.ID,f=null==m||null===(a=m.data)||void 0===a||null===(i=a.ImageSet)||void 0===i?void 0:i.Version,h=u?u():g.useHistory?(0,g.useHistory)():null,b=s?s():g.useNavigate?(0,g.useNavigate)():null,E=(0,ee.Z)({api:function(e){var t=e.query;return(0,Y.dj)({imageSetID:v,query:t})},tableReload:!0}),y=(0,o.Z)(E,2),P=y[0],I=y[1],S=P.data,k=P.isLoading,D=P.hasError;return c().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},c().createElement($.Z,{navigateProp:s,historyProp:u,locationProp:d,apiFilterSort:!0,isUseApi:!0,filters:te,loadTableData:I,tableData:{count:null==S?void 0:S.count,data:null==S?void 0:S.data,isLoading:k,hasError:D},columnNames:ne,rows:ae(null==S?void 0:S.data,v,f,r,l,h,b),actionResolver:function(e){var t,n,a,i,o,r,l,s=[];return null!==(t=e.rowInfo)&&void 0!==t&&t.isoURL&&s.push({title:"Download",onClick:function(e,t,n){window.open(n.rowInfo.isoURL)}}),("SUCCESS"===(null===(n=e.rowInfo)||void 0===n?void 0:n.imageStatus)||"ERROR"===(null===(a=e.rowInfo)||void 0===a?void 0:a.imageStatus))&&s.push({title:"Update Image",onClick:function(e,t,n){p(n.rowInfo.id)},isDisabled:(null==e||null===(r=e.rowInfo)||void 0===r?void 0:r.latestImageVersion)!==(null==e||null===(l=e.rowInfo)||void 0===l?void 0:l.currentImageVersion)}),"BUILDING"===(null===(i=e.rowInfo)||void 0===i?void 0:i.imageStatus)&&null!==(o=e.rowInfo)&&void 0!==o&&o.id&&s.push({title:""}),s},areActionsDisabled:function(e){var t;return"BUILDING"===(null===(t=e.rowInfo)||void 0===t?void 0:t.imageStatus)},defaultSort:{index:3,direction:"desc"}}))};ie.propTypes={pathPrefix:h().string,urlName:h().string,navigateProp:h().func,historyProp:h().func,locationProp:h().func,imageData:h().object,urlParam:h().string,imageSetID:h().number,createRows:h().func,openUpdateWizard:h().func};const oe=ie;var re=n(47173),le=n(15265),se=n(3035),ce=[{label:"Name",type:"text"}],ue=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,X.cellWidth)(35)]},{title:"Version",type:"version",sort:!1,columnTransforms:[(0,X.cellWidth)(25)]},{title:"Release",type:"release",sort:!1,columnTransforms:[(0,X.cellWidth)(35)]}],de=function(e){var t=e.distribution,n=e.installedPackages,a=e.addedPackages;return(0===e.showAll?n.filter((function(e){return(null==a?void 0:a.filter((function(t){return e.name===t.Name})).length)>0})):n).map((function(e){return{noApiSortFilter:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release],cells:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release,{title:c().createElement("a",{href:"https://access.redhat.com/downloads/content/rhel---".concat(t,"/x86_64/7416/").concat(null==e?void 0:e.name,"/").concat(null==e?void 0:e.version,"-").concat(null==e?void 0:e.release,"/").concat(null==e?void 0:e.arch,"/fd431d51/package"),target:"_blank",rel:"noopener noreferrer"},c().createElement(re.zx,{variant:"link",isSmall:!0,icon:c().createElement(le.ZP,null),iconPosition:"right"},"More information"))}]}}))},me={0:"additional",1:"all"},pe={additional:0,all:1},ve=function(e){var t,n,a,i,r,l,u,d,m,p=e.pathPrefix,v=e.historyProp,f=e.locationProp,h=e.navigateProp,b=e.imageVersion,E=v?v():g.useHistory?(0,g.useHistory)():null,y=(f?f():(0,g.useLocation)()).pathname,P=h?h():g.useNavigate?(0,g.useNavigate)():null,I=y;p&&y.startsWith(p)&&(I=y.slice(p.length));var S=I.split("/"),k=7===S.length?pe[S[6]]:1,D=null==b||null===(t=b.image)||void 0===t||null===(n=t.Distribution)||void 0===n?void 0:n.split("-")[1].slice(0,-1),O=(0,s.useState)({}),w=(0,o.Z)(O,2),N=w[0],x=w[1],T=(0,s.useState)(k),C=(0,o.Z)(T,2),U=C[0],j=C[1];return(0,s.useEffect)((function(){x(b)}),[b]),(0,s.useEffect)((function(){S[5]!==me[U]&&j(k)}),[S]),"SUCCESS"===(null==b||null===(a=b.image)||void 0===a||null===(i=a.Commit)||void 0===i?void 0:i.Status)?c().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},c().createElement($.Z,{navigateProp:h,historyProp:v,locationProp:f,apiFilterSort:!1,filters:ce,tableData:{count:0===U?null==N?void 0:N.additional_packages:null==N?void 0:N.packages,isLoading:!1,hasError:!1},columnNames:ue,rows:null!=N&&null!==(r=N.image)&&void 0!==r&&null!==(l=r.Commit)&&void 0!==l&&l.InstalledPackages?de({distribution:D,installedPackages:null==N||null===(u=N.image)||void 0===u||null===(d=u.Commit)||void 0===d?void 0:d.InstalledPackages,addedPackages:null==N||null===(m=N.image)||void 0===m?void 0:m.Packages,showAll:U}):[],actionResolver:function(){return[]},areActionsDisabled:function(){return!0},defaultSort:{index:0,direction:"asc"},toggleButton:[{title:"Additional",key:0},{title:"All",key:1}],toggleAction:function(e){var t,n=null===(t=S[5])||void 0===t?void 0:t.toLowerCase();if(j(e),"packages"===n){7===S.length?S[6]=me[e]:S.push(me[e]);var a=(0,V.T)(S.join("/"),p);h?P(a):E.push(a)}},toggleState:U,emptyFilterState:{icon:"search",title:"No packages to display"}})):c().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},c().createElement(se.Z,{bgColor:"white",title:"Package data currently unavailable",body:"Packages will be displayed as soon as the image is finished being built.",primaryAction:null,secondaryActions:[]}))};ve.propTypes={pathPrefix:h().string,historyProp:h().func,locationProp:h().func,navigateProp:h().func,imageVersion:h().object};const ge=ve;var fe={details:0,packages:1,versions:1},he=function(e){var t=e.pathPrefix,n=e.urlName,a=e.historyProp,i=e.locationProp,r=e.navigateProp,l=e.imageData,u=e.openUpdateWizard,d=e.imageVersion,m=e.isLoading,p=a?a():g.useHistory?(0,g.useHistory)():null,v=(i?i():(0,g.useLocation)()).pathname,f=v;t&&v.startsWith(t)&&(f=v.slice(t.length));var h=r?r():g.useNavigate?(0,g.useNavigate)():null,E=(0,s.useState)(fe.details),y=(0,o.Z)(E,2),P=y[0],I=y[1],k=d?"imageTab":"imageSetTab",D=(0,b.Ff)(f,["baseURL","imageSetVersion","imageSetTab","imageVersion","imageTab","packagesToggle"]);return(0,s.useEffect)((function(){D.imageTab?I(fe[D.imageTab]):I(fe[D.imageSetTab])}),[v]),c().createElement(c().Fragment,null,!l.isLoading&&l.hasError?c().createElement(se.Z,{icon:"question",title:"Image not found",body:"Please check you have the correct link with the correct image Id.",primaryAction:{text:"Back to Manage Images",href:L._.manageImages},secondaryActions:[]}):c().createElement("div",{className:"edge-c-device--detail add-100vh"},c().createElement(B.m,{className:"pf-u-ml-md",activeKey:P,onSelect:function(e,n){var a=0===n?"details":d?"packages":"versions";D[k]=a;var i=(0,V.T)(D.buildUrl(),t);r?h(i):p.push(i),I(n)}},c().createElement(F.O,{eventKey:fe.details,title:c().createElement(H.T,null,"Details")},c().createElement(J,{pathPrefix:t,urlName:n,historyProp:a,navigateProp:r,imageData:l,imageVersion:d})),m?c().createElement(F.O,{title:c().createElement(H.T,null,c().createElement(S.O,{width:"75px"}))}):d?c().createElement(F.O,{eventKey:fe.packages,title:c().createElement(H.T,null,"Packages")},c().createElement(ge,{pathPrefix:t,urlName:n,navigateProp:r,historyProp:a,locationProp:i,imageVersion:d})):c().createElement(F.O,{eventKey:fe.versions,title:c().createElement(H.T,null,"Versions")},c().createElement(oe,{pathPrefix:t,urlName:n,navigateProp:r,historyProp:a,locationProp:i,imageData:l,openUpdateWizard:u})))))};he.propTypes={pathPrefix:h().string,urlName:h().string,historyProp:h().func,locationProp:h().func,navigateProp:h().func,imageData:h().object,imageVersion:h().object,openUpdateWizard:h().func,isLoading:h().bool};const be=he;var Ee=n(53010);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=function(e){var t=e.pathPrefix,n=e.urlName,i=e.paramsProp,r=e.historyProp,f=e.locationProp,h=e.navigateProp,E=e.notificationProp,y=i?i():g.useParams?(0,g.useParams)():null,P=y.imageId,I=y.imageVersionId,S=r?r():g.useHistory?(0,g.useHistory)():null,k=f?f():g.useLocation?(0,g.useLocation)():null,D=k.pathname,O=k.search,w=h?h():g.useNavigate?(0,g.useNavigate)():null,N=(0,s.useState)({isOpen:!1,updateId:null}),x=(0,o.Z)(N,2),T=x[0],C=x[1],U=(0,s.useState)(null),j=(0,o.Z)(U,2),L=j[0],Z=j[1],_=(0,ee.Z)({api:Y.L0,id:I?"".concat(P,"/versions/").concat(I):"".concat(P),tableReload:!0}),V=(0,o.Z)(_,2),R=V[0],A=V[1],B=R.data,F=R.isLoading,H={pathname:D,search:(0,b.fz)("update_image=true",!0,O)},z=function(e){h?w(Pe(Pe({},H),{},{replace:!0})):S.push(Pe({},H)),C((function(t){return Pe(Pe({},t),{},{isOpen:!t.isLoading,updateId:e})}))};(0,s.useEffect)((function(){Z(I?null==B?void 0:B.ImageDetails:null)}),[R,I]),(0,s.useEffect)((function(){A()}),[P,I]);var Q=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c().createElement(s.Fragment,null,c().createElement(u.Z,{className:"pf-m-light"},c().createElement(d.K,{hasGutter:!0},c().createElement(m.v,null,c().createElement(W,{pathPrefix:t,urlName:n,historyProp:r,navigateProp:h,imageData:R,imageVersion:L,openUpdateWizard:z})))),c().createElement(be,{pathPrefix:t,urlName:n,historyProp:r,locationProp:f,navigateProp:h,imageData:R,urlParam:P,imageVersion:L,openUpdateWizard:z,isLoading:F}),T.isOpen&&c().createElement(s.Suspense,{fallback:c().createElement(v.b,null,c().createElement(p.$,null))},c().createElement(Ee.default,{navigateBack:function(){h?w({pathname:D}):S.push({pathname:D}),C((function(e){return Pe(Pe({},e),{},{isOpen:!1})}))},updateImageID:T.updateId,reload:Q,notificationProp:E,locationProp:f})))};Ie.propTypes={pathPrefix:h().string,urlName:h().string,paramsProp:h().func,historyProp:h().func,locationProp:h().func,navigateProp:h().func,notificationProp:h().object};const Se=Ie},14627:(e,t,n)=>{"use strict";n.d(t,{S:()=>a,T:()=>i});var a=function(e,t,n){var a=e;if(t||n){var i=[];t&&i.push(t),n&&i.push(n),a=i.join("/")}return a},i=function(e,t){return!t||e.startsWith(t)?e:[t,e].join("/")}},93597:(e,t,n)=>{"use strict";n.d(t,{$c:()=>E,Bi:()=>u,Dk:()=>f,EC:()=>g,EV:()=>h,H1:()=>c,Kz:()=>b,L0:()=>p,QY:()=>v,Sj:()=>y,dj:()=>m,dt:()=>d});var a=n(15861),i=n(29439),o=n(64687),r=n.n(o),l=n(66702),s=n(93454),c=function(e){var t={name:e};return s.instance.post("".concat(l.Ds,"/images/checkImageName"),t)},u=function(e){var t=e.Id,n=e.name,a=e.version,o=e.description,r=e.release,c=e.architecture,u=e.username,d=e.credentials,m=e.imageType,p=e["selected-packages"],v=e["third-party-repositories"],g=e["custom-packages"],f=m||[],h=(0,i.Z)(f,1)[0];m.length>1&&(h="rhel-edge-installer");var b={name:n,version:a,description:o,distribution:r,imageType:h,packages:null==p?void 0:p.map((function(e){return{name:e.name}})),outputTypes:m,commit:{arch:c},installer:{username:u,sshkey:d},thirdPartyRepositories:null==v?void 0:v.map((function(e){return{ID:e.id,Name:e.name,URL:e.URL,uuid:e.uuid}})),customPackages:null==g?void 0:g.map((function(e){return{Name:e.name}}))},E="".concat(l.Ds,"/images");return a>1&&(E+="/".concat(t,"/update")),s.instance.post(E,b)},d=function(e){var t=e.id,n=e.q,a=void 0===n?{limit:10,offset:0,sort_by:"-created_at"}:n,i=(0,l.Vs)(a);return s.instance.get("".concat(l.Ds,"/image-sets/").concat(t,"?").concat(i))},m=function(e){var t=e.imageSetID,n=e.query,a=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,i=(0,l.Vs)(a);return s.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t,"/versions?").concat(i))},p=function(e){var t=e.id;return s.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0,sort_by:"-created_at"},t=(0,l.Vs)(e);return s.instance.get("".concat(l.Ds,"/image-sets?").concat(t))},g=function(e){return s.instance.get("".concat(l.Ds,"/images/").concat(e,"/status"))},f=function(e){return s.instance.get("".concat(l.Ds,"/updates/device/").concat(e,"/image"))},h=function(){var e=(0,a.Z)(r().mark((function e(t,n,a){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new URLSearchParams({distribution:t,architecture:n,search:a}),e.abrupt("return",(0,s.instance)("".concat(l.DO,"/packages?").concat(i.toString())));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),b=function(e){var t=e.id;return s.instance.get("".concat(l.Ds,"/images/").concat(t,"/details"))},E=function(e){var t=e.query;""===t&&(t={limit:20,offset:0,sort_by:"-updated_at"});var n=(0,l.Vs)(t);return s.instance.get("".concat(l.Ds,"/image-sets/view?").concat(n))},y=function(e,t){return s.instance.post("".concat(l.$J,"/rpms/names"),{urls:e,search:t})}},35681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,u:()=>p});var a=n(92950),i=n.n(a),o=n(45697),r=n.n(o),l=n(69174),s=n(75824),c=n(79851),u=n(34512),d=n(98309),m={booting:{text:"Booting",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},building:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},created:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},upToDate:{text:"Up to date",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},success:{text:"Ready",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},passed:{text:"Passed",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},updateAvailable:{text:"Update available",Icon:d.iQ.exclamationTriangle,color:d.OE.yellow,labelColor:"orange"},updating:{text:"Updating",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},error:{text:"Error",Icon:d.iQ.timesCircle,color:d.OE.red,labelColor:"red"},default:{text:"Unknown",Icon:d.iQ.unknown},interrupted:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},unresponsive:{text:"Unresponsive",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"},errorWithExclamationCircle:{text:"Error",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"}},p=function(e,t,n){return"ERROR"===n?"error":"UNRESPONSIVE"===n?"unresponsive":"UPDATING"===e?"updating":t?"updateAvailable":"upToDate"},v=function(e){var t=e.id,n=e.type,a=e.isLabel,o=void 0!==a&&a,r=e.toolTipContent,d=void 0===r?"":r,p=e.className,v=void 0===p?"":p,g=e.isLink,f=Object.prototype.hasOwnProperty.call(m,n)?m[n]:m.default,h=f.text,b=f.Icon,E=f.color,y=f.labelColor;return i().createElement(i().Fragment,null,o?i().createElement(l._,{id:t,color:y,icon:i().createElement(b,null),className:v},h):i().createElement(c.P,{id:t,style:{color:E},className:v},i().createElement(u.J,{className:"pf-u-mr-sm"},d?i().createElement(s.u,{content:"blargh"},i().createElement(b,null)):i().createElement(b,null)),i().createElement(u.J,null,i().createElement("p",{style:g?{textDecoration:" grey dotted underline",cursor:"pointer"}:{}},h))))};const g=v;v.propTypes={id:r().string,type:r().string,isLabel:r().bool,toolTipContent:r().string,className:r().string,isLink:r().bool},v.defaultProps={id:"status"}},96094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(4942),i=n(15861),o=n(29439),r=n(64687),l=n.n(r),s=n(83215),c=n(92950),u=n(77760);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=function(e){var t,n=e.api,a=e.id,r=void 0===a?null:a,d=e.statusMessages,p=e.tableReload,v=void 0!==p&&p,g=(0,u.useDispatch)(),f=(0,c.useState)([]),h=(0,o.Z)(f,2),b=h[0],E=h[1],y=(0,c.useState)(!0),P=(0,o.Z)(y,2),I=P[0],S=P[1],k=(0,c.useState)(!1),D=(0,o.Z)(k,2),O=D[0],w=D[1],N=null===(t=d)||void 0===t?void 0:t.onSuccess;d||(d={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var x=function(){var e=(0,i.Z)(l().mark((function e(){var t,a,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",S(!0),e.prev=2,e.next=5,n({id:r,query:t});case 5:a=e.sent,E(a),N&&g(m({},(0,s.wN)(m({variant:"success"},d.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),w(!0),g(m({},(0,s.wN)(m({variant:"danger"},d.onError))));case 14:return e.prev=14,S(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){v||x()}),[]),[{data:b,isLoading:I,hasError:O},x]}},58392:()=>{},37625:()=>{},21064:()=>{},82014:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/364.006fdfa1bc796f7b097a3be3f78391a0.js.map