(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[344],{8595:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var a=n(87757),r=n.n(a),o=n(48926),c=n.n(o),i=n(63038),l=n.n(i),s=n(1427),u=n.n(s),p=n(59713),m=n.n(p),d=n(67154),v=n.n(d),f=n(20097),h=n(67850),g=n(24029),b=n(2372),E=n(45697),w=n.n(E),k=n(68774),y=n(68340),O=n(25834),S=n(45454),A=n(48880);const C=function(){var e,t,n,a,r,o,c,i=(0,A.default)().getState;return u().createElement(k.D,null,u().createElement(y.x,{component:y.q.small},"Review the information and click the Create button to create your image using the following criteria."),u().createElement(y.x,{component:y.q.h3},"Image output"),u().createElement(O.G,{component:O.F.dl,"data-testid":"review-image-output"},u().createElement(S.T,{component:S.v.dt},"Release"),u().createElement(S.T,{component:S.v.dd},"Add value")),u().createElement(y.x,{component:y.q.h3},"Target environment"),(null===(e=i())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["aws-account-id"])&&u().createElement(u().Fragment,null,u().createElement(y.x,{id:"destination-header"},"Amazon Web Services"),u().createElement(O.G,{component:O.F.dl,"data-testid":"review-image-upload-aws"},u().createElement(S.T,{component:S.v.dt},"Account ID"),u().createElement(S.T,{component:S.v.dd},null===(n=i())||void 0===n||null===(a=n.values)||void 0===a?void 0:a["aws-account-id"]))),u().createElement(y.x,{component:y.q.h3},"Registration"),u().createElement(O.G,{component:O.F.dl,"data-testid":"review-image-registration"},u().createElement(S.T,{component:S.v.dt},"Subscription"),u().createElement(S.T,{component:S.v.dd},"Add value"),u().createElement(S.T,{component:S.v.dt},"Activation key"),u().createElement(S.T,{component:S.v.dd,type:"password"},"*".repeat(null===(r=i())||void 0===r||null===(o=r.values)||void 0===o||null===(c=o["subscription-activation"])||void 0===c?void 0:c.length))))};var T=n(6479),x=n.n(T),j=n(32612),P=n(15110),_=n(47173),D=n(66702),R=function(e){return e.map((function(e,t){return u().createElement(k.D,{key:"".concat(e.name,"-").concat(t)},u().createElement("span",{className:"pf-c-dual-list-selector__item-text"},e.name),u().createElement("small",null,e.summary))}))},I=function(e){return{name:e.props.children[0].props.children,summary:e.props.children[1].props.children}},q=function(e){var t=e.defaultArch,n=x()(e,["defaultArch"]),a=(0,A.default)(),o=a.change,i=a.getState,p=(0,j.Z)(n).input,m=(0,s.useRef)(),d=(0,s.useState)([]),v=l()(d,2),f=v[0],h=v[1],g=(0,s.useState)([]),b=l()(g,2),E=b[0],w=b[1],k=(0,s.useState)(""),y=l()(k,2),O=y[0],S=y[1];(0,s.useEffect)((function(){var e,t;w(R((null===(e=i())||void 0===e||null===(t=e.values)||void 0===t?void 0:t[p.name])||[]))}),[]);var C=function(e,t){var n=t.map(I);h(e),w(t),o(p.name,n)},T=function(){var e=c()(r().mark((function e(){var n,a,o,c,l,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.EV)((null===(n=i())||void 0===n||null===(a=n.values)||void 0===a?void 0:a.release)||"rhel-8",(null===(o=i())||void 0===o||null===(c=o.values)||void 0===c?void 0:c.architecture)||t,m.current);case 2:l=e.sent,s=l.data,h(R(s||[]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u().createElement(P.I,{className:"pf-u-mt-sm",isSearchable:!0,availableOptionsActions:[u().createElement(_.zx,{"aria-label":"Search button for available packages",key:"availableSearchButton","data-testid":"search-pkgs-button",onClick:T},"Search")],availableOptions:f,availableOptionsTitle:"Available packages",chosenOptions:E.filter((function(e){var t,n;return null===(t=I(e))||void 0===t||null===(n=t.name)||void 0===n?void 0:n.includes(O)})),chosenOptionsTitle:"Chosen packages",addSelected:C,removeSelected:C,addAll:C,removeAll:function(e){return C(e,E.filter((function(e){var t,n;return!(null===(t=I(e))||void 0===t||null===(n=t.name)||void 0===n?void 0:n.includes(O))})))},onAvailableOptionsSearchInputChanged:function(e){m.current=e},onChosenOptionsSearchInputChanged:function(e){return S(e)},filterOption:function(){return!0},id:"basicSelectorWithSearch"})};q.propTypes={defaultArch:w().string};const F=q;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.schema,n=e.onSubmit,a=e.onClose,r=e.customComponentMapper,o=e.defaultArch;return t?u().createElement(f.Z,{schema:t,className:"image-builder",subscription:{values:!0},FormTemplate:function(e){return u().createElement(h.ZP,v()({},e,{showFormControls:!1}))},onSubmit:function(e){return n(e)},componentMapper:M(M({},g.YS),{},{review:C,"package-selector":{component:F,defaultArch:o}},r),onCancel:a}):u().createElement(b.$,null)};N.propTypes={schema:w().object,onSubmit:w().func.isRequired,onClose:w().func.isRequired,customComponentMapper:w().shape(m()({},w().string,w().oneOfType([w().node,w().shape({component:w().node})]))),defaultArch:w().string};const B=N;var z=n(96354);const G={name:"review",title:"Review",fields:[{name:"review",component:"review"}]},W={title:"Packages",name:"packages",nextStep:"review",fields:[{component:z.Z.PLAIN_TEXT,name:"google-cloud-text-component",label:u().createElement(y.x,null,"Add optional additional packages to your image by searching available packages.")},{component:"package-selector",name:"selected-packages",label:"Available options"}]};var L=function(e){var t=e.navigateBack,n=(0,s.useState)(),a=l()(n,2),o=a[0],i=a[1];return(0,s.useEffect)((function(){c()(r().mark((function e(){var t,n,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a?void 0:a.getUser();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:o=e.t0,i((function(){return o}));case 7:case"end":return e.stop()}}),e)})))()}),[]),o?u().createElement(B,{onClose:function(){return t()},customComponentMapper:{review:C},onSubmit:function(e){console.log(e),t()},defaultArch:"x86_64",schema:{fields:[{component:z.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Create"},showTitles:!0,title:"Create image",crossroads:["target-environment","release"],description:"Create edge image",fields:[W,G]}]}}):u().createElement(b.$,null)};L.propTypes={navigateBack:w().func},L.defaultProps={navigateBack:function(){}};const $=L}}]);
//# sourceMappingURL=../sourcemaps/CreateImageWizard.e8c26272883ac86be52e.js.map