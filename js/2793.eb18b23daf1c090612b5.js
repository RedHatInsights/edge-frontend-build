(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[2793],{83584:(e,t,n)=>{"use strict";n.d(t,{gz:()=>F,iH:()=>Z,tZ:()=>Y,p8:()=>L,Rb:()=>O,U$:()=>b,An:()=>H,bN:()=>U,NQ:()=>d,kI:()=>D});var a=n(5544),r=n(44914),l=n.n(r),i=n(72583),o=n(99176),s=n(76347),c=n(5556),u=n.n(c),m=function(e){var t=e.buttonLabels,n=t.cancel,c=t.submit,u=t.back,m=(0,r.useState)(!1),d=(0,a.A)(m,2),p=d[0],f=d[1],v=(0,r.useContext)(s.default),g=v.handlePrev,h=v.formOptions;return l().createElement(o.Pc,null,(function(){return l().createElement(l().Fragment,null,l().createElement(i.$n,{variant:"primary",type:"button",isDisabled:!h.valid||h.getState().validating||p,onClick:function(){h.onSubmit({values:h.getState().values,setIsSaving:f})}},c),l().createElement(i.$n,{type:"button",variant:"secondary",onClick:g,isDisabled:p},u),l().createElement("div",{className:"pf-c-wizard__footer-cancel"},l().createElement(i.$n,{type:"button",variant:"link",onClick:h.onCancel,isDisabled:p},n)))}))};m.propTypes={buttonLabels:u().shape({cancel:u().node,submit:u().node,back:u().node}),isSaving:u().bool};const d={name:"review",title:"Review",buttons:m,fields:[{name:"review",component:"review"}]};var p=n(57502),f=n(22069),v=n(51976),g=n(81558),h=n(51343),E=function(){var e,t=null===(e=(0,(0,g.default)().getState)())||void 0===e||null===(e=e.values)||void 0===e?void 0:e.release,n=void 0!==t?h.Lm[t]:"";return l().createElement(v.n,null,l().createElement(f.E,null,"Add packages to your ",l().createElement(f.E,{component:"b"},n)," image."))};const b={title:"Additional Red Hat packages",name:"packages",nextStep:"repositories",substepOf:"Content",fields:[{component:p.A.PLAIN_TEXT,name:"google-cloud-text-component",label:l().createElement(E,null)},{component:"package-selector",name:"selected-packages",label:"Available options",initialValue:[],clearedValue:[]}]};var y=n(60436),A=n(5029),k=n(18960),w=n(95658),S=n(17427),x=function(){var e,t,n=(0,S.h)("fleet-management.temporary-releases"),i=(0,g.default)(),o=i.change,s=i.getState,c=(null===(e=s())||void 0===e||null===(e=e.values)||void 0===e?void 0:e.release)||(n?h.Kh:h.WW),u=(null===(t=s())||void 0===t||null===(t=t.values)||void 0===t?void 0:t.release_options)||(n?(0,S.nh)(c,[].concat((0,y.A)(h.t9),(0,y.A)(h.gA))):(0,S.nh)(c)),m=(0,r.useState)(u),d=(0,a.A)(m,2),p=d[0],f=d[1],v=(0,r.useState)(!1),E=(0,a.A)(v,2),b=E[0],w=E[1],x=(0,r.useState)(c),O=(0,a.A)(x,2),R=O[0],T=O[1];return l().createElement(A.l,{variant:"single",width:"100%",onToggle:function(e,t){return function(e){return w(e)}(t)},onSelect:function(e,t,n){n?(T(c),w(!1),f(u)):(T(t),w(!1)),o("release",t)},selections:R,isOpen:b,style:{paddingLeft:0,marginLeft:0}},p.map((function(e){return l().createElement(k.O,{key:e.value,value:e.value},e.label)})))};const O={title:"Options",name:"imageOutput",nextStep:function(e){var t,n=e.values;return null!=n&&null!==(t=n.imageType)&&void 0!==t&&t.includes("rhel-edge-installer")||!n.imageType?"registration":"activationKey"},fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(f.E,null,"Enter some basic information about your image.")},{component:p.A.PLAIN_TEXT,name:"release",label:l().createElement(x,null),validate:[{type:w.A.REQUIRED}],isRequired:!0},{component:"image-output-checkbox",name:"imageType",options:Object.entries(h.hx).map((function(e){var t=(0,a.A)(e,2);return{value:t[0],label:t[1]}})),initialValue:["rhel-edge-installer","rhel-edge-commit"],clearedValue:[],validate:[{type:w.A.REQUIRED}]}]};var R=n(10467),T=n(54756),C=n.n(T),j=n(96998),P=n(96553),_=n(36513),N=function(){var e,t=null===(e=(0,(0,g.default)().getState)().values)||void 0===e?void 0:e.description;return l().createElement("h1",null,(null==t?void 0:t.length)||0,"/250")};const L=function(){return{title:"Details",name:"imageSetDetails",nextStep:"imageOutput",fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(f.E,null,"Enter a name and description to easily identify your image later.")},{component:p.A.TEXT_FIELD,name:"name",label:"Image name",placeholder:"Image name",helperText:"Can only contain letters, numbers, spaces, hyphens ( - ), and underscores( _ ).",validate:[(0,R.A)(C().mark((function e(){var t,n=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=n.length>0&&void 0!==n[0]?n[0]:"").length){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,(0,_.vy)(t);case 5:if(!e.sent.ImageExists){e.next=8;break}throw"Name already exists";case 8:case"end":return e.stop()}}),e)}))),{type:w.A.REQUIRED},{type:w.A.MAX_LENGTH,threshold:50},S.m0],isRequired:!0},{component:p.A.TEXTAREA,style:{paddingRight:"32px",height:"25vh"},name:"description",label:l().createElement(j.s,{justifyContent:{default:"justifyContentSpaceBetween"}},l().createElement(P.Z,null,l().createElement(f.E,{component:"b"},"Description")),l().createElement(P.Z,null,l().createElement(N,null))),placeholder:"Add description",resizeOrientation:"vertical",validate:[{type:w.A.MAX_LENGTH,threshold:250}]}]}},D={title:"Details",name:"imageSetDetails",nextStep:"imageOutput",fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(f.E,null,"Enter a description to easily identify your image later.")},{component:p.A.TEXTAREA,style:{height:"25vh"},name:"description",label:"Description",placeholder:"Add description",validate:[{type:w.A.MAX_LENGTH,threshold:250}]}]};var I=n(59257),V=n(49318);const H={title:"System registration",name:"registration",nextStep:"activationKey",fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(f.E,null,"Use this to log into your system.")},{component:p.A.TEXT_FIELD,label:"Username",placeholder:"Enter username",helperText:l().createElement(I.E,null,l().createElement(V.j,{className:"pf-u-mt-xs",variant:"indeterminate"},"Can only contain letters, numbers, hyphens ( - ), and underscores( _ ).")),name:"username",validate:[{type:w.A.REQUIRED},{type:w.A.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:"Can only contain letters, numbers, hyphens ( - ), and underscores( _ )."},{type:w.A.MAX_LENGTH,threshold:50},{type:"reservedUsernameValidator"}],isRequired:!0},{component:"ssh-input-field",name:"credentials",validate:[{type:w.A.REQUIRED},{type:w.A.PATTERN,pattern:/^(ssh-(rsa|dss|ed25519)|ecdsa-sha2-nistp(256|384|521)) \S+/}],isRequired:!0}]},F={title:"Activation Keys",name:"activationKey",nextStep:"packages",fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(f.E,null,"Automatically register your systems with Red Hat to enhance security and track your spending.")},{component:p.A.PLAIN_TEXT,name:"method",label:"Registration Method"},{component:"activation-keys-selector",name:"activationKey"},{component:p.A.PLAIN_TEXT,name:"subscription-register-later",label:l().createElement(f.E,null,l().createElement(f.E,null,"Register Later"),l().createElement(f.E,null,"On initial boot, systems will need to be registered manually before having access to updates or Red Hat services. Registering and connecting your systems during the image creation is recommended."),l().createElement(f.E,null,"If you prefer to register later, review the instructions for manual registration with remote host configuration."),l().createElement(i.$n,{component:"a",target:"_blank",variant:"link",iconPosition:"right",href:"https://access.redhat.com/articles/rhc"},"Registering with remote host configuration")),condition:{or:[{when:"register-system",is:"register-later"}]}}]};var q=n(74596);const U=function(e,t){return{title:"Custom repositories",name:"repositories",nextStep:function(t){var n,a,r=t.values;return(null==r||null===(n=r["third-party-repositories"])||void 0===n?void 0:n.length)>0||null!=r&&r["show-custom-packages"]||(null==r||null===(a=r["initial-custom-repositories"])||void 0===a?void 0:a.length)>0?e?"additionalCustomPackages":"customPackages":"review"},substepOf:"Content",fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(f.E,null,"Choose from linked custom repositories from which to search and add packages to this image.")},{component:"custom-repo-table",name:"third-party-repositories",label:l().createElement(q.A,{locationProp:t}),initialValue:[],clearedValue:[],initializeOnMount:!0}]}};var K=n(89915),X=n(44461),M=n(90678),z=n(73113),$=n(98457),B=function(e){var t=e.variant,n=e.title;return l().createElement(K.F,{className:"pf-u-mt-lg",variant:t,isInline:!0,title:n,style:{"--pf-c-content--h4--MarginTop":0}})};B.propTypes={variant:u().string,title:u().string};var Q=function(){var e,t,n,a,o=(0,g.default)(),s=o.getState,c=o.change,u=null===(e=s())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["third-party-repositories"],m=null===(t=s())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["initial-custom-repositories"],d=null===(n=s())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["custom-packages"],p=null===(a=s())||void 0===a||null===(a=a.values)||void 0===a?void 0:a.release,E=void 0!==p?h.Lm[p]:"";return(0,r.useEffect)((function(){c("validate-custom-repos",!0),c("show-custom-packages",!0)}),[]),l().createElement(l().Fragment,null,l().createElement(v.n,null,l().createElement(f.E,null,"Add packages from"," ",l().createElement(X.A,{style:{visibility:"visible"},position:"bottom",headerContent:"Custom Repositories",bodyContent:l().createElement(M.B,null,u.map((function(e){var t=e.name;return l().createElement(z.a,{key:t},l().createElement(f.E,null,t))})))},l().createElement(i.$n,{variant:"link",isInline:!0},u.length," custom"," ",1===u.length?"repository":"repositories"))," ","to your ",l().createElement("b",null,E)," image.")),0===u.length&&d.length>0?l().createElement(B,{variant:"danger",title:"No custom repositories linked. Clear custom packages or link a repository."}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0!==t.length||0!==n.length)&&(t.length<e.length||!e.every((function(e){return t.find((function(t){return t.name===e.name}))})))}(m,u,d)?l().createElement(B,{variant:"warning",title:"Linked custom repositories were removed when these packages were added. Ensure the package list is still correct."}):null)};const Y={title:"Additional custom packages",name:"customPackages",nextStep:"review",substepOf:"Content",fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(Q,null)},{component:"custom-package-text-area",style:{paddingRight:"32px",height:"25vh"},name:"custom-packages",initialValue:[],clearedValue:[]},{component:p.A.PLAIN_TEXT,name:"packageDetails",label:l().createElement(f.E,null,"Specify individual packages by exact name and casing, with no whitespace, one entry to a line, and can include hyphens ( - ).")},{component:p.A.PLAIN_TEXT,name:"warning",label:l().createElement(f.E,{className:"pf-u-warning-color-200"},l().createElement($.Ay,{className:"pf-u-warning-color-100"}),"  Packages names that do not have exact name and casing will not be included in the image.")}]};var W=function(e){var t=e.variant,n=e.title;return l().createElement(K.F,{className:"pf-u-mt-lg",variant:t,isInline:!0,title:n,style:{"--pf-c-content--h4--MarginTop":0}})};W.propTypes={variant:u().string,title:u().string};var G=function(){var e,t,n,a,o=(0,g.default)(),s=o.getState,c=o.change,u=null===(e=s())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["third-party-repositories"],m=null===(t=s())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["initial-custom-repositories"],d=null===(n=s())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["custom-packages"],p=null===(a=s())||void 0===a||null===(a=a.values)||void 0===a?void 0:a.release,E=void 0!==p?h.Lm[p]:"";return(0,r.useEffect)((function(){c("validate-custom-repos",!0),c("show-custom-packages",!0)}),[]),l().createElement(l().Fragment,null,l().createElement(v.n,null,l().createElement(f.E,null,"Search and choose packages from linked"," ",l().createElement(X.A,{style:{visibility:"visible"},position:"bottom",headerContent:"Custom Repositories",bodyContent:l().createElement(M.B,null,u.map((function(e){var t=e.name;return l().createElement(z.a,{key:t},l().createElement(f.E,null,t))})))},l().createElement(i.$n,{variant:"link",isInline:!0},"custom ",1===u.length?"repository":"repositories"))," ","to add to your ",l().createElement("b",null,E)," image.")),0===u.length&&d.length>0?l().createElement(W,{variant:"danger",title:"No custom repositories linked. Clear custom packages or link a repository."}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0!==t.length||0!==n.length)&&(t.length<e.length||!e.every((function(e){return t.find((function(t){return t.name===e.name}))})))}(m,u,d)?l().createElement(W,{variant:"warning",title:"Linked custom repositories were removed when these packages were added. Ensure the package list is still correct."}):null)};const Z={title:"Additional custom packages",name:"additionalCustomPackages",nextStep:"review",substepOf:"Content",fields:[{component:p.A.PLAIN_TEXT,name:"description",label:l().createElement(G,null)},{component:"additional-custom-packages",name:"custom-packages",label:"Available options",initialValue:[],clearedValue:[]}]}},37947:(e,t,n)=>{"use strict";n.d(t,{Ms:()=>s,_3:()=>o,iQ:()=>l,kS:()=>i,qe:()=>c});var a=n(83986),r=n(56830),l=function(e){var t=e.imageID,n=void 0===t?"":t,l=e.query,i=(0,a.Lm)(l);return r.instance.get("".concat(a.rm,"/thirdpartyrepo?").concat(n?"imageID=".concat(n,"&"):"").concat(i))},i=function(e){return r.instance.post("".concat(a.rm,"/thirdpartyrepo"),{Name:e.name,URL:e.baseURL})},o=function(e){return r.instance.put("".concat(a.rm,"/thirdpartyrepo/").concat(e.id),{Name:e.name,URL:e.baseURL})},s=function(e){return r.instance.delete("".concat(a.rm,"/thirdpartyrepo/").concat(e))},c=function(e){return r.instance.get("".concat(a.rm,"/thirdpartyrepo/checkName/").concat(e))}},21118:(e,t,n)=>{"use strict";n.d(t,{A:()=>je});var a=n(64467),r=n(58168),l=n(44914),i=n.n(l),o=n(97744),s=n(63537),c=n(20375),u=n(932),m=n(5556),d=n.n(m),p=n(88207),f=n(60436),v=n(10467),g=n(5544),h=n(80045),E=n(54756),b=n.n(E),y=n(81558),A=n(38877),k=n(36513),w=n(51976),S=n(22069),x=n(72583),O=n(58553),R=n(16178),T=n(57277),C=n(95506),j=n(90416),P=n(17912),_=n(59257),N=n(49318),L=n(35253),D=n(43018),I=n(23285),V=n(15322),H=n(53642),F=n(57691),q=n(85862),U=n(91918),K=n(63439),X=n(89015),M=n(51343),z=["defaultArch"];function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var B=function(e){var t=e.text;return i().createElement(S.E,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},t)};B.propTypes={text:d().string};var Q=function(e){var t=e.heading,n=e.body;return i().createElement(w.n,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},i().createElement(S.E,{component:"h3"},t),i().createElement(S.E,{component:"small"},n))};Q.propTypes={heading:d().string,body:d().string};var Y=function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selected:!1,isVisible:!0},e)}))},W=function(e){var t=e.defaultArch,n=(0,h.A)(e,z),a=(0,y.default)(),r=a.change,o=a.getState,s=(0,A.A)(n).input,c=i().useState([]),u=(0,g.A)(c,2),m=u[0],d=u[1],p=i().useState([]),E=(0,g.A)(p,2),S=E[0],$=E[1],W=i().useState(""),G=(0,g.A)(W,2),Z=G[0],J=G[1],ee=(0,l.useState)(!1),te=(0,g.A)(ee,2),ne=te[0],ae=te[1],re=(0,l.useState)(!1),le=(0,g.A)(re,2),ie=le[0],oe=le[1],se=(0,l.useState)(null),ce=(0,g.A)(se,2),ue=ce[0],me=ce[1],de=(0,l.useState)(!1),pe=(0,g.A)(de,2),fe=pe[0],ve=pe[1],ge=(0,l.useState)(!1),he=(0,g.A)(ge,2),Ee=he[0],be=he[1],ye=(0,l.useState)(!1),Ae=(0,g.A)(ye,2),ke=Ae[0],we=Ae[1];(0,l.useEffect)((function(){var e,t=(null===(e=o())||void 0===e||null===(e=e.values)||void 0===e?void 0:e[s.name])||[];$((0,M.HR)(Y(t)));var n=document.querySelector('[aria-label="available search input"]');return null==n||n.addEventListener("keydown",xe),function(){return n.removeEventListener("keydown",xe)}}),[]),(0,l.useEffect)((function(){ne&&(Se(),ae(!1))}),[ne]),(0,l.useEffect)((function(){Oe()}),[ue]);var Se=function(){var e=(0,v.A)(b().mark((function e(){var n,a,r,l,i,s,c,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Z){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,k.G9)((null===(n=o())||void 0===n||null===(n=n.values)||void 0===n?void 0:n.release)||"rhel-85",(null===(a=o())||void 0===a||null===(a=a.values)||void 0===a?void 0:a.architecture)||t,Z);case 4:if(r=e.sent,l=r.data,i=r.meta,l){e.next=12;break}return ve(!0),oe(!1),d([]),e.abrupt("return");case 12:if(!(i.count>100)){e.next=27;break}if(ve(!1),oe(!0),s=null,l.forEach((function(e,t){e.name!==Z||(s=t)})),c=!S.find((function(e){return e.name===l[s].name})),null===s||!c){e.next=22;break}return we(!0),d(Y([l[s]])),e.abrupt("return");case 22:return we(!1),d([]),e.abrupt("return");case 27:oe(!1),we(!1);case 29:u=l.filter((function(e){return!S.find((function(t){return t.name===e.name}))})),d((0,M.HR)(Y(u))),ve(!1);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(e){"Enter"===e.key&&(e.stopPropagation(),ae(!0))},Oe=function(){if(ue){var e=document.querySelector(".pf-m-".concat(ue.pane," .pf-v5-c-dual-list-selector__menu"));ue.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-v5-c-dual-list-selector__list-item-row").classList.add("pf-u-background-color-disabled-color-300")})),setTimeout((function(){ue.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-v5-c-dual-list-selector__list-item-row").classList.remove("pf-u-background-color-disabled-color-300")}))}),400),e.scrollTop=ue.scrollHeight,me(null)}},Re=function(e){for(var t=e?m:S,n=e?S:m,a=[],l=0;l<t.length;l++){var i=t[l];i.selected&&i.isVisible&&(a.push(i),t.splice(l,1),i.selected=!1,l--)}var o=61*(n=(0,M.HR)([].concat((0,f.A)(n),a))).findIndex((function(e){return e.name===a[0].name}));e?(d((0,M.HR)((0,f.A)(t))),$(n),r(s.name,n)):($((0,M.HR)((0,f.A)(t))),d(n),r(s.name,(0,f.A)(t))),me({pkgs:a,pane:e?"chosen":"available",scrollHeight:o}),we(!1)},Te=function(e){e?($((0,M.HR)([].concat((0,f.A)(m.filter((function(e){return e.isVisible}))),(0,f.A)(S)))),d((0,M.HR)((0,f.A)(m.filter((function(e){return!e.isVisible}))))),r(s.name,[].concat((0,f.A)(m),(0,f.A)(S)))):(d((0,M.HR)([].concat((0,f.A)(S.filter((function(e){return e.isVisible}))),(0,f.A)(m)))),$((0,M.HR)((0,f.A)(S.filter((function(e){return!e.isVisible}))))),r(s.name,[])),we(!1)},Ce=function(e){return i().createElement(i().Fragment,null,i().createElement(L.M,null,i().createElement(H.b,{isFill:!0},i().createElement(I.ks,{id:"".concat(e?"available":"chosen","-textinput"),type:"search",onChange:function(t,n){return function(t){J(t),e||(0,f.A)(S).forEach((function(e){e.isVisible=""===t||e.name.toLowerCase().includes(t.toLowerCase())}))}(n)},placeholder:"Search for packages",onFocus:function(){return be(!0)},onBlur:function(){return be(!1)},validated:ie&&e&&!Ee?"warning":"","aria-label":e?"available search input":"chosen search input","data-testid":e?"available-search-input":"chosen-search-input"})),i().createElement(H.b,null,e?i().createElement(x.$n,{onClick:Se,isDisabled:!e,variant:"control","aria-label":"search button for search input","data-testid":"package-search"},i().createElement(F.Ay,null)):i().createElement(D.z,null,i().createElement(F.Ay,{className:"pf-u-ml-xs pf-u-mr-xs"})))),ie&&e&&i().createElement(_.E,null,i().createElement(N.j,{variant:"warning"},"Over 100 results found. Refine your search.")))},je=function(e,t){return e.map((function(e,n){return e.isVisible?i().createElement(C.h,{key:n,isSelected:e.selected,id:"composable-option-".concat(n),onOptionSelect:function(e){return function(e,t,n){if(n){var a=(0,f.A)(S);a[t].selected=!S[t].selected,$((0,M.HR)(a))}else{var r=(0,f.A)(m);r[t].selected=!m[t].selected,d((0,M.HR)(r))}}(0,n,t)}},i().createElement(w.n,null,i().createElement("span",{id:"package-".concat(e.name),className:"pf-c-dual-list-selector__item-text"},e.name),i().createElement("small",null,e.summary))):null}))},Pe=function(e){var t=e.filter((function(e){return e.isVisible})).length,n=e.filter((function(e){return e.selected&&e.isVisible})).length;return n>0?"".concat(n," of ").concat(t," items selected"):"".concat(t," ").concat(t>1?"items":"item")};return i().createElement(O.s,null,i().createElement(R.u,{title:"Available packages",status:Pe(m),searchInput:Ce(!0)},i().createElement(T.C,{style:{height:"290px"},"data-testid":"available-packages-list"},m.length>0&&!ke?je(m,!1):fe?i().createElement(Q,{heading:"No Results Found",body:"Adjust your search and try again"}):ie?i().createElement(i().Fragment,null,ke&&i().createElement(_.E,null,i().createElement(N.j,{className:"pf-u-ml-md pf-u-mt-md",variant:"indeterminate"},"Exact match")),ke&&je(m,!1),ke&&i().createElement(V.c,{className:"pf-u-mt-md",inset:{default:"insetMd"}}),i().createElement(Q,{heading:"Too many results to display",body:"Please make the search more specific and try again"})):i().createElement(B,{text:"Search above to add additional packages to your image."}))),i().createElement(j.$,{"aria-label":"Selector controls"},i().createElement(P.d,{isDisabled:!m.some((function(e){return e.selected})),onClick:function(){return Re(!0)},"aria-label":"Add selected",tooltipContent:"Add selected"},i().createElement(X.Ay,null)),i().createElement(P.d,{isDisabled:0===m.length,onClick:function(){return Te(!0)},"aria-label":"Add all",tooltipContent:"Add all"},i().createElement(K.Ay,null)),i().createElement(P.d,{isDisabled:0===S.length,onClick:function(){return Te(!1)},"aria-label":"Remove all",tooltipContent:"Remove all"},i().createElement(q.Ay,null)),i().createElement(P.d,{onClick:function(){return Re(!1)},isDisabled:!S.some((function(e){return e.selected})),"aria-label":"Remove selected",tooltipContent:"Remove selected"},i().createElement(U.Ay,null))),i().createElement(R.u,{title:"Chosen packages",status:Pe(S),searchInput:Ce(!1),isChosen:!0},i().createElement(T.C,{style:{height:"290px"},"data-testid":"chosen-packages-list"},0===S.length?i().createElement(B,{text:"No packages added."}):S.filter((function(e){return e.isVisible})).length>0?je(S,!0):i().createElement(Q,{heading:"No Results Found",body:"Adjust your search and try again"}))))};W.propTypes={defaultArch:d().string};const G=W;var Z=n(86161),J=["defaultArch"],ee=function(e){var t=e.text;return i().createElement(S.E,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},t)};ee.propTypes={text:d().string};var te=function(e){var t=e.heading,n=e.body;return i().createElement(w.n,{className:"pf-u-text-align-center pf-u-pr-xl pf-u-pl-xl pf-u-pt-xl"},i().createElement(S.E,{component:"h3"},t),i().createElement(S.E,{component:"small"},n))};te.propTypes={heading:d().string,body:d().string};var ne=function(e){return e.map((function(e){return{selected:!1,isVisible:!0,name:e.package_name||e.name,summary:e.summary}}))},ae=function(e){e.defaultArch;var t=(0,h.A)(e,J),n=(0,y.default)(),a=n.change,r=n.getState,o=(0,A.A)(t).input,s=i().useState([]),c=(0,g.A)(s,2),u=c[0],m=c[1],d=i().useState([]),p=(0,g.A)(d,2),E=p[0],S=p[1],F=i().useState(""),z=(0,g.A)(F,2),$=z[0],B=z[1],Q=(0,l.useState)(!1),Y=(0,g.A)(Q,2),W=Y[0],G=Y[1],ae=(0,l.useState)(!1),re=(0,g.A)(ae,2),le=re[0],ie=re[1],oe=(0,l.useState)(null),se=(0,g.A)(oe,2),ce=se[0],ue=se[1],me=(0,l.useState)(!1),de=(0,g.A)(me,2),pe=de[0],fe=de[1],ve=(0,l.useState)(!1),ge=(0,g.A)(ve,2),he=ge[0],Ee=ge[1],be=(0,l.useState)(!1),ye=(0,g.A)(be,2),Ae=ye[0],ke=ye[1];(0,l.useEffect)((function(){var e,t=(null===(e=r())||void 0===e||null===(e=e.values)||void 0===e?void 0:e[o.name])||[];S((0,M.HR)(ne(t)));var n=document.querySelector('[aria-label="available search input"]');return null==n||n.addEventListener("keydown",Se),function(){return n.removeEventListener("keydown",Se)}}),[]),(0,l.useEffect)((function(){W&&(we(),G(!1))}),[W]),(0,l.useEffect)((function(){xe()}),[ce]);var we=function(){var e=(0,v.A)(b().mark((function e(){var t,n,a,l,i,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==$){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,k.fw)(null===(t=(null===(n=r())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["third-party-repositories"])||[])||void 0===t?void 0:t.map((function(e){return e.URL})),$);case 4:if(a=e.sent,ie(!1),ke(!1),fe(!1),a){e.next=12;break}return fe(!0),m([]),e.abrupt("return");case 12:if(!(a.length>100)){e.next=24;break}if(fe(!1),ie(!0),l=null,a.forEach((function(e,t){e.package_name!==$||(l=t)})),i=!E.find((function(e){return e.name===a[l].name})),null===l||!i){e.next=22;break}return ke(!0),m(ne([a[l]])),e.abrupt("return");case 22:return m([]),e.abrupt("return");case 24:o=a.filter((function(e){return!E.find((function(t){return t.name===e.name}))})),m((0,M.HR)(ne(o))),fe(!1);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e){"Enter"===e.key&&(e.stopPropagation(),G(!0))},xe=function(){if(ce){var e=document.querySelector(".pf-m-".concat(ce.pane," .pf-v5-c-dual-list-selector__menu"));ce.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-v5-c-dual-list-selector__list-item-row").classList.add("pf-u-background-color-disabled-color-300")})),setTimeout((function(){ce.pkgs.forEach((function(e){return document.getElementById("package-".concat(e.name)).closest(".pf-v5-c-dual-list-selector__list-item-row").classList.remove("pf-u-background-color-disabled-color-300")}))}),400),e.scrollTop=ce.scrollHeight,ue(null)}},Oe=function(e){for(var t=e?u:E,n=e?E:u,r=[],l=0;l<t.length;l++){var i=t[l];i.selected&&i.isVisible&&(r.push(i),t.splice(l,1),i.selected=!1,l--)}var s=61*(n=(0,M.HR)([].concat((0,f.A)(n),r))).findIndex((function(e){return e.name===r[0].name}));e?(m((0,M.HR)((0,f.A)(t))),S(n),a(o.name,n)):(S((0,M.HR)((0,f.A)(t))),m(n),a(o.name,(0,f.A)(t))),ue({pkgs:r,pane:e?"chosen":"available",scrollHeight:s}),ke(!1)},Re=function(e){e?(S((0,M.HR)([].concat((0,f.A)(u.filter((function(e){return e.isVisible}))),(0,f.A)(E)))),m((0,M.HR)((0,f.A)(u.filter((function(e){return!e.isVisible}))))),a(o.name,[].concat((0,f.A)(u),(0,f.A)(E)))):(m((0,M.HR)([].concat((0,f.A)(E.filter((function(e){return e.isVisible}))),(0,f.A)(u)))),S((0,M.HR)((0,f.A)(E.filter((function(e){return!e.isVisible}))))),a(o.name,[])),ke(!1)},Te=function(e){return i().createElement(i().Fragment,null,i().createElement(L.M,null,i().createElement(H.b,{isFill:!0},i().createElement(I.ks,{id:"".concat(e?"available":"chosen","-textinput"),type:"arrow",onChange:function(t,n){return function(t){B(t),e||(0,f.A)(E).forEach((function(e){e.isVisible=""===t||e.name.toLowerCase().includes(t.toLowerCase())}))}(n)},placeholder:"Search for packages",onFocus:function(){return Ee(!0)},onBlur:function(){return Ee(!1)},validated:le&&e&&!he?"warning":"","aria-label":e?"available search input":"chosen search input","data-testid":e?"available-search-input":"chosen-search-input"})),i().createElement(H.b,null,e?i().createElement(x.$n,{onClick:we,isDisabled:!e,variant:"control","aria-label":"search button for search input","data-testid":"package-search"},i().createElement(Z.Ay,null)):i().createElement(D.z,null,i().createElement(Z.Ay,{className:"pf-u-ml-xs pf-u-mr-xs"})))),le&&e&&i().createElement(_.E,null,i().createElement(N.j,{variant:"warning"},"Over 100 results found. Refine your search.")))},Ce=function(e,t){return e.map((function(e,n){return e.isVisible?i().createElement(C.h,{key:n,isSelected:e.selected,id:"composable-option-".concat(n),onOptionSelect:function(e){return function(e,t,n){if(n){var a=(0,f.A)(E);a[t].selected=!E[t].selected,S((0,M.HR)(a))}else{var r=(0,f.A)(u);r[t].selected=!u[t].selected,m((0,M.HR)(r))}}(0,n,t)}},i().createElement(w.n,null,i().createElement("span",{id:"package-".concat(e.name),className:"pf-c-dual-list-selector__item-text"},e.name),i().createElement("small",null,e.summary))):null}))},je=function(e){var t=e.filter((function(e){return e.isVisible})).length,n=e.filter((function(e){return e.selected&&e.isVisible})).length;return n>0?"".concat(n," of ").concat(t," items selected"):"".concat(t," ").concat(t>1?"items":"item")};return i().createElement(O.s,null,i().createElement(R.u,{title:"Available packages",status:je(u),searchInput:Te(!0)},i().createElement(T.C,{style:{height:"290px"},"data-testid":"available-packages-list"},u.length>0&&!Ae?Ce(u,!1):pe?i().createElement(te,{heading:"No Results Found",body:"Adjust your search and try again"}):le?i().createElement(i().Fragment,null,Ae&&i().createElement(_.E,null,i().createElement(N.j,{className:"pf-u-ml-md pf-u-mt-md",variant:"indeterminate"},"Exact match")),Ae&&Ce(u,!1),Ae&&i().createElement(V.c,{className:"pf-u-mt-md",inset:{default:"insetMd"}}),i().createElement(te,{heading:"Too many results to display",body:"Please make the search more specific and try again"})):i().createElement(ee,{text:"Search above to add additional packages to your image."}))),i().createElement(j.$,{"aria-label":"Selector controls"},i().createElement(P.d,{isDisabled:!u.some((function(e){return e.selected})),onClick:function(){return Oe(!0)},"aria-label":"Add selected",tooltipContent:"Add selected"},i().createElement(X.Ay,null)),i().createElement(P.d,{isDisabled:0===u.length,onClick:function(){return Re(!0)},"aria-label":"Add all",tooltipContent:"Add all"},i().createElement(K.Ay,null)),i().createElement(P.d,{isDisabled:0===E.length,onClick:function(){return Re(!1)},"aria-label":"Remove all",tooltipContent:"Remove all"},i().createElement(q.Ay,null)),i().createElement(P.d,{onClick:function(){return Oe(!1)},isDisabled:!E.some((function(e){return e.selected})),"aria-label":"Remove selected",tooltipContent:"Remove selected"},i().createElement(U.Ay,null))),i().createElement(R.u,{title:"Chosen packages",status:je(E),searchInput:Te(!1),isChosen:!0},i().createElement(T.C,{style:{height:"290px"},"data-testid":"chosen-packages-list"},0===E.length?i().createElement(ee,{text:"No packages added."}):E.filter((function(e){return e.isVisible})).length>0?Ce(E,!0):i().createElement(te,{heading:"No Results Found",body:"Adjust your search and try again"}))))};ae.propTypes={defaultArch:d().string};const re=ae;var le=n(74596),ie=n(56780),oe=n(83873),se=n(65843);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(){return function(e,t){if(0===e.length)return{checkbox:"select at least one validation method"};var n={};return!e.includes("password")||void 0!==t.password&&""!==t.password||(n=ue(ue({},n),{},{password:"Required"})),!e.includes("sshKey")||void 0!==t.sshKey&&""!==t.sshKey||(n=ue(ue({},n),{},{sshKey:"Required"})),n}};const de=function(e){var t=(0,A.A)(e),n=t.input,a=t.meta,o=(0,l.useCallback)((function(e,t){n.onChange(e?[].concat((0,f.A)(n.value),[t.currentTarget.id]):n.value.filter((function(e){return e!==t.currentTarget.id})))}),[n.onChange]),s=(0,A.A)({name:"password"}).input,c=(0,A.A)({name:"sshKey"}).input;return i().createElement(ie.g,{label:"Select at least one to validate credentials",hasNoPaddingTop:!0,isRequired:!0,isStack:!0},i().createElement(oe.S,{label:"Password",id:"password",isChecked:n.value.includes("password"),onChange:o}),n.value.includes("password")?i().createElement(ie.g,null,i().createElement(I.ks,(0,r.A)({type:"password"},s)),a.dirty&&void 0!==a.error.password&&i().createElement(_.E,null,i().createElement(N.j,{variant:"error"},a.error.password))):null,i().createElement(oe.S,{label:"SSH",id:"sshKey",isChecked:n.value.includes("sshKey"),onChange:o}),n.value.includes("sshKey")?i().createElement(ie.g,null,i().createElement(se.fs,c),a.dirty&&void 0!==a.error.sshKey&&i().createElement(_.E,null,i().createElement(N.j,{variant:"error"},a.error.sshKey))):null)};var pe=n(40167),fe=function(){return i().createElement(_.E,{className:"pf-u-ml-lg"},i().createElement(N.j,{className:"pf-u-pb-md",variant:"warning",hasIcon:!0},"Creating an installable version of your image increases the build time and is not needed for updating existing systems. ",i().createElement("br",null),"You can create an installable version of this image later if you continue with this option"))},ve={"rhel-edge-commit":"An OSTree commit is always created when building an image.","rhel-edge-installer":"An installable version of the image is typically created with a brand new image."},ge=function(e){var t=(0,y.default)().getState,n=(0,A.A)(e).input,a=(0,l.useCallback)((function(e,t){n.onChange(t?[].concat((0,f.A)(n.value),[e.target.id]):n.value.filter((function(t){return t!==e.target.id})))}),[n.onChange]);return i().createElement(ie.g,{label:"Output type",hasNoPaddingTop:!0,isRequired:!0,isStack:!0},e.options.map((function(e,r){var o,s=e.value,c=e.label;return i().createElement(l.Fragment,{key:r},i().createElement(oe.S,{label:c,id:s,isChecked:n.value.includes(s),onChange:a,isDisabled:"rhel-edge-commit"===s}),i().createElement(w.n,null,null!==(o=t())&&void 0!==o&&null!==(o=o.initialValues)&&void 0!==o&&o.isUpdate&&"rhel-edge-installer"===s?i().createElement(fe,null):i().createElement(_.E,{className:"pf-u-ml-lg pf-u-pb-sm"},i().createElement(N.j,{variant:"indeterminate"},ve[s]))),"rhel-edge-installer"===s&&i().createElement(l.Fragment,null,i().createElement(S.E,{component:S.Y.small},i().createElement(S.E,{target:"_blank",href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/composing_installing_and_managing_rhel_for_edge_images/index#edge-how-to-compose-and-deploy-a-rhel-for-edge-image_introducing-rhel-for-edge-images",component:S.Y.a,isVisitedLink:!0},"Learn more about image types.",i().createElement(pe.Ay,{className:"pf-u-ml-sm"})))))})))};ge.propTypes={input:d().array,options:d().arrayOf(d().shape({value:d().string,label:d().string}))};const he=ge;function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}const be=function(e){var t=(0,A.A)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:"credentials"},e)),n=t.input,o=t.meta;return i().createElement(ie.g,null,i().createElement(ie.g,{label:"SSH key",isRequired:!0},i().createElement(se.fs,(0,r.A)({className:"pf-u-h-25vh",validated:o.error&&o.touched?"error":"default",id:"credentials",placeholder:"Paste your public SSH key"},n)),o.error&&i().createElement(_.E,null,i().createElement(N.j,{variant:"error"},o.error))),i().createElement(l.Fragment,null,i().createElement(S.E,{component:S.Y.small},i().createElement(S.E,{target:"_blank",href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/assembly_using-secure-communications-between-two-systems-with-openssh_configuring-basic-system-settings#generating-ssh-key-pairs_assembly_using-secure-communications-between-two-systems-with-openssh",isVisitedLink:!0,component:S.Y.a},"Learn more about SSH keys",i().createElement(pe.Ay,{className:"pf-u-ml-sm"})))))};var ye=n(5029),Ae=n(18960);const ke=function(){var e,t=(0,y.default)(),n=t.change,a=t.getState,r=(null===(e=a())||void 0===e||null===(e=e.values)||void 0===e?void 0:e.activationKey)||"",o=(0,l.useState)({}),s=(0,g.A)(o,2),c=s[0],u=s[1],m=(0,l.useState)(null),d=(0,g.A)(m,2),p=d[0],f=d[1],h=(0,l.useState)(!1),E=(0,g.A)(h,2),A=E[0],w=E[1],O=(0,l.useState)(r),R=(0,g.A)(O,2),T=R[0],C=R[1],j=(0,l.useState)(!1),P=(0,g.A)(j,2),_=P[0],N=P[1];(0,l.useEffect)((function(){var e;null!==(e=a())&&void 0!==e&&null!==(e=e.initialValues)&&void 0!==e&&e.isUpdate?N(!0):(0,v.A)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.Z5)();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);var L=[];(0,l.useEffect)((function(){var e;null!=c&&(L.push({value:null,label:"Select activation key"}),null==c||null===(e=c.body)||void 0===e||e.forEach((function(e){L.push({value:e.name,label:e.name})})),f(L))}),[c]);var D=function(){return i().createElement(x.$n,{component:"a",target:"_blank",variant:"link",icon:i().createElement(pe.Ay,null),iconPosition:"right",isInline:!0,href:"https://".concat(window.location.host,"/insights/connector/activation-keys")},"Activation keys page")};return i().createElement(ie.g,null,i().createElement(ie.g,{label:"Activation key to use for this image"},i().createElement(ye.l,{variant:"single",width:"100%",onToggle:function(){return w(!A)},onSelect:function(e,t,a){a?(C(null),w(!1)):(C(t),w(!1),n("activationKey",t))},selections:T,isOpen:A,style:{paddingLeft:0,marginLeft:0},placeholderText:"Select activation key",isDisabled:_},null==p?void 0:p.map((function(e){return i().createElement(Ae.O,{key:e.value,value:e.value},e.label)})))),i().createElement("br",null),i().createElement(l.Fragment,null,i().createElement(S.E,null,i().createElement(S.E,null,"By default, activation key is generated and preset for you. Admins can create and manage keys by visiting the ",i().createElement(D,null)))))};var we=["root","bin","daemon","sys","adm","tty","disk","lp","mem","kmem","wheel","cdrom","sync","shutdown","halt","mail","news","uucp","operator","games","gopher","ftp","man","oprofile","pkiuser","dialout","floppy","games","slocate","utmp","squid","pvm","named","postgres","mysql","nscd","rpcuser","console","rpc","amandabackup","tape","netdump","utempter","vdsm","kvm","rpm","ntp","video","dip","mailman","gdm","xfs","pppusers","popusers","slipusers","mailnull","apache","wnn","smmsp","puppet","tomcat","lock","ldap","frontpage","nut","beagleindex","tss","piranha","prelude-manager","snortd","audio","condor","nslcd","wine","pegasus","webalizer","haldaemon","vcsa","avahi","realtime","tcpdump","privoxy","sshd","radvd","cyrus","saslauth","arpwatch","fax","nocpulse","desktop","dbus","jonas","clamav","screen","quaggavt","sabayon","polkituser","wbpriv","postfix","postdrop","majordomo","quagga","exim","distcache","radiusd","hsqldb","dovecot","ident","users","qemu","ovirt","rhevm","jetty","saned","vhostmd","usbmuxd","bacula","cimsrvr","mock","ricci","luci","activemq","cassandra","stap-server","stapusr","stapsys","stapdev","swift","glance","nova","keystone","quantum","cinder","ceilometer","ceph","avahi-autoipd","pulse","rtkit","abrt","retrace","ovirtagent","ats","dhcpd","myproxy","sanlock","aeolus","wallaby","katello","elasticsearch","mongodb","wildfly","jbosson-agent","jbosson","heat","haproxy","hacluster","haclient","systemd-journal","systemd-network","systemd-resolve","gnats","listar","nobody",""],Se=function(){return function(e){return we.includes(e)?"This is a username reserved for the system":void 0}},xe=n(95658);const Oe=function(e){var t=(0,A.A)(e).input,n=(0,l.useState)(t.value.map((function(e){return e.name})).join("\n")),a=(0,g.A)(n,2),r=a[0],o=a[1];return i().createElement(ie.g,{label:"Packages",type:"string"},i().createElement(se.fs,{"aria-label":"custom-package-wizard-step",placeholder:"Enter or paste packages from linked repositories, one entry per line.\rExamplePackage\rexample-package\rexamplepackage",value:r,onChange:function(e,n){return function(e){var n=e.split(/[,\s]+/g).reduce((function(e,t){return""!==t?[].concat((0,f.A)(e),[{name:t}]):e}),[]);t.onChange(n),o(e)}(n)},onKeyDown:function(e){"Enter"===e.key&&e.stopPropagation()},style:{paddingRight:"32px",height:"25vh"}}))};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(e){var t=e.schema,n=e.onSubmit,a=e.onClose,l=e.customComponentMapper,m=e.initialValues,d=e.defaultArch;return t?i().createElement(o.A,{schema:t,className:"image-builder",subscription:{values:!0},FormTemplate:function(e){return i().createElement(s.Ay,(0,r.A)({},e,{showFormControls:!1}))},onSubmit:function(e){return n(e)},initialValues:m,componentMapper:Te(Te({},c.Tt),{},{"registration-creds":{component:de},"image-output-checkbox":{component:he},"ssh-input-field":{component:be},"activation-keys-selector":{component:ke},review:p.A,"package-selector":{component:G,defaultArch:d},"custom-repo-table":{component:le.A},"custom-package-text-area":{component:Oe},"additional-custom-packages":{component:re}},l),validate:function(e){var t,n,a={};return e["validate-custom-repos"]&&(null===(t=e["custom-packages"])||void 0===t?void 0:t.length)>0&&0===(null===(n=e["third-party-repositories"])||void 0===n?void 0:n.length)&&(a["custom-packages"]="No custom repositories linked"),a},validatorMapper:Te(Te({},xe.A),{},{registrationCredsValidator:me,reservedUsernameValidator:Se}),onCancel:a}):i().createElement(u.y,null)};Ce.propTypes={schema:d().object,initialValues:d().object,onSubmit:d().func.isRequired,onClose:d().func.isRequired,customComponentMapper:d().shape((0,a.A)({},d().string,d().oneOfType([d().node,d().shape({component:d().node})]))),defaultArch:d().string};const je=Ce},88207:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(44914),r=n.n(a),l=n(51976),i=n(22069),o=n(81558),s=n(51343),c=n(30620),u=n(23215),m=n(90118),d=n(5556),p=n.n(d),f=function(e){var t=e.title,n=e.data,a=e.testid;return r().createElement(c.x,{className:"pf-u-pb-xl","data-testid":a,hasGutter:!0},r().createElement(u.E,{span:12},r().createElement(i.E,{component:i.Y.h2},t)),n.map((function(e){var t=e.name,n=e.value;return r().createElement(c.x,{key:t},r().createElement(u.E,{span:3},r().createElement(m.L,{component:m.D.dt},t)),r().createElement(u.E,{span:9},r().createElement(m.L,{component:m.D.dd},n)))})))};f.propTypes={title:p().string,data:p().arrayOf(p().shape({name:p().string,value:p().string})),testid:p().string};const v=f,g=function(){var e,t=(0,o.default)().getState,n=t().initialValues.isUpdate,c=[{name:"Name",value:t().values.name},{name:"Version",value:String(t().initialValues.version+1)},{name:"Description",value:t().values.description}],u=[{name:"Username",value:t().values.username},{name:"ssh-key",value:t().values.credentials}],m=[{name:"Activation Key",value:t().values.activationKey}],d=t().initialValues["selected-packages"]||[],p=t().values["selected-packages"]||[],f=t().initialValues["third-party-repositories"].length?t().initialValues["custom-packages"]:[],g=t().values["third-party-repositories"].length?t().values["custom-packages"]:[],h=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,n){var a=n.name;return t+(e.some((function(e){return e.name===a}))?0:1)}),0)};return r().createElement(a.Fragment,null,r().createElement(l.n,null,r().createElement(i.E,null,"Review the information and click"," ",r().createElement(i.E,{component:"b"},"Create image")," to start the build process."),r().createElement(v,{title:"Details",data:c,testid:"review-image-details"}),r().createElement(v,{title:"Output",data:(e=[{name:"Release",value:s.Lm[t().values.release]},{name:"Output Type",value:s.hx["rhel-edge-commit"]}],t().values.imageType.includes("rhel-edge-installer")&&e.push({name:"",value:s.hx["rhel-edge-installer"]}),e),testid:"review-image-output"}),t().values.imageType.includes("rhel-edge-installer")?r().createElement(v,{title:"Registration",data:u,testid:"review-image-registration"}):null,r().createElement(v,{title:"Acivation Key",data:m,testid:"review-image-activation-key"}),r().createElement(v,{title:"Packages",data:[{name:n?"Custom Updated":"Custom Added",value:String(h(g,f))},{name:n?"RHEL Updated":"RHEL Added",value:String(h(p,d))}],testid:"review-image-packages"})))}},74596:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var a=n(5544),r=n(44914),l=n.n(r),i=n(75253),o=n(40167),s=n(89915),c=n(22069),u=n(5556),m=n.n(u),d=n(72511),p=n(37947),f=n(43085),v=n(81558),g=n(38877),h=n(17427),E=n(30083),b=[{label:"Name",type:"text"}],y=function(e){var t,n,u,m,y=(0,v.default)(),A=y.change,k=y.getState,w=(0,g.A)(e).input,S=null===(t=k())||void 0===t||null===(t=t.values)||void 0===t?void 0:t.isUpdate,x=null===(n=k())||void 0===n||null===(n=n.values)||void 0===n?void 0:n.imageID,O=null===(u=k())||void 0===u||null===(u=u.values)||void 0===u?void 0:u["third-party-repositories"],R=(0,f.A)({api:function(e){var t=e.query;return(0,p.iQ)({imageID:S?x.toString():"",query:t})},tableReload:!0}),T=(0,a.A)(R,2),C=T[0],j=T[1],P=C.data,_=C.isLoading,N=C.hasError;(0,r.useEffect)((function(){A("validate-custom-repos",!1),A("third-party-repositories",O)}),[]);var L,D=null==e||null===(m=e.label)||void 0===m||null===(m=m.props)||void 0===m?void 0:m.locationProp,I=(0,h.h)("edge-management.custom_repos_ui"),V=(0,h.h)("edge-management.skip-custom-repo");return l().createElement(l().Fragment,null,V?l().createElement(s.F,{title:"Repositories unavailable",variant:"warning",isInline:!0},"The Content service cannot be reached, please check back later."):!_&&!(null!=P&&P.count)>0?l().createElement(d.A,{target:"_blank",icon:"repository",title:"No custom repositories available",body:"Add custom repositories to build RHEL for Edge images with additional packages.",primaryAction:{text:"Custom repositories",href:I?E.J.contentSourcesRepositories:E.J.repositories}}):l().createElement(i.A,{apiFilterSort:!0,locationProp:D,isUseApi:!0,loadTableData:j,filters:b,tableData:{count:null==P?void 0:P.count,data:P,isLoading:_,hasError:N},columnNames:[{title:"Name",type:"name",sort:!1}],rows:_?[]:(L=P,L.data.map((function(e){var t=e.ID,n=e.Name,a=e.URL;return{rowInfo:{id:t,name:n,URL:a,uuid:e.uuid},cells:[{title:l().createElement(l().Fragment,null,l().createElement(c.E,{className:"pf-u-mb-xs",component:c.Y.p},l().createElement("span",null,(0,h.W5)(n,50))),l().createElement(c.E,{component:c.Y.a,href:a,target:"_blank",rel:"noopener noreferrer"},a," ",l().createElement(o.Ay,{className:"pf-u-ml-sm"})))}]}}))),defaultSort:{index:0,direction:"desc"},hasCheckbox:!0,selectedItems:function(e){var t=null==e?void 0:e.map((function(e){return{id:null==e?void 0:e.id,name:null==e?void 0:e.name,URL:null==e?void 0:e.URL,uuid:null==e?void 0:e.uuid}}));w.onChange(t),t.length?A("show-custom-packages",!0):A("show-custom-packages",!1)},initSelectedItems:w.value}))};y.propTypes={data:m().array,closeModal:m().func,locationProp:m().object,label:m().object,props:m().func};const A=y},71100:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(64467),r=n(10467),l=n(54756),i=n.n(l),o=n(11830);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(e,t,n,a){var l,s,u,m=null===(l=n)||void 0===l?void 0:l.onSuccess,d=null===(s=n)||void 0===s?void 0:s.onInfo,p=null===(u=n)||void 0===u?void 0:u.onWarning;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var f=function(){var l=(0,r.A)(i().mark((function r(){var l;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t();case 3:return l=r.sent,d&&(a?a.hasInfo(n.onInfo):e(c({},(0,o.z8)(c({variant:"info"},n.onInfo))))),m&&(a?a.hasSuccess(n.onSuccess):e(c({},(0,o.z8)(c({variant:"success"},n.onSuccess))))),p&&(a?a.hasWarning(n.onWarning):e(c({},(0,o.z8)(c({variant:"warning"},n.onWarning))))),r.abrupt("return",l);case 10:return r.prev=10,r.t0=r.catch(0),a?a.err(n.onError,r.t0):e(c({},(0,o.z8)(c(c({variant:"danger"},n.onError),{},{description:null!==r.t0&&void 0!==r.t0&&r.t0.Title?"".concat(n.onError.description,": ").concat(r.t0.Title):n.onError.description})))),r.abrupt("return",r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return l.apply(this,arguments)}}();return f()}},25823:()=>{},16369:()=>{},62275:()=>{},89205:()=>{},20681:()=>{},43502:()=>{},61858:()=>{},43619:()=>{},7302:()=>{},5637:()=>{},86073:()=>{},67879:()=>{},87034:()=>{},70043:()=>{},21289:()=>{},85586:()=>{}}]);
//# sourceMappingURL=../sourcemaps/2793.f04b842688ce6e7be95042e25e6212bc.js.map