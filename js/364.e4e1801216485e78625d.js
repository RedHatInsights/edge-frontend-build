(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[364],{53010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var a=n(93433),i=n(4942),o=n(15861),r=n(29439),l=n(64687),c=n.n(l),s=n(92950),u=n.n(s),d=n(61094),m=n(96354),p=n(25563),v=n(52643),g=n(29390),f=n(37619),h=n(45697),b=n.n(h),E=n(20873),y=n(77760),P=n(93597),I=n(48903),k=n(32349),S=n(98309),D=n(96094);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t,n,i,l,h,b,O,N,x,T,C,j,U,Z,L,_,V,R=e.navigateBack,A=e.updateImageID,W=e.reload,B=e.notificationProp,F=e.locationProp,z=(0,s.useState)(),Q=(0,r.Z)(z,2),q=Q[0],G=Q[1],K=(0,y.useDispatch)(),H=function(){R(),W&&W()};(0,s.useEffect)((function(){(0,o.Z)(c().mark((function e(){var t,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(a=n.auth)||void 0===a||a.getUser().then((function(e){return G(null!=e?e:{})}));case 1:case"end":return e.stop()}}),e)})))()}),[]);var M=(0,D.Z)({api:P.Kz,id:A}),J=(0,r.Z)(M,1)[0],$=J.data,Y=J.isLoading,X=(0,I.gV)("fleet-management.temporary-releases"),ee=(0,I.gV)("edge-management.image_wizard_ui"),te={onSuccess:{title:"Success",description:"Successfully started image update"},onError:{title:"Error",description:"Failed to create image"}};return q&&$&&!Y?u().createElement(d.Z,{onClose:H,customComponentMapper:{review:E.Z},onSubmit:function(e){var t,n,a,i,o,r=e.values;(0,e.setIsSaving)((function(){return!0}));var l=w(w({},r),{},{Id:null==$||null===(t=$.image)||void 0===t?void 0:t.ID,name:null==$||null===(n=$.image)||void 0===n?void 0:n.Name,version:(null==$||null===(a=$.image)||void 0===a?void 0:a.Version)+1,architecture:"x86_64",credentials:r.credentials?r.credentials:null==$||null===(i=$.image)||void 0===i?void 0:i.Installer.SshKey,username:r.username?r.username:null==$||null===(o=$.image)||void 0===o?void 0:o.Installer.Username});(0,k.Z)(K,(function(){return(0,P.Bi)(l)}),te,B),H()},defaultArch:"x86_64",initialValues:{imageID:null==$?void 0:$.image.ID,name:null==$||null===(t=$.image)||void 0===t?void 0:t.Name,isUpdate:!0,description:null==$||null===(n=$.image)||void 0===n?void 0:n.Description,credentials:null==$||null===(i=$.image)||void 0===i?void 0:i.Installer.SshKey,username:null==$||null===(l=$.image)||void 0===l?void 0:l.Installer.Username,version:null==$||null===(h=$.image)||void 0===h?void 0:h.Version,release:null==$||null===(b=$.image)||void 0===b?void 0:b.Distribution,release_options:X?(0,I.pS)(null==$||null===(O=$.image)||void 0===O?void 0:O.Distribution,[].concat((0,a.Z)(S.vk),(0,a.Z)(S.R8))):(0,I.pS)(null==$||null===(N=$.image)||void 0===N?void 0:N.Distribution),imageType:["rhel-edge-commit"],"selected-packages":null==$||null===(x=$.image)||void 0===x||null===(T=x.Packages)||void 0===T?void 0:T.map((function(e){return w(w({},e),{},{name:e.Name})})),"third-party-repositories":null==$||null===(C=$.image)||void 0===C||null===(j=C.ThirdPartyRepositories)||void 0===j?void 0:j.map((function(e){return w({id:e.ID,name:e.Name},e)})),"initial-custom-repositories":null==$||null===(U=$.image)||void 0===U||null===(Z=U.ThirdPartyRepositories)||void 0===Z?void 0:Z.map((function(e){return w({id:e.ID,name:e.Name},e)})),"custom-packages":null==$||null===(L=$.image)||void 0===L||null===(_=L.CustomPackages)||void 0===_?void 0:_.map((function(e){return w(w({},e),{},{name:e.Name})}))},test:"",schema:{fields:[{component:m.Z.WIZARD,name:"image-builder-wizard",className:"image-builder",isDynamic:!0,inModal:!0,buttonLabels:{submit:"Update image"},showTitles:!0,title:"Update image: ".concat(null==$||null===(V=$.image)||void 0===V?void 0:V.Name),crossroads:["target-environment","release","imageType","third-party-repositories"],fields:[p.bR,p.Ud,p.l9,(0,p.jS)(ee,F),p.B9,p.$B,p.j7,p.Sp]}]}}):u().createElement(g.Y,null,u().createElement(v.b,null,u().createElement(f.$,{isSVG:!0,diameter:"100px"})))};N.propTypes={navigateBack:b().func,updateImageID:b().number,reload:b().func,notificationProp:b().object,locationProp:b().object},N.defaultProps={navigateBack:function(){}};const x=N},12877:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Se});var a=n(15861),i=n(4942),o=n(29439),r=n(64687),l=n.n(r),c=n(92950),s=n.n(c),u=n(89376),d=n(49739),m=n(83826),p=n(37619),v=n(52643),g=n(68519),f=n(5513),h=n(45697),b=n.n(h),E=n(48903),y=n(68340),P=n(25834),I=n(78140),k=n(68774),S=n(50383),D=n(64029),O=n(32835),w=n(79851),N=n(34512),x=n(56787),T=n(84457),C=n(75728),j=n(99355),U=n(75824),Z=n(35681),L=n(9192),_=n(5964),V=n(62410),R=n(14627),A=function(e,t,n,a){var i,o=t||(null==e?void 0:e.LastImageDetails),r=[];return(null==o||null===(i=o.image)||void 0===i?void 0:i.ID)&&r.push(s().createElement(T.h,{key:"create-new-version-button",component:"button",onClick:function(){var e;return a(null==o||null===(e=o.image)||void 0===e?void 0:e.ID)}},"Create new version")),n&&r.push(s().createElement(T.h,{key:"download-button",component:"button"},s().createElement(y.x,{className:"force-text-black remove-underline",component:"a",href:n,rel:"noopener noreferrer",target:"_blank"},"Download installable .iso for newest image"))),r},W=function(e){var t,n,a,i,r,l,u,d,m,p,v,h,b,y,T,W,B,F,z,Q=e.pathPrefix,q=e.urlName,G=e.historyProp,K=e.navigateProp,H=e.imageData,M=e.imageVersion,J=e.openUpdateWizard,$=(0,c.useState)(!1),Y=(0,o.Z)($,2),X=Y[0],ee=Y[1],te=(0,c.useState)({}),ne=(0,o.Z)(te,2),ae=ne[0],ie=ne[1],oe=G?G():g.k6?(0,g.k6)():null,re=K?K():f.useNavigate?(0,f.useNavigate)():null;(0,c.useEffect)((function(){ie(null==H?void 0:H.data)}),[H]);var le="Actions for image set details view",ce="image-set-details-dropdown",se=(0,R.S)(L._.manageImages,Q,q);return s().createElement(s().Fragment,null,!H.isLoading&&H.hasError?s().createElement(D.a,null,s().createElement(O.g,null,(0,E.EW)({pathname:se,linkText:"Back to Manage Images",history:oe,navigate:re}))):s().createElement(s().Fragment,null,s().createElement(D.a,null,s().createElement(O.g,null,(0,E.EW)({pathname:se,linkText:"Manage Images",history:oe,navigate:re})),M?s().createElement(O.g,null,(0,E.EW)({pathname:"".concat(se,"/").concat(null==ae||null===(t=ae.ImageSet)||void 0===t?void 0:t.ID),linkText:null==ae||null===(n=ae.ImageSet)||void 0===n?void 0:n.Name,history:oe,navigate:re})):s().createElement(O.g,{isActive:!0},(null==ae||null===(a=ae.ImageSet)||void 0===a?void 0:a.Name)||s().createElement(S.O,{width:"100px"})),M&&s().createElement(O.g,{isActive:!0},null==M||null===(i=M.image)||void 0===i?void 0:i.Version)),s().createElement(k.D,null,s().createElement(w.P,null,s().createElement(N.J,null,s().createElement(P.G,{component:"dl"},s().createElement(I.T,{component:"h1",className:"grid-align-center pf-u-mb-0"},(null==ae||null===(r=ae.ImageSet)||void 0===r?void 0:r.Name)||s().createElement(S.O,{width:"150px"})),s().createElement(I.T,{className:"pf-u-pt-sm",component:"dd"},null!=M&&null!==(l=M.image)&&void 0!==l&&l.Status||null!=ae&&null!==(u=ae.LastImageDetails)&&void 0!==u&&null!==(d=u.image)&&void 0!==d&&d.Status?s().createElement(Z.Z,{type:M?null==M||null===(m=M.image)||void 0===m?void 0:m.Status.toLowerCase():null==ae||null===(p=ae.LastImageDetails)||void 0===p||null===(v=p.image)||void 0===v?void 0:v.Status.toLowerCase()}):s().createElement(S.O,{width:"100px"})),null!=M&&null!==(h=M.image)&&void 0!==h&&h.UpdatedAt||null!=ae&&null!==(b=ae.LastImageDetails)&&void 0!==b&&null!==(y=b.image)&&void 0!==y&&y.UpdatedAt?s().createElement(I.T,{component:"p"},"Last updated ",s().createElement(V.Z,{date:M?null==M||null===(T=M.image)||void 0===T?void 0:T.UpdatedAt:null==ae||null===(W=ae.LastImageDetails)||void 0===W||null===(B=W.image)||void 0===B?void 0:B.UpdatedAt})):s().createElement(S.O,{width:"200px"}))),s().createElement(N.J,{isFilled:!0}),s().createElement(N.J,null,s().createElement(x.L,{position:j.ir.right,toggle:s().createElement(C.Z,{id:ce,toggleIndicator:_.ZP,onToggle:function(e){return ee(e)},isDisabled:"BUILDING"===(M?null==M||null===(F=M.image)||void 0===F?void 0:F.Status:null==ae||null===(z=ae.LastImageDetails)||void 0===z?void 0:z.image.Status)||!1,"aria-label":le},s().createElement(U.u,{content:le,reference:function(){return document.getElementById(ce)}}),"Actions"),isOpen:X,dropdownItems:A(ae,M,null==ae?void 0:ae.ImageBuildIsoURL,J)}))))))};W.propTypes={pathPrefix:b().string,urlName:b().string,historyProp:b().func,navigateProp:b().func,imageData:b().object,imageVersion:b().object,openUpdateWizard:b().func};const B=W;var F=n(35262),z=n(28883),Q=n(29873),q=n(93433),G=n(50693),K=n(16475),H=n(66435),M=n(98309),J=function(e){var t,n,a,i,r=e.pathPrefix,l=e.urlName,u=e.historyProp,d=e.navigateProp,m=e.imageData,p=e.imageVersion,v=(0,c.useState)({}),h=(0,o.Z)(v,2),b=h[0],D=h[1],O=(0,R.S)(L._.manageImages,r,l),w=u?u():g.k6?(0,g.k6)():null,N=d?d():f.useNavigate?(0,f.useNavigate)():null;(0,c.useEffect)((function(){var e;D(p||(null==m||null===(e=m.data)||void 0===e?void 0:e.LastImageDetails))}),[m,p]);var x=function(e){return(0,q.Z)(Array(2*e)).map((function(e,t){return s().createElement(S.O,{width:"180px",key:t})}))},T={Version:"Version",Created:function(){return s().createElement(V.Z,{date:null==b||null===(e=b.image)||void 0===e?void 0:e.CreatedAt});var e},"Type(s)":function(){var e,t;return null==b||null===(e=b.image)||void 0===e||null===(t=e.OutputTypes)||void 0===t?void 0:t.map((function(e,t){return s().createElement("div",{key:t},e)}))},Release:function(){var e;return null===M.aN||void 0===M.aN?void 0:M.aN[null==b||null===(e=b.image)||void 0===e?void 0:e.Distribution]},Description:"Description"},C={Username:function(){var e,t;return null==b||null===(e=b.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Username},"SSH key":function(){var e,t;return null==b||null===(e=b.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.SshKey}},j={"Total additional packages":function(){var e,t;return(0,E.EW)({pathname:"".concat(O,"/").concat(null==b||null===(e=b.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==b||null===(t=b.image)||void 0===t?void 0:t.ID,"/packages/additional"),linkText:null==b?void 0:b.additional_packages,history:w,navigate:N})},"Total packages":function(){var e,t;return(0,E.EW)({pathname:"".concat(O,"/").concat(null==b||null===(e=b.image)||void 0===e?void 0:e.ImageSetID,"/versions/").concat(null==b||null===(t=b.image)||void 0===t?void 0:t.ID,"/packages/all"),linkText:null==b?void 0:b.packages,history:w,navigate:N})}},U={Added:function(){return null==b?void 0:b.update_added},Removed:function(){return null==b?void 0:b.update_removed},Updated:function(){return null==b?void 0:b.update_updated}};null!=b&&null!==(t=b.image)&&void 0!==t&&null!==(n=t.Installer)&&void 0!==n&&n.Checksum&&(T["SHA-256 checksum"]=function(){var e,t;return null==b||null===(e=b.image)||void 0===e||null===(t=e.Installer)||void 0===t?void 0:t.Checksum}),null!=b&&null!==(a=b.image)&&void 0!==a&&null!==(i=a.Commit)&&void 0!==i&&i.OSTreeCommit&&(T["Ostree commit hash"]=function(){var e,t;return null==b||null===(e=b.image)||void 0===e||null===(t=e.Commit)||void 0===t?void 0:t.OSTreeCommit});var Z=function(e){return b?Object.entries(e).map((function(e,t){var n,a,i=(0,o.Z)(e,2),r=i[0],l=i[1];return s().createElement(c.Fragment,{key:t},s().createElement(I.T,{className:"details-label",component:I.v.dt},r),"SHA-256 checksum"===r||"Ostree commit hash"===r||"SSH key"===r&&l()?s().createElement(I.T,{component:I.v.dd},s().createElement(H.M5,{hoverTip:"Copy",clickTip:"Copied",variant:"expansion",className:"pf-u-text-break-word",id:"".concat(r.replace(/\s+/g,"-").toLowerCase(),"-clipboard-copy")},"function"==typeof l?l()||"Unavailable":(null==b||null===(n=b.image)||void 0===n?void 0:n[l])||"Unavailable")):s().createElement(I.T,{className:"pf-u-text-break-word",component:I.v.dd},"function"==typeof l?0===l()?0:l()||"Unavailable":(null==b||null===(a=b.image)||void 0===a?void 0:a[l])||"Unavailable"))})):null};return s().createElement(k.D,{className:"pf-u-ml-lg pf-u-mt-md"},s().createElement(G.r,{span:12},s().createElement(K.P,{span:5},s().createElement(y.x,{component:y.q.h2},p?"Details":"Most recent image"),s().createElement(P.G,{component:P.F.dl},Z(T)||x(6)),s().createElement(y.x,{component:y.q.h2},"User information "),s().createElement(P.G,{component:P.F.dl},Z(C)||x(2))),s().createElement(K.P,{span:1}),s().createElement(K.P,{span:6},s().createElement(y.x,{component:y.q.h2},"Packages "),s().createElement(P.G,{component:P.F.dl},Z(j)||x(3)),s().createElement(y.x,{component:y.q.h2},"Changes from previous version"),s().createElement(P.G,{component:P.F.dl},Z(U)||x(3)))))};J.propTypes={pathPrefix:b().string,urlName:b().string,historyProp:b().func,navigateProp:b().func,imageData:b().object,imageVersion:b().object};const $=J;var Y=n(73448),X=n(93597),ee=n(34766),te=n(96094),ne=[{label:"Status",type:"checkbox",options:[{option:"Building",value:"BUILDING"},{option:"Created",value:"CREATED"},{option:"Error",value:"ERROR"},{option:"Ready",value:"SUCCESS"}]}],ae=[{title:"Version",type:"version",sort:!0,columnTransforms:[(0,ee.cellWidth)(15)]},{title:"Output",type:"image_type",sort:!1,columnTransforms:[(0,ee.cellWidth)(25)]},{title:"Ostree commit hash",type:"ostree_commit_hash",sort:!1,columnTransforms:[(0,ee.cellWidth)(20)]},{title:"Created",type:"created_at",sort:!0,columnTransforms:[(0,ee.cellWidth)(15)]},{title:"Status",type:"status",sort:!1,columnTransforms:[(0,ee.cellWidth)(35)]}],ie=function(e,t,n,a,i,o,r){var l=(0,R.S)(L._.manageImages,a,i);return null==e?void 0:e.map((function(e){return{rowInfo:{id:null==e?void 0:e.ID,imageStatus:null==e?void 0:e.Status,isoURL:null==e?void 0:e.ImageBuildIsoURL,latestImageVersion:n,currentImageVersion:e.Version},noApiSortFilter:[null==e?void 0:e.Version,M.bd[null==e?void 0:e.ImageType],null==e?void 0:e.CreatedAt,null==e?void 0:e.Status],cells:[{title:(0,E.EW)({pathname:"".concat(l,"/").concat(t,"/versions/").concat(e.ID,"/details"),linkText:null==e?void 0:e.Version,history:o,navigate:r})},{title:M.bd[null==e?void 0:e.ImageType]},{title:null!=e&&e.CommitCheckSum?s().createElement(U.u,{content:s().createElement("div",null,e.CommitCheckSum)},s().createElement("span",null,(0,E.aS)(e.CommitCheckSum,5,5))):s().createElement(y.x,null,"Unavailable")},{title:s().createElement(V.Z,{date:null==e?void 0:e.CreatedAt})},{title:s().createElement(Z.Z,{type:null==e?void 0:e.Status.toLowerCase()})}]}}))},oe=function(e){var t,n,a,i,r=e.pathPrefix,l=e.urlName,c=e.navigateProp,u=e.historyProp,d=e.locationProp,m=e.imageData,p=e.openUpdateWizard,v=null==m||null===(t=m.data)||void 0===t||null===(n=t.ImageSet)||void 0===n?void 0:n.ID,h=null==m||null===(a=m.data)||void 0===a||null===(i=a.ImageSet)||void 0===i?void 0:i.Version,b=u?u():g.k6?(0,g.k6)():null,E=c?c():f.useNavigate?(0,f.useNavigate)():null,y=(0,te.Z)({api:function(e){var t=e.query;return(0,X.dj)({imageSetID:v,query:t})},tableReload:!0}),P=(0,o.Z)(y,2),I=P[0],k=P[1],S=I.data,D=I.isLoading,O=I.hasError;return s().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},s().createElement(Y.Z,{navigateProp:c,historyProp:u,locationProp:d,apiFilterSort:!0,isUseApi:!0,filters:ne,loadTableData:k,tableData:{count:null==S?void 0:S.count,data:null==S?void 0:S.data,isLoading:D,hasError:O},columnNames:ae,rows:ie(null==S?void 0:S.data,v,h,r,l,b,E),actionResolver:function(e){var t,n,a,i,o,r,l,c=[];return null!==(t=e.rowInfo)&&void 0!==t&&t.isoURL&&c.push({title:"Download",onClick:function(e,t,n){window.open(n.rowInfo.isoURL)}}),("SUCCESS"===(null===(n=e.rowInfo)||void 0===n?void 0:n.imageStatus)||"ERROR"===(null===(a=e.rowInfo)||void 0===a?void 0:a.imageStatus))&&c.push({title:"Update Image",onClick:function(e,t,n){p(n.rowInfo.id)},isDisabled:(null==e||null===(r=e.rowInfo)||void 0===r?void 0:r.latestImageVersion)!==(null==e||null===(l=e.rowInfo)||void 0===l?void 0:l.currentImageVersion)}),"BUILDING"===(null===(i=e.rowInfo)||void 0===i?void 0:i.imageStatus)&&null!==(o=e.rowInfo)&&void 0!==o&&o.id&&c.push({title:""}),c},areActionsDisabled:function(e){var t;return"BUILDING"===(null===(t=e.rowInfo)||void 0===t?void 0:t.imageStatus)},defaultSort:{index:3,direction:"desc"}}))};oe.propTypes={pathPrefix:b().string,urlName:b().string,navigateProp:b().func,historyProp:b().func,locationProp:b().func,imageData:b().object,urlParam:b().string,imageSetID:b().number,createRows:b().func,openUpdateWizard:b().func};const re=oe;var le=n(47173),ce=n(15265),se=n(3035),ue=[{label:"Name",type:"text"}],de=[{title:"Name",type:"name",sort:!0,columnTransforms:[(0,ee.cellWidth)(35)]},{title:"Version",type:"version",sort:!1,columnTransforms:[(0,ee.cellWidth)(25)]},{title:"Release",type:"release",sort:!1,columnTransforms:[(0,ee.cellWidth)(35)]}],me=function(e){var t=e.distribution,n=e.installedPackages,a=e.addedPackages;return(0===e.showAll?n.filter((function(e){return(null==a?void 0:a.filter((function(t){return e.name===t.Name})).length)>0})):n).map((function(e){return{noApiSortFilter:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release],cells:[null==e?void 0:e.name,null==e?void 0:e.version,null==e?void 0:e.release,{title:s().createElement("a",{href:"https://access.redhat.com/downloads/content/rhel---".concat(t,"/x86_64/7416/").concat(null==e?void 0:e.name,"/").concat(null==e?void 0:e.version,"-").concat(null==e?void 0:e.release,"/").concat(null==e?void 0:e.arch,"/fd431d51/package"),target:"_blank",rel:"noopener noreferrer"},s().createElement(le.zx,{variant:"link",isSmall:!0,icon:s().createElement(ce.ZP,null),iconPosition:"right"},"More information"))}]}}))},pe={0:"additional",1:"all"},ve={additional:0,all:1},ge=function(e){var t,n,a,i,r,l,u,d,m,p=e.pathPrefix,v=e.historyProp,h=e.locationProp,b=e.navigateProp,E=e.imageVersion,y=v?v():g.k6?(0,g.k6)():null,P=(h?h():(0,g.TH)()).pathname,I=b?b():f.useNavigate?(0,f.useNavigate)():null,k=P;p&&P.startsWith(p)&&(k=P.slice(p.length));var S=k.split("/"),D=7===S.length?ve[S[6]]:1,O=null==E||null===(t=E.image)||void 0===t||null===(n=t.Distribution)||void 0===n?void 0:n.split("-")[1].slice(0,-1),w=(0,c.useState)({}),N=(0,o.Z)(w,2),x=N[0],T=N[1],C=(0,c.useState)(D),j=(0,o.Z)(C,2),U=j[0],Z=j[1];return(0,c.useEffect)((function(){T(E)}),[E]),(0,c.useEffect)((function(){S[5]!==pe[U]&&Z(D)}),[S]),"SUCCESS"===(null==E||null===(a=E.image)||void 0===a||null===(i=a.Commit)||void 0===i?void 0:i.Status)?s().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},s().createElement(Y.Z,{navigateProp:b,historyProp:v,locationProp:h,apiFilterSort:!1,filters:ue,tableData:{count:0===U?null==x?void 0:x.additional_packages:null==x?void 0:x.packages,isLoading:!1,hasError:!1},columnNames:de,rows:null!=x&&null!==(r=x.image)&&void 0!==r&&null!==(l=r.Commit)&&void 0!==l&&l.InstalledPackages?me({distribution:O,installedPackages:null==x||null===(u=x.image)||void 0===u||null===(d=u.Commit)||void 0===d?void 0:d.InstalledPackages,addedPackages:null==x||null===(m=x.image)||void 0===m?void 0:m.Packages,showAll:U}):[],actionResolver:function(){return[]},areActionsDisabled:function(){return!0},defaultSort:{index:0,direction:"asc"},toggleButton:[{title:"Additional",key:0},{title:"All",key:1}],toggleAction:function(e){var t,n=null===(t=S[5])||void 0===t?void 0:t.toLowerCase();if(Z(e),"packages"===n){7===S.length?S[6]=pe[e]:S.push(pe[e]);var a=(0,R.T)(S.join("/"),p);b?I(a):y.push(a)}},toggleState:U,emptyFilterState:{icon:"search",title:"No packages to display"}})):s().createElement("section",{className:"add-100vh pf-l-page__main-section pf-c-page__main-section"},s().createElement(se.Z,{bgColor:"white",title:"Package data currently unavailable",body:"Packages will be displayed as soon as the image is finished being built.",primaryAction:null,secondaryActions:[]}))};ge.propTypes={pathPrefix:b().string,historyProp:b().func,locationProp:b().func,navigateProp:b().func,imageVersion:b().object};const fe=ge;var he={details:0,packages:1,versions:1},be=function(e){var t=e.pathPrefix,n=e.urlName,a=e.historyProp,i=e.locationProp,r=e.navigateProp,l=e.imageData,u=e.openUpdateWizard,d=e.imageVersion,m=e.isLoading,p=a?a():g.k6?(0,g.k6)():null,v=(i?i():(0,g.TH)()).pathname,h=v;t&&v.startsWith(t)&&(h=v.slice(t.length));var b=r?r():f.useNavigate?(0,f.useNavigate)():null,y=(0,c.useState)(he.details),P=(0,o.Z)(y,2),I=P[0],k=P[1],D=d?"imageTab":"imageSetTab",O=(0,E.Ff)(h,["baseURL","imageSetVersion","imageSetTab","imageVersion","imageTab","packagesToggle"]);return(0,c.useEffect)((function(){O.imageTab?k(he[O.imageTab]):k(he[O.imageSetTab])}),[v]),s().createElement(s().Fragment,null,!l.isLoading&&l.hasError?s().createElement(se.Z,{icon:"question",title:"Image not found",body:"Please check you have the correct link with the correct image Id.",primaryAction:{text:"Back to Manage Images",href:L._.manageImages},secondaryActions:[]}):s().createElement("div",{className:"edge-c-device--detail add-100vh"},s().createElement(F.m,{className:"pf-u-ml-md",activeKey:I,onSelect:function(e,n){var a=0===n?"details":d?"packages":"versions";O[D]=a;var i=(0,R.T)(O.buildUrl(),t);r?b(i):p.push(i),k(n)}},s().createElement(z.O,{eventKey:he.details,title:s().createElement(Q.T,null,"Details")},s().createElement($,{pathPrefix:t,urlName:n,historyProp:a,navigateProp:r,imageData:l,imageVersion:d})),m?s().createElement(z.O,{title:s().createElement(Q.T,null,s().createElement(S.O,{width:"75px"}))}):d?s().createElement(z.O,{eventKey:he.packages,title:s().createElement(Q.T,null,"Packages")},s().createElement(fe,{pathPrefix:t,urlName:n,navigateProp:r,historyProp:a,locationProp:i,imageVersion:d})):s().createElement(z.O,{eventKey:he.versions,title:s().createElement(Q.T,null,"Versions")},s().createElement(re,{pathPrefix:t,urlName:n,navigateProp:r,historyProp:a,locationProp:i,imageData:l,openUpdateWizard:u})))))};be.propTypes={pathPrefix:b().string,urlName:b().string,historyProp:b().func,locationProp:b().func,navigateProp:b().func,imageData:b().object,imageVersion:b().object,openUpdateWizard:b().func,isLoading:b().bool};const Ee=be;var ye=n(53010);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=function(e){var t=e.pathPrefix,n=e.urlName,i=e.paramsProp,r=e.historyProp,h=e.locationProp,b=e.navigateProp,y=e.notificationProp,P=i?i():g.UO?(0,g.UO)():null,I=P.imageId,k=P.imageVersionId,S=r?r():g.k6?(0,g.k6)():null,D=h?h():g.TH?(0,g.TH)():null,O=D.pathname,w=D.search,N=b?b():f.useNavigate?(0,f.useNavigate)():null,x=(0,c.useState)({isOpen:!1,updateId:null}),T=(0,o.Z)(x,2),C=T[0],j=T[1],U=(0,c.useState)(null),Z=(0,o.Z)(U,2),L=Z[0],_=Z[1],V=(0,te.Z)({api:X.L0,id:k?"".concat(I,"/versions/").concat(k):"".concat(I),tableReload:!0}),R=(0,o.Z)(V,2),A=R[0],W=R[1],F=A.data,z=A.isLoading,Q={pathname:O,search:(0,E.fz)("update_image=true",!0,w)},q=function(e){b?N(Ie(Ie({},Q),{},{replace:!0})):S.push(Ie({},Q)),j((function(t){return Ie(Ie({},t),{},{isOpen:!t.isLoading,updateId:e})}))};(0,c.useEffect)((function(){_(k?null==F?void 0:F.ImageDetails:null)}),[A,k]),(0,c.useEffect)((function(){W()}),[I,k]);var G=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s().createElement(c.Fragment,null,s().createElement(u.Z,{className:"pf-m-light"},s().createElement(d.K,{hasGutter:!0},s().createElement(m.v,null,s().createElement(B,{pathPrefix:t,urlName:n,historyProp:r,navigateProp:b,imageData:A,imageVersion:L,openUpdateWizard:q})))),s().createElement(Ee,{pathPrefix:t,urlName:n,historyProp:r,locationProp:h,navigateProp:b,imageData:A,urlParam:I,imageVersion:L,openUpdateWizard:q,isLoading:z}),C.isOpen&&s().createElement(c.Suspense,{fallback:s().createElement(v.b,null,s().createElement(p.$,null))},s().createElement(ye.default,{navigateBack:function(){b?N({pathname:O}):S.push({pathname:O}),j((function(e){return Ie(Ie({},e),{},{isOpen:!1})}))},updateImageID:C.updateId,reload:G,notificationProp:y,locationProp:h})))};ke.propTypes={pathPrefix:b().string,urlName:b().string,paramsProp:b().func,historyProp:b().func,locationProp:b().func,navigateProp:b().func,notificationProp:b().object};const Se=ke},14627:(e,t,n)=>{"use strict";n.d(t,{S:()=>a,T:()=>i});var a=function(e,t,n){var a=e;if(t||n){var i=[];t&&i.push(t),n&&i.push(n),a=i.join("/")}return a},i=function(e,t){return!t||e.startsWith(t)?e:t.endsWith("/")||e.startsWith("/")?[t,e].join(""):[t,e].join("/")}},93597:(e,t,n)=>{"use strict";n.d(t,{$c:()=>E,Bi:()=>u,Dk:()=>f,EC:()=>g,EV:()=>h,H1:()=>s,Kz:()=>b,L0:()=>p,QY:()=>v,Sj:()=>y,dj:()=>m,dt:()=>d});var a=n(15861),i=n(29439),o=n(64687),r=n.n(o),l=n(66702),c=n(93454),s=function(e){var t={name:e};return c.instance.post("".concat(l.Ds,"/images/checkImageName"),t)},u=function(e){var t=e.Id,n=e.name,a=e.version,o=e.description,r=e.release,s=e.architecture,u=e.username,d=e.credentials,m=e.imageType,p=e["selected-packages"],v=e["third-party-repositories"],g=e["custom-packages"],f=m||[],h=(0,i.Z)(f,1)[0];m.length>1&&(h="rhel-edge-installer");var b={name:n,version:a,description:o,distribution:r,imageType:h,packages:null==p?void 0:p.map((function(e){return{name:e.name}})),outputTypes:m,commit:{arch:s},installer:{username:u,sshkey:d},thirdPartyRepositories:null==v?void 0:v.map((function(e){return{ID:e.id,Name:e.name,URL:e.URL,uuid:e.uuid}})),customPackages:null==g?void 0:g.map((function(e){return{Name:e.name}}))},E="".concat(l.Ds,"/images");return a>1&&(E+="/".concat(t,"/update")),c.instance.post(E,b)},d=function(e){var t=e.id,n=e.q,a=void 0===n?{limit:10,offset:0,sort_by:"-created_at"}:n,i=(0,l.Vs)(a);return c.instance.get("".concat(l.Ds,"/image-sets/").concat(t,"?").concat(i))},m=function(e){var t=e.imageSetID,n=e.query,a=void 0===n?{limit:20,offset:0,sort_by:"-created_at"}:n,i=(0,l.Vs)(a);return c.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t,"/versions?").concat(i))},p=function(e){var t=e.id;return c.instance.get("".concat(l.Ds,"/image-sets/view/").concat(t))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0,sort_by:"-created_at"},t=(0,l.Vs)(e);return c.instance.get("".concat(l.Ds,"/image-sets?").concat(t))},g=function(e){return c.instance.get("".concat(l.Ds,"/images/").concat(e,"/status"))},f=function(e){return c.instance.get("".concat(l.Ds,"/updates/device/").concat(e,"/image"))},h=function(){var e=(0,a.Z)(r().mark((function e(t,n,a){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new URLSearchParams({distribution:t,architecture:n,search:a}),e.abrupt("return",(0,c.instance)("".concat(l.DO,"/packages?").concat(i.toString())));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),b=function(e){var t=e.id;return c.instance.get("".concat(l.Ds,"/images/").concat(t,"/details"))},E=function(e){var t=e.query;""===t&&(t={limit:20,offset:0,sort_by:"-updated_at"});var n=(0,l.Vs)(t);return c.instance.get("".concat(l.Ds,"/image-sets/view?").concat(n))},y=function(e,t){return c.instance.post("".concat(l.$J,"/rpms/names"),{urls:e,search:t})}},66702:(e,t,n)=>{"use strict";n.d(t,{$J:()=>r,DO:()=>i,Ds:()=>o,Vs:()=>l});var a=n(71002),i="/api/image-builder/v1",o="/api/edge/v1",r="/api/content-sources/v1",l=function(e){return void 0===e?"":Object.keys(e).reduce((function(t,n){var i=void 0;return"object"===(0,a.Z)(e[n])&&"number"==typeof e[n].length&&e[n].length>0&&(i=e[n].reduce((function(e,t){return""===e?"".concat(n,"=").concat(t):"".concat(e,"&").concat(n,"=").concat(t)}),"")),["string","number"].includes((0,a.Z)(e[n]))&&""!==e[n]&&(i="".concat(n,"=").concat(e[n])),void 0===i?t:""===t?"".concat(i):"".concat(t,"&").concat(i)}),"")}},35681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,u:()=>p});var a=n(92950),i=n.n(a),o=n(45697),r=n.n(o),l=n(69174),c=n(75824),s=n(79851),u=n(34512),d=n(98309),m={booting:{text:"Booting",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},building:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},created:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},upToDate:{text:"Up to date",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},success:{text:"Ready",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},passed:{text:"Passed",Icon:d.iQ.checkCircle,color:d.OE.green,labelColor:"green"},updateAvailable:{text:"Update available",Icon:d.iQ.exclamationTriangle,color:d.OE.yellow,labelColor:"orange"},updating:{text:"Updating",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},error:{text:"Error",Icon:d.iQ.timesCircle,color:d.OE.red,labelColor:"red"},default:{text:"Unknown",Icon:d.iQ.unknown},interrupted:{text:"Image build in progress",Icon:d.iQ.inProgress,color:d.OE.blue,labelColor:"blue"},unresponsive:{text:"Unresponsive",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"},errorWithExclamationCircle:{text:"Error",Icon:d.iQ.exclamationCircle,color:d.OE.red,labelColor:"red"}},p=function(e,t,n){return"ERROR"===n?"error":"UNRESPONSIVE"===n?"unresponsive":"UPDATING"===e?"updating":t?"updateAvailable":"upToDate"},v=function(e){var t=e.id,n=e.type,a=e.isLabel,o=void 0!==a&&a,r=e.toolTipContent,d=void 0===r?"":r,p=e.className,v=void 0===p?"":p,g=e.isLink,f=Object.prototype.hasOwnProperty.call(m,n)?m[n]:m.default,h=f.text,b=f.Icon,E=f.color,y=f.labelColor;return i().createElement(i().Fragment,null,o?i().createElement(l._,{id:t,color:y,icon:i().createElement(b,null),className:v},h):i().createElement(s.P,{id:t,style:{color:E},className:v},i().createElement(u.J,{className:"pf-u-mr-sm"},d?i().createElement(c.u,{content:"blargh"},i().createElement(b,null)):i().createElement(b,null)),i().createElement(u.J,null,i().createElement("p",{style:g?{textDecoration:" grey dotted underline",cursor:"pointer"}:{}},h))))};const g=v;v.propTypes={id:r().string,type:r().string,isLabel:r().bool,toolTipContent:r().string,className:r().string,isLink:r().bool},v.defaultProps={id:"status"}},96094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(4942),i=n(15861),o=n(29439),r=n(64687),l=n.n(r),c=n(83215),s=n(92950),u=n(77760);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=function(e){var t,n=e.api,a=e.id,r=void 0===a?null:a,d=e.statusMessages,p=e.tableReload,v=void 0!==p&&p,g=(0,u.useDispatch)(),f=(0,s.useState)([]),h=(0,o.Z)(f,2),b=h[0],E=h[1],y=(0,s.useState)(!0),P=(0,o.Z)(y,2),I=P[0],k=P[1],S=(0,s.useState)(!1),D=(0,o.Z)(S,2),O=D[0],w=D[1],N=null===(t=d)||void 0===t?void 0:t.onSuccess;d||(d={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var x=function(){var e=(0,i.Z)(l().mark((function e(){var t,a,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",k(!0),e.prev=2,e.next=5,n({id:r,query:t});case 5:a=e.sent,E(a),N&&g(m({},(0,c.wN)(m({variant:"success"},d.onSuccess)))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),w(!0),g(m({},(0,c.wN)(m({variant:"danger"},d.onError))));case 14:return e.prev=14,k(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){v||x()}),[]),[{data:b,isLoading:I,hasError:O},x]}},58392:()=>{},37625:()=>{},21064:()=>{},82014:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/364.02218db59751d1de0758e60f49d2cbbf.js.map