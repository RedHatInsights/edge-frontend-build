"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[940],{68940:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(4942),l=n(15861),i=n(87757),r=n.n(i),o=n(93264),c=n.n(o),d=n(68774),s=n(68340),u=n(69957),p=n(45697),v=n.n(p),m=n(66702),f=n(82041),g=n(83215),b=n(60722),h=n(96354),y=n(60485),D=n(78140),O=n(25834),w=function(e){var t=e.reviewObject,n=e.key;return c().createElement(d.D,null,c().createElement(y.D,{headingLevel:"h3"},c().createElement(s.x,{component:"b"},t.title)),c().createElement(O.G,{component:O.F.dl},t.rows.map((function(e){return c().createElement(o.Fragment,{key:e.title+n},c().createElement(D.T,{component:D.v.dt},e.title),c().createElement(D.T,{component:D.v.dd},e.value))}))))};w.propTypes={reviewObject:v().object,key:v().string};const E=w;var k=n(62410),j=n(68920);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t,n,a,i,o,p,v,y,D=e.updateModal,O=e.setUpdateModal,w=e.refreshTable,P=(0,f.useDispatch)(),T=null==D?void 0:D.imageData,U=D.deviceData.length>1,_=U?D.deviceData.map((function(e){return e.id})):null==D||null===(t=D.deviceData[0])||void 0===t?void 0:t.id,N=U?D.deviceData.map((function(e){return e.display_name})):null==D||null===(n=D.deviceData[0])||void 0===n?void 0:n.display_name,Z=function(){var e=(0,l.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.g5)({DeviceUUID:_,CommitId:null==T||null===(t=T.Image)||void 0===t?void 0:t.CommitID});case 3:P(I({},(0,g.wN)({variant:"info",title:"Updating device",description:U?" ".concat(N.length," devices were added to the queue."):" ".concat(N," was added to the queue.")}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),P(I({},(0,g.wN)({variant:"danger",title:"Updating a device was unsuccessful",description:"Response: ".concat(e.t0.statusText)})));case 9:x(),w&&w();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),x=function(){O((function(e){return I(I({},e),{},{isOpen:!1})}))},A={title:"Update to version ".concat(null==T?void 0:T.Image.Version),rows:[{title:"Image Name",value:null==T?void 0:T.Image.Name},{title:"Version",value:null==T?void 0:T.Image.Version},{title:"Created",value:c().createElement(k.Z,{date:null==T?void 0:T.Image.CreatedAt})},{title:"Release",value:j.aN[null==T?void 0:T.Image.Distribution]}]},R={title:"Changes from version ".concat((null==T?void 0:T.Image.Version)-1),rows:[{title:"Added",value:(null==T||null===(a=T.PackageDiff)||void 0===a||null===(i=a.Added)||void 0===i?void 0:i.length)||0},{title:"Removed",value:(null==T||null===(o=T.PackageDiff)||void 0===o||null===(p=o.Removed)||void 0===p?void 0:p.length)||0},{title:"Updated",value:(null==T||null===(v=T.PackageDiff)||void 0===v||null===(y=v.Updated)||void 0===y?void 0:y.length)||0}]},C={fields:[{component:h.Z.PLAIN_TEXT,name:"description",label:c().createElement(d.D,null,c().createElement(s.x,null,"Update"," ",c().createElement("span",{className:"pf-u-font-weight-bold pf-u-font-size-md"},U?"".concat(N.length," systems"):N)," ","to latest version of the image linked to it."))},{component:h.Z.PLAIN_TEXT,name:"update-details",label:E({reviewObject:A,key:"update-details"})},{component:h.Z.PLAIN_TEXT,name:"package-details",label:E({reviewObject:R,key:"package-details"})},{component:h.Z.PLAIN_TEXT,name:"warning-text",label:c().createElement(d.D,{className:"pf-u-pt-md"},c().createElement(s.x,{style:{color:"var(--pf-global--palette--gold-500)"},component:"small"},c().createElement(u.ZP,null)," After the update is installed, the device will apply the changes."))}]};return c().createElement(b.Z,{size:"medium",title:"Update system".concat(U?"s":""," to latest image version"),isOpen:D.isOpen,openModal:function(){return O((function(e){return I(I({},e),{},{isOpen:!1})}))},submitLabel:"Update Device",schema:C,onSubmit:Z,reloadData:w})};T.propTypes={refreshTable:v().func,updateModal:v().shape({isOpen:v().bool.isRequired,deviceData:v().array.isRequired,imageData:v().object}).isRequired,setUpdateModal:v().func.isRequired};const U=T}}]);
//# sourceMappingURL=../sourcemaps/940.d4811b030e30effefa996988105e6eb4.js.map