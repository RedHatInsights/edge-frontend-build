(self.webpackChunkedge_frontend=self.webpackChunkedge_frontend||[]).push([[7347],{5436:(e,t,n)=>{"use strict";n.d(t,{Jd:()=>r,dy:()=>s,rf:()=>c});var r,a=n(70655),i=n(92950),l=n(13302),o=n(38296);!function(e){e.default="default",e.light200="light-200"}(r||(r={}));const c=i.createContext({isExpanded:!1,isStatic:!1,onExpand:()=>{},position:"right",drawerRef:null,drawerContentRef:null,isInline:!1}),s=e=>{var{className:t="",children:n,isExpanded:r=!1,isInline:s=!1,isStatic:d=!1,position:u="right",onExpand:m=(()=>{})}=e,p=(0,a.__rest)(e,["className","children","isExpanded","isInline","isStatic","position","onExpand"]);const f=i.useRef(),v=i.useRef();return i.createElement(c.Provider,{value:{isExpanded:r,isStatic:d,onExpand:m,position:u,drawerRef:f,drawerContentRef:v,isInline:s}},i.createElement("div",Object.assign({className:(0,o.i)(l.Z.drawer,r&&l.Z.modifiers.expanded,s&&l.Z.modifiers.inline,d&&l.Z.modifiers.static,"left"===u&&l.Z.modifiers.panelLeft,"bottom"===u&&l.Z.modifiers.panelBottom,t),ref:f},p),n))};s.displayName="Drawer"},34241:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});var r=n(70655),a=n(92950),i=n(13302),l=n(38296);const o=e=>{var{className:t="",children:n}=e,o=(0,r.__rest)(e,["className","children"]);return a.createElement("div",Object.assign({className:(0,l.i)(i.Z.drawerMain,t)},o),n)};o.displayName="DrawerMain";var c=n(5436);const s=e=>{var{className:t="",children:n,panelContent:s,colorVariant:d=c.Jd.default}=e,u=(0,r.__rest)(e,["className","children","panelContent","colorVariant"]);const{drawerContentRef:m}=a.useContext(c.rf);return a.createElement(o,null,a.createElement("div",Object.assign({className:(0,l.i)(i.Z.drawerContent,d===c.Jd.light200&&i.Z.modifiers.light_200,t),ref:m},u),n),s)};s.displayName="DrawerContent"},68774:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(70655),a=n(92950),i=n(62873),l=n(38296);const o=e=>{var{children:t=null,className:n="",isVisited:o=!1}=e,c=(0,r.__rest)(e,["children","className","isVisited"]);return a.createElement("div",Object.assign({},c,{className:(0,l.i)(i.Z.content,o&&i.Z.modifiers.visited,n)}),t)};o.displayName="TextContent"},13302:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(80897);const r={drawer:"pf-c-drawer",drawerActions:"pf-c-drawer__actions",drawerBody:"pf-c-drawer__body",drawerClose:"pf-c-drawer__close",drawerContent:"pf-c-drawer__content",drawerHead:"pf-c-drawer__head",drawerMain:"pf-c-drawer__main",drawerPanel:"pf-c-drawer__panel",drawerPanelMain:"pf-c-drawer__panel-main",drawerSection:"pf-c-drawer__section",drawerSplitter:"pf-c-drawer__splitter",drawerSplitterHandle:"pf-c-drawer__splitter-handle",modifiers:{panelBottom:"pf-m-panel-bottom",inline:"pf-m-inline",noBorder:"pf-m-no-border",resizable:"pf-m-resizable",static:"pf-m-static",panelLeft:"pf-m-panel-left",expanded:"pf-m-expanded",resizing:"pf-m-resizing",noBackground:"pf-m-no-background",light_200:"pf-m-light-200",noPadding:"pf-m-no-padding",padding:"pf-m-padding",vertical:"pf-m-vertical",width_25:"pf-m-width-25",width_33:"pf-m-width-33",width_50:"pf-m-width-50",width_66:"pf-m-width-66",width_75:"pf-m-width-75",width_100:"pf-m-width-100",width_25OnLg:"pf-m-width-25-on-lg",width_33OnLg:"pf-m-width-33-on-lg",width_50OnLg:"pf-m-width-50-on-lg",width_66OnLg:"pf-m-width-66-on-lg",width_75OnLg:"pf-m-width-75-on-lg",width_100OnLg:"pf-m-width-100-on-lg",width_25OnXl:"pf-m-width-25-on-xl",width_33OnXl:"pf-m-width-33-on-xl",width_50OnXl:"pf-m-width-50-on-xl",width_66OnXl:"pf-m-width-66-on-xl",width_75OnXl:"pf-m-width-75-on-xl",width_100OnXl:"pf-m-width-100-on-xl",width_25On_2xl:"pf-m-width-25-on-2xl",width_33On_2xl:"pf-m-width-33-on-2xl",width_50On_2xl:"pf-m-width-50-on-2xl",width_66On_2xl:"pf-m-width-66-on-2xl",width_75On_2xl:"pf-m-width-75-on-2xl",width_100On_2xl:"pf-m-width-100-on-2xl",inlineOnLg:"pf-m-inline-on-lg",staticOnLg:"pf-m-static-on-lg",inlineOnXl:"pf-m-inline-on-xl",staticOnXl:"pf-m-static-on-xl",inlineOn_2xl:"pf-m-inline-on-2xl",staticOn_2xl:"pf-m-static-on-2xl"},pageMain:"pf-c-page__main",themeDark:"pf-theme-dark"}},62410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(85893),a=n(92950),i=n.n(a),l=n(48335),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},c=36e5,s=24*c,d=30*s,u=365*s,m=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},p=[{rightBound:1/0,description:function(e){return m(Math.round(e/u),"year")}},{rightBound:u,description:function(e){return m(Math.round(e/d),"month")}},{rightBound:d,description:function(e){return m(Math.round(e/s),"day")}},{rightBound:s,description:function(e){return m(Math.round(e/c),"hour")}},{rightBound:c,description:function(e){return m(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},v=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return p.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},h=function(e,t,n){return{exact:function(t){return v(e)(t)},onlyDate:function(t){return v(e)(t)},relative:function(a){return function(e,t,n,a){return void 0===a&&(a=""),(0,r.jsx)(l.Tooltip,o({},n,{content:(0,r.jsxs)("div",{children:[a,e]})},{children:t}))}(v("exact")(a),(0,r.jsx)("span",{children:v(e)(a)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const g=function(e){var t=e.date,n=e.type,a=void 0===n?"relative":n,l=e.extraTitle,o=e.tooltipProps,c=t instanceof Date?t:new Date(t),s=null==t||"Invalid Date"===c.toString()?"invalid":a;return(0,r.jsx)(i().Fragment,{children:h(s,o,l)(c)})}},39173:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(85893),a=n(94184),i=n.n(a),l=n(48335),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)};const c=function(e){var t=e.className,n=e.title,a=i()(t);return(0,r.jsx)(l.Title,o({headingLevel:"h1",size:"2xl",className:a,"widget-type":"InsightsPageHeaderTitle"},{children:n}))}},68366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});var r=n(29439),a=n(92950),i=n.n(a),l=n(45697),o=n.n(l),c=n(29390),s=n(64029),d=n(32835),u=n(52643),m=n(32203),p=n(62394),f=n(16488),v=n(32045),h=n(37619),g=n(68340),w=n(68774),E=n(38779),_=n(15861),y=n(64687),x=n.n(y),b=n(73448),D=n(34766),O=n(47173),k=n(15627),N=n(8027),I=n(86706),T=n(96620),S=n(32349),L=n(9192),Z=[{label:"Version",type:"text"},{label:"Release",type:"text"},{label:"Additional packages",type:"text"},{label:"All packages",type:"text"},{label:"Systems running",type:"text"},{label:"Created",type:"text"}],P=[{title:"Version",cellTransforms:[(0,D.headerCol)("selectable-radio")]},{title:"Release"},{title:"Additional packages"},{title:"All packages"},{title:"Systems running"},{title:"Created"}],C=function(e){var t=e.data,n=e.isLoading,l=e.hasError,o=(0,a.useState)(null),c=(0,r.Z)(o,2),s=c[0],d=c[1],u=(0,a.useState)(null),m=(0,r.Z)(u,2),p=m[0],f=m[1],v=(0,a.useState)(!1),h=(0,r.Z)(v,2),g=h[0],w=h[1],E=(0,I.I0)(),y=(0,T.useHistory)(),D=(0,T.useLocation)(),C=D.pathname,j=D.search,U=(0,T.useRouteMatch)(),R=null==t?void 0:t.map((function(e){var t=e.version;return{cells:[t,e.release,e.additionalPackages,e.allPackages,e.systemsRunning,e.created],commitID:e.commitID,deviceUUID:e.deviceUUID,deviceName:e.deviceName,selected:s===t}})),M=function(){var e=(0,_.Z)(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),t={onInfo:{title:"Updating system",description:" ".concat(p.deviceName," was added to the queue.")},onError:{title:"Error",description:"An error occurred making the request"}},e.next=4,(0,S.Z)(E,(function(){return(0,N.EQ)({CommitID:p.commitID,DevicesUUID:[p.deviceUUID]})}),t);case 4:B(),w(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=L._.inventory;U.path===L._.inventoryDetailUpdate&&(e=j.includes("from_details=true")?L._.inventoryDetail:L._.inventory),U.path===L._.fleetManagementSystemDetailUpdate&&(e=j.includes("from_details=true")?L._.fleetManagementSystemDetail:L._.fleetManagementDetail);var t=e.split("/").length,n=C.split("/").slice(0,t).join("/");y.push({pathname:n})};return i().createElement(i().Fragment,null,i().createElement(b.Z,{className:"pf-u-mt-sm",apiFilterSort:!0,isUseApi:!1,loadTableData:function(){return R},filters:Z,tableData:{count:null==t?void 0:t.length,isLoading:n,hasError:l},columnNames:P,rows:R,defaultSort:{index:0,direction:"desc"},hasRadio:!0,setRadioSelection:function(e){d(e.cells[0]),f(e)},isFooterFixed:!0}),i().createElement("div",{style:{background:"white",left:"200px",position:"fixed",height:"90px",width:"100%",bottom:"0px",paddingLeft:"80px",paddingBottom:"0px"}},i().createElement(k.i,{style:{paddingBottom:"25px",width:"100%",paddingLeft:0}}),i().createElement(O.zx,{style:{left:"60px"},key:"confirm",variant:"primary",isDisabled:!s||g,onClick:function(){return M()}},"Update system"),i().createElement(O.zx,{style:{left:"70px"},key:"cancel",variant:"link",onClick:B},"Cancel")))};C.propTypes={data:o().array,isLoading:o().bool,hasError:o().bool};const j=C;var U=n(98309),R=n(62410),M=n(14748),B=n(80123),A=n(39173),V=n(96094),X=function(e){var t=e.image,n=[{version:null==t?void 0:t.version,release:null==t?void 0:t.release,additionalPackages:null==t?void 0:t.additionalPackages,allPackages:null==t?void 0:t.allPackages,systemsRunning:null==t?void 0:t.systemsRunning,created:null==t?void 0:t.created}],r="Version",a="Release",l="Additional packages",o="All packages",c="Systems running",s="Created";return i().createElement(i().Fragment,null,i().createElement(w.D,null,i().createElement(E.D,{headingLevel:"h2"},i().createElement(g.x,null,"Current version"))),i().createElement(D.TableComposable,{"aria-label":"Current version table",variant:"compact",borders:!1},i().createElement(D.Thead,null,i().createElement(D.Tr,{style:{borderBottomStyle:"hidden"}},i().createElement(D.Th,{style:{width:"3%"}}),i().createElement(D.Th,null,r),i().createElement(D.Th,null,a),i().createElement(D.Th,null,l),i().createElement(D.Th,null,o),i().createElement(D.Th,null,c),i().createElement(D.Th,null,s))),i().createElement(D.Tbody,null,n.map((function(e){return i().createElement(D.Tr,{key:e.version},i().createElement(D.Td,null),i().createElement(D.Td,{dataLabel:r},e.version),i().createElement(D.Td,{dataLabel:a},e.release),i().createElement(D.Td,{dataLabel:l},e.additionalPackages),i().createElement(D.Td,{dataLabel:o},e.allPackages),i().createElement(D.Td,{dataLabel:c},e.systemsRunning),i().createElement(D.Td,{dataLabel:s},e.created))})))))};X.propTypes={image:o().object};var z=function(e){var t,n,r,a=e.data,l=null==a?void 0:a.Device,o=function(e){var t;return{version:null==e?void 0:e.Version,release:U.aN[null==e?void 0:e.Distribution],additionalPackages:(null==e||null===(t=e.Packages)||void 0===t?void 0:t.length)||0,allPackages:null==e?void 0:e.TotalPackages,systemsRunning:null==e?void 0:e.SystemsRunning,created:i().createElement("span",null,i().createElement(R.Z,{type:"relative",date:null==e?void 0:e.CreatedAt})),commitID:null==e?void 0:e.CommitID,deviceUUID:null==l?void 0:l.UUID,deviceName:null==l?void 0:l.DeviceName}},s=o(null==a||null===(t=a.ImageInfo)||void 0===t?void 0:t.Image),d=null==a||null===(n=a.ImageInfo)||void 0===n||null===(r=n.UpdatesAvailable)||void 0===r?void 0:r.map((function(e){return o(null==e?void 0:e.Image)}));return l?i().createElement(f.T,null,i().createElement(v.NP,{isWidthLimited:!0},i().createElement(m.Z,null,i().createElement(p.e,null,i().createElement(X,{image:s}),i().createElement(w.D,null,i().createElement(E.D,{headingLevel:"h2"},i().createElement(g.x,{className:"pf-u-mt-md"},"Select version to update to"))),i().createElement(j,{data:d}))))):i().createElement(c.Y,null,i().createElement(u.b,null,i().createElement(h.$,{isSVG:!0,diameter:"100px"})))};z.propTypes={data:o().object};const F=function(){var e,t,n,a,l=(0,T.useParams)(),o=l.deviceId,m=l.groupId,p=(0,V.Z)({api:function(){return(0,N._v)(o)}}),f=(0,r.Z)(p,1)[0],v=f.data,E=f.isLoading,_=null==v?void 0:v.Device,y=m?null==_||null===(e=_.DevicesGroups)||void 0===e||null===(t=e.find((function(e){return e.ID.toString()===m})))||void 0===t?void 0:t.Name:null;return E?i().createElement(c.Y,null,i().createElement(u.b,null,i().createElement(h.$,{isSVG:!0,diameter:"100px"}))):i().createElement(i().Fragment,null,i().createElement(B.Z,{className:"pf-m-light"},y?i().createElement(s.a,{ouiaId:"groups-list"},i().createElement(d.g,null,i().createElement(T.Link,{to:L._.fleetManagement},"Groups")),i().createElement(d.g,null,i().createElement(T.Link,{to:"".concat(L._.fleetManagement,"/").concat(m)},y)),i().createElement(d.g,null,i().createElement(T.Link,{to:"".concat(L._.fleetManagement,"/").concat(m,"/systems/").concat(o,"/")},null==_?void 0:_.DeviceName)),i().createElement(d.g,null,"Update")):i().createElement(s.a,{ouiaId:"systems-list"},i().createElement(d.g,null,i().createElement(T.Link,{to:L._.inventory},"Systems")),i().createElement(d.g,null,i().createElement(T.Link,{to:"".concat(L._.inventory,"/").concat(o,"/")},null==_?void 0:_.DeviceName)),i().createElement(d.g,null,"Update")),i().createElement(A.Z,{title:"Update"}),i().createElement(w.D,{className:"pf-u-mt-md"},i().createElement(g.x,null,"Update ",i().createElement("strong",null,null==_?void 0:_.DeviceName)," to a newer version of ",i().createElement("strong",null,null==v||null===(n=v.ImageInfo)||void 0===n||null===(a=n.Image)||void 0===a?void 0:a.Name)," by selecting a new version from the table below."))),i().createElement(M.Z,{className:"edge-devices"},i().createElement(z,{data:v})))}},8027:(e,t,n)=>{"use strict";n.d(t,{$v:()=>c,EQ:()=>d,_v:()=>s});var r=n(15861),a=n(64687),i=n.n(a),l=n(66702),o=n(93454),c=function(e){var t=e.query,n=(0,l.Vs)(t);return o.instance.get("".concat(l.Ds,"/devices/devicesview?").concat(n))},s=function(e){return o.instance.get("".concat(l.Ds,"/devices/").concat(e))},d=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.instance.post("".concat(l.Ds,"/updates"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},32349:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(4942),a=n(15861),i=n(64687),l=n.n(i),o=n(83215);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=function(e,t,n){var r,i,c=null===(r=n)||void 0===r?void 0:r.onSuccess,d=null===(i=n)||void 0===i?void 0:i.onInfo;n||(n={onSuccess:{title:"Success",description:"The request has been made successfully"},onError:{title:"Error",description:"An error occurred making the request"}});var u=function(){var r=(0,a.Z)(l().mark((function r(){var a;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t();case 3:return a=r.sent,d&&e(s({},(0,o.wN)(s({variant:"info"},n.onInfo)))),c&&e(s({},(0,o.wN)(s({variant:"success"},n.onSuccess)))),r.abrupt("return",a);case 9:return r.prev=9,r.t0=r.catch(0),e(s({},(0,o.wN)(s(s({variant:"danger"},n.onError),{},{description:null!==r.t0&&void 0!==r.t0&&r.t0.Title?"".concat(n.onError.description,": ").concat(r.t0.Title):n.onError.description})))),r.abrupt("return",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(){return r.apply(this,arguments)}}();return u()}},58392:()=>{},80598:()=>{},80897:()=>{},92084:()=>{}}]);
//# sourceMappingURL=../sourcemaps/UpdateSystem.9491761ed3906de32986e60a9a11223d.js.map