{"version":3,"sources":["webpack://insights-frontend-starter-app/./src/Routes/DeviceDetail/DeviceDetail.js","webpack://insights-frontend-starter-app/./src/Routes/GroupsDetail/GroupsDetailInfo.js","webpack://insights-frontend-starter-app/./src/Routes/GroupsDetail/addDeviceSchema.js","webpack://insights-frontend-starter-app/./src/Routes/GroupsDetail/GroupsDetail.js"],"names":["useParams","inventoryId","uuid","displayName","useSelector","entityDetails","entity","display_name","groupName","groupsDetailReducer","name","useEffect","insights","chrome","hideGlobalFilter","appAction","appObjectId","hideInvLink","showTags","onLoad","mergeWithDetail","getRegistry","register","ouiaId","Link","to","size","SkeletonSize","isActive","className","fallback","hideBack","hideInvDrawer","gutter","span","GroupsInfo","dispatch","useDispatch","isDevicesInfoLoading","groupDevicesInfoReducer","isLoading","devicesInfo","loadGroupDevicesInfo","Grid","hasGutter","GridItem","Card","CardHeader","Title","headingLevel","CardBody","TextContent","TextList","component","TextListVariants","TextListItem","T","TextListItemVariants","Text","TextVariants","total","Skeleton","newDevices","offlineDevices","deliveringDevices","Bullseye","propTypes","PropTypes","fields","INVENTORY_TABLE","InventoryForm","lazy","defaultFilters","label","value","version","status","useState","isAddDeviceOpen","setIsAddDeviceOpen","activeFilters","setActiveFilters","history","useHistory","inventory","useRef","items","devices","map","id","shallowEqual","loadGroupsDetail","Fragment","PageHeader","Breadcrumb","BreadcrumbItem","routes","Main","Stack","StackItem","GroupsDetailInfo","isFilled","Inventory","ref","length","page","tableProps","canSelectAll","isLoaded","onRefresh","options","callback","current","onRefreshData","filterConfig","filterValues","key","onChange","event","type","statusMapper","item","charAt","toUpperCase","slice","activeFiltersConfig","isEmptyFilters","filters","constructActiveFilters","onDelete","itemsToRemove","isAll","onDeleteFilter","onRowClick","_e","push","mergeWithEntities","INVENTORY_ACTION_TYPES","systemsList","Button","onClick","Suspense","selectedSystems","schema","isOpened","title","onAction","isSubmit","values","updateGroup","systemIDs","selected"],"mappings":"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","file":"js/GroupsDetailPage.39e037649c7dac202fc9.js","sourcesContent":["import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Grid, GridItem } from '@patternfly/react-core';\nimport { Breadcrumb, BreadcrumbItem } from '@patternfly/react-core';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/esm/Registry';\nimport {\n  Skeleton,\n  SkeletonSize,\n  PageHeader,\n  Main,\n} from '@redhat-cloud-services/frontend-components';\nimport {\n  InventoryDetailHead,\n  AppInfo,\n  DetailWrapper,\n} from '@redhat-cloud-services/frontend-components/components/esm/Inventory';\nimport { useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nconst DeviceDetail = () => {\n  const { inventoryId, uuid } = useParams();\n  const displayName = useSelector(\n    ({ entityDetails }) => entityDetails?.entity?.display_name\n  );\n  const groupName = useSelector(\n    ({ groupsDetailReducer }) => groupsDetailReducer?.name\n  );\n\n  useEffect(() => {\n    insights.chrome?.hideGlobalFilter?.(true);\n    insights.chrome.appAction('system-detail');\n  }, []);\n\n  useEffect(() => {\n    insights?.chrome?.appObjectId?.(inventoryId);\n  }, [inventoryId]);\n\n  return (\n    <DetailWrapper\n      hideInvLink\n      showTags\n      onLoad={({ mergeWithDetail }) => {\n        getRegistry().register(mergeWithDetail());\n      }}\n    >\n      <PageHeader>\n        <Breadcrumb ouiaId=\"systems-list\">\n          <BreadcrumbItem>\n            <Link to={`/groups`}>Groups</Link>\n          </BreadcrumbItem>\n          <BreadcrumbItem>\n            {groupName ? (\n              <Link to={`/groups/${uuid}`}>{groupName}</Link>\n            ) : (\n              <Skeleton size={SkeletonSize.xs} />\n            )}\n          </BreadcrumbItem>\n          <BreadcrumbItem isActive>\n            <div className=\"ins-c-inventory__detail--breadcrumb-name\">\n              {displayName || <Skeleton size={SkeletonSize.xs} />}\n            </div>\n          </BreadcrumbItem>\n        </Breadcrumb>\n        <InventoryDetailHead\n          fallback=\"\"\n          hideBack\n          showTags\n          hideInvLink\n          hideInvDrawer\n        />\n      </PageHeader>\n      <Main>\n        <Grid gutter=\"md\">\n          <GridItem span={12}>\n            <AppInfo showTags fallback=\"\" />\n          </GridItem>\n        </Grid>\n      </Main>\n    </DetailWrapper>\n  );\n};\n\nexport default DeviceDetail;\n","import React, { useEffect } from 'react';\nimport {\n  Grid,\n  GridItem,\n  Card,\n  CardBody,\n  CardHeader,\n  Title,\n  Bullseye,\n  TextContent,\n  Text,\n  TextVariants,\n  TextListItem,\n  Skeleton,\n  TextListItemVariants,\n  TextList,\n  TextListVariants,\n} from '@patternfly/react-core';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { loadGroupDevicesInfo } from '../../store/actions';\n\nconst GroupsInfo = ({ uuid }) => {\n  const dispatch = useDispatch();\n  const isDevicesInfoLoading = useSelector(\n    ({ groupDevicesInfoReducer }) => groupDevicesInfoReducer?.isLoading\n  );\n  const devicesInfo = useSelector(\n    ({ groupDevicesInfoReducer }) => groupDevicesInfoReducer?.devicesInfo\n  );\n  useEffect(() => {\n    dispatch(loadGroupDevicesInfo());\n  }, []);\n  return (\n    <Grid hasGutter>\n      <GridItem span={3}>\n        <Card>\n          <CardHeader>\n            <Title headingLevel=\"h3\">Health threshold</Title>\n          </CardHeader>\n          <CardBody></CardBody>\n        </Card>\n      </GridItem>\n      <GridItem span={3}>\n        <Card>\n          <CardHeader>\n            <Title headingLevel=\"h3\">Devices info</Title>\n          </CardHeader>\n          <CardBody>\n            <TextContent>\n              <TextList component={TextListVariants.dl}>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      {devicesInfo?.total}\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  <Text component={TextVariants.h3}>Total devices</Text>\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      <Link to={`/groups/${uuid}`}>\n                        {devicesInfo?.newDevices}\n                      </Link>\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  New devices added\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      <Link to={`/groups/${uuid}`}>\n                        {devicesInfo?.offlineDevices}\n                      </Link>\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  Devices offline\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dt}>\n                  {isDevicesInfoLoading === false ? (\n                    <Text component={TextVariants.h1}>\n                      <Link to={`/groups/${uuid}`}>\n                        {devicesInfo?.deliveringDevices}\n                      </Link>\n                    </Text>\n                  ) : (\n                    <Skeleton />\n                  )}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  Devices on the way\n                </TextListItem>\n              </TextList>\n            </TextContent>\n          </CardBody>\n        </Card>\n      </GridItem>\n      <GridItem span={6}>\n        <Card className=\"edge-groups--detail__complex\">\n          <CardHeader>\n            <Grid>\n              <GridItem span={6}>\n                <Title headingLevel=\"h3\">Canary parameters</Title>\n              </GridItem>\n              <GridItem span={6}>\n                <Title headingLevel=\"h3\">Last Canaries</Title>\n              </GridItem>\n            </Grid>\n          </CardHeader>\n          <CardBody>\n            <Grid hasGutter>\n              <GridItem span={6}>\n                <Title headingLevel=\"h3\">\n                  <Bullseye>\n                    <TextContent>\n                      <Text component={TextVariants.h1}>\n                        <Bullseye>10% (89)</Bullseye>\n                      </Text>\n                      <Text component={TextVariants.h4}>\n                        <Bullseye>Of systems tested</Bullseye>\n                      </Text>\n                    </TextContent>\n                  </Bullseye>\n                </Title>\n              </GridItem>\n              <GridItem span={6}></GridItem>\n            </Grid>\n          </CardBody>\n        </Card>\n      </GridItem>\n    </Grid>\n  );\n};\n\nGroupsInfo.propTypes = {\n  uuid: PropTypes.string,\n};\n\nexport default GroupsInfo;\n","import { INVENTORY_TABLE } from '../../components/form';\n\nexport default {\n  fields: [\n    {\n      component: INVENTORY_TABLE,\n      name: 'select-system',\n    },\n  ],\n};\n","import React, {\n  Fragment,\n  useEffect,\n  useRef,\n  Suspense,\n  lazy,\n  useState,\n} from 'react';\nimport { useParams, Link, useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { PageHeader, Main } from '@redhat-cloud-services/frontend-components';\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  Skeleton,\n  Stack,\n  StackItem,\n  Button,\n} from '@patternfly/react-core';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/esm/Registry';\nimport { routes } from '../../../package.json';\nimport { loadGroupsDetail } from '../../store/actions';\nimport {\n  groupsDetailReducer,\n  groupDevicesInfoReducer,\n} from '../../store/reducers';\nimport GroupsDetailInfo from './GroupsDetailInfo';\n\nimport { InventoryTable } from '@redhat-cloud-services/frontend-components/components/esm/Inventory';\nimport { systemsList } from '../../store/groupsDetail';\nconst InventoryForm = lazy(() => import('../../components/InventoryForm'));\nimport schema from './addDeviceSchema';\nimport { updateGroup } from '../../api';\nimport {\n  statusMapper,\n  isEmptyFilters,\n  constructActiveFilters,\n  onDeleteFilter,\n} from '../../constants';\n\nconst defaultFilters = {\n  name: {\n    label: 'Name',\n    value: '',\n  },\n  version: {\n    label: 'Version',\n    value: [],\n  },\n  status: {\n    label: 'Status',\n    value: [],\n  },\n};\n\nconst GroupsDetail = () => {\n  const [isAddDeviceOpen, setIsAddDeviceOpen] = useState(false);\n  const [activeFilters, setActiveFilters] = useState(defaultFilters);\n  const history = useHistory();\n  const inventory = useRef(null);\n  const { uuid } = useParams();\n  const dispatch = useDispatch();\n  const groupName = useSelector(\n    ({ groupsDetailReducer }) => groupsDetailReducer?.name || ''\n  );\n  const isLoading = useSelector(\n    ({ groupsDetailReducer }) => groupsDetailReducer?.isLoading\n  );\n\n  const items = useSelector(\n    ({ groupsDetailReducer }) =>\n      groupsDetailReducer?.devices?.map(({ uuid, ...rest }) => ({\n        id: uuid,\n        ...rest,\n      })),\n    shallowEqual\n  );\n  useEffect(() => {\n    const registered = getRegistry().register({\n      groupsDetailReducer,\n      groupDevicesInfoReducer,\n    });\n    dispatch(loadGroupsDetail(uuid));\n    () => registered();\n  }, []);\n\n  const onRefresh = (options, callback) => {\n    if (!callback && inventory && inventory.current) {\n      inventory.current.onRefreshData(options);\n    } else if (callback) {\n      callback(options);\n    }\n  };\n\n  return (\n    <Fragment>\n      <PageHeader>\n        <Breadcrumb>\n          <BreadcrumbItem>\n            <Link to={routes.groups}>Groups</Link>\n          </BreadcrumbItem>\n          <BreadcrumbItem isActive>\n            {isLoading === false ? groupName : <Skeleton />}\n          </BreadcrumbItem>\n        </Breadcrumb>\n      </PageHeader>\n      <Main className=\"edge-groups--detail\">\n        <Stack hasGutter>\n          <StackItem className=\"edge-groups--detail__info\">\n            <GroupsDetailInfo uuid={uuid} />\n          </StackItem>\n          <StackItem isFilled>\n            <InventoryTable\n              ref={inventory}\n              items={items || []}\n              total={items?.length || 0}\n              page={1}\n              tableProps={{\n                canSelectAll: false,\n              }}\n              isLoaded={!isLoading}\n              onRefresh={onRefresh}\n              filterConfig={{\n                items: [\n                  {\n                    label: activeFilters?.name?.label,\n                    filterValues: {\n                      key: 'text-filter',\n                      onChange: (event, value) =>\n                        setActiveFilters(() => ({\n                          ...activeFilters,\n                          name: {\n                            ...(activeFilters?.name || {}),\n                            value,\n                          },\n                        })),\n                      value: activeFilters?.name?.value || '',\n                    },\n                  },\n                  {\n                    label: activeFilters?.version?.label,\n                    type: 'checkbox',\n                    filterValues: {\n                      onChange: (event, value) =>\n                        setActiveFilters(() => ({\n                          ...(activeFilters || {}),\n                          version: {\n                            ...(activeFilters?.version || {}),\n                            value,\n                          },\n                        })),\n                      value: activeFilters?.version?.value || [],\n                      items: [\n                        {\n                          label: 'All versions',\n                          value: 'all',\n                        },\n                      ],\n                    },\n                  },\n                  {\n                    label: activeFilters?.status?.label,\n                    type: 'checkbox',\n                    filterValues: {\n                      onChange: (event, value) =>\n                        setActiveFilters(() => ({\n                          ...(activeFilters || {}),\n                          status: {\n                            ...(activeFilters?.status || {}),\n                            value,\n                          },\n                        })),\n                      items: statusMapper.map((item) => ({\n                        value: item,\n                        label: `${item.charAt(0).toUpperCase()}${item.slice(\n                          1\n                        )}`,\n                      })),\n                      value: activeFilters?.status?.value || [],\n                    },\n                  },\n                ],\n              }}\n              activeFiltersConfig={{\n                ...(isEmptyFilters(activeFilters) && {\n                  filters: constructActiveFilters(activeFilters),\n                }),\n                onDelete: (event, itemsToRemove, isAll) => {\n                  if (isAll) {\n                    setActiveFilters(defaultFilters);\n                  } else {\n                    setActiveFilters(() =>\n                      onDeleteFilter(activeFilters, itemsToRemove)\n                    );\n                  }\n                },\n              }}\n              onRowClick={(_e, id) => history.push(`/groups/${uuid}/${id}`)}\n              onLoad={({ mergeWithEntities, INVENTORY_ACTION_TYPES }) => {\n                getRegistry().register({\n                  ...mergeWithEntities(systemsList(INVENTORY_ACTION_TYPES)),\n                });\n              }}\n            >\n              <Button onClick={() => setIsAddDeviceOpen(true)}>\n                Add device\n              </Button>\n            </InventoryTable>\n          </StackItem>\n        </Stack>\n      </Main>\n      {isAddDeviceOpen && (\n        <Suspense fallback=\"\">\n          <InventoryForm\n            selectedSystems={items}\n            schema={schema}\n            isOpened={isAddDeviceOpen}\n            title=\"Add new device\"\n            onAction={(isSubmit, values) => {\n              if (isSubmit) {\n                (async () => {\n                  await updateGroup({\n                    uuid,\n                    systemIDs: values.selected,\n                  });\n                  dispatch(loadGroupsDetail(uuid));\n                })();\n              }\n              setIsAddDeviceOpen(false);\n            }}\n          />\n        </Suspense>\n      )}\n    </Fragment>\n  );\n};\n\nexport default GroupsDetail;\n"],"sourceRoot":""}